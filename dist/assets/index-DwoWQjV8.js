var KU=Object.defineProperty;var Ck=t=>{throw TypeError(t)};var XU=(t,e,n)=>e in t?KU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var K=(t,e,n)=>XU(t,typeof e!="symbol"?e+"":e,n),R_=(t,e,n)=>e.has(t)||Ck("Cannot "+n);var u=(t,e,n)=>(R_(t,e,"read from private field"),n?n.call(t):e.get(t)),C=(t,e,n)=>e.has(t)?Ck("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),A=(t,e,n,r)=>(R_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),P=(t,e,n)=>(R_(t,e,"access private method"),n);var Qt=(t,e,n,r)=>({set _(i){A(t,e,i,n)},get _(){return u(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wj={exports:{}},v1={},xj={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0=Symbol.for("react.element"),YU=Symbol.for("react.portal"),JU=Symbol.for("react.fragment"),QU=Symbol.for("react.strict_mode"),ZU=Symbol.for("react.profiler"),e5=Symbol.for("react.provider"),t5=Symbol.for("react.context"),n5=Symbol.for("react.forward_ref"),r5=Symbol.for("react.suspense"),i5=Symbol.for("react.memo"),s5=Symbol.for("react.lazy"),Pk=Symbol.iterator;function a5(t){return t===null||typeof t!="object"?null:(t=Pk&&t[Pk]||t["@@iterator"],typeof t=="function"?t:null)}var _j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sj=Object.assign,Aj={};function Ap(t,e,n){this.props=t,this.context=e,this.refs=Aj,this.updater=n||_j}Ap.prototype.isReactComponent={};Ap.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ap.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ej(){}Ej.prototype=Ap.prototype;function aP(t,e,n){this.props=t,this.context=e,this.refs=Aj,this.updater=n||_j}var oP=aP.prototype=new Ej;oP.constructor=aP;Sj(oP,Ap.prototype);oP.isPureReactComponent=!0;var Ok=Array.isArray,Tj=Object.prototype.hasOwnProperty,lP={current:null},Cj={key:!0,ref:!0,__self:!0,__source:!0};function Pj(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Tj.call(e,r)&&!Cj.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:n0,type:t,key:s,ref:a,props:i,_owner:lP.current}}function o5(t,e){return{$$typeof:n0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cP(t){return typeof t=="object"&&t!==null&&t.$$typeof===n0}function l5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kk=/\/+/g;function j_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l5(""+t.key):e.toString(36)}function mb(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case n0:case YU:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+j_(a,0):r,Ok(i)?(n="",t!=null&&(n=t.replace(kk,"$&/")+"/"),mb(i,e,n,"",function(c){return c})):i!=null&&(cP(i)&&(i=o5(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(kk,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Ok(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+j_(s,o);a+=mb(s,e,n,l,i)}else if(l=a5(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+j_(s,o++),a+=mb(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function E0(t,e,n){if(t==null)return t;var r=[],i=0;return mb(t,r,"","",function(s){return e.call(n,s,i++)}),r}function c5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dr={current:null},yb={transition:null},u5={ReactCurrentDispatcher:dr,ReactCurrentBatchConfig:yb,ReactCurrentOwner:lP};function Oj(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:E0,forEach:function(t,e,n){E0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return E0(t,function(){e++}),e},toArray:function(t){return E0(t,function(e){return e})||[]},only:function(t){if(!cP(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Ap;Te.Fragment=JU;Te.Profiler=ZU;Te.PureComponent=aP;Te.StrictMode=QU;Te.Suspense=r5;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u5;Te.act=Oj;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sj({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=lP.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Tj.call(e,l)&&!Cj.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:n0,type:t.type,key:i,ref:s,props:r,_owner:a}};Te.createContext=function(t){return t={$$typeof:t5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e5,_context:t},t.Consumer=t};Te.createElement=Pj;Te.createFactory=function(t){var e=Pj.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:n5,render:t}};Te.isValidElement=cP;Te.lazy=function(t){return{$$typeof:s5,_payload:{_status:-1,_result:t},_init:c5}};Te.memo=function(t,e){return{$$typeof:i5,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=yb.transition;yb.transition={};try{t()}finally{yb.transition=e}};Te.unstable_act=Oj;Te.useCallback=function(t,e){return dr.current.useCallback(t,e)};Te.useContext=function(t){return dr.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return dr.current.useDeferredValue(t)};Te.useEffect=function(t,e){return dr.current.useEffect(t,e)};Te.useId=function(){return dr.current.useId()};Te.useImperativeHandle=function(t,e,n){return dr.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return dr.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return dr.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return dr.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return dr.current.useReducer(t,e,n)};Te.useRef=function(t){return dr.current.useRef(t)};Te.useState=function(t){return dr.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return dr.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return dr.current.useTransition()};Te.version="18.3.1";xj.exports=Te;var z=xj.exports;const L=ut(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h5=z,d5=Symbol.for("react.element"),f5=Symbol.for("react.fragment"),p5=Object.prototype.hasOwnProperty,g5=h5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m5={key:!0,ref:!0,__self:!0,__source:!0};function kj(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)p5.call(e,r)&&!m5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:d5,type:t,key:s,ref:a,props:i,_owner:g5.current}}v1.Fragment=f5;v1.jsx=kj;v1.jsxs=kj;wj.exports=v1;var E=wj.exports,sA={},Nj={exports:{}},di={},Ij={exports:{}},Mj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,U){var V=$.length;$.push(U);e:for(;0<V;){var G=V-1>>>1,W=$[G];if(0<i(W,U))$[G]=U,$[V]=W,V=G;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var U=$[0],V=$.pop();if(V!==U){$[0]=V;e:for(var G=0,W=$.length,Y=W>>>1;G<Y;){var pe=2*(G+1)-1,he=$[pe],Se=pe+1,ke=$[Se];if(0>i(he,V))Se<W&&0>i(ke,he)?($[G]=ke,$[Se]=V,G=Se):($[G]=he,$[pe]=V,G=pe);else if(Se<W&&0>i(ke,V))$[G]=ke,$[Se]=V,G=Se;else break e}}return U}function i($,U){var V=$.sortIndex-U.sortIndex;return V!==0?V:$.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=$)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function _($){if(m=!1,v($),!g)if(n(l)!==null)g=!0,j(x);else{var U=n(c);U!==null&&B(_,U.startTime-$)}}function x($,U){g=!1,m&&(m=!1,y(O),O=-1),p=!0;var V=f;try{for(v(U),d=n(l);d!==null&&(!(d.expirationTime>U)||$&&!N());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var W=G(d.expirationTime<=U);U=t.unstable_now(),typeof W=="function"?d.callback=W:d===n(l)&&r(l),v(U)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var pe=n(c);pe!==null&&B(_,pe.startTime-U),Y=!1}return Y}finally{d=null,f=V,p=!1}}var S=!1,T=null,O=-1,k=5,M=-1;function N(){return!(t.unstable_now()-M<k)}function I(){if(T!==null){var $=t.unstable_now();M=$;var U=!0;try{U=T(!0,$)}finally{U?R():(S=!1,T=null)}}else S=!1}var R;if(typeof w=="function")R=function(){w(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,D=F.port2;F.port1.onmessage=I,R=function(){D.postMessage(null)}}else R=function(){b(I,0)};function j($){T=$,S||(S=!0,R())}function B($,U){O=b(function(){$(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,j(x))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var V=f;f=U;try{return $()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,U){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var V=f;f=$;try{return U()}finally{f=V}},t.unstable_scheduleCallback=function($,U,V){var G=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?G+V:G):V=G,$){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=V+W,$={id:h++,callback:U,priorityLevel:$,startTime:V,expirationTime:W,sortIndex:-1},V>G?($.sortIndex=V,e(c,$),n(l)===null&&$===n(c)&&(m?(y(O),O=-1):m=!0,B(_,V-G))):($.sortIndex=W,e(l,$),g||p||(g=!0,j(x))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var U=f;return function(){var V=f;f=U;try{return $.apply(this,arguments)}finally{f=V}}}})(Mj);Ij.exports=Mj;var y5=Ij.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5=z,ui=y5;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rj=new Set,tm={};function uh(t,e){Xf(t,e),Xf(t+"Capture",e)}function Xf(t,e){for(tm[t]=e,t=0;t<e.length;t++)Rj.add(e[t])}var ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aA=Object.prototype.hasOwnProperty,b5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nk={},Ik={};function w5(t){return aA.call(Ik,t)?!0:aA.call(Nk,t)?!1:b5.test(t)?Ik[t]=!0:(Nk[t]=!0,!1)}function x5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _5(t,e,n,r){if(e===null||typeof e>"u"||x5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var uP=/[\-:]([a-z])/g;function hP(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uP,hP);Bn[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uP,hP);Bn[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uP,hP);Bn[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function dP(t,e,n,r){var i=Bn.hasOwnProperty(e)?Bn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_5(e,n,i,r)&&(n=null),r||i===null?w5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _o=v5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T0=Symbol.for("react.element"),Uh=Symbol.for("react.portal"),zh=Symbol.for("react.fragment"),fP=Symbol.for("react.strict_mode"),oA=Symbol.for("react.profiler"),jj=Symbol.for("react.provider"),Dj=Symbol.for("react.context"),pP=Symbol.for("react.forward_ref"),lA=Symbol.for("react.suspense"),cA=Symbol.for("react.suspense_list"),gP=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),$j=Symbol.for("react.offscreen"),Mk=Symbol.iterator;function Up(t){return t===null||typeof t!="object"?null:(t=Mk&&t[Mk]||t["@@iterator"],typeof t=="function"?t:null)}var Ot=Object.assign,D_;function ug(t){if(D_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);D_=e&&e[1]||""}return`
`+D_+t}var $_=!1;function L_(t,e){if(!t||$_)return"";$_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{$_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ug(t):""}function S5(t){switch(t.tag){case 5:return ug(t.type);case 16:return ug("Lazy");case 13:return ug("Suspense");case 19:return ug("SuspenseList");case 0:case 2:case 15:return t=L_(t.type,!1),t;case 11:return t=L_(t.type.render,!1),t;case 1:return t=L_(t.type,!0),t;default:return""}}function uA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zh:return"Fragment";case Uh:return"Portal";case oA:return"Profiler";case fP:return"StrictMode";case lA:return"Suspense";case cA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dj:return(t.displayName||"Context")+".Consumer";case jj:return(t._context.displayName||"Context")+".Provider";case pP:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gP:return e=t.displayName||null,e!==null?e:uA(t.type)||"Memo";case No:e=t._payload,t=t._init;try{return uA(t(e))}catch{}}return null}function A5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uA(e);case 8:return e===fP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E5(t){var e=Lj(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function C0(t){t._valueTracker||(t._valueTracker=E5(t))}function Fj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Lj(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hA(t,e){var n=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bj(t,e){e=e.checked,e!=null&&dP(t,"checked",e,!1)}function dA(t,e){Bj(t,e);var n=Wl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fA(t,e.type,n):e.hasOwnProperty("defaultValue")&&fA(t,e.type,Wl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fA(t,e,n){(e!=="number"||hw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hg=Array.isArray;function cd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(hg(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wl(n)}}function Uj(t,e){var n=Wl(e.value),r=Wl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $k(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var P0,Hj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(P0=P0||document.createElement("div"),P0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=P0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T5=["Webkit","ms","Moz","O"];Object.keys(Lg).forEach(function(t){T5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lg[e]=Lg[t]})});function Wj(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lg.hasOwnProperty(t)&&Lg[t]?(""+e).trim():e+"px"}function Vj(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Wj(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var C5=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mA(t,e){if(e){if(C5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function yA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vA=null;function mP(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bA=null,ud=null,hd=null;function Lk(t){if(t=s0(t)){if(typeof bA!="function")throw Error(X(280));var e=t.stateNode;e&&(e=S1(e),bA(t.stateNode,t.type,e))}}function Gj(t){ud?hd?hd.push(t):hd=[t]:ud=t}function qj(){if(ud){var t=ud,e=hd;if(hd=ud=null,Lk(t),e)for(t=0;t<e.length;t++)Lk(e[t])}}function Kj(t,e){return t(e)}function Xj(){}var F_=!1;function Yj(t,e,n){if(F_)return t(e,n);F_=!0;try{return Kj(t,e,n)}finally{F_=!1,(ud!==null||hd!==null)&&(Xj(),qj())}}function rm(t,e){var n=t.stateNode;if(n===null)return null;var r=S1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var wA=!1;if(ho)try{var zp={};Object.defineProperty(zp,"passive",{get:function(){wA=!0}}),window.addEventListener("test",zp,zp),window.removeEventListener("test",zp,zp)}catch{wA=!1}function P5(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Fg=!1,dw=null,fw=!1,xA=null,O5={onError:function(t){Fg=!0,dw=t}};function k5(t,e,n,r,i,s,a,o,l){Fg=!1,dw=null,P5.apply(O5,arguments)}function N5(t,e,n,r,i,s,a,o,l){if(k5.apply(this,arguments),Fg){if(Fg){var c=dw;Fg=!1,dw=null}else throw Error(X(198));fw||(fw=!0,xA=c)}}function hh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fk(t){if(hh(t)!==t)throw Error(X(188))}function I5(t){var e=t.alternate;if(!e){if(e=hh(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fk(i),t;if(s===r)return Fk(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function Qj(t){return t=I5(t),t!==null?Zj(t):null}function Zj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zj(t);if(e!==null)return e;t=t.sibling}return null}var eD=ui.unstable_scheduleCallback,Bk=ui.unstable_cancelCallback,M5=ui.unstable_shouldYield,R5=ui.unstable_requestPaint,Ut=ui.unstable_now,j5=ui.unstable_getCurrentPriorityLevel,yP=ui.unstable_ImmediatePriority,tD=ui.unstable_UserBlockingPriority,pw=ui.unstable_NormalPriority,D5=ui.unstable_LowPriority,nD=ui.unstable_IdlePriority,b1=null,ta=null;function $5(t){if(ta&&typeof ta.onCommitFiberRoot=="function")try{ta.onCommitFiberRoot(b1,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:B5,L5=Math.log,F5=Math.LN2;function B5(t){return t>>>=0,t===0?32:31-(L5(t)/F5|0)|0}var O0=64,k0=4194304;function dg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=dg(o):(s&=a,s!==0&&(r=dg(s)))}else a=n&~i,a!==0?r=dg(a):s!==0&&(r=dg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vs(e),i=1<<n,r|=t[n],e&=~i;return r}function U5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z5(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-vs(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=U5(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function _A(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rD(){var t=O0;return O0<<=1,!(O0&4194240)&&(O0=64),t}function B_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function r0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function H5(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var We=0;function iD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sD,bP,aD,oD,lD,SA=!1,N0=[],Rl=null,jl=null,Dl=null,im=new Map,sm=new Map,Do=[],W5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uk(t,e){switch(t){case"focusin":case"focusout":Rl=null;break;case"dragenter":case"dragleave":jl=null;break;case"mouseover":case"mouseout":Dl=null;break;case"pointerover":case"pointerout":im.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sm.delete(e.pointerId)}}function Hp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=s0(e),e!==null&&bP(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function V5(t,e,n,r,i){switch(e){case"focusin":return Rl=Hp(Rl,t,e,n,r,i),!0;case"dragenter":return jl=Hp(jl,t,e,n,r,i),!0;case"mouseover":return Dl=Hp(Dl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return im.set(s,Hp(im.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sm.set(s,Hp(sm.get(s)||null,t,e,n,r,i)),!0}return!1}function cD(t){var e=Sc(t.target);if(e!==null){var n=hh(e);if(n!==null){if(e=n.tag,e===13){if(e=Jj(n),e!==null){t.blockedOn=e,lD(t.priority,function(){aD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=AA(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vA=r,n.target.dispatchEvent(r),vA=null}else return e=s0(n),e!==null&&bP(e),t.blockedOn=n,!1;e.shift()}return!0}function zk(t,e,n){vb(t)&&n.delete(e)}function G5(){SA=!1,Rl!==null&&vb(Rl)&&(Rl=null),jl!==null&&vb(jl)&&(jl=null),Dl!==null&&vb(Dl)&&(Dl=null),im.forEach(zk),sm.forEach(zk)}function Wp(t,e){t.blockedOn===e&&(t.blockedOn=null,SA||(SA=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,G5)))}function am(t){function e(i){return Wp(i,t)}if(0<N0.length){Wp(N0[0],t);for(var n=1;n<N0.length;n++){var r=N0[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rl!==null&&Wp(Rl,t),jl!==null&&Wp(jl,t),Dl!==null&&Wp(Dl,t),im.forEach(e),sm.forEach(e),n=0;n<Do.length;n++)r=Do[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Do.length&&(n=Do[0],n.blockedOn===null);)cD(n),n.blockedOn===null&&Do.shift()}var dd=_o.ReactCurrentBatchConfig,mw=!0;function q5(t,e,n,r){var i=We,s=dd.transition;dd.transition=null;try{We=1,wP(t,e,n,r)}finally{We=i,dd.transition=s}}function K5(t,e,n,r){var i=We,s=dd.transition;dd.transition=null;try{We=4,wP(t,e,n,r)}finally{We=i,dd.transition=s}}function wP(t,e,n,r){if(mw){var i=AA(t,e,n,r);if(i===null)Y_(t,e,r,yw,n),Uk(t,r);else if(V5(i,t,e,n,r))r.stopPropagation();else if(Uk(t,r),e&4&&-1<W5.indexOf(t)){for(;i!==null;){var s=s0(i);if(s!==null&&sD(s),s=AA(t,e,n,r),s===null&&Y_(t,e,r,yw,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Y_(t,e,r,null,n)}}var yw=null;function AA(t,e,n,r){if(yw=null,t=mP(r),t=Sc(t),t!==null)if(e=hh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jj(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yw=t,null}function uD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j5()){case yP:return 1;case tD:return 4;case pw:case D5:return 16;case nD:return 536870912;default:return 16}default:return 16}}var kl=null,xP=null,bb=null;function hD(){if(bb)return bb;var t,e=xP,n=e.length,r,i="value"in kl?kl.value:kl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return bb=i.slice(t,1<r?1-r:void 0)}function wb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function I0(){return!0}function Hk(){return!1}function fi(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?I0:Hk,this.isPropagationStopped=Hk,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=I0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=I0)},persist:function(){},isPersistent:I0}),e}var Ep={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_P=fi(Ep),i0=Ot({},Ep,{view:0,detail:0}),X5=fi(i0),U_,z_,Vp,w1=Ot({},i0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vp&&(Vp&&t.type==="mousemove"?(U_=t.screenX-Vp.screenX,z_=t.screenY-Vp.screenY):z_=U_=0,Vp=t),U_)},movementY:function(t){return"movementY"in t?t.movementY:z_}}),Wk=fi(w1),Y5=Ot({},w1,{dataTransfer:0}),J5=fi(Y5),Q5=Ot({},i0,{relatedTarget:0}),H_=fi(Q5),Z5=Ot({},Ep,{animationName:0,elapsedTime:0,pseudoElement:0}),ez=fi(Z5),tz=Ot({},Ep,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nz=fi(tz),rz=Ot({},Ep,{data:0}),Vk=fi(rz),iz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},az={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=az[t])?!!e[t]:!1}function SP(){return oz}var lz=Ot({},i0,{key:function(t){if(t.key){var e=iz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SP,charCode:function(t){return t.type==="keypress"?wb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cz=fi(lz),uz=Ot({},w1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gk=fi(uz),hz=Ot({},i0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SP}),dz=fi(hz),fz=Ot({},Ep,{propertyName:0,elapsedTime:0,pseudoElement:0}),pz=fi(fz),gz=Ot({},w1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mz=fi(gz),yz=[9,13,27,32],AP=ho&&"CompositionEvent"in window,Bg=null;ho&&"documentMode"in document&&(Bg=document.documentMode);var vz=ho&&"TextEvent"in window&&!Bg,dD=ho&&(!AP||Bg&&8<Bg&&11>=Bg),qk=" ",Kk=!1;function fD(t,e){switch(t){case"keyup":return yz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hh=!1;function bz(t,e){switch(t){case"compositionend":return pD(e);case"keypress":return e.which!==32?null:(Kk=!0,qk);case"textInput":return t=e.data,t===qk&&Kk?null:t;default:return null}}function wz(t,e){if(Hh)return t==="compositionend"||!AP&&fD(t,e)?(t=hD(),bb=xP=kl=null,Hh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dD&&e.locale!=="ko"?null:e.data;default:return null}}var xz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xz[t.type]:e==="textarea"}function gD(t,e,n,r){Gj(r),e=vw(e,"onChange"),0<e.length&&(n=new _P("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ug=null,om=null;function _z(t){TD(t,0)}function x1(t){var e=Gh(t);if(Fj(e))return t}function Sz(t,e){if(t==="change")return e}var mD=!1;if(ho){var W_;if(ho){var V_="oninput"in document;if(!V_){var Yk=document.createElement("div");Yk.setAttribute("oninput","return;"),V_=typeof Yk.oninput=="function"}W_=V_}else W_=!1;mD=W_&&(!document.documentMode||9<document.documentMode)}function Jk(){Ug&&(Ug.detachEvent("onpropertychange",yD),om=Ug=null)}function yD(t){if(t.propertyName==="value"&&x1(om)){var e=[];gD(e,om,t,mP(t)),Yj(_z,e)}}function Az(t,e,n){t==="focusin"?(Jk(),Ug=e,om=n,Ug.attachEvent("onpropertychange",yD)):t==="focusout"&&Jk()}function Ez(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return x1(om)}function Tz(t,e){if(t==="click")return x1(e)}function Cz(t,e){if(t==="input"||t==="change")return x1(e)}function Pz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xs=typeof Object.is=="function"?Object.is:Pz;function lm(t,e){if(xs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!aA.call(e,i)||!xs(t[i],e[i]))return!1}return!0}function Qk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zk(t,e){var n=Qk(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qk(n)}}function vD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bD(){for(var t=window,e=hw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hw(t.document)}return e}function EP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Oz(t){var e=bD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vD(n.ownerDocument.documentElement,n)){if(r!==null&&EP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zk(n,s);var a=Zk(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kz=ho&&"documentMode"in document&&11>=document.documentMode,Wh=null,EA=null,zg=null,TA=!1;function e2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;TA||Wh==null||Wh!==hw(r)||(r=Wh,"selectionStart"in r&&EP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zg&&lm(zg,r)||(zg=r,r=vw(EA,"onSelect"),0<r.length&&(e=new _P("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wh)))}function M0(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vh={animationend:M0("Animation","AnimationEnd"),animationiteration:M0("Animation","AnimationIteration"),animationstart:M0("Animation","AnimationStart"),transitionend:M0("Transition","TransitionEnd")},G_={},wD={};ho&&(wD=document.createElement("div").style,"AnimationEvent"in window||(delete Vh.animationend.animation,delete Vh.animationiteration.animation,delete Vh.animationstart.animation),"TransitionEvent"in window||delete Vh.transitionend.transition);function _1(t){if(G_[t])return G_[t];if(!Vh[t])return t;var e=Vh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wD)return G_[t]=e[n];return t}var xD=_1("animationend"),_D=_1("animationiteration"),SD=_1("animationstart"),AD=_1("transitionend"),ED=new Map,t2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(t,e){ED.set(t,e),uh(e,[t])}for(var q_=0;q_<t2.length;q_++){var K_=t2[q_],Nz=K_.toLowerCase(),Iz=K_[0].toUpperCase()+K_.slice(1);Xl(Nz,"on"+Iz)}Xl(xD,"onAnimationEnd");Xl(_D,"onAnimationIteration");Xl(SD,"onAnimationStart");Xl("dblclick","onDoubleClick");Xl("focusin","onFocus");Xl("focusout","onBlur");Xl(AD,"onTransitionEnd");Xf("onMouseEnter",["mouseout","mouseover"]);Xf("onMouseLeave",["mouseout","mouseover"]);Xf("onPointerEnter",["pointerout","pointerover"]);Xf("onPointerLeave",["pointerout","pointerover"]);uh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uh("onBeforeInput",["compositionend","keypress","textInput","paste"]);uh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mz=new Set("cancel close invalid load scroll toggle".split(" ").concat(fg));function n2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N5(r,e,void 0,t),t.currentTarget=null}function TD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;n2(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;n2(i,o,c),s=l}}}if(fw)throw t=xA,fw=!1,xA=null,t}function dt(t,e){var n=e[NA];n===void 0&&(n=e[NA]=new Set);var r=t+"__bubble";n.has(r)||(CD(e,t,2,!1),n.add(r))}function X_(t,e,n){var r=0;e&&(r|=4),CD(n,t,r,e)}var R0="_reactListening"+Math.random().toString(36).slice(2);function cm(t){if(!t[R0]){t[R0]=!0,Rj.forEach(function(n){n!=="selectionchange"&&(Mz.has(n)||X_(n,!1,t),X_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[R0]||(e[R0]=!0,X_("selectionchange",!1,e))}}function CD(t,e,n,r){switch(uD(e)){case 1:var i=q5;break;case 4:i=K5;break;default:i=wP}n=i.bind(null,e,n,t),i=void 0,!wA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Y_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Sc(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Yj(function(){var c=s,h=mP(n),d=[];e:{var f=ED.get(t);if(f!==void 0){var p=_P,g=t;switch(t){case"keypress":if(wb(n)===0)break e;case"keydown":case"keyup":p=cz;break;case"focusin":g="focus",p=H_;break;case"focusout":g="blur",p=H_;break;case"beforeblur":case"afterblur":p=H_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=J5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=dz;break;case xD:case _D:case SD:p=ez;break;case AD:p=pz;break;case"scroll":p=X5;break;case"wheel":p=mz;break;case"copy":case"cut":case"paste":p=nz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Gk}var m=(e&4)!==0,b=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var w=c,v;w!==null;){v=w;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,y!==null&&(_=rm(w,y),_!=null&&m.push(um(w,_,v)))),b)break;w=w.return}0<m.length&&(f=new p(f,g,null,n,h),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==vA&&(g=n.relatedTarget||n.fromElement)&&(Sc(g)||g[fo]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Sc(g):null,g!==null&&(b=hh(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=Wk,_="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=Gk,_="onPointerLeave",y="onPointerEnter",w="pointer"),b=p==null?f:Gh(p),v=g==null?f:Gh(g),f=new m(_,w+"leave",p,n,h),f.target=b,f.relatedTarget=v,_=null,Sc(h)===c&&(m=new m(y,w+"enter",g,n,h),m.target=v,m.relatedTarget=b,_=m),b=_,p&&g)t:{for(m=p,y=g,w=0,v=m;v;v=bh(v))w++;for(v=0,_=y;_;_=bh(_))v++;for(;0<w-v;)m=bh(m),w--;for(;0<v-w;)y=bh(y),v--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=bh(m),y=bh(y)}m=null}else m=null;p!==null&&r2(d,f,p,m,!1),g!==null&&b!==null&&r2(d,b,g,m,!0)}}e:{if(f=c?Gh(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=Sz;else if(Xk(f))if(mD)x=Cz;else{x=Ez;var S=Az}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=Tz);if(x&&(x=x(t,c))){gD(d,x,n,h);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&fA(f,"number",f.value)}switch(S=c?Gh(c):window,t){case"focusin":(Xk(S)||S.contentEditable==="true")&&(Wh=S,EA=c,zg=null);break;case"focusout":zg=EA=Wh=null;break;case"mousedown":TA=!0;break;case"contextmenu":case"mouseup":case"dragend":TA=!1,e2(d,n,h);break;case"selectionchange":if(kz)break;case"keydown":case"keyup":e2(d,n,h)}var T;if(AP)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Hh?fD(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(dD&&n.locale!=="ko"&&(Hh||O!=="onCompositionStart"?O==="onCompositionEnd"&&Hh&&(T=hD()):(kl=h,xP="value"in kl?kl.value:kl.textContent,Hh=!0)),S=vw(c,O),0<S.length&&(O=new Vk(O,t,null,n,h),d.push({event:O,listeners:S}),T?O.data=T:(T=pD(n),T!==null&&(O.data=T)))),(T=vz?bz(t,n):wz(t,n))&&(c=vw(c,"onBeforeInput"),0<c.length&&(h=new Vk("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=T))}TD(d,e)})}function um(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vw(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rm(t,n),s!=null&&r.unshift(um(t,s,i)),s=rm(t,e),s!=null&&r.push(um(t,s,i))),t=t.return}return r}function bh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r2(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=rm(n,s),l!=null&&a.unshift(um(n,l,o))):i||(l=rm(n,s),l!=null&&a.push(um(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Rz=/\r\n?/g,jz=/\u0000|\uFFFD/g;function i2(t){return(typeof t=="string"?t:""+t).replace(Rz,`
`).replace(jz,"")}function j0(t,e,n){if(e=i2(e),i2(t)!==e&&n)throw Error(X(425))}function bw(){}var CA=null,PA=null;function OA(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kA=typeof setTimeout=="function"?setTimeout:void 0,Dz=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,$z=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(t){return s2.resolve(null).then(t).catch(Lz)}:kA;function Lz(t){setTimeout(function(){throw t})}function J_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),am(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);am(e)}function $l(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tp=Math.random().toString(36).slice(2),Js="__reactFiber$"+Tp,hm="__reactProps$"+Tp,fo="__reactContainer$"+Tp,NA="__reactEvents$"+Tp,Fz="__reactListeners$"+Tp,Bz="__reactHandles$"+Tp;function Sc(t){var e=t[Js];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fo]||n[Js]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=a2(t);t!==null;){if(n=t[Js])return n;t=a2(t)}return e}t=n,n=t.parentNode}return null}function s0(t){return t=t[Js]||t[fo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function S1(t){return t[hm]||null}var IA=[],qh=-1;function Yl(t){return{current:t}}function mt(t){0>qh||(t.current=IA[qh],IA[qh]=null,qh--)}function lt(t,e){qh++,IA[qh]=t.current,t.current=e}var Vl={},Zn=Yl(Vl),Cr=Yl(!1),Qu=Vl;function Yf(t,e){var n=t.type.contextTypes;if(!n)return Vl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pr(t){return t=t.childContextTypes,t!=null}function ww(){mt(Cr),mt(Zn)}function o2(t,e,n){if(Zn.current!==Vl)throw Error(X(168));lt(Zn,e),lt(Cr,n)}function PD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,A5(t)||"Unknown",i));return Ot({},n,r)}function xw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vl,Qu=Zn.current,lt(Zn,t),lt(Cr,Cr.current),!0}function l2(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=PD(t,e,Qu),r.__reactInternalMemoizedMergedChildContext=t,mt(Cr),mt(Zn),lt(Zn,t)):mt(Cr),lt(Cr,n)}var va=null,A1=!1,Q_=!1;function OD(t){va===null?va=[t]:va.push(t)}function Uz(t){A1=!0,OD(t)}function Jl(){if(!Q_&&va!==null){Q_=!0;var t=0,e=We;try{var n=va;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}va=null,A1=!1}catch(i){throw va!==null&&(va=va.slice(t+1)),eD(yP,Jl),i}finally{We=e,Q_=!1}}return null}var Kh=[],Xh=0,_w=null,Sw=0,Ni=[],Ii=0,Zu=null,eo=1,to="";function lc(t,e){Kh[Xh++]=Sw,Kh[Xh++]=_w,_w=t,Sw=e}function kD(t,e,n){Ni[Ii++]=eo,Ni[Ii++]=to,Ni[Ii++]=Zu,Zu=t;var r=eo;t=to;var i=32-vs(r)-1;r&=~(1<<i),n+=1;var s=32-vs(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,eo=1<<32-vs(e)+i|n<<i|r,to=s+t}else eo=1<<s|n<<i|r,to=t}function TP(t){t.return!==null&&(lc(t,1),kD(t,1,0))}function CP(t){for(;t===_w;)_w=Kh[--Xh],Kh[Xh]=null,Sw=Kh[--Xh],Kh[Xh]=null;for(;t===Zu;)Zu=Ni[--Ii],Ni[Ii]=null,to=Ni[--Ii],Ni[Ii]=null,eo=Ni[--Ii],Ni[Ii]=null}var li=null,oi=null,wt=!1,ps=null;function ND(t,e){var n=ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,li=t,oi=$l(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,li=t,oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zu!==null?{id:eo,overflow:to}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,li=t,oi=null,!0):!1;default:return!1}}function MA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function RA(t){if(wt){var e=oi;if(e){var n=e;if(!c2(t,e)){if(MA(t))throw Error(X(418));e=$l(n.nextSibling);var r=li;e&&c2(t,e)?ND(r,n):(t.flags=t.flags&-4097|2,wt=!1,li=t)}}else{if(MA(t))throw Error(X(418));t.flags=t.flags&-4097|2,wt=!1,li=t}}}function u2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;li=t}function D0(t){if(t!==li)return!1;if(!wt)return u2(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!OA(t.type,t.memoizedProps)),e&&(e=oi)){if(MA(t))throw ID(),Error(X(418));for(;e;)ND(t,e),e=$l(e.nextSibling)}if(u2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){oi=$l(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}oi=null}}else oi=li?$l(t.stateNode.nextSibling):null;return!0}function ID(){for(var t=oi;t;)t=$l(t.nextSibling)}function Jf(){oi=li=null,wt=!1}function PP(t){ps===null?ps=[t]:ps.push(t)}var zz=_o.ReactCurrentBatchConfig;function Gp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function $0(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function h2(t){var e=t._init;return e(t._payload)}function MD(t){function e(y,w){if(t){var v=y.deletions;v===null?(y.deletions=[w],y.flags|=16):v.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Ul(y,w),y.index=0,y.sibling=null,y}function s(y,w,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<w?(y.flags|=2,w):v):(y.flags|=2,w)):(y.flags|=1048576,w)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,w,v,_){return w===null||w.tag!==6?(w=sS(v,y.mode,_),w.return=y,w):(w=i(w,v),w.return=y,w)}function l(y,w,v,_){var x=v.type;return x===zh?h(y,w,v.props.children,_,v.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===No&&h2(x)===w.type)?(_=i(w,v.props),_.ref=Gp(y,w,v),_.return=y,_):(_=Cb(v.type,v.key,v.props,null,y.mode,_),_.ref=Gp(y,w,v),_.return=y,_)}function c(y,w,v,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=aS(v,y.mode,_),w.return=y,w):(w=i(w,v.children||[]),w.return=y,w)}function h(y,w,v,_,x){return w===null||w.tag!==7?(w=Ku(v,y.mode,_,x),w.return=y,w):(w=i(w,v),w.return=y,w)}function d(y,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=sS(""+w,y.mode,v),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case T0:return v=Cb(w.type,w.key,w.props,null,y.mode,v),v.ref=Gp(y,null,w),v.return=y,v;case Uh:return w=aS(w,y.mode,v),w.return=y,w;case No:var _=w._init;return d(y,_(w._payload),v)}if(hg(w)||Up(w))return w=Ku(w,y.mode,v,null),w.return=y,w;$0(y,w)}return null}function f(y,w,v,_){var x=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return x!==null?null:o(y,w,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case T0:return v.key===x?l(y,w,v,_):null;case Uh:return v.key===x?c(y,w,v,_):null;case No:return x=v._init,f(y,w,x(v._payload),_)}if(hg(v)||Up(v))return x!==null?null:h(y,w,v,_,null);$0(y,v)}return null}function p(y,w,v,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(v)||null,o(w,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case T0:return y=y.get(_.key===null?v:_.key)||null,l(w,y,_,x);case Uh:return y=y.get(_.key===null?v:_.key)||null,c(w,y,_,x);case No:var S=_._init;return p(y,w,v,S(_._payload),x)}if(hg(_)||Up(_))return y=y.get(v)||null,h(w,y,_,x,null);$0(w,_)}return null}function g(y,w,v,_){for(var x=null,S=null,T=w,O=w=0,k=null;T!==null&&O<v.length;O++){T.index>O?(k=T,T=null):k=T.sibling;var M=f(y,T,v[O],_);if(M===null){T===null&&(T=k);break}t&&T&&M.alternate===null&&e(y,T),w=s(M,w,O),S===null?x=M:S.sibling=M,S=M,T=k}if(O===v.length)return n(y,T),wt&&lc(y,O),x;if(T===null){for(;O<v.length;O++)T=d(y,v[O],_),T!==null&&(w=s(T,w,O),S===null?x=T:S.sibling=T,S=T);return wt&&lc(y,O),x}for(T=r(y,T);O<v.length;O++)k=p(T,y,O,v[O],_),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?O:k.key),w=s(k,w,O),S===null?x=k:S.sibling=k,S=k);return t&&T.forEach(function(N){return e(y,N)}),wt&&lc(y,O),x}function m(y,w,v,_){var x=Up(v);if(typeof x!="function")throw Error(X(150));if(v=x.call(v),v==null)throw Error(X(151));for(var S=x=null,T=w,O=w=0,k=null,M=v.next();T!==null&&!M.done;O++,M=v.next()){T.index>O?(k=T,T=null):k=T.sibling;var N=f(y,T,M.value,_);if(N===null){T===null&&(T=k);break}t&&T&&N.alternate===null&&e(y,T),w=s(N,w,O),S===null?x=N:S.sibling=N,S=N,T=k}if(M.done)return n(y,T),wt&&lc(y,O),x;if(T===null){for(;!M.done;O++,M=v.next())M=d(y,M.value,_),M!==null&&(w=s(M,w,O),S===null?x=M:S.sibling=M,S=M);return wt&&lc(y,O),x}for(T=r(y,T);!M.done;O++,M=v.next())M=p(T,y,O,M.value,_),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?O:M.key),w=s(M,w,O),S===null?x=M:S.sibling=M,S=M);return t&&T.forEach(function(I){return e(y,I)}),wt&&lc(y,O),x}function b(y,w,v,_){if(typeof v=="object"&&v!==null&&v.type===zh&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case T0:e:{for(var x=v.key,S=w;S!==null;){if(S.key===x){if(x=v.type,x===zh){if(S.tag===7){n(y,S.sibling),w=i(S,v.props.children),w.return=y,y=w;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===No&&h2(x)===S.type){n(y,S.sibling),w=i(S,v.props),w.ref=Gp(y,S,v),w.return=y,y=w;break e}n(y,S);break}else e(y,S);S=S.sibling}v.type===zh?(w=Ku(v.props.children,y.mode,_,v.key),w.return=y,y=w):(_=Cb(v.type,v.key,v.props,null,y.mode,_),_.ref=Gp(y,w,v),_.return=y,y=_)}return a(y);case Uh:e:{for(S=v.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(y,w.sibling),w=i(w,v.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=aS(v,y.mode,_),w.return=y,y=w}return a(y);case No:return S=v._init,b(y,w,S(v._payload),_)}if(hg(v))return g(y,w,v,_);if(Up(v))return m(y,w,v,_);$0(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,v),w.return=y,y=w):(n(y,w),w=sS(v,y.mode,_),w.return=y,y=w),a(y)):n(y,w)}return b}var Qf=MD(!0),RD=MD(!1),Aw=Yl(null),Ew=null,Yh=null,OP=null;function kP(){OP=Yh=Ew=null}function NP(t){var e=Aw.current;mt(Aw),t._currentValue=e}function jA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fd(t,e){Ew=t,OP=Yh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Er=!0),t.firstContext=null)}function Bi(t){var e=t._currentValue;if(OP!==t)if(t={context:t,memoizedValue:e,next:null},Yh===null){if(Ew===null)throw Error(X(308));Yh=t,Ew.dependencies={lanes:0,firstContext:t}}else Yh=Yh.next=t;return e}var Ac=null;function IP(t){Ac===null?Ac=[t]:Ac.push(t)}function jD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,IP(e)):(n.next=i.next,i.next=n),e.interleaved=n,po(t,r)}function po(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Io=!1;function MP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ll(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,po(t,n)}return i=r.interleaved,i===null?(e.next=e,IP(r)):(e.next=i.next,i.next=e),r.interleaved=e,po(t,n)}function xb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vP(t,n)}}function d2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tw(t,e,n,r){var i=t.updateQueue;Io=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane,p=o.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,m=o;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=Ot({},d,f);break e;case 2:Io=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);th|=a,t.lanes=a,t.memoizedState=d}}function f2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var a0={},na=Yl(a0),dm=Yl(a0),fm=Yl(a0);function Ec(t){if(t===a0)throw Error(X(174));return t}function RP(t,e){switch(lt(fm,e),lt(dm,t),lt(na,a0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gA(e,t)}mt(na),lt(na,e)}function Zf(){mt(na),mt(dm),mt(fm)}function $D(t){Ec(fm.current);var e=Ec(na.current),n=gA(e,t.type);e!==n&&(lt(dm,t),lt(na,n))}function jP(t){dm.current===t&&(mt(na),mt(dm))}var Et=Yl(0);function Cw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Z_=[];function DP(){for(var t=0;t<Z_.length;t++)Z_[t]._workInProgressVersionPrimary=null;Z_.length=0}var _b=_o.ReactCurrentDispatcher,eS=_o.ReactCurrentBatchConfig,eh=0,Ct=null,on=null,_n=null,Pw=!1,Hg=!1,pm=0,Hz=0;function Un(){throw Error(X(321))}function $P(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xs(t[n],e[n]))return!1;return!0}function LP(t,e,n,r,i,s){if(eh=s,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_b.current=t===null||t.memoizedState===null?qz:Kz,t=n(r,i),Hg){s=0;do{if(Hg=!1,pm=0,25<=s)throw Error(X(301));s+=1,_n=on=null,e.updateQueue=null,_b.current=Xz,t=n(r,i)}while(Hg)}if(_b.current=Ow,e=on!==null&&on.next!==null,eh=0,_n=on=Ct=null,Pw=!1,e)throw Error(X(300));return t}function FP(){var t=pm!==0;return pm=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Ct.memoizedState=_n=t:_n=_n.next=t,_n}function Ui(){if(on===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=_n===null?Ct.memoizedState:_n.next;if(e!==null)_n=e,on=t;else{if(t===null)throw Error(X(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},_n===null?Ct.memoizedState=_n=t:_n=_n.next=t}return _n}function gm(t,e){return typeof e=="function"?e(t):e}function tS(t){var e=Ui(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=on,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var h=c.lane;if((eh&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,Ct.lanes|=h,th|=h}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,xs(r,e.memoizedState)||(Er=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ct.lanes|=s,th|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nS(t){var e=Ui(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);xs(s,e.memoizedState)||(Er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function LD(){}function FD(t,e){var n=Ct,r=Ui(),i=e(),s=!xs(r.memoizedState,i);if(s&&(r.memoizedState=i,Er=!0),r=r.queue,BP(zD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_n!==null&&_n.memoizedState.tag&1){if(n.flags|=2048,mm(9,UD.bind(null,n,r,i,e),void 0,null),Sn===null)throw Error(X(349));eh&30||BD(n,e,i)}return i}function BD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function UD(t,e,n,r){e.value=n,e.getSnapshot=r,HD(e)&&WD(t)}function zD(t,e,n){return n(function(){HD(e)&&WD(t)})}function HD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xs(t,n)}catch{return!0}}function WD(t){var e=po(t,1);e!==null&&bs(e,t,1,-1)}function p2(t){var e=Ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gm,lastRenderedState:t},e.queue=t,t=t.dispatch=Gz.bind(null,Ct,t),[e.memoizedState,t]}function mm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function VD(){return Ui().memoizedState}function Sb(t,e,n,r){var i=Ps();Ct.flags|=t,i.memoizedState=mm(1|e,n,void 0,r===void 0?null:r)}function E1(t,e,n,r){var i=Ui();r=r===void 0?null:r;var s=void 0;if(on!==null){var a=on.memoizedState;if(s=a.destroy,r!==null&&$P(r,a.deps)){i.memoizedState=mm(e,n,s,r);return}}Ct.flags|=t,i.memoizedState=mm(1|e,n,s,r)}function g2(t,e){return Sb(8390656,8,t,e)}function BP(t,e){return E1(2048,8,t,e)}function GD(t,e){return E1(4,2,t,e)}function qD(t,e){return E1(4,4,t,e)}function KD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function XD(t,e,n){return n=n!=null?n.concat([t]):null,E1(4,4,KD.bind(null,e,t),n)}function UP(){}function YD(t,e){var n=Ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$P(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function JD(t,e){var n=Ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$P(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function QD(t,e,n){return eh&21?(xs(n,e)||(n=rD(),Ct.lanes|=n,th|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=n)}function Wz(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=eS.transition;eS.transition={};try{t(!1),e()}finally{We=n,eS.transition=r}}function ZD(){return Ui().memoizedState}function Vz(t,e,n){var r=Bl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},e$(t))t$(e,n);else if(n=jD(t,e,n,r),n!==null){var i=ur();bs(n,t,r,i),n$(n,e,r)}}function Gz(t,e,n){var r=Bl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(e$(t))t$(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,xs(o,a)){var l=e.interleaved;l===null?(i.next=i,IP(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=jD(t,e,i,r),n!==null&&(i=ur(),bs(n,t,r,i),n$(n,e,r))}}function e$(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function t$(t,e){Hg=Pw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function n$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vP(t,n)}}var Ow={readContext:Bi,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},qz={readContext:Bi,useCallback:function(t,e){return Ps().memoizedState=[t,e===void 0?null:e],t},useContext:Bi,useEffect:g2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sb(4194308,4,KD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sb(4,2,t,e)},useMemo:function(t,e){var n=Ps();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ps();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vz.bind(null,Ct,t),[r.memoizedState,t]},useRef:function(t){var e=Ps();return t={current:t},e.memoizedState=t},useState:p2,useDebugValue:UP,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=p2(!1),e=t[0];return t=Wz.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ct,i=Ps();if(wt){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Sn===null)throw Error(X(349));eh&30||BD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,g2(zD.bind(null,r,s,t),[t]),r.flags|=2048,mm(9,UD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ps(),e=Sn.identifierPrefix;if(wt){var n=to,r=eo;n=(r&~(1<<32-vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kz={readContext:Bi,useCallback:YD,useContext:Bi,useEffect:BP,useImperativeHandle:XD,useInsertionEffect:GD,useLayoutEffect:qD,useMemo:JD,useReducer:tS,useRef:VD,useState:function(){return tS(gm)},useDebugValue:UP,useDeferredValue:function(t){var e=Ui();return QD(e,on.memoizedState,t)},useTransition:function(){var t=tS(gm)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:LD,useSyncExternalStore:FD,useId:ZD,unstable_isNewReconciler:!1},Xz={readContext:Bi,useCallback:YD,useContext:Bi,useEffect:BP,useImperativeHandle:XD,useInsertionEffect:GD,useLayoutEffect:qD,useMemo:JD,useReducer:nS,useRef:VD,useState:function(){return nS(gm)},useDebugValue:UP,useDeferredValue:function(t){var e=Ui();return on===null?e.memoizedState=t:QD(e,on.memoizedState,t)},useTransition:function(){var t=nS(gm)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:LD,useSyncExternalStore:FD,useId:ZD,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=Ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function DA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var T1={isMounted:function(t){return(t=t._reactInternals)?hh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ur(),i=Bl(t),s=so(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ll(t,s,i),e!==null&&(bs(e,t,i,r),xb(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ur(),i=Bl(t),s=so(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ll(t,s,i),e!==null&&(bs(e,t,i,r),xb(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ur(),r=Bl(t),i=so(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ll(t,i,r),e!==null&&(bs(e,t,r,n),xb(e,t,r))}};function m2(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!lm(n,r)||!lm(i,s):!0}function r$(t,e,n){var r=!1,i=Vl,s=e.contextType;return typeof s=="object"&&s!==null?s=Bi(s):(i=Pr(e)?Qu:Zn.current,r=e.contextTypes,s=(r=r!=null)?Yf(t,i):Vl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=T1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function y2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&T1.enqueueReplaceState(e,e.state,null)}function $A(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},MP(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bi(s):(s=Pr(e)?Qu:Zn.current,i.context=Yf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(DA(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&T1.enqueueReplaceState(i,i.state,null),Tw(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ep(t,e){try{var n="",r=e;do n+=S5(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function rS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function LA(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yz=typeof WeakMap=="function"?WeakMap:Map;function i$(t,e,n){n=so(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nw||(Nw=!0,KA=r),LA(t,e)},n}function s$(t,e,n){n=so(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){LA(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){LA(t,e),typeof r!="function"&&(Fl===null?Fl=new Set([this]):Fl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function v2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yz;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=u6.bind(null,t,e,n),e.then(t,t))}function b2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=so(-1,1),e.tag=2,Ll(n,e,1))),n.lanes|=1),t)}var Jz=_o.ReactCurrentOwner,Er=!1;function or(t,e,n,r){e.child=t===null?RD(e,null,n,r):Qf(e,t.child,n,r)}function x2(t,e,n,r,i){n=n.render;var s=e.ref;return fd(e,i),r=LP(t,e,n,r,s,i),n=FP(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,go(t,e,i)):(wt&&n&&TP(e),e.flags|=1,or(t,e,r,i),e.child)}function _2(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!XP(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,a$(t,e,s,r,i)):(t=Cb(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:lm,n(a,r)&&t.ref===e.ref)return go(t,e,i)}return e.flags|=1,t=Ul(s,r),t.ref=e.ref,t.return=e,e.child=t}function a$(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(lm(s,r)&&t.ref===e.ref)if(Er=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Er=!0);else return e.lanes=t.lanes,go(t,e,i)}return FA(t,e,n,r,i)}function o$(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Qh,ei),ei|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(Qh,ei),ei|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(Qh,ei),ei|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,lt(Qh,ei),ei|=r;return or(t,e,i,n),e.child}function l$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function FA(t,e,n,r,i){var s=Pr(n)?Qu:Zn.current;return s=Yf(e,s),fd(e,i),n=LP(t,e,n,r,s,i),r=FP(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,go(t,e,i)):(wt&&r&&TP(e),e.flags|=1,or(t,e,n,i),e.child)}function S2(t,e,n,r,i){if(Pr(n)){var s=!0;xw(e)}else s=!1;if(fd(e,i),e.stateNode===null)Ab(t,e),r$(e,n,r),$A(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bi(c):(c=Pr(n)?Qu:Zn.current,c=Yf(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&y2(e,a,r,c),Io=!1;var f=e.memoizedState;a.state=f,Tw(e,r,a,i),l=e.memoizedState,o!==r||f!==l||Cr.current||Io?(typeof h=="function"&&(DA(e,n,h,r),l=e.memoizedState),(o=Io||m2(e,n,o,r,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,DD(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ji(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bi(l):(l=Pr(n)?Qu:Zn.current,l=Yf(e,l));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&y2(e,a,r,l),Io=!1,f=e.memoizedState,a.state=f,Tw(e,r,a,i);var g=e.memoizedState;o!==d||f!==g||Cr.current||Io?(typeof p=="function"&&(DA(e,n,p,r),g=e.memoizedState),(c=Io||m2(e,n,c,r,f,g,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return BA(t,e,n,r,s,i)}function BA(t,e,n,r,i,s){l$(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&l2(e,n,!1),go(t,e,s);r=e.stateNode,Jz.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Qf(e,t.child,null,s),e.child=Qf(e,null,o,s)):or(t,e,o,s),e.memoizedState=r.state,i&&l2(e,n,!0),e.child}function c$(t){var e=t.stateNode;e.pendingContext?o2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&o2(t,e.context,!1),RP(t,e.containerInfo)}function A2(t,e,n,r,i){return Jf(),PP(i),e.flags|=256,or(t,e,n,r),e.child}var UA={dehydrated:null,treeContext:null,retryLane:0};function zA(t){return{baseLanes:t,cachePool:null,transitions:null}}function u$(t,e,n){var r=e.pendingProps,i=Et.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lt(Et,i&1),t===null)return RA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=O1(a,r,0,null),t=Ku(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zA(n),e.memoizedState=UA,t):zP(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Qz(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ul(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ul(o,s):(s=Ku(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?zA(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=UA,r}return s=t.child,t=s.sibling,r=Ul(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zP(t,e){return e=O1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function L0(t,e,n,r){return r!==null&&PP(r),Qf(e,t.child,null,n),t=zP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qz(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=rS(Error(X(422))),L0(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=O1({mode:"visible",children:r.children},i,0,null),s=Ku(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qf(e,t.child,null,a),e.child.memoizedState=zA(a),e.memoizedState=UA,s);if(!(e.mode&1))return L0(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(X(419)),r=rS(s,r,void 0),L0(t,e,a,r)}if(o=(a&t.childLanes)!==0,Er||o){if(r=Sn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,po(t,i),bs(r,t,i,-1))}return KP(),r=rS(Error(X(421))),L0(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=h6.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,oi=$l(i.nextSibling),li=e,wt=!0,ps=null,t!==null&&(Ni[Ii++]=eo,Ni[Ii++]=to,Ni[Ii++]=Zu,eo=t.id,to=t.overflow,Zu=e),e=zP(e,r.children),e.flags|=4096,e)}function E2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jA(t.return,e,n)}function iS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function h$(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(or(t,e,r.children,n),r=Et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E2(t,n,e);else if(t.tag===19)E2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(Et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cw(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),iS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cw(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}iS(e,!0,n,null,s);break;case"together":iS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ab(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function go(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),th|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Ul(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ul(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Zz(t,e,n){switch(e.tag){case 3:c$(e),Jf();break;case 5:$D(e);break;case 1:Pr(e.type)&&xw(e);break;case 4:RP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;lt(Aw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(Et,Et.current&1),e.flags|=128,null):n&e.child.childLanes?u$(t,e,n):(lt(Et,Et.current&1),t=go(t,e,n),t!==null?t.sibling:null);lt(Et,Et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return h$(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(Et,Et.current),r)break;return null;case 22:case 23:return e.lanes=0,o$(t,e,n)}return go(t,e,n)}var d$,HA,f$,p$;d$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HA=function(){};f$=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ec(na.current);var s=null;switch(n){case"input":i=hA(t,i),r=hA(t,r),s=[];break;case"select":i=Ot({},i,{value:void 0}),r=Ot({},r,{value:void 0}),s=[];break;case"textarea":i=pA(t,i),r=pA(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bw)}mA(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&dt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};p$=function(t,e,n,r){n!==r&&(e.flags|=4)};function qp(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function e6(t,e,n){var r=e.pendingProps;switch(CP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return Pr(e.type)&&ww(),zn(e),null;case 3:return r=e.stateNode,Zf(),mt(Cr),mt(Zn),DP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(D0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ps!==null&&(JA(ps),ps=null))),HA(t,e),zn(e),null;case 5:jP(e);var i=Ec(fm.current);if(n=e.type,t!==null&&e.stateNode!=null)f$(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return zn(e),null}if(t=Ec(na.current),D0(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Js]=e,r[hm]=s,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(i=0;i<fg.length;i++)dt(fg[i],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Rk(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":Dk(r,s),dt("invalid",r)}mA(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&j0(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&j0(r.textContent,o,t),i=["children",""+o]):tm.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&dt("scroll",r)}switch(n){case"input":C0(r),jk(r,s,!0);break;case"textarea":C0(r),$k(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zj(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Js]=e,t[hm]=r,d$(t,e,!1,!1),e.stateNode=t;e:{switch(a=yA(n,r),n){case"dialog":dt("cancel",t),dt("close",t),i=r;break;case"iframe":case"object":case"embed":dt("load",t),i=r;break;case"video":case"audio":for(i=0;i<fg.length;i++)dt(fg[i],t);i=r;break;case"source":dt("error",t),i=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),i=r;break;case"details":dt("toggle",t),i=r;break;case"input":Rk(t,r),i=hA(t,r),dt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ot({},r,{value:void 0}),dt("invalid",t);break;case"textarea":Dk(t,r),i=pA(t,r),dt("invalid",t);break;default:i=r}mA(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Vj(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Hj(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nm(t,l):typeof l=="number"&&nm(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dt("scroll",t):l!=null&&dP(t,s,l,a))}switch(n){case"input":C0(t),jk(t,r,!1);break;case"textarea":C0(t),$k(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?cd(t,!!r.multiple,s,!1):r.defaultValue!=null&&cd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(t&&e.stateNode!=null)p$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Ec(fm.current),Ec(na.current),D0(e)){if(r=e.stateNode,n=e.memoizedProps,r[Js]=e,(s=r.nodeValue!==n)&&(t=li,t!==null))switch(t.tag){case 3:j0(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&j0(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Js]=e,e.stateNode=r}return zn(e),null;case 13:if(mt(Et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&oi!==null&&e.mode&1&&!(e.flags&128))ID(),Jf(),e.flags|=98560,s=!1;else if(s=D0(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Js]=e}else Jf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),s=!1}else ps!==null&&(JA(ps),ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?ln===0&&(ln=3):KP())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return Zf(),HA(t,e),t===null&&cm(e.stateNode.containerInfo),zn(e),null;case 10:return NP(e.type._context),zn(e),null;case 17:return Pr(e.type)&&ww(),zn(e),null;case 19:if(mt(Et),s=e.memoizedState,s===null)return zn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)qp(s,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Cw(t),a!==null){for(e.flags|=128,qp(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(Et,Et.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ut()>tp&&(e.flags|=128,r=!0,qp(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cw(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!wt)return zn(e),null}else 2*Ut()-s.renderingStartTime>tp&&n!==1073741824&&(e.flags|=128,r=!0,qp(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ut(),e.sibling=null,n=Et.current,lt(Et,r?n&1|2:n&1),e):(zn(e),null);case 22:case 23:return qP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ei&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function t6(t,e){switch(CP(e),e.tag){case 1:return Pr(e.type)&&ww(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zf(),mt(Cr),mt(Zn),DP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jP(e),null;case 13:if(mt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Jf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(Et),null;case 4:return Zf(),null;case 10:return NP(e.type._context),null;case 22:case 23:return qP(),null;case 24:return null;default:return null}}var F0=!1,Jn=!1,n6=typeof WeakSet=="function"?WeakSet:Set,re=null;function Jh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dt(t,e,r)}else n.current=null}function WA(t,e,n){try{n()}catch(r){Dt(t,e,r)}}var T2=!1;function r6(t,e){if(CA=mw,t=bD(),EP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(o=a),f===s&&++h===r&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(PA={focusedElem:t,selectionRange:n},mw=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,b=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ji(e.type,m),b);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(_){Dt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return g=T2,T2=!1,g}function Wg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&WA(e,n,s)}i=i.next}while(i!==r)}}function C1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function VA(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function g$(t){var e=t.alternate;e!==null&&(t.alternate=null,g$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Js],delete e[hm],delete e[NA],delete e[Fz],delete e[Bz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function m$(t){return t.tag===5||t.tag===3||t.tag===4}function C2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function GA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bw));else if(r!==4&&(t=t.child,t!==null))for(GA(t,e,n),t=t.sibling;t!==null;)GA(t,e,n),t=t.sibling}function qA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qA(t,e,n),t=t.sibling;t!==null;)qA(t,e,n),t=t.sibling}var Rn=null,hs=!1;function Po(t,e,n){for(n=n.child;n!==null;)y$(t,e,n),n=n.sibling}function y$(t,e,n){if(ta&&typeof ta.onCommitFiberUnmount=="function")try{ta.onCommitFiberUnmount(b1,n)}catch{}switch(n.tag){case 5:Jn||Jh(n,e);case 6:var r=Rn,i=hs;Rn=null,Po(t,e,n),Rn=r,hs=i,Rn!==null&&(hs?(t=Rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rn.removeChild(n.stateNode));break;case 18:Rn!==null&&(hs?(t=Rn,n=n.stateNode,t.nodeType===8?J_(t.parentNode,n):t.nodeType===1&&J_(t,n),am(t)):J_(Rn,n.stateNode));break;case 4:r=Rn,i=hs,Rn=n.stateNode.containerInfo,hs=!0,Po(t,e,n),Rn=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&WA(n,e,a),i=i.next}while(i!==r)}Po(t,e,n);break;case 1:if(!Jn&&(Jh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Dt(n,e,o)}Po(t,e,n);break;case 21:Po(t,e,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,Po(t,e,n),Jn=r):Po(t,e,n);break;default:Po(t,e,n)}}function P2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new n6),e.forEach(function(r){var i=d6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Rn=o.stateNode,hs=!1;break e;case 3:Rn=o.stateNode.containerInfo,hs=!0;break e;case 4:Rn=o.stateNode.containerInfo,hs=!0;break e}o=o.return}if(Rn===null)throw Error(X(160));y$(s,a,i),Rn=null,hs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)v$(e,t),e=e.sibling}function v$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gi(e,t),As(t),r&4){try{Wg(3,t,t.return),C1(3,t)}catch(m){Dt(t,t.return,m)}try{Wg(5,t,t.return)}catch(m){Dt(t,t.return,m)}}break;case 1:Gi(e,t),As(t),r&512&&n!==null&&Jh(n,n.return);break;case 5:if(Gi(e,t),As(t),r&512&&n!==null&&Jh(n,n.return),t.flags&32){var i=t.stateNode;try{nm(i,"")}catch(m){Dt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Bj(i,s),yA(o,a);var c=yA(o,s);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?Vj(i,d):h==="dangerouslySetInnerHTML"?Hj(i,d):h==="children"?nm(i,d):dP(i,h,d,c)}switch(o){case"input":dA(i,s);break;case"textarea":Uj(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?cd(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?cd(i,!!s.multiple,s.defaultValue,!0):cd(i,!!s.multiple,s.multiple?[]:"",!1))}i[hm]=s}catch(m){Dt(t,t.return,m)}}break;case 6:if(Gi(e,t),As(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Dt(t,t.return,m)}}break;case 3:if(Gi(e,t),As(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{am(e.containerInfo)}catch(m){Dt(t,t.return,m)}break;case 4:Gi(e,t),As(t);break;case 13:Gi(e,t),As(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(VP=Ut())),r&4&&P2(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Jn=(c=Jn)||h,Gi(e,t),Jn=c):Gi(e,t),As(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(re=t,h=t.child;h!==null;){for(d=re=h;re!==null;){switch(f=re,p=f.child,f.tag){case 0:case 11:case 14:case 15:Wg(4,f,f.return);break;case 1:Jh(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Dt(r,n,m)}}break;case 5:Jh(f,f.return);break;case 22:if(f.memoizedState!==null){k2(d);continue}}p!==null?(p.return=f,re=p):k2(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Wj("display",a))}catch(m){Dt(t,t.return,m)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Dt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gi(e,t),As(t),r&4&&P2(t);break;case 21:break;default:Gi(e,t),As(t)}}function As(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(m$(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nm(i,""),r.flags&=-33);var s=C2(t);qA(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=C2(t);GA(t,o,a);break;default:throw Error(X(161))}}catch(l){Dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i6(t,e,n){re=t,b$(t)}function b$(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||F0;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Jn;o=F0;var c=Jn;if(F0=a,(Jn=l)&&!c)for(re=i;re!==null;)a=re,l=a.child,a.tag===22&&a.memoizedState!==null?N2(i):l!==null?(l.return=a,re=l):N2(i);for(;s!==null;)re=s,b$(s),s=s.sibling;re=i,F0=o,Jn=c}O2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):O2(t)}}function O2(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||C1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ji(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&f2(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}f2(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&am(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Jn||e.flags&512&&VA(e)}catch(f){Dt(e,e.return,f)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function k2(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function N2(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{C1(4,e)}catch(l){Dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dt(e,i,l)}}var s=e.return;try{VA(e)}catch(l){Dt(e,s,l)}break;case 5:var a=e.return;try{VA(e)}catch(l){Dt(e,a,l)}}}catch(l){Dt(e,e.return,l)}if(e===t){re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,re=o;break}re=e.return}}var s6=Math.ceil,kw=_o.ReactCurrentDispatcher,HP=_o.ReactCurrentOwner,$i=_o.ReactCurrentBatchConfig,Re=0,Sn=null,qt=null,Fn=0,ei=0,Qh=Yl(0),ln=0,ym=null,th=0,P1=0,WP=0,Vg=null,Ar=null,VP=0,tp=1/0,fa=null,Nw=!1,KA=null,Fl=null,B0=!1,Nl=null,Iw=0,Gg=0,XA=null,Eb=-1,Tb=0;function ur(){return Re&6?Ut():Eb!==-1?Eb:Eb=Ut()}function Bl(t){return t.mode&1?Re&2&&Fn!==0?Fn&-Fn:zz.transition!==null?(Tb===0&&(Tb=rD()),Tb):(t=We,t!==0||(t=window.event,t=t===void 0?16:uD(t.type)),t):1}function bs(t,e,n,r){if(50<Gg)throw Gg=0,XA=null,Error(X(185));r0(t,n,r),(!(Re&2)||t!==Sn)&&(t===Sn&&(!(Re&2)&&(P1|=n),ln===4&&$o(t,Fn)),Or(t,r),n===1&&Re===0&&!(e.mode&1)&&(tp=Ut()+500,A1&&Jl()))}function Or(t,e){var n=t.callbackNode;z5(t,e);var r=gw(t,t===Sn?Fn:0);if(r===0)n!==null&&Bk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bk(n),e===1)t.tag===0?Uz(I2.bind(null,t)):OD(I2.bind(null,t)),$z(function(){!(Re&6)&&Jl()}),n=null;else{switch(iD(r)){case 1:n=yP;break;case 4:n=tD;break;case 16:n=pw;break;case 536870912:n=nD;break;default:n=pw}n=C$(n,w$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w$(t,e){if(Eb=-1,Tb=0,Re&6)throw Error(X(327));var n=t.callbackNode;if(pd()&&t.callbackNode!==n)return null;var r=gw(t,t===Sn?Fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mw(t,r);else{e=r;var i=Re;Re|=2;var s=_$();(Sn!==t||Fn!==e)&&(fa=null,tp=Ut()+500,qu(t,e));do try{l6();break}catch(o){x$(t,o)}while(!0);kP(),kw.current=s,Re=i,qt!==null?e=0:(Sn=null,Fn=0,e=ln)}if(e!==0){if(e===2&&(i=_A(t),i!==0&&(r=i,e=YA(t,i))),e===1)throw n=ym,qu(t,0),$o(t,r),Or(t,Ut()),n;if(e===6)$o(t,r);else{if(i=t.current.alternate,!(r&30)&&!a6(i)&&(e=Mw(t,r),e===2&&(s=_A(t),s!==0&&(r=s,e=YA(t,s))),e===1))throw n=ym,qu(t,0),$o(t,r),Or(t,Ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:cc(t,Ar,fa);break;case 3:if($o(t,r),(r&130023424)===r&&(e=VP+500-Ut(),10<e)){if(gw(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=kA(cc.bind(null,t,Ar,fa),e);break}cc(t,Ar,fa);break;case 4:if($o(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-vs(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*s6(r/1960))-r,10<r){t.timeoutHandle=kA(cc.bind(null,t,Ar,fa),r);break}cc(t,Ar,fa);break;case 5:cc(t,Ar,fa);break;default:throw Error(X(329))}}}return Or(t,Ut()),t.callbackNode===n?w$.bind(null,t):null}function YA(t,e){var n=Vg;return t.current.memoizedState.isDehydrated&&(qu(t,e).flags|=256),t=Mw(t,e),t!==2&&(e=Ar,Ar=n,e!==null&&JA(e)),t}function JA(t){Ar===null?Ar=t:Ar.push.apply(Ar,t)}function a6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $o(t,e){for(e&=~WP,e&=~P1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),r=1<<n;t[n]=-1,e&=~r}}function I2(t){if(Re&6)throw Error(X(327));pd();var e=gw(t,0);if(!(e&1))return Or(t,Ut()),null;var n=Mw(t,e);if(t.tag!==0&&n===2){var r=_A(t);r!==0&&(e=r,n=YA(t,r))}if(n===1)throw n=ym,qu(t,0),$o(t,e),Or(t,Ut()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cc(t,Ar,fa),Or(t,Ut()),null}function GP(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(tp=Ut()+500,A1&&Jl())}}function nh(t){Nl!==null&&Nl.tag===0&&!(Re&6)&&pd();var e=Re;Re|=1;var n=$i.transition,r=We;try{if($i.transition=null,We=1,t)return t()}finally{We=r,$i.transition=n,Re=e,!(Re&6)&&Jl()}}function qP(){ei=Qh.current,mt(Qh)}function qu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dz(n)),qt!==null)for(n=qt.return;n!==null;){var r=n;switch(CP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ww();break;case 3:Zf(),mt(Cr),mt(Zn),DP();break;case 5:jP(r);break;case 4:Zf();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:NP(r.type._context);break;case 22:case 23:qP()}n=n.return}if(Sn=t,qt=t=Ul(t.current,null),Fn=ei=e,ln=0,ym=null,WP=P1=th=0,Ar=Vg=null,Ac!==null){for(e=0;e<Ac.length;e++)if(n=Ac[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ac=null}return t}function x$(t,e){do{var n=qt;try{if(kP(),_b.current=Ow,Pw){for(var r=Ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pw=!1}if(eh=0,_n=on=Ct=null,Hg=!1,pm=0,HP.current=null,n===null||n.return===null){ln=1,ym=e,qt=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Fn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=b2(a);if(p!==null){p.flags&=-257,w2(p,a,o,s,e),p.mode&1&&v2(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){v2(s,c,e),KP();break e}l=Error(X(426))}}else if(wt&&o.mode&1){var b=b2(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),w2(b,a,o,s,e),PP(ep(l,o));break e}}s=l=ep(l,o),ln!==4&&(ln=2),Vg===null?Vg=[s]:Vg.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=i$(s,l,e);d2(s,y);break e;case 1:o=l;var w=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Fl===null||!Fl.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=s$(s,o,e);d2(s,_);break e}}s=s.return}while(s!==null)}A$(n)}catch(x){e=x,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function _$(){var t=kw.current;return kw.current=Ow,t===null?Ow:t}function KP(){(ln===0||ln===3||ln===2)&&(ln=4),Sn===null||!(th&268435455)&&!(P1&268435455)||$o(Sn,Fn)}function Mw(t,e){var n=Re;Re|=2;var r=_$();(Sn!==t||Fn!==e)&&(fa=null,qu(t,e));do try{o6();break}catch(i){x$(t,i)}while(!0);if(kP(),Re=n,kw.current=r,qt!==null)throw Error(X(261));return Sn=null,Fn=0,ln}function o6(){for(;qt!==null;)S$(qt)}function l6(){for(;qt!==null&&!M5();)S$(qt)}function S$(t){var e=T$(t.alternate,t,ei);t.memoizedProps=t.pendingProps,e===null?A$(t):qt=e,HP.current=null}function A$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=t6(n,e),n!==null){n.flags&=32767,qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,qt=null;return}}else if(n=e6(n,e,ei),n!==null){qt=n;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);ln===0&&(ln=5)}function cc(t,e,n){var r=We,i=$i.transition;try{$i.transition=null,We=1,c6(t,e,n,r)}finally{$i.transition=i,We=r}return null}function c6(t,e,n,r){do pd();while(Nl!==null);if(Re&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(H5(t,s),t===Sn&&(qt=Sn=null,Fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||B0||(B0=!0,C$(pw,function(){return pd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$i.transition,$i.transition=null;var a=We;We=1;var o=Re;Re|=4,HP.current=null,r6(t,n),v$(n,t),Oz(PA),mw=!!CA,PA=CA=null,t.current=n,i6(n),R5(),Re=o,We=a,$i.transition=s}else t.current=n;if(B0&&(B0=!1,Nl=t,Iw=i),s=t.pendingLanes,s===0&&(Fl=null),$5(n.stateNode),Or(t,Ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nw)throw Nw=!1,t=KA,KA=null,t;return Iw&1&&t.tag!==0&&pd(),s=t.pendingLanes,s&1?t===XA?Gg++:(Gg=0,XA=t):Gg=0,Jl(),null}function pd(){if(Nl!==null){var t=iD(Iw),e=$i.transition,n=We;try{if($i.transition=null,We=16>t?16:t,Nl===null)var r=!1;else{if(t=Nl,Nl=null,Iw=0,Re&6)throw Error(X(331));var i=Re;for(Re|=4,re=t.current;re!==null;){var s=re,a=s.child;if(re.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(re=c;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:Wg(8,h,s)}var d=h.child;if(d!==null)d.return=h,re=d;else for(;re!==null;){h=re;var f=h.sibling,p=h.return;if(g$(h),h===c){re=null;break}if(f!==null){f.return=p,re=f;break}re=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}re=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,re=a;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wg(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,re=y;break e}re=s.return}}var w=t.current;for(re=w;re!==null;){a=re;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,re=v;else e:for(a=w;re!==null;){if(o=re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:C1(9,o)}}catch(x){Dt(o,o.return,x)}if(o===a){re=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,re=_;break e}re=o.return}}if(Re=i,Jl(),ta&&typeof ta.onPostCommitFiberRoot=="function")try{ta.onPostCommitFiberRoot(b1,t)}catch{}r=!0}return r}finally{We=n,$i.transition=e}}return!1}function M2(t,e,n){e=ep(n,e),e=i$(t,e,1),t=Ll(t,e,1),e=ur(),t!==null&&(r0(t,1,e),Or(t,e))}function Dt(t,e,n){if(t.tag===3)M2(t,t,n);else for(;e!==null;){if(e.tag===3){M2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fl===null||!Fl.has(r))){t=ep(n,t),t=s$(e,t,1),e=Ll(e,t,1),t=ur(),e!==null&&(r0(e,1,t),Or(e,t));break}}e=e.return}}function u6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ur(),t.pingedLanes|=t.suspendedLanes&n,Sn===t&&(Fn&n)===n&&(ln===4||ln===3&&(Fn&130023424)===Fn&&500>Ut()-VP?qu(t,0):WP|=n),Or(t,e)}function E$(t,e){e===0&&(t.mode&1?(e=k0,k0<<=1,!(k0&130023424)&&(k0=4194304)):e=1);var n=ur();t=po(t,e),t!==null&&(r0(t,e,n),Or(t,n))}function h6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E$(t,n)}function d6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),E$(t,n)}var T$;T$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cr.current)Er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Er=!1,Zz(t,e,n);Er=!!(t.flags&131072)}else Er=!1,wt&&e.flags&1048576&&kD(e,Sw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ab(t,e),t=e.pendingProps;var i=Yf(e,Zn.current);fd(e,n),i=LP(null,e,r,t,i,n);var s=FP();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(r)?(s=!0,xw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,MP(e),i.updater=T1,e.stateNode=i,i._reactInternals=e,$A(e,r,t,n),e=BA(null,e,r,!0,s,n)):(e.tag=0,wt&&s&&TP(e),or(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ab(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=p6(r),t=Ji(r,t),i){case 0:e=FA(null,e,r,t,n);break e;case 1:e=S2(null,e,r,t,n);break e;case 11:e=x2(null,e,r,t,n);break e;case 14:e=_2(null,e,r,Ji(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),FA(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),S2(t,e,r,i,n);case 3:e:{if(c$(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,DD(t,e),Tw(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ep(Error(X(423)),e),e=A2(t,e,r,n,i);break e}else if(r!==i){i=ep(Error(X(424)),e),e=A2(t,e,r,n,i);break e}else for(oi=$l(e.stateNode.containerInfo.firstChild),li=e,wt=!0,ps=null,n=RD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jf(),r===i){e=go(t,e,n);break e}or(t,e,r,n)}e=e.child}return e;case 5:return $D(e),t===null&&RA(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,OA(r,i)?a=null:s!==null&&OA(r,s)&&(e.flags|=32),l$(t,e),or(t,e,a,n),e.child;case 6:return t===null&&RA(e),null;case 13:return u$(t,e,n);case 4:return RP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qf(e,null,r,n):or(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),x2(t,e,r,i,n);case 7:return or(t,e,e.pendingProps,n),e.child;case 8:return or(t,e,e.pendingProps.children,n),e.child;case 12:return or(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,lt(Aw,r._currentValue),r._currentValue=a,s!==null)if(xs(s.value,a)){if(s.children===i.children&&!Cr.current){e=go(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=so(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jA(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(X(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),jA(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}or(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fd(e,n),i=Bi(i),r=r(i),e.flags|=1,or(t,e,r,n),e.child;case 14:return r=e.type,i=Ji(r,e.pendingProps),i=Ji(r.type,i),_2(t,e,r,i,n);case 15:return a$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),Ab(t,e),e.tag=1,Pr(r)?(t=!0,xw(e)):t=!1,fd(e,n),r$(e,r,i),$A(e,r,i,n),BA(null,e,r,!0,t,n);case 19:return h$(t,e,n);case 22:return o$(t,e,n)}throw Error(X(156,e.tag))};function C$(t,e){return eD(t,e)}function f6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(t,e,n,r){return new f6(t,e,n,r)}function XP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p6(t){if(typeof t=="function")return XP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pP)return 11;if(t===gP)return 14}return 2}function Ul(t,e){var n=t.alternate;return n===null?(n=ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cb(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")XP(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zh:return Ku(n.children,i,s,e);case fP:a=8,i|=8;break;case oA:return t=ji(12,n,e,i|2),t.elementType=oA,t.lanes=s,t;case lA:return t=ji(13,n,e,i),t.elementType=lA,t.lanes=s,t;case cA:return t=ji(19,n,e,i),t.elementType=cA,t.lanes=s,t;case $j:return O1(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jj:a=10;break e;case Dj:a=9;break e;case pP:a=11;break e;case gP:a=14;break e;case No:a=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=ji(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ku(t,e,n,r){return t=ji(7,t,r,e),t.lanes=n,t}function O1(t,e,n,r){return t=ji(22,t,r,e),t.elementType=$j,t.lanes=n,t.stateNode={isHidden:!1},t}function sS(t,e,n){return t=ji(6,t,null,e),t.lanes=n,t}function aS(t,e,n){return e=ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=B_(0),this.expirationTimes=B_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YP(t,e,n,r,i,s,a,o,l){return t=new g6(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ji(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MP(s),t}function m6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P$(t){if(!t)return Vl;t=t._reactInternals;e:{if(hh(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Pr(n))return PD(t,n,e)}return e}function O$(t,e,n,r,i,s,a,o,l){return t=YP(n,r,!0,t,i,s,a,o,l),t.context=P$(null),n=t.current,r=ur(),i=Bl(n),s=so(r,i),s.callback=e??null,Ll(n,s,i),t.current.lanes=i,r0(t,i,r),Or(t,r),t}function k1(t,e,n,r){var i=e.current,s=ur(),a=Bl(i);return n=P$(n),e.context===null?e.context=n:e.pendingContext=n,e=so(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ll(i,e,a),t!==null&&(bs(t,i,a,s),xb(t,i,a)),a}function Rw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function JP(t,e){R2(t,e),(t=t.alternate)&&R2(t,e)}function y6(){return null}var k$=typeof reportError=="function"?reportError:function(t){console.error(t)};function QP(t){this._internalRoot=t}N1.prototype.render=QP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));k1(t,e,null,null)};N1.prototype.unmount=QP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nh(function(){k1(null,t,null,null)}),e[fo]=null}};function N1(t){this._internalRoot=t}N1.prototype.unstable_scheduleHydration=function(t){if(t){var e=oD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Do.length&&e!==0&&e<Do[n].priority;n++);Do.splice(n,0,t),n===0&&cD(t)}};function ZP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function I1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j2(){}function v6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Rw(a);s.call(c)}}var a=O$(e,r,t,0,null,!1,!1,"",j2);return t._reactRootContainer=a,t[fo]=a.current,cm(t.nodeType===8?t.parentNode:t),nh(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=Rw(l);o.call(c)}}var l=YP(t,0,!1,null,null,!1,!1,"",j2);return t._reactRootContainer=l,t[fo]=l.current,cm(t.nodeType===8?t.parentNode:t),nh(function(){k1(e,l,n,r)}),l}function M1(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Rw(a);o.call(l)}}k1(e,a,t,i)}else a=v6(n,e,t,i,r);return Rw(a)}sD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dg(e.pendingLanes);n!==0&&(vP(e,n|1),Or(e,Ut()),!(Re&6)&&(tp=Ut()+500,Jl()))}break;case 13:nh(function(){var r=po(t,1);if(r!==null){var i=ur();bs(r,t,1,i)}}),JP(t,1)}};bP=function(t){if(t.tag===13){var e=po(t,134217728);if(e!==null){var n=ur();bs(e,t,134217728,n)}JP(t,134217728)}};aD=function(t){if(t.tag===13){var e=Bl(t),n=po(t,e);if(n!==null){var r=ur();bs(n,t,e,r)}JP(t,e)}};oD=function(){return We};lD=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};bA=function(t,e,n){switch(e){case"input":if(dA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=S1(r);if(!i)throw Error(X(90));Fj(r),dA(r,i)}}}break;case"textarea":Uj(t,n);break;case"select":e=n.value,e!=null&&cd(t,!!n.multiple,e,!1)}};Kj=GP;Xj=nh;var b6={usingClientEntryPoint:!1,Events:[s0,Gh,S1,Gj,qj,GP]},Kp={findFiberByHostInstance:Sc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w6={bundleType:Kp.bundleType,version:Kp.version,rendererPackageName:Kp.rendererPackageName,rendererConfig:Kp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_o.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qj(t),t===null?null:t.stateNode},findFiberByHostInstance:Kp.findFiberByHostInstance||y6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U0.isDisabled&&U0.supportsFiber)try{b1=U0.inject(w6),ta=U0}catch{}}di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b6;di.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZP(e))throw Error(X(200));return m6(t,e,null,n)};di.createRoot=function(t,e){if(!ZP(t))throw Error(X(299));var n=!1,r="",i=k$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=YP(t,1,!1,null,null,n,!1,r,i),t[fo]=e.current,cm(t.nodeType===8?t.parentNode:t),new QP(e)};di.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=Qj(e),t=t===null?null:t.stateNode,t};di.flushSync=function(t){return nh(t)};di.hydrate=function(t,e,n){if(!I1(e))throw Error(X(200));return M1(null,t,e,!0,n)};di.hydrateRoot=function(t,e,n){if(!ZP(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=k$;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=O$(e,null,t,1,n??null,i,!1,s,a),t[fo]=e.current,cm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new N1(e)};di.render=function(t,e,n){if(!I1(e))throw Error(X(200));return M1(null,t,e,!1,n)};di.unmountComponentAtNode=function(t){if(!I1(t))throw Error(X(40));return t._reactRootContainer?(nh(function(){M1(null,null,t,!1,function(){t._reactRootContainer=null,t[fo]=null})}),!0):!1};di.unstable_batchedUpdates=GP;di.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!I1(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return M1(t,e,n,!1,r)};di.version="18.3.1-next-f1338f8080-20240426";function N$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N$)}catch(t){console.error(t)}}N$(),Nj.exports=di;var x6=Nj.exports,D2=x6;sA.createRoot=D2.createRoot,sA.hydrateRoot=D2.hydrateRoot;function I$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=I$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function De(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=I$(t))&&(r&&(r+=" "),r+=e);return r}var _6=Array.isArray,kr=_6,S6=typeof A0=="object"&&A0&&A0.Object===Object&&A0,M$=S6,A6=M$,E6=typeof self=="object"&&self&&self.Object===Object&&self,T6=A6||E6||Function("return this")(),la=T6,C6=la,P6=C6.Symbol,o0=P6,$2=o0,R$=Object.prototype,O6=R$.hasOwnProperty,k6=R$.toString,Xp=$2?$2.toStringTag:void 0;function N6(t){var e=O6.call(t,Xp),n=t[Xp];try{t[Xp]=void 0;var r=!0}catch{}var i=k6.call(t);return r&&(e?t[Xp]=n:delete t[Xp]),i}var I6=N6,M6=Object.prototype,R6=M6.toString;function j6(t){return R6.call(t)}var D6=j6,L2=o0,$6=I6,L6=D6,F6="[object Null]",B6="[object Undefined]",F2=L2?L2.toStringTag:void 0;function U6(t){return t==null?t===void 0?B6:F6:F2&&F2 in Object(t)?$6(t):L6(t)}var So=U6;function z6(t){return t!=null&&typeof t=="object"}var Ao=z6,H6=So,W6=Ao,V6="[object Symbol]";function G6(t){return typeof t=="symbol"||W6(t)&&H6(t)==V6}var Cp=G6,q6=kr,K6=Cp,X6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y6=/^\w*$/;function J6(t,e){if(q6(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||K6(t)?!0:Y6.test(t)||!X6.test(t)||e!=null&&t in Object(e)}var eO=J6;function Q6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ql=Q6;const Pp=ut(Ql);var Z6=So,e8=Ql,t8="[object AsyncFunction]",n8="[object Function]",r8="[object GeneratorFunction]",i8="[object Proxy]";function s8(t){if(!e8(t))return!1;var e=Z6(t);return e==n8||e==r8||e==t8||e==i8}var tO=s8;const Ee=ut(tO);var a8=la,o8=a8["__core-js_shared__"],l8=o8,oS=l8,B2=function(){var t=/[^.]+$/.exec(oS&&oS.keys&&oS.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function c8(t){return!!B2&&B2 in t}var u8=c8,h8=Function.prototype,d8=h8.toString;function f8(t){if(t!=null){try{return d8.call(t)}catch{}try{return t+""}catch{}}return""}var j$=f8,p8=tO,g8=u8,m8=Ql,y8=j$,v8=/[\\^$.*+?()[\]{}|]/g,b8=/^\[object .+?Constructor\]$/,w8=Function.prototype,x8=Object.prototype,_8=w8.toString,S8=x8.hasOwnProperty,A8=RegExp("^"+_8.call(S8).replace(v8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E8(t){if(!m8(t)||g8(t))return!1;var e=p8(t)?A8:b8;return e.test(y8(t))}var T8=E8;function C8(t,e){return t==null?void 0:t[e]}var P8=C8,O8=T8,k8=P8;function N8(t,e){var n=k8(t,e);return O8(n)?n:void 0}var dh=N8,I8=dh,M8=I8(Object,"create"),R1=M8,U2=R1;function R8(){this.__data__=U2?U2(null):{},this.size=0}var j8=R8;function D8(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $8=D8,L8=R1,F8="__lodash_hash_undefined__",B8=Object.prototype,U8=B8.hasOwnProperty;function z8(t){var e=this.__data__;if(L8){var n=e[t];return n===F8?void 0:n}return U8.call(e,t)?e[t]:void 0}var H8=z8,W8=R1,V8=Object.prototype,G8=V8.hasOwnProperty;function q8(t){var e=this.__data__;return W8?e[t]!==void 0:G8.call(e,t)}var K8=q8,X8=R1,Y8="__lodash_hash_undefined__";function J8(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=X8&&e===void 0?Y8:e,this}var Q8=J8,Z8=j8,eH=$8,tH=H8,nH=K8,rH=Q8;function Op(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Op.prototype.clear=Z8;Op.prototype.delete=eH;Op.prototype.get=tH;Op.prototype.has=nH;Op.prototype.set=rH;var iH=Op;function sH(){this.__data__=[],this.size=0}var aH=sH;function oH(t,e){return t===e||t!==t&&e!==e}var nO=oH,lH=nO;function cH(t,e){for(var n=t.length;n--;)if(lH(t[n][0],e))return n;return-1}var j1=cH,uH=j1,hH=Array.prototype,dH=hH.splice;function fH(t){var e=this.__data__,n=uH(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dH.call(e,n,1),--this.size,!0}var pH=fH,gH=j1;function mH(t){var e=this.__data__,n=gH(e,t);return n<0?void 0:e[n][1]}var yH=mH,vH=j1;function bH(t){return vH(this.__data__,t)>-1}var wH=bH,xH=j1;function _H(t,e){var n=this.__data__,r=xH(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var SH=_H,AH=aH,EH=pH,TH=yH,CH=wH,PH=SH;function kp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kp.prototype.clear=AH;kp.prototype.delete=EH;kp.prototype.get=TH;kp.prototype.has=CH;kp.prototype.set=PH;var D1=kp,OH=dh,kH=la,NH=OH(kH,"Map"),rO=NH,z2=iH,IH=D1,MH=rO;function RH(){this.size=0,this.__data__={hash:new z2,map:new(MH||IH),string:new z2}}var jH=RH;function DH(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var $H=DH,LH=$H;function FH(t,e){var n=t.__data__;return LH(e)?n[typeof e=="string"?"string":"hash"]:n.map}var $1=FH,BH=$1;function UH(t){var e=BH(this,t).delete(t);return this.size-=e?1:0,e}var zH=UH,HH=$1;function WH(t){return HH(this,t).get(t)}var VH=WH,GH=$1;function qH(t){return GH(this,t).has(t)}var KH=qH,XH=$1;function YH(t,e){var n=XH(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var JH=YH,QH=jH,ZH=zH,eW=VH,tW=KH,nW=JH;function Np(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Np.prototype.clear=QH;Np.prototype.delete=ZH;Np.prototype.get=eW;Np.prototype.has=tW;Np.prototype.set=nW;var iO=Np,D$=iO,rW="Expected a function";function sO(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(rW);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(sO.Cache||D$),n}sO.Cache=D$;var $$=sO;const iW=ut($$);var sW=$$,aW=500;function oW(t){var e=sW(t,function(r){return n.size===aW&&n.clear(),r}),n=e.cache;return e}var lW=oW,cW=lW,uW=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hW=/\\(\\)?/g,dW=cW(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(uW,function(n,r,i,s){e.push(i?s.replace(hW,"$1"):r||n)}),e}),fW=dW;function pW(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var aO=pW,H2=o0,gW=aO,mW=kr,yW=Cp,W2=H2?H2.prototype:void 0,V2=W2?W2.toString:void 0;function L$(t){if(typeof t=="string")return t;if(mW(t))return gW(t,L$)+"";if(yW(t))return V2?V2.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var vW=L$,bW=vW;function wW(t){return t==null?"":bW(t)}var F$=wW,xW=kr,_W=eO,SW=fW,AW=F$;function EW(t,e){return xW(t)?t:_W(t,e)?[t]:SW(AW(t))}var B$=EW,TW=Cp;function CW(t){if(typeof t=="string"||TW(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var L1=CW,PW=B$,OW=L1;function kW(t,e){e=PW(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[OW(e[n++])];return n&&n==r?t:void 0}var oO=kW,NW=oO;function IW(t,e,n){var r=t==null?void 0:NW(t,e);return r===void 0?n:r}var U$=IW;const Li=ut(U$);function MW(t){return t==null}var RW=MW;const Oe=ut(RW);var jW=So,DW=kr,$W=Ao,LW="[object String]";function FW(t){return typeof t=="string"||!DW(t)&&$W(t)&&jW(t)==LW}var BW=FW;const rh=ut(BW);var z$={exports:{}},Ve={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lO=Symbol.for("react.element"),cO=Symbol.for("react.portal"),F1=Symbol.for("react.fragment"),B1=Symbol.for("react.strict_mode"),U1=Symbol.for("react.profiler"),z1=Symbol.for("react.provider"),H1=Symbol.for("react.context"),UW=Symbol.for("react.server_context"),W1=Symbol.for("react.forward_ref"),V1=Symbol.for("react.suspense"),G1=Symbol.for("react.suspense_list"),q1=Symbol.for("react.memo"),K1=Symbol.for("react.lazy"),zW=Symbol.for("react.offscreen"),H$;H$=Symbol.for("react.module.reference");function Wi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case lO:switch(t=t.type,t){case F1:case U1:case B1:case V1:case G1:return t;default:switch(t=t&&t.$$typeof,t){case UW:case H1:case W1:case K1:case q1:case z1:return t;default:return e}}case cO:return e}}}Ve.ContextConsumer=H1;Ve.ContextProvider=z1;Ve.Element=lO;Ve.ForwardRef=W1;Ve.Fragment=F1;Ve.Lazy=K1;Ve.Memo=q1;Ve.Portal=cO;Ve.Profiler=U1;Ve.StrictMode=B1;Ve.Suspense=V1;Ve.SuspenseList=G1;Ve.isAsyncMode=function(){return!1};Ve.isConcurrentMode=function(){return!1};Ve.isContextConsumer=function(t){return Wi(t)===H1};Ve.isContextProvider=function(t){return Wi(t)===z1};Ve.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===lO};Ve.isForwardRef=function(t){return Wi(t)===W1};Ve.isFragment=function(t){return Wi(t)===F1};Ve.isLazy=function(t){return Wi(t)===K1};Ve.isMemo=function(t){return Wi(t)===q1};Ve.isPortal=function(t){return Wi(t)===cO};Ve.isProfiler=function(t){return Wi(t)===U1};Ve.isStrictMode=function(t){return Wi(t)===B1};Ve.isSuspense=function(t){return Wi(t)===V1};Ve.isSuspenseList=function(t){return Wi(t)===G1};Ve.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===F1||t===U1||t===B1||t===V1||t===G1||t===zW||typeof t=="object"&&t!==null&&(t.$$typeof===K1||t.$$typeof===q1||t.$$typeof===z1||t.$$typeof===H1||t.$$typeof===W1||t.$$typeof===H$||t.getModuleId!==void 0)};Ve.typeOf=Wi;z$.exports=Ve;var HW=z$.exports,WW=So,VW=Ao,GW="[object Number]";function qW(t){return typeof t=="number"||VW(t)&&WW(t)==GW}var W$=qW;const KW=ut(W$);var XW=W$;function YW(t){return XW(t)&&t!=+t}var JW=YW;const Ip=ut(JW);var ms=function(e){return e===0?0:e>0?1:-1},Tc=function(e){return rh(e)&&e.indexOf("%")===e.length-1},J=function(e){return KW(e)&&!Ip(e)},QW=function(e){return Oe(e)},cn=function(e){return J(e)||rh(e)},ZW=0,l0=function(e){var n=++ZW;return"".concat(e||"").concat(n)},ih=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!J(e)&&!rh(e))return r;var s;if(Tc(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Ip(s)&&(s=r),i&&s>n&&(s=n),s},Oh=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},eV=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Mi=function(e,n){return J(e)&&J(n)?function(r){return e+r*(n-e)}:function(){return n}};function jw(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Li(r,e))===n})}var tV=function(e,n){return J(e)&&J(n)?e-n:rh(e)&&rh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function gd(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function QA(t){"@babel/helpers - typeof";return QA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QA(t)}var nV=["viewBox","children"],rV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],G2=["points","pathLength"],lS={svg:nV,polygon:G2,polyline:G2},uO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Dw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(z.isValidElement(e)&&(r=e.props),!Pp(r))return null;var i={};return Object.keys(r).forEach(function(s){uO.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},iV=function(e,n,r){return function(i){return e(n,r,i),null}},$w=function(e,n,r){if(!Pp(e)||QA(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];uO.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=iV(a,n,r))}),i},sV=["children"],aV=["children"];function q2(t,e){if(t==null)return{};var n=oV(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZA(t){"@babel/helpers - typeof";return ZA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZA(t)}var K2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ao=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},X2=null,cS=null,hO=function t(e){if(e===X2&&Array.isArray(cS))return cS;var n=[];return z.Children.forEach(e,function(r){Oe(r)||(HW.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),cS=n,X2=e,n};function ws(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ao(i)}):r=[ao(e)],hO(t).forEach(function(i){var s=Li(i,"type.displayName")||Li(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function ti(t,e){var n=ws(t,e);return n&&n[0]}var Y2=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!J(r)||r<=0||!J(i)||i<=0)},lV=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],cV=function(e){return e&&e.type&&rh(e.type)&&lV.indexOf(e.type)>=0},uV=function(e){return e&&ZA(e)==="object"&&"clipDot"in e},hV=function(e,n,r,i){var s,a=(s=lS==null?void 0:lS[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Ee(e)&&(i&&a.includes(n)||rV.includes(n))||r&&uO.includes(n)},Pe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(z.isValidElement(e)&&(i=e.props),!Pp(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;hV((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},eE=function t(e,n){if(e===n)return!0;var r=z.Children.count(e);if(r!==z.Children.count(n))return!1;if(r===0)return!0;if(r===1)return J2(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!J2(s,a))return!1}return!0},J2=function(e,n){if(Oe(e)&&Oe(n))return!0;if(!Oe(e)&&!Oe(n)){var r=e.props||{},i=r.children,s=q2(r,sV),a=n.props||{},o=a.children,l=q2(a,aV);return i&&o?gd(s,l)&&eE(i,o):!i&&!o?gd(s,l):!1}return!1},Q2=function(e,n){var r=[],i={};return hO(e).forEach(function(s,a){if(cV(s))r.push(s);else if(s){var o=ao(s.type),l=n[o]||{},c=l.handler,h=l.once;if(c&&(!h||!i[o])){var d=c(s,o,a);r.push(d),i[o]=!0}}}),r},dV=function(e){var n=e&&e.type;return n&&K2[n]?K2[n]:null},fV=function(e,n){return hO(n).indexOf(e)},pV=["children","width","height","viewBox","className","style","title","desc"];function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(this,arguments)}function gV(t,e){if(t==null)return{};var n=mV(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,l=t.desc,c=gV(t,pV),h=i||{width:n,height:r,x:0,y:0},d=De("recharts-surface",s);return L.createElement("svg",tE({},Pe(c,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),L.createElement("title",null,o),L.createElement("desc",null,l),e)}var yV=["children","className"];function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rE.apply(this,arguments)}function vV(t,e){if(t==null)return{};var n=bV(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Tt=L.forwardRef(function(t,e){var n=t.children,r=t.className,i=vV(t,yV),s=De("recharts-layer",r);return L.createElement("g",rE({className:s},Pe(i,!0),{ref:e}),n)}),Xu=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function wV(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var xV=wV,_V=xV;function SV(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:_V(t,e,n)}var AV=SV,EV="\\ud800-\\udfff",TV="\\u0300-\\u036f",CV="\\ufe20-\\ufe2f",PV="\\u20d0-\\u20ff",OV=TV+CV+PV,kV="\\ufe0e\\ufe0f",NV="\\u200d",IV=RegExp("["+NV+EV+OV+kV+"]");function MV(t){return IV.test(t)}var V$=MV;function RV(t){return t.split("")}var jV=RV,G$="\\ud800-\\udfff",DV="\\u0300-\\u036f",$V="\\ufe20-\\ufe2f",LV="\\u20d0-\\u20ff",FV=DV+$V+LV,BV="\\ufe0e\\ufe0f",UV="["+G$+"]",iE="["+FV+"]",sE="\\ud83c[\\udffb-\\udfff]",zV="(?:"+iE+"|"+sE+")",q$="[^"+G$+"]",K$="(?:\\ud83c[\\udde6-\\uddff]){2}",X$="[\\ud800-\\udbff][\\udc00-\\udfff]",HV="\\u200d",Y$=zV+"?",J$="["+BV+"]?",WV="(?:"+HV+"(?:"+[q$,K$,X$].join("|")+")"+J$+Y$+")*",VV=J$+Y$+WV,GV="(?:"+[q$+iE+"?",iE,K$,X$,UV].join("|")+")",qV=RegExp(sE+"(?="+sE+")|"+GV+VV,"g");function KV(t){return t.match(qV)||[]}var XV=KV,YV=jV,JV=V$,QV=XV;function ZV(t){return JV(t)?QV(t):YV(t)}var eG=ZV,tG=AV,nG=V$,rG=eG,iG=F$;function sG(t){return function(e){e=iG(e);var n=nG(e)?rG(e):void 0,r=n?n[0]:e.charAt(0),i=n?tG(n,1).join(""):e.slice(1);return r[t]()+i}}var aG=sG,oG=aG,lG=oG("toUpperCase"),cG=lG;const X1=ut(cG);function ot(t){return function(){return t}}const Q$=Math.cos,Lw=Math.sin,Ss=Math.sqrt,Fw=Math.PI,Y1=2*Fw,aE=Math.PI,oE=2*aE,uc=1e-6,uG=oE-uc;function Z$(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hG(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Z$;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dG{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Z$:hG(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,h=a-e,d=o-n,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>uc)if(!(Math.abs(d*l-c*h)>uc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,g=i-o,m=l*l+c*c,b=p*p+g*g,y=Math.sqrt(m),w=Math.sqrt(f),v=s*Math.tan((aE-Math.acos((m+f-b)/(2*y*w)))/2),_=v/w,x=v/y;Math.abs(_-1)>uc&&this._append`L${e+_*h},${n+_*d}`,this._append`A${s},${s},0,0,${+(d*p>h*g)},${this._x1=e+x*l},${this._y1=n+x*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,h=n+l,d=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>uc||Math.abs(this._y1-h)>uc)&&this._append`L${c},${h}`,r&&(f<0&&(f=f%oE+oE),f>uG?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=h}`:f>uc&&this._append`A${r},${r},0,${+(f>=aE)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function dO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new dG(e)}function fO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eL(t){this._context=t}eL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function J1(t){return new eL(t)}function tL(t){return t[0]}function nL(t){return t[1]}function rL(t,e){var n=ot(!0),r=null,i=J1,s=null,a=dO(o);t=typeof t=="function"?t:t===void 0?tL:ot(t),e=typeof e=="function"?e:e===void 0?nL:ot(e);function o(l){var c,h=(l=fO(l)).length,d,f=!1,p;for(r==null&&(s=i(p=a())),c=0;c<=h;++c)!(c<h&&n(d=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,c,l),+e(d,c,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:ot(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:ot(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ot(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function z0(t,e,n){var r=null,i=ot(!0),s=null,a=J1,o=null,l=dO(c);t=typeof t=="function"?t:t===void 0?tL:ot(+t),e=typeof e=="function"?e:ot(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?nL:ot(+n);function c(d){var f,p,g,m=(d=fO(d)).length,b,y=!1,w,v=new Array(m),_=new Array(m);for(s==null&&(o=a(w=l())),f=0;f<=m;++f){if(!(f<m&&i(b=d[f],f,d))===y)if(y=!y)p=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=f-1;g>=p;--g)o.point(v[g],_[g]);o.lineEnd(),o.areaEnd()}y&&(v[f]=+t(b,f,d),_[f]=+e(b,f,d),o.point(r?+r(b,f,d):v[f],n?+n(b,f,d):_[f]))}if(w)return o=null,w+""||null}function h(){return rL().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:ot(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:ot(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:ot(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:ot(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:ot(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:ot(+d),c):n},c.lineX0=c.lineY0=function(){return h().x(t).y(e)},c.lineY1=function(){return h().x(t).y(n)},c.lineX1=function(){return h().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:ot(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class iL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function fG(t){return new iL(t,!0)}function pG(t){return new iL(t,!1)}const pO={draw(t,e){const n=Ss(e/Fw);t.moveTo(n,0),t.arc(0,0,n,0,Y1)}},gG={draw(t,e){const n=Ss(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},sL=Ss(1/3),mG=sL*2,yG={draw(t,e){const n=Ss(e/mG),r=n*sL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},vG={draw(t,e){const n=Ss(e),r=-n/2;t.rect(r,r,n,n)}},bG=.8908130915292852,aL=Lw(Fw/10)/Lw(7*Fw/10),wG=Lw(Y1/10)*aL,xG=-Q$(Y1/10)*aL,_G={draw(t,e){const n=Ss(e*bG),r=wG*n,i=xG*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=Y1*s/5,o=Q$(a),l=Lw(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},uS=Ss(3),SG={draw(t,e){const n=-Ss(e/(uS*3));t.moveTo(0,n*2),t.lineTo(-uS*n,-n),t.lineTo(uS*n,-n),t.closePath()}},pi=-.5,gi=Ss(3)/2,lE=1/Ss(12),AG=(lE/2+1)*3,EG={draw(t,e){const n=Ss(e/AG),r=n/2,i=n*lE,s=r,a=n*lE+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(pi*r-gi*i,gi*r+pi*i),t.lineTo(pi*s-gi*a,gi*s+pi*a),t.lineTo(pi*o-gi*l,gi*o+pi*l),t.lineTo(pi*r+gi*i,pi*i-gi*r),t.lineTo(pi*s+gi*a,pi*a-gi*s),t.lineTo(pi*o+gi*l,pi*l-gi*o),t.closePath()}};function TG(t,e){let n=null,r=dO(i);t=typeof t=="function"?t:ot(t||pO),e=typeof e=="function"?e:ot(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:ot(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:ot(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Bw(){}function Uw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function oL(t){this._context=t}oL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CG(t){return new oL(t)}function lL(t){this._context=t}lL.prototype={areaStart:Bw,areaEnd:Bw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PG(t){return new lL(t)}function cL(t){this._context=t}cL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Uw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function OG(t){return new cL(t)}function uL(t){this._context=t}uL.prototype={areaStart:Bw,areaEnd:Bw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kG(t){return new uL(t)}function Z2(t){return t<0?-1:1}function eN(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(Z2(s)+Z2(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function tN(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function hS(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function zw(t){this._context=t}zw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hS(this,this._t0,tN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,hS(this,tN(this,n=eN(this,t,e)),n);break;default:hS(this,this._t0,n=eN(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function hL(t){this._context=new dL(t)}(hL.prototype=Object.create(zw.prototype)).point=function(t,e){zw.prototype.point.call(this,e,t)};function dL(t){this._context=t}dL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function NG(t){return new zw(t)}function IG(t){return new hL(t)}function fL(t){this._context=t}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=nN(t),i=nN(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function nN(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function MG(t){return new fL(t)}function Q1(t,e){this._context=t,this._t=e}Q1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function RG(t){return new Q1(t,.5)}function jG(t){return new Q1(t,0)}function DG(t){return new Q1(t,1)}function np(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function cE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function $G(t,e){return t[e]}function LG(t){const e=[];return e.key=t,e}function FG(){var t=ot([]),e=cE,n=np,r=$G;function i(s){var a=Array.from(t.apply(this,arguments),LG),o,l=a.length,c=-1,h;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,s)]).data=d;for(o=0,h=fO(e(a));o<l;++o)a[h[o]].index=o;return n(a,h),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:ot(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:ot(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?cE:typeof s=="function"?s:ot(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??np,i):n},i}function BG(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}np(t,e)}}function UG(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}np(t,e)}}function zG(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var h=t[e[o]],d=h[r][1]||0,f=h[r-1][1]||0,p=(d-f)/2,g=0;g<o;++g){var m=t[e[g]],b=m[r][1]||0,y=m[r-1][1]||0;p+=b-y}l+=d,c+=p*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,np(t,e)}}function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}var HG=["type","size","sizeType"];function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}function rN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rN(Object(n),!0).forEach(function(r){WG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WG(t,e,n){return e=VG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VG(t){var e=GG(t,"string");return vm(e)=="symbol"?e:e+""}function GG(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qG(t,e){if(t==null)return{};var n=KG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KG(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var pL={symbolCircle:pO,symbolCross:gG,symbolDiamond:yG,symbolSquare:vG,symbolStar:_G,symbolTriangle:SG,symbolWye:EG},XG=Math.PI/180,YG=function(e){var n="symbol".concat(X1(e));return pL[n]||pO},JG=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*XG;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},QG=function(e,n){pL["symbol".concat(X1(e))]=n},gO=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,l=qG(e,HG),c=iN(iN({},l),{},{type:r,size:s,sizeType:o}),h=function(){var b=YG(r),y=TG().type(b).size(JG(s,o,r));return y()},d=c.className,f=c.cx,p=c.cy,g=Pe(c,!0);return f===+f&&p===+p&&s===+s?L.createElement("path",uE({},g,{className:De("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(p,")"),d:h()})):null};gO.registerSymbol=QG;function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function hE(){return hE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hE.apply(this,arguments)}function sN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sN(Object(n),!0).forEach(function(r){bm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mL(r.key),r)}}function nq(t,e,n){return e&&tq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rq(t,e,n){return e=Hw(e),iq(t,gL()?Reflect.construct(e,n||[],Hw(t).constructor):e.apply(t,n))}function iq(t,e){if(e&&(rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sq(t)}function sq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gL=function(){return!!t})()}function Hw(t){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hw(t)}function aq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dE(t,e)}function dE(t,e){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dE(t,e)}function bm(t,e,n){return e=mL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mL(t){var e=oq(t,"string");return rp(e)=="symbol"?e:e+""}function oq(t,e){if(rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mi=32,mO=function(t){function e(){return eq(this,e),rq(this,e,arguments)}return aq(e,t),nq(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=mi/2,a=mi/6,o=mi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:mi,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(mi,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return L.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(mi/8,"h").concat(mi,"v").concat(mi*3/4,"h").concat(-mi,"z"),className:"recharts-legend-icon"});if(L.isValidElement(r.legendIcon)){var c=ZG({},r);return delete c.legendIcon,L.cloneElement(r.legendIcon,c)}return L.createElement(gO,{fill:l,cx:s,cy:s,size:mi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,h={x:0,y:0,width:mi,height:mi},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,g){var m=p.formatter||l,b=De(bm(bm({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=Ee(p.value)?null:p.value;Xu(!Ee(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?c:p.color;return L.createElement("li",hE({className:b,style:d,key:"legend-item-".concat(g)},$w(r.props,p,g)),L.createElement(nE,{width:a,height:a,viewBox:h,style:f},r.renderIcon(p)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},m?m(y,p,g):y))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(z.PureComponent);bm(mO,"displayName","Legend");bm(mO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var lq=D1;function cq(){this.__data__=new lq,this.size=0}var uq=cq;function hq(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var dq=hq;function fq(t){return this.__data__.get(t)}var pq=fq;function gq(t){return this.__data__.has(t)}var mq=gq,yq=D1,vq=rO,bq=iO,wq=200;function xq(t,e){var n=this.__data__;if(n instanceof yq){var r=n.__data__;if(!vq||r.length<wq-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bq(r)}return n.set(t,e),this.size=n.size,this}var _q=xq,Sq=D1,Aq=uq,Eq=dq,Tq=pq,Cq=mq,Pq=_q;function Mp(t){var e=this.__data__=new Sq(t);this.size=e.size}Mp.prototype.clear=Aq;Mp.prototype.delete=Eq;Mp.prototype.get=Tq;Mp.prototype.has=Cq;Mp.prototype.set=Pq;var yL=Mp,Oq="__lodash_hash_undefined__";function kq(t){return this.__data__.set(t,Oq),this}var Nq=kq;function Iq(t){return this.__data__.has(t)}var Mq=Iq,Rq=iO,jq=Nq,Dq=Mq;function Ww(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Rq;++e<n;)this.add(t[e])}Ww.prototype.add=Ww.prototype.push=jq;Ww.prototype.has=Dq;var vL=Ww;function $q(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var bL=$q;function Lq(t,e){return t.has(e)}var wL=Lq,Fq=vL,Bq=bL,Uq=wL,zq=1,Hq=2;function Wq(t,e,n,r,i,s){var a=n&zq,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,p=n&Hq?new Fq:void 0;for(s.set(t,e),s.set(e,t);++d<o;){var g=t[d],m=e[d];if(r)var b=a?r(m,g,d,e,t,s):r(g,m,d,t,e,s);if(b!==void 0){if(b)continue;f=!1;break}if(p){if(!Bq(e,function(y,w){if(!Uq(p,w)&&(g===y||i(g,y,n,r,s)))return p.push(w)})){f=!1;break}}else if(!(g===m||i(g,m,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var xL=Wq,Vq=la,Gq=Vq.Uint8Array,qq=Gq;function Kq(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Xq=Kq;function Yq(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var yO=Yq,aN=o0,oN=qq,Jq=nO,Qq=xL,Zq=Xq,e9=yO,t9=1,n9=2,r9="[object Boolean]",i9="[object Date]",s9="[object Error]",a9="[object Map]",o9="[object Number]",l9="[object RegExp]",c9="[object Set]",u9="[object String]",h9="[object Symbol]",d9="[object ArrayBuffer]",f9="[object DataView]",lN=aN?aN.prototype:void 0,dS=lN?lN.valueOf:void 0;function p9(t,e,n,r,i,s,a){switch(n){case f9:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case d9:return!(t.byteLength!=e.byteLength||!s(new oN(t),new oN(e)));case r9:case i9:case o9:return Jq(+t,+e);case s9:return t.name==e.name&&t.message==e.message;case l9:case u9:return t==e+"";case a9:var o=Zq;case c9:var l=r&t9;if(o||(o=e9),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=n9,a.set(t,e);var h=Qq(o(t),o(e),r,i,s,a);return a.delete(t),h;case h9:if(dS)return dS.call(t)==dS.call(e)}return!1}var g9=p9;function m9(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var _L=m9,y9=_L,v9=kr;function b9(t,e,n){var r=e(t);return v9(t)?r:y9(r,n(t))}var w9=b9;function x9(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var _9=x9;function S9(){return[]}var A9=S9,E9=_9,T9=A9,C9=Object.prototype,P9=C9.propertyIsEnumerable,cN=Object.getOwnPropertySymbols,O9=cN?function(t){return t==null?[]:(t=Object(t),E9(cN(t),function(e){return P9.call(t,e)}))}:T9,k9=O9;function N9(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var I9=N9,M9=So,R9=Ao,j9="[object Arguments]";function D9(t){return R9(t)&&M9(t)==j9}var $9=D9,uN=$9,L9=Ao,SL=Object.prototype,F9=SL.hasOwnProperty,B9=SL.propertyIsEnumerable,U9=uN(function(){return arguments}())?uN:function(t){return L9(t)&&F9.call(t,"callee")&&!B9.call(t,"callee")},vO=U9,Vw={exports:{}};function z9(){return!1}var H9=z9;Vw.exports;(function(t,e){var n=la,r=H9,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(Vw,Vw.exports);var AL=Vw.exports,W9=9007199254740991,V9=/^(?:0|[1-9]\d*)$/;function G9(t,e){var n=typeof t;return e=e??W9,!!e&&(n=="number"||n!="symbol"&&V9.test(t))&&t>-1&&t%1==0&&t<e}var bO=G9,q9=9007199254740991;function K9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=q9}var wO=K9,X9=So,Y9=wO,J9=Ao,Q9="[object Arguments]",Z9="[object Array]",e7="[object Boolean]",t7="[object Date]",n7="[object Error]",r7="[object Function]",i7="[object Map]",s7="[object Number]",a7="[object Object]",o7="[object RegExp]",l7="[object Set]",c7="[object String]",u7="[object WeakMap]",h7="[object ArrayBuffer]",d7="[object DataView]",f7="[object Float32Array]",p7="[object Float64Array]",g7="[object Int8Array]",m7="[object Int16Array]",y7="[object Int32Array]",v7="[object Uint8Array]",b7="[object Uint8ClampedArray]",w7="[object Uint16Array]",x7="[object Uint32Array]",pt={};pt[f7]=pt[p7]=pt[g7]=pt[m7]=pt[y7]=pt[v7]=pt[b7]=pt[w7]=pt[x7]=!0;pt[Q9]=pt[Z9]=pt[h7]=pt[e7]=pt[d7]=pt[t7]=pt[n7]=pt[r7]=pt[i7]=pt[s7]=pt[a7]=pt[o7]=pt[l7]=pt[c7]=pt[u7]=!1;function _7(t){return J9(t)&&Y9(t.length)&&!!pt[X9(t)]}var S7=_7;function A7(t){return function(e){return t(e)}}var EL=A7,Gw={exports:{}};Gw.exports;(function(t,e){var n=M$,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Gw,Gw.exports);var E7=Gw.exports,T7=S7,C7=EL,hN=E7,dN=hN&&hN.isTypedArray,P7=dN?C7(dN):T7,TL=P7,O7=I9,k7=vO,N7=kr,I7=AL,M7=bO,R7=TL,j7=Object.prototype,D7=j7.hasOwnProperty;function $7(t,e){var n=N7(t),r=!n&&k7(t),i=!n&&!r&&I7(t),s=!n&&!r&&!i&&R7(t),a=n||r||i||s,o=a?O7(t.length,String):[],l=o.length;for(var c in t)(e||D7.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||M7(c,l)))&&o.push(c);return o}var L7=$7,F7=Object.prototype;function B7(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||F7;return t===n}var U7=B7;function z7(t,e){return function(n){return t(e(n))}}var CL=z7,H7=CL,W7=H7(Object.keys,Object),V7=W7,G7=U7,q7=V7,K7=Object.prototype,X7=K7.hasOwnProperty;function Y7(t){if(!G7(t))return q7(t);var e=[];for(var n in Object(t))X7.call(t,n)&&n!="constructor"&&e.push(n);return e}var J7=Y7,Q7=tO,Z7=wO;function eK(t){return t!=null&&Z7(t.length)&&!Q7(t)}var Z1=eK,tK=L7,nK=J7,rK=Z1;function iK(t){return rK(t)?tK(t):nK(t)}var xO=iK,sK=w9,aK=k9,oK=xO;function lK(t){return sK(t,oK,aK)}var cK=lK,fN=cK,uK=1,hK=Object.prototype,dK=hK.hasOwnProperty;function fK(t,e,n,r,i,s){var a=n&uK,o=fN(t),l=o.length,c=fN(e),h=c.length;if(l!=h&&!a)return!1;for(var d=l;d--;){var f=o[d];if(!(a?f in e:dK.call(e,f)))return!1}var p=s.get(t),g=s.get(e);if(p&&g)return p==e&&g==t;var m=!0;s.set(t,e),s.set(e,t);for(var b=a;++d<l;){f=o[d];var y=t[f],w=e[f];if(r)var v=a?r(w,y,f,e,t,s):r(y,w,f,t,e,s);if(!(v===void 0?y===w||i(y,w,n,r,s):v)){m=!1;break}b||(b=f=="constructor")}if(m&&!b){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(m=!1)}return s.delete(t),s.delete(e),m}var pK=fK,gK=dh,mK=la,yK=gK(mK,"DataView"),vK=yK,bK=dh,wK=la,xK=bK(wK,"Promise"),_K=xK,SK=dh,AK=la,EK=SK(AK,"Set"),PL=EK,TK=dh,CK=la,PK=TK(CK,"WeakMap"),OK=PK,fE=vK,pE=rO,gE=_K,mE=PL,yE=OK,OL=So,Rp=j$,pN="[object Map]",kK="[object Object]",gN="[object Promise]",mN="[object Set]",yN="[object WeakMap]",vN="[object DataView]",NK=Rp(fE),IK=Rp(pE),MK=Rp(gE),RK=Rp(mE),jK=Rp(yE),hc=OL;(fE&&hc(new fE(new ArrayBuffer(1)))!=vN||pE&&hc(new pE)!=pN||gE&&hc(gE.resolve())!=gN||mE&&hc(new mE)!=mN||yE&&hc(new yE)!=yN)&&(hc=function(t){var e=OL(t),n=e==kK?t.constructor:void 0,r=n?Rp(n):"";if(r)switch(r){case NK:return vN;case IK:return pN;case MK:return gN;case RK:return mN;case jK:return yN}return e});var DK=hc,fS=yL,$K=xL,LK=g9,FK=pK,bN=DK,wN=kr,xN=AL,BK=TL,UK=1,_N="[object Arguments]",SN="[object Array]",H0="[object Object]",zK=Object.prototype,AN=zK.hasOwnProperty;function HK(t,e,n,r,i,s){var a=wN(t),o=wN(e),l=a?SN:bN(t),c=o?SN:bN(e);l=l==_N?H0:l,c=c==_N?H0:c;var h=l==H0,d=c==H0,f=l==c;if(f&&xN(t)){if(!xN(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new fS),a||BK(t)?$K(t,e,n,r,i,s):LK(t,e,l,n,r,i,s);if(!(n&UK)){var p=h&&AN.call(t,"__wrapped__"),g=d&&AN.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,b=g?e.value():e;return s||(s=new fS),i(m,b,n,r,s)}}return f?(s||(s=new fS),FK(t,e,n,r,i,s)):!1}var WK=HK,VK=WK,EN=Ao;function kL(t,e,n,r,i){return t===e?!0:t==null||e==null||!EN(t)&&!EN(e)?t!==t&&e!==e:VK(t,e,n,r,kL,i)}var _O=kL,GK=yL,qK=_O,KK=1,XK=2;function YK(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],c=t[l],h=o[1];if(a&&o[2]){if(c===void 0&&!(l in t))return!1}else{var d=new GK;if(r)var f=r(c,h,l,t,e,d);if(!(f===void 0?qK(h,c,KK|XK,r,d):f))return!1}}return!0}var JK=YK,QK=Ql;function ZK(t){return t===t&&!QK(t)}var NL=ZK,eX=NL,tX=xO;function nX(t){for(var e=tX(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,eX(i)]}return e}var rX=nX;function iX(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var IL=iX,sX=JK,aX=rX,oX=IL;function lX(t){var e=aX(t);return e.length==1&&e[0][2]?oX(e[0][0],e[0][1]):function(n){return n===t||sX(n,t,e)}}var cX=lX;function uX(t,e){return t!=null&&e in Object(t)}var hX=uX,dX=B$,fX=vO,pX=kr,gX=bO,mX=wO,yX=L1;function vX(t,e,n){e=dX(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=yX(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&mX(i)&&gX(a,i)&&(pX(t)||fX(t)))}var bX=vX,wX=hX,xX=bX;function _X(t,e){return t!=null&&xX(t,e,wX)}var SX=_X,AX=_O,EX=U$,TX=SX,CX=eO,PX=NL,OX=IL,kX=L1,NX=1,IX=2;function MX(t,e){return CX(t)&&PX(e)?OX(kX(t),e):function(n){var r=EX(n,t);return r===void 0&&r===e?TX(n,t):AX(e,r,NX|IX)}}var RX=MX;function jX(t){return t}var jp=jX;function DX(t){return function(e){return e==null?void 0:e[t]}}var $X=DX,LX=oO;function FX(t){return function(e){return LX(e,t)}}var BX=FX,UX=$X,zX=BX,HX=eO,WX=L1;function VX(t){return HX(t)?UX(WX(t)):zX(t)}var GX=VX,qX=cX,KX=RX,XX=jp,YX=kr,JX=GX;function QX(t){return typeof t=="function"?t:t==null?XX:typeof t=="object"?YX(t)?KX(t[0],t[1]):qX(t):JX(t)}var Dp=QX;function ZX(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var eY=ZX;function tY(t){return t!==t}var nY=tY;function rY(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var iY=rY,sY=eY,aY=nY,oY=iY;function lY(t,e,n){return e===e?oY(t,e,n):sY(t,aY,n)}var cY=lY,uY=cY;function hY(t,e){var n=t==null?0:t.length;return!!n&&uY(t,e,0)>-1}var dY=hY;function fY(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var pY=fY;function gY(){}var mY=gY,pS=PL,yY=mY,vY=yO,bY=1/0,wY=pS&&1/vY(new pS([,-0]))[1]==bY?function(t){return new pS(t)}:yY,xY=wY,_Y=vL,SY=dY,AY=pY,EY=wL,TY=xY,CY=yO,PY=200;function OY(t,e,n){var r=-1,i=SY,s=t.length,a=!0,o=[],l=o;if(n)a=!1,i=AY;else if(s>=PY){var c=e?null:TY(t);if(c)return CY(c);a=!1,i=EY,l=new _Y}else l=e?[]:o;e:for(;++r<s;){var h=t[r],d=e?e(h):h;if(h=n||h!==0?h:0,a&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),o.push(h)}else i(l,d,n)||(l!==o&&l.push(d),o.push(h))}return o}var kY=OY,NY=Dp,IY=kY;function MY(t,e){return t&&t.length?IY(t,NY(e)):[]}var RY=MY;const TN=ut(RY);function ML(t,e,n){return e===!0?TN(t,n):Ee(e)?TN(t,e):t}function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}var jY=["ref"];function CN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CN(Object(n),!0).forEach(function(r){e_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jL(r.key),r)}}function $Y(t,e,n){return e&&PN(t.prototype,e),n&&PN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LY(t,e,n){return e=qw(e),FY(t,RL()?Reflect.construct(e,n||[],qw(t).constructor):e.apply(t,n))}function FY(t,e){if(e&&(ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BY(t)}function BY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RL=function(){return!!t})()}function qw(t){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qw(t)}function UY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vE(t,e)}function vE(t,e){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vE(t,e)}function e_(t,e,n){return e=jL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jL(t){var e=zY(t,"string");return ip(e)=="symbol"?e:e+""}function zY(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function HY(t,e){if(t==null)return{};var n=WY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VY(t){return t.value}function GY(t,e){if(L.isValidElement(t))return L.cloneElement(t,e);if(typeof t=="function")return L.createElement(t,e);e.ref;var n=HY(e,jY);return L.createElement(mO,n)}var ON=1,md=function(t){function e(){var n;DY(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=LY(this,e,[].concat(i)),e_(n,"lastBoundingBox",{width:-1,height:-1}),n}return UY(e,t),$Y(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>ON||Math.abs(i.height-this.lastBoundingBox.height)>ON)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ca({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,h=i.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();d={left:((c||0)-p.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();f={top:((h||0)-g.height)/2}}else f=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ca(ca({},d),f)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,h=i.payload,d=ca(ca({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return L.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},GY(s,ca(ca({},this.props),{},{payload:ML(h,c,VY)})))}}],[{key:"getWithHeight",value:function(r,i){var s=ca(ca({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&J(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(z.PureComponent);e_(md,"displayName","Legend");e_(md,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var kN=o0,qY=vO,KY=kr,NN=kN?kN.isConcatSpreadable:void 0;function XY(t){return KY(t)||qY(t)||!!(NN&&t&&t[NN])}var YY=XY,JY=_L,QY=YY;function DL(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=QY),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?DL(o,e-1,n,r,i):JY(i,o):r||(i[i.length]=o)}return i}var $L=DL;function ZY(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var eJ=ZY,tJ=eJ,nJ=tJ(),rJ=nJ,iJ=rJ,sJ=xO;function aJ(t,e){return t&&iJ(t,e,sJ)}var LL=aJ,oJ=Z1;function lJ(t,e){return function(n,r){if(n==null)return n;if(!oJ(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var cJ=lJ,uJ=LL,hJ=cJ,dJ=hJ(uJ),SO=dJ,fJ=SO,pJ=Z1;function gJ(t,e){var n=-1,r=pJ(t)?Array(t.length):[];return fJ(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var FL=gJ;function mJ(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var yJ=mJ,IN=Cp;function vJ(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=IN(t),a=e!==void 0,o=e===null,l=e===e,c=IN(e);if(!o&&!c&&!s&&t>e||s&&a&&l&&!o&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||o&&n&&i||!a&&i||!l)return-1}return 0}var bJ=vJ,wJ=bJ;function xJ(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,o=n.length;++r<a;){var l=wJ(i[r],s[r]);if(l){if(r>=o)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var _J=xJ,gS=aO,SJ=oO,AJ=Dp,EJ=FL,TJ=yJ,CJ=EL,PJ=_J,OJ=jp,kJ=kr;function NJ(t,e,n){e.length?e=gS(e,function(s){return kJ(s)?function(a){return SJ(a,s.length===1?s[0]:s)}:s}):e=[OJ];var r=-1;e=gS(e,CJ(AJ));var i=EJ(t,function(s,a,o){var l=gS(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return TJ(i,function(s,a){return PJ(s,a,n)})}var IJ=NJ;function MJ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var RJ=MJ,jJ=RJ,MN=Math.max;function DJ(t,e,n){return e=MN(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=MN(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),jJ(t,this,o)}}var $J=DJ;function LJ(t){return function(){return t}}var FJ=LJ,BJ=dh,UJ=function(){try{var t=BJ(Object,"defineProperty");return t({},"",{}),t}catch{}}(),BL=UJ,zJ=FJ,RN=BL,HJ=jp,WJ=RN?function(t,e){return RN(t,"toString",{configurable:!0,enumerable:!1,value:zJ(e),writable:!0})}:HJ,VJ=WJ,GJ=800,qJ=16,KJ=Date.now;function XJ(t){var e=0,n=0;return function(){var r=KJ(),i=qJ-(r-n);if(n=r,i>0){if(++e>=GJ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var YJ=XJ,JJ=VJ,QJ=YJ,ZJ=QJ(JJ),eQ=ZJ,tQ=jp,nQ=$J,rQ=eQ;function iQ(t,e){return rQ(nQ(t,e,tQ),t+"")}var sQ=iQ,aQ=nO,oQ=Z1,lQ=bO,cQ=Ql;function uQ(t,e,n){if(!cQ(n))return!1;var r=typeof e;return(r=="number"?oQ(n)&&lQ(e,n.length):r=="string"&&e in n)?aQ(n[e],t):!1}var t_=uQ,hQ=$L,dQ=IJ,fQ=sQ,jN=t_,pQ=fQ(function(t,e){if(t==null)return[];var n=e.length;return n>1&&jN(t,e[0],e[1])?e=[]:n>2&&jN(e[0],e[1],e[2])&&(e=[e[0]]),dQ(t,hQ(e,1),[])}),gQ=pQ;const AO=ut(gQ);function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bE.apply(this,arguments)}function mQ(t,e){return wQ(t)||bQ(t,e)||vQ(t,e)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vQ(t,e){if(t){if(typeof t=="string")return DN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DN(t,e)}}function DN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function wQ(t){if(Array.isArray(t))return t}function $N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$N(Object(n),!0).forEach(function(r){xQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$N(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xQ(t,e,n){return e=_Q(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Q(t){var e=SQ(t,"string");return wm(e)=="symbol"?e:e+""}function SQ(t,e){if(wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AQ(t){return Array.isArray(t)&&cn(t[0])&&cn(t[1])?t.join(" ~ "):t}var EQ=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,h=e.payload,d=e.formatter,f=e.itemSorter,p=e.wrapperClassName,g=e.labelClassName,m=e.label,b=e.labelFormatter,y=e.accessibilityLayer,w=y===void 0?!1:y,v=function(){if(h&&h.length){var I={padding:0,margin:0},R=(f?AO(h,f):h).map(function(F,D){if(F.type==="none")return null;var j=mS({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},o),B=F.formatter||d||AQ,$=F.value,U=F.name,V=$,G=U;if(B&&V!=null&&G!=null){var W=B($,U,F,D,h);if(Array.isArray(W)){var Y=mQ(W,2);V=Y[0],G=Y[1]}else V=W}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:j},cn(G)?L.createElement("span",{className:"recharts-tooltip-item-name"},G):null,cn(G)?L.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,L.createElement("span",{className:"recharts-tooltip-item-value"},V),L.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:I},R)}return null},_=mS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),x=mS({margin:0},c),S=!Oe(m),T=S?m:"",O=De("recharts-default-tooltip",p),k=De("recharts-tooltip-label",g);S&&b&&h!==void 0&&h!==null&&(T=b(m,h));var M=w?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",bE({className:O,style:_},M),L.createElement("p",{className:k,style:x},L.isValidElement(T)?T:"".concat(T)),v())};function xm(t){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xm(t)}function W0(t,e,n){return e=TQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TQ(t){var e=CQ(t,"string");return xm(e)=="symbol"?e:e+""}function CQ(t,e){if(xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yp="recharts-tooltip-wrapper",PQ={visibility:"hidden"};function OQ(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return De(Yp,W0(W0(W0(W0({},"".concat(Yp,"-right"),J(n)&&e&&J(e.x)&&n>=e.x),"".concat(Yp,"-left"),J(n)&&e&&J(e.x)&&n<e.x),"".concat(Yp,"-bottom"),J(r)&&e&&J(e.y)&&r>=e.y),"".concat(Yp,"-top"),J(r)&&e&&J(e.y)&&r<e.y))}function LN(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(s&&J(s[r]))return s[r];var h=n[r]-o-i,d=n[r]+i;if(e[r])return a[r]?h:d;if(a[r]){var f=h,p=l[r];return f<p?Math.max(d,l[r]):Math.max(h,l[r])}var g=d+o,m=l[r]+c;return g>m?Math.max(h,l[r]):Math.max(d,l[r])}function kQ(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function NQ(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,h,d;return a.height>0&&a.width>0&&n?(h=LN({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=LN({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=kQ({translateX:h,translateY:d,useTranslate3d:o})):c=PQ,{cssProperties:c,cssClasses:OQ({translateX:h,translateY:d,coordinate:n})}}function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function FN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(n),!0).forEach(function(r){xE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zL(r.key),r)}}function RQ(t,e,n){return e&&MQ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jQ(t,e,n){return e=Kw(e),DQ(t,UL()?Reflect.construct(e,n||[],Kw(t).constructor):e.apply(t,n))}function DQ(t,e){if(e&&(sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Q(t)}function $Q(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UL=function(){return!!t})()}function Kw(t){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kw(t)}function LQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wE(t,e)}function wE(t,e){return wE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wE(t,e)}function xE(t,e,n){return e=zL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zL(t){var e=FQ(t,"string");return sp(e)=="symbol"?e:e+""}function FQ(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var UN=1,BQ=function(t){function e(){var n;IQ(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=jQ(this,e,[].concat(i)),xE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),xE(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&c!==void 0?c:0}})}}),n}return LQ(e,t),RQ(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>UN||Math.abs(r.height-this.state.lastBoundingBox.height)>UN)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,h=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,p=i.offset,g=i.position,m=i.reverseDirection,b=i.useTranslate3d,y=i.viewBox,w=i.wrapperStyle,v=NQ({allowEscapeViewBox:a,coordinate:h,offsetTopLeft:p,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:y}),_=v.cssClasses,x=v.cssProperties,S=BN(BN({transition:f&&s?"transform ".concat(o,"ms ").concat(l):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},w);return L.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(O){r.wrapperNode=O}},c)}}])}(z.PureComponent),UQ=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},$p={isSsr:UQ()};function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function zN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(n),!0).forEach(function(r){EO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WL(r.key),r)}}function WQ(t,e,n){return e&&HQ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VQ(t,e,n){return e=Xw(e),GQ(t,HL()?Reflect.construct(e,n||[],Xw(t).constructor):e.apply(t,n))}function GQ(t,e){if(e&&(ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qQ(t)}function qQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HL=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xw(t)}function KQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_E(t,e)}function _E(t,e){return _E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_E(t,e)}function EO(t,e,n){return e=WL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WL(t){var e=XQ(t,"string");return ap(e)=="symbol"?e:e+""}function XQ(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function YQ(t){return t.dataKey}function JQ(t,e){return L.isValidElement(t)?L.cloneElement(t,e):typeof t=="function"?L.createElement(t,e):L.createElement(EQ,e)}var pa=function(t){function e(){return zQ(this,e),VQ(this,e,arguments)}return KQ(e,t),WQ(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,h=i.coordinate,d=i.filterNull,f=i.isAnimationActive,p=i.offset,g=i.payload,m=i.payloadUniqBy,b=i.position,y=i.reverseDirection,w=i.useTranslate3d,v=i.viewBox,_=i.wrapperStyle,x=g??[];d&&x.length&&(x=ML(g.filter(function(T){return T.value!=null&&(T.hide!==!0||r.props.includeHidden)}),m,YQ));var S=x.length>0;return L.createElement(BQ,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:f,active:s,coordinate:h,hasPayload:S,offset:p,position:b,reverseDirection:y,useTranslate3d:w,viewBox:v,wrapperStyle:_},JQ(c,HN(HN({},this.props),{},{payload:x})))}}])}(z.PureComponent);EO(pa,"displayName","Tooltip");EO(pa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!$p.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var QQ=la,ZQ=function(){return QQ.Date.now()},eZ=ZQ,tZ=/\s/;function nZ(t){for(var e=t.length;e--&&tZ.test(t.charAt(e)););return e}var rZ=nZ,iZ=rZ,sZ=/^\s+/;function aZ(t){return t&&t.slice(0,iZ(t)+1).replace(sZ,"")}var oZ=aZ,lZ=oZ,WN=Ql,cZ=Cp,VN=NaN,uZ=/^[-+]0x[0-9a-f]+$/i,hZ=/^0b[01]+$/i,dZ=/^0o[0-7]+$/i,fZ=parseInt;function pZ(t){if(typeof t=="number")return t;if(cZ(t))return VN;if(WN(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=WN(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=lZ(t);var n=hZ.test(t);return n||dZ.test(t)?fZ(t.slice(2),n?2:8):uZ.test(t)?VN:+t}var VL=pZ,gZ=Ql,yS=eZ,GN=VL,mZ="Expected a function",yZ=Math.max,vZ=Math.min;function bZ(t,e,n){var r,i,s,a,o,l,c=0,h=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(mZ);e=GN(e)||0,gZ(n)&&(h=!!n.leading,d="maxWait"in n,s=d?yZ(GN(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function p(S){var T=r,O=i;return r=i=void 0,c=S,a=t.apply(O,T),a}function g(S){return c=S,o=setTimeout(y,e),h?p(S):a}function m(S){var T=S-l,O=S-c,k=e-T;return d?vZ(k,s-O):k}function b(S){var T=S-l,O=S-c;return l===void 0||T>=e||T<0||d&&O>=s}function y(){var S=yS();if(b(S))return w(S);o=setTimeout(y,m(S))}function w(S){return o=void 0,f&&r?p(S):(r=i=void 0,a)}function v(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function _(){return o===void 0?a:w(yS())}function x(){var S=yS(),T=b(S);if(r=arguments,i=this,l=S,T){if(o===void 0)return g(l);if(d)return clearTimeout(o),o=setTimeout(y,e),p(l)}return o===void 0&&(o=setTimeout(y,e)),a}return x.cancel=v,x.flush=_,x}var wZ=bZ,xZ=wZ,_Z=Ql,SZ="Expected a function";function AZ(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(SZ);return _Z(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xZ(t,e,{leading:r,maxWait:e,trailing:i})}var EZ=AZ;const GL=ut(EZ);function _m(t){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(t)}function qN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(n),!0).forEach(function(r){TZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TZ(t,e,n){return e=CZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CZ(t){var e=PZ(t,"string");return _m(e)=="symbol"?e:e+""}function PZ(t,e){if(_m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OZ(t,e){return MZ(t)||IZ(t,e)||NZ(t,e)||kZ()}function kZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NZ(t,e){if(t){if(typeof t=="string")return KN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KN(t,e)}}function KN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function MZ(t){if(Array.isArray(t))return t}var RZ=z.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,h=c===void 0?0:c,d=t.minHeight,f=t.maxHeight,p=t.children,g=t.debounce,m=g===void 0?0:g,b=t.id,y=t.className,w=t.onResize,v=t.style,_=v===void 0?{}:v,x=z.useRef(null),S=z.useRef();S.current=w,z.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var T=z.useState({containerWidth:i.width,containerHeight:i.height}),O=OZ(T,2),k=O[0],M=O[1],N=z.useCallback(function(R,F){M(function(D){var j=Math.round(R),B=Math.round(F);return D.containerWidth===j&&D.containerHeight===B?D:{containerWidth:j,containerHeight:B}})},[]);z.useEffect(function(){var R=function(U){var V,G=U[0].contentRect,W=G.width,Y=G.height;N(W,Y),(V=S.current)===null||V===void 0||V.call(S,W,Y)};m>0&&(R=GL(R,m,{trailing:!0,leading:!1}));var F=new ResizeObserver(R),D=x.current.getBoundingClientRect(),j=D.width,B=D.height;return N(j,B),F.observe(x.current),function(){F.disconnect()}},[N,m]);var I=z.useMemo(function(){var R=k.containerWidth,F=k.containerHeight;if(R<0||F<0)return null;Xu(Tc(a)||Tc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Xu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=Tc(a)?R:a,j=Tc(l)?F:l;n&&n>0&&(D?j=D/n:j&&(D=j*n),f&&j>f&&(j=f)),Xu(D>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,j,a,l,h,d,n);var B=!Array.isArray(p)&&ao(p.type).endsWith("Chart");return L.Children.map(p,function($){return L.isValidElement($)?z.cloneElement($,V0({width:D,height:j},B?{style:V0({height:"100%",width:"100%",maxHeight:j,maxWidth:D},$.props.style)}:{})):$})},[n,p,l,f,d,h,k,a]);return L.createElement("div",{id:b?"".concat(b):void 0,className:De("recharts-responsive-container",y),style:V0(V0({},_),{},{width:a,height:l,minWidth:h,minHeight:d,maxHeight:f}),ref:x},I)}),qL=function(e){return null};qL.displayName="Cell";function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}function XN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XN(Object(n),!0).forEach(function(r){jZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jZ(t,e,n){return e=DZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DZ(t){var e=$Z(t,"string");return Sm(e)=="symbol"?e:e+""}function $Z(t,e){if(Sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wh={widthCache:{},cacheCount:0},LZ=2e3,FZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},YN="recharts_measurement_span";function BZ(t){var e=SE({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var qg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||$p.isSsr)return{width:0,height:0};var r=BZ(n),i=JSON.stringify({text:e,copyStyle:r});if(wh.widthCache[i])return wh.widthCache[i];try{var s=document.getElementById(YN);s||(s=document.createElement("span"),s.setAttribute("id",YN),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=SE(SE({},FZ),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return wh.widthCache[i]=l,++wh.cacheCount>LZ&&(wh.cacheCount=0,wh.widthCache={}),l}catch{return{width:0,height:0}}},UZ=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Am(t){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(t)}function Yw(t,e){return VZ(t)||WZ(t,e)||HZ(t,e)||zZ()}function zZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HZ(t,e){if(t){if(typeof t=="string")return JN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JN(t,e)}}function JN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function VZ(t){if(Array.isArray(t))return t}function GZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KZ(r.key),r)}}function qZ(t,e,n){return e&&QN(t.prototype,e),n&&QN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KZ(t){var e=XZ(t,"string");return Am(e)=="symbol"?e:e+""}function XZ(t,e){if(Am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QZ=Object.keys(KL),Zh="NaN";function ZZ(t,e){return t*KL[e]}var G0=function(){function t(e,n){GZ(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!YZ.test(n)&&(this.num=NaN,this.unit=""),QZ.includes(n)&&(this.num=ZZ(e,n),this.unit="px")}return qZ(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=JZ.exec(n))!==null&&r!==void 0?r:[],s=Yw(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function XL(t){if(t.includes(Zh))return Zh;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=ZN.exec(e))!==null&&n!==void 0?n:[],i=Yw(r,4),s=i[1],a=i[2],o=i[3],l=G0.parse(s??""),c=G0.parse(o??""),h=a==="*"?l.multiply(c):l.divide(c);if(h.isNaN())return Zh;e=e.replace(ZN,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=eI.exec(e))!==null&&d!==void 0?d:[],p=Yw(f,4),g=p[1],m=p[2],b=p[3],y=G0.parse(g??""),w=G0.parse(b??""),v=m==="+"?y.add(w):y.subtract(w);if(v.isNaN())return Zh;e=e.replace(eI,v.toString())}return e}var tI=/\(([^()]*)\)/;function eee(t){for(var e=t;e.includes("(");){var n=tI.exec(e),r=Yw(n,2),i=r[1];e=e.replace(tI,XL(i))}return e}function tee(t){var e=t.replace(/\s+/g,"");return e=eee(e),e=XL(e),e}function nee(t){try{return tee(t)}catch{return Zh}}function vS(t){var e=nee(t.slice(5,-1));return e===Zh?"":e}var ree=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],iee=["dx","dy","angle","className","breakAll"];function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(this,arguments)}function nI(t,e){if(t==null)return{};var n=see(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function see(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rI(t,e){return cee(t)||lee(t,e)||oee(t,e)||aee()}function aee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oee(t,e){if(t){if(typeof t=="string")return iI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iI(t,e)}}function iI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function cee(t){if(Array.isArray(t))return t}var YL=/[ \f\n\r\t\v\u2028\u2029]+/,JL=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];Oe(n)||(r?s=n.toString().split(""):s=n.toString().split(YL));var a=s.map(function(l){return{word:l,width:qg(l,i).width}}),o=r?0:qg("",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},uee=function(e,n,r,i,s){var a=e.maxLines,o=e.children,l=e.style,c=e.breakAll,h=J(a),d=o,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(j,B){var $=B.word,U=B.width,V=j[j.length-1];if(V&&(i==null||s||V.width+U+r<Number(i)))V.words.push($),V.width+=U+r;else{var G={words:[$],width:U};j.push(G)}return j},[])},p=f(n),g=function(D){return D.reduce(function(j,B){return j.width>B.width?j:B})};if(!h)return p;for(var m="",b=function(D){var j=d.slice(0,D),B=JL({breakAll:c,style:l,children:j+m}).wordsWithComputedWidth,$=f(B),U=$.length>a||g($).width>Number(i);return[U,$]},y=0,w=d.length-1,v=0,_;y<=w&&v<=d.length-1;){var x=Math.floor((y+w)/2),S=x-1,T=b(S),O=rI(T,2),k=O[0],M=O[1],N=b(x),I=rI(N,1),R=I[0];if(!k&&!R&&(y=x+1),k&&R&&(w=x-1),!k&&R){_=M;break}v++}return _||p},sI=function(e){var n=Oe(e)?[]:e.toString().split(YL);return[{words:n}]},hee=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!$p.isSsr){var l,c,h=JL({breakAll:a,children:i,style:s});if(h){var d=h.wordsWithComputedWidth,f=h.spaceWidth;l=d,c=f}else return sI(i);return uee({breakAll:a,children:i,maxLines:o,style:s},l,c,n,r)}return sI(i)},aI="#808080",Jw=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,h=e.scaleToFit,d=h===void 0?!1:h,f=e.textAnchor,p=f===void 0?"start":f,g=e.verticalAnchor,m=g===void 0?"end":g,b=e.fill,y=b===void 0?aI:b,w=nI(e,ree),v=z.useMemo(function(){return hee({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:d,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,d,w.style,w.width]),_=w.dx,x=w.dy,S=w.angle,T=w.className,O=w.breakAll,k=nI(w,iee);if(!cn(r)||!cn(s))return null;var M=r+(J(_)?_:0),N=s+(J(x)?x:0),I;switch(m){case"start":I=vS("calc(".concat(c,")"));break;case"middle":I=vS("calc(".concat((v.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:I=vS("calc(".concat(v.length-1," * -").concat(o,")"));break}var R=[];if(d){var F=v[0].width,D=w.width;R.push("scale(".concat((J(D)?D/F:1)/F,")"))}return S&&R.push("rotate(".concat(S,", ").concat(M,", ").concat(N,")")),R.length&&(k.transform=R.join(" ")),L.createElement("text",AE({},Pe(k,!0),{x:M,y:N,className:De("recharts-text",T),textAnchor:p,fill:y.includes("url")?aI:y}),v.map(function(j,B){var $=j.words.join(O?"":" ");return L.createElement("tspan",{x:M,dy:B===0?I:o,key:"".concat($,"-").concat(B)},$)}))};function zl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dee(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TO(t){let e,n,r;t.length!==2?(e=zl,n=(o,l)=>zl(t(o),l),r=(o,l)=>t(o)-l):(e=t===zl||t===dee?t:fee,n=t,r=t);function i(o,l,c=0,h=o.length){if(c<h){if(e(l,l)!==0)return h;do{const d=c+h>>>1;n(o[d],l)<0?c=d+1:h=d}while(c<h)}return c}function s(o,l,c=0,h=o.length){if(c<h){if(e(l,l)!==0)return h;do{const d=c+h>>>1;n(o[d],l)<=0?c=d+1:h=d}while(c<h)}return c}function a(o,l,c=0,h=o.length){const d=i(o,l,c,h-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function fee(){return 0}function QL(t){return t===null?NaN:+t}function*pee(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const gee=TO(zl),c0=gee.right;TO(QL).center;class oI extends Map{constructor(e,n=vee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(lI(this,e))}has(e){return super.has(lI(this,e))}set(e,n){return super.set(mee(this,e),n)}delete(e){return super.delete(yee(this,e))}}function lI({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mee({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function yee({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vee(t){return t!==null&&typeof t=="object"?t.valueOf():t}function bee(t=zl){if(t===zl)return ZL;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ZL(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const wee=Math.sqrt(50),xee=Math.sqrt(10),_ee=Math.sqrt(2);function Qw(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=wee?10:s>=xee?5:s>=_ee?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?Qw(t,e,n*2):[o,l,c]}function EE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Qw(e,t,n):Qw(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function TE(t,e,n){return e=+e,t=+t,n=+n,Qw(t,e,n)[2]}function CE(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?TE(e,t,n):TE(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function cI(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function uI(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function eF(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?ZL:bee(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,h=Math.log(l),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(e-c*d/l+f)),g=Math.min(r,Math.floor(e+(l-c)*d/l+f));eF(t,e,p,g,i)}const s=t[e];let a=n,o=r;for(Jp(t,n,e),i(t[r],s)>0&&Jp(t,n,r);a<o;){for(Jp(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Jp(t,n,o):(++o,Jp(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Jp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function See(t,e,n){if(t=Float64Array.from(pee(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return uI(t);if(e>=1)return cI(t);var r,i=(r-1)*e,s=Math.floor(i),a=cI(eF(t,s).subarray(0,s+1)),o=uI(t.subarray(s+1));return a+(o-a)*(i-s)}}function Aee(t,e,n=QL){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function Eee(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Vi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Eo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const PE=Symbol("implicit");function CO(){var t=new oI,e=[],n=[],r=PE;function i(s){let a=t.get(s);if(a===void 0){if(r!==PE)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new oI;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return CO(e,n).unknown(r)},Vi.apply(i,arguments),i}function Em(){var t=CO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,h=.5;delete t.unknown;function d(){var f=e().length,p=i<r,g=p?i:r,m=p?r:i;s=(m-g)/Math.max(1,f-l+c*2),o&&(s=Math.floor(s)),g+=(m-g-s*(f-l))*h,a=s*(1-l),o&&(g=Math.round(g),a=Math.round(a));var b=Eee(f).map(function(y){return g+s*y});return n(p?b.reverse():b)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(o=!!f,d()):o},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},t.copy=function(){return Em(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(h)},Vi.apply(d(),arguments)}function tF(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return tF(e())},t}function Kg(){return tF(Em.apply(null,arguments).paddingInner(1))}function PO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function nF(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function u0(){}var Tm=.7,Zw=1/Tm,yd="\\s*([+-]?\\d+)\\s*",Cm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tee=/^#([0-9a-f]{3,8})$/,Cee=new RegExp(`^rgb\\(${yd},${yd},${yd}\\)$`),Pee=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),Oee=new RegExp(`^rgba\\(${yd},${yd},${yd},${Cm}\\)$`),kee=new RegExp(`^rgba\\(${ra},${ra},${ra},${Cm}\\)$`),Nee=new RegExp(`^hsl\\(${Cm},${ra},${ra}\\)$`),Iee=new RegExp(`^hsla\\(${Cm},${ra},${ra},${Cm}\\)$`),hI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PO(u0,Pm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dI,formatHex:dI,formatHex8:Mee,formatHsl:Ree,formatRgb:fI,toString:fI});function dI(){return this.rgb().formatHex()}function Mee(){return this.rgb().formatHex8()}function Ree(){return rF(this).formatHsl()}function fI(){return this.rgb().formatRgb()}function Pm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Tee.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?pI(e):n===3?new Tr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?q0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?q0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cee.exec(t))?new Tr(e[1],e[2],e[3],1):(e=Pee.exec(t))?new Tr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Oee.exec(t))?q0(e[1],e[2],e[3],e[4]):(e=kee.exec(t))?q0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nee.exec(t))?yI(e[1],e[2]/100,e[3]/100,1):(e=Iee.exec(t))?yI(e[1],e[2]/100,e[3]/100,e[4]):hI.hasOwnProperty(t)?pI(hI[t]):t==="transparent"?new Tr(NaN,NaN,NaN,0):null}function pI(t){return new Tr(t>>16&255,t>>8&255,t&255,1)}function q0(t,e,n,r){return r<=0&&(t=e=n=NaN),new Tr(t,e,n,r)}function jee(t){return t instanceof u0||(t=Pm(t)),t?(t=t.rgb(),new Tr(t.r,t.g,t.b,t.opacity)):new Tr}function OE(t,e,n,r){return arguments.length===1?jee(t):new Tr(t,e,n,r??1)}function Tr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}PO(Tr,OE,nF(u0,{brighter(t){return t=t==null?Zw:Math.pow(Zw,t),new Tr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tm:Math.pow(Tm,t),new Tr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Tr(Yu(this.r),Yu(this.g),Yu(this.b),ex(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gI,formatHex:gI,formatHex8:Dee,formatRgb:mI,toString:mI}));function gI(){return`#${Cc(this.r)}${Cc(this.g)}${Cc(this.b)}`}function Dee(){return`#${Cc(this.r)}${Cc(this.g)}${Cc(this.b)}${Cc((isNaN(this.opacity)?1:this.opacity)*255)}`}function mI(){const t=ex(this.opacity);return`${t===1?"rgb(":"rgba("}${Yu(this.r)}, ${Yu(this.g)}, ${Yu(this.b)}${t===1?")":`, ${t})`}`}function ex(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Cc(t){return t=Yu(t),(t<16?"0":"")+t.toString(16)}function yI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gs(t,e,n,r)}function rF(t){if(t instanceof gs)return new gs(t.h,t.s,t.l,t.opacity);if(t instanceof u0||(t=Pm(t)),!t)return new gs;if(t instanceof gs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new gs(a,o,l,t.opacity)}function $ee(t,e,n,r){return arguments.length===1?rF(t):new gs(t,e,n,r??1)}function gs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}PO(gs,$ee,nF(u0,{brighter(t){return t=t==null?Zw:Math.pow(Zw,t),new gs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tm:Math.pow(Tm,t),new gs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Tr(bS(t>=240?t-240:t+120,i,r),bS(t,i,r),bS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new gs(vI(this.h),K0(this.s),K0(this.l),ex(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ex(this.opacity);return`${t===1?"hsl(":"hsla("}${vI(this.h)}, ${K0(this.s)*100}%, ${K0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function vI(t){return t=(t||0)%360,t<0?t+360:t}function K0(t){return Math.max(0,Math.min(1,t||0))}function bS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const OO=t=>()=>t;function Lee(t,e){return function(n){return t+n*e}}function Fee(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Bee(t){return(t=+t)==1?iF:function(e,n){return n-e?Fee(e,n,t):OO(isNaN(e)?n:e)}}function iF(t,e){var n=e-t;return n?Lee(t,n):OO(isNaN(t)?e:t)}const bI=function t(e){var n=Bee(e);function r(i,s){var a=n((i=OE(i)).r,(s=OE(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=iF(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=o(h),i.b=l(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function Uee(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function zee(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hee(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Lp(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Wee(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vee(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Lp(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var kE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wS=new RegExp(kE.source,"g");function Gee(t){return function(){return t}}function qee(t){return function(e){return t(e)+""}}function Kee(t,e){var n=kE.lastIndex=wS.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=kE.exec(t))&&(i=wS.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:tx(r,i)})),n=wS.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?qee(l[0].x):Gee(e):(e=l.length,function(c){for(var h=0,d;h<e;++h)o[(d=l[h]).i]=d.x(c);return o.join("")})}function Lp(t,e){var n=typeof e,r;return e==null||n==="boolean"?OO(e):(n==="number"?tx:n==="string"?(r=Pm(e))?(e=r,bI):Kee:e instanceof Pm?bI:e instanceof Date?Wee:zee(e)?Uee:Array.isArray(e)?Hee:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vee:tx)(t,e)}function kO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Xee(t,e){e===void 0&&(e=t,t=Lp);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Yee(t){return function(){return t}}function nx(t){return+t}var wI=[0,1];function lr(t){return t}function NE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yee(isNaN(e)?NaN:.5)}function Jee(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Qee(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=NE(i,r),s=n(a,s)):(r=NE(r,i),s=n(s,a)),function(o){return s(r(o))}}function Zee(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=NE(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=c0(t,o,1,r)-1;return s[l](i[l](o))}}function h0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function n_(){var t=wI,e=wI,n=Lp,r,i,s,a=lr,o,l,c;function h(){var f=Math.min(t.length,e.length);return a!==lr&&(a=Jee(t[0],t[f-1])),o=f>2?Zee:Qee,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(r),e,n)))(r(a(f)))}return d.invert=function(f){return a(i((c||(c=o(e,t.map(r),tx)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,nx),h()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=kO,h()},d.clamp=function(f){return arguments.length?(a=f?!0:lr,h()):a!==lr},d.interpolate=function(f){return arguments.length?(n=f,h()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,p){return r=f,i=p,h()}}function NO(){return n_()(lr,lr)}function ete(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function op(t){return t=rx(Math.abs(t)),t?t[1]:NaN}function tte(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function nte(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var rte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Om(t){if(!(e=rte.exec(t)))throw new Error("invalid format: "+t);var e;return new IO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Om.prototype=IO.prototype;function IO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}IO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ite(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var sF;function ste(t,e){var n=rx(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(sF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+rx(t,Math.max(0,e+s-1))[0]}function xI(t,e){var n=rx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _I={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ete,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>xI(t*100,e),r:xI,s:ste,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function SI(t){return t}var AI=Array.prototype.map,EI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ate(t){var e=t.grouping===void 0||t.thousands===void 0?SI:tte(AI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?SI:nte(AI.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Om(d);var f=d.fill,p=d.align,g=d.sign,m=d.symbol,b=d.zero,y=d.width,w=d.comma,v=d.precision,_=d.trim,x=d.type;x==="n"?(w=!0,x="g"):_I[x]||(v===void 0&&(v=12),_=!0,x="g"),(b||f==="0"&&p==="=")&&(b=!0,f="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",T=m==="$"?r:/[%p]/.test(x)?a:"",O=_I[x],k=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function M(N){var I=S,R=T,F,D,j;if(x==="c")R=O(N)+R,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?l:O(Math.abs(N),v),_&&(N=ite(N)),B&&+N==0&&g!=="+"&&(B=!1),I=(B?g==="("?g:o:g==="-"||g==="("?"":g)+I,R=(x==="s"?EI[8+sF/3]:"")+R+(B&&g==="("?")":""),k){for(F=-1,D=N.length;++F<D;)if(j=N.charCodeAt(F),48>j||j>57){R=(j===46?i+N.slice(F+1):N.slice(F))+R,N=N.slice(0,F);break}}}w&&!b&&(N=e(N,1/0));var $=I.length+N.length+R.length,U=$<y?new Array(y-$+1).join(f):"";switch(w&&b&&(N=e(U+N,U.length?y-R.length:1/0),U=""),p){case"<":N=I+N+R+U;break;case"=":N=I+U+N+R;break;case"^":N=U.slice(0,$=U.length>>1)+I+N+R+U.slice($);break;default:N=U+I+N+R;break}return s(N)}return M.toString=function(){return d+""},M}function h(d,f){var p=c((d=Om(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(op(f)/3)))*3,m=Math.pow(10,-g),b=EI[8+g/3];return function(y){return p(m*y)+b}}return{format:c,formatPrefix:h}}var X0,MO,aF;ote({thousands:",",grouping:[3],currency:["$",""]});function ote(t){return X0=ate(t),MO=X0.format,aF=X0.formatPrefix,X0}function lte(t){return Math.max(0,-op(Math.abs(t)))}function cte(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(op(e)/3)))*3-op(Math.abs(t)))}function ute(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,op(e)-op(t))+1}function oF(t,e,n,r){var i=CE(t,e,n),s;switch(r=Om(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=cte(i,a))&&(r.precision=s),aF(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ute(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=lte(i))&&(r.precision=s-(r.type==="%")*2);break}}return MO(r)}function Zl(t){var e=t.domain;return t.ticks=function(n){var r=e();return EE(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return oF(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,h=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);h-- >0;){if(c=TE(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function ix(){var t=NO();return t.copy=function(){return h0(t,ix())},Vi.apply(t,arguments),Zl(t)}function lF(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,nx),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return lF(t).unknown(e)},t=arguments.length?Array.from(t,nx):[0,1],Zl(n)}function cF(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function TI(t){return Math.log(t)}function CI(t){return Math.exp(t)}function hte(t){return-Math.log(-t)}function dte(t){return-Math.exp(-t)}function fte(t){return isFinite(t)?+("1e"+t):t<0?0:t}function pte(t){return t===10?fte:t===Math.E?Math.exp:e=>Math.pow(t,e)}function gte(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function PI(t){return(e,n)=>-t(-e,n)}function RO(t){const e=t(TI,CI),n=e.domain;let r=10,i,s;function a(){return i=gte(r),s=pte(r),n()[0]<0?(i=PI(i),s=PI(s),t(hte,dte)):t(TI,CI),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],h=l[l.length-1];const d=h<c;d&&([c,h]=[h,c]);let f=i(c),p=i(h),g,m;const b=o==null?10:+o;let y=[];if(!(r%1)&&p-f<b){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(g=1;g<r;++g)if(m=f<0?g/s(-f):g*s(f),!(m<c)){if(m>h)break;y.push(m)}}else for(;f<=p;++f)for(g=r-1;g>=1;--g)if(m=f>0?g/s(-f):g*s(f),!(m<c)){if(m>h)break;y.push(m)}y.length*2<b&&(y=EE(c,h,b))}else y=EE(f,p,Math.min(p-f,b)).map(s);return d?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Om(l)).precision==null&&(l.trim=!0),l=MO(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return h=>{let d=h/s(Math.round(i(h)));return d*r<r-.5&&(d*=r),d<=c?l(h):""}},e.nice=()=>n(cF(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function uF(){const t=RO(n_()).domain([1,10]);return t.copy=()=>h0(t,uF()).base(t.base()),Vi.apply(t,arguments),t}function OI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function kI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function jO(t){var e=1,n=t(OI(e),kI(e));return n.constant=function(r){return arguments.length?t(OI(e=+r),kI(e)):e},Zl(n)}function hF(){var t=jO(n_());return t.copy=function(){return h0(t,hF()).constant(t.constant())},Vi.apply(t,arguments)}function NI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function mte(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function yte(t){return t<0?-t*t:t*t}function DO(t){var e=t(lr,lr),n=1;function r(){return n===1?t(lr,lr):n===.5?t(mte,yte):t(NI(n),NI(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Zl(e)}function $O(){var t=DO(n_());return t.copy=function(){return h0(t,$O()).exponent(t.exponent())},Vi.apply(t,arguments),t}function vte(){return $O.apply(null,arguments).exponent(.5)}function II(t){return Math.sign(t)*t*t}function bte(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function dF(){var t=NO(),e=[0,1],n=!1,r;function i(s){var a=bte(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(II(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,nx)).map(II)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return dF(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Vi.apply(i,arguments),Zl(i)}function fF(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Aee(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[c0(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(zl),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return fF().domain(t).range(e).unknown(r)},Vi.apply(s,arguments)}function pF(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[c0(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return pF().domain([t,e]).range(i).unknown(s)},Vi.apply(Zl(a),arguments)}function gF(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[c0(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return gF().domain(t).range(e).unknown(n)},Vi.apply(i,arguments)}const xS=new Date,_S=new Date;function dn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>dn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(xS.setTime(+s),_S.setTime(+a),t(xS),t(_S),Math.floor(n(xS,_S))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const sx=dn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);sx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?dn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):sx);sx.range;const no=1e3,Di=no*60,ro=Di*60,mo=ro*24,LO=mo*7,MI=mo*30,SS=mo*365,Pc=dn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*no)},(t,e)=>(e-t)/no,t=>t.getUTCSeconds());Pc.range;const FO=dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*no)},(t,e)=>{t.setTime(+t+e*Di)},(t,e)=>(e-t)/Di,t=>t.getMinutes());FO.range;const BO=dn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Di)},(t,e)=>(e-t)/Di,t=>t.getUTCMinutes());BO.range;const UO=dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*no-t.getMinutes()*Di)},(t,e)=>{t.setTime(+t+e*ro)},(t,e)=>(e-t)/ro,t=>t.getHours());UO.range;const zO=dn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ro)},(t,e)=>(e-t)/ro,t=>t.getUTCHours());zO.range;const d0=dn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Di)/mo,t=>t.getDate()-1);d0.range;const r_=dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mo,t=>t.getUTCDate()-1);r_.range;const mF=dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mo,t=>Math.floor(t/mo));mF.range;function fh(t){return dn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Di)/LO)}const i_=fh(0),ax=fh(1),wte=fh(2),xte=fh(3),lp=fh(4),_te=fh(5),Ste=fh(6);i_.range;ax.range;wte.range;xte.range;lp.range;_te.range;Ste.range;function ph(t){return dn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/LO)}const s_=ph(0),ox=ph(1),Ate=ph(2),Ete=ph(3),cp=ph(4),Tte=ph(5),Cte=ph(6);s_.range;ox.range;Ate.range;Ete.range;cp.range;Tte.range;Cte.range;const HO=dn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());HO.range;const WO=dn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());WO.range;const yo=dn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());yo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:dn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});yo.range;const vo=dn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());vo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:dn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});vo.range;function yF(t,e,n,r,i,s){const a=[[Pc,1,no],[Pc,5,5*no],[Pc,15,15*no],[Pc,30,30*no],[s,1,Di],[s,5,5*Di],[s,15,15*Di],[s,30,30*Di],[i,1,ro],[i,3,3*ro],[i,6,6*ro],[i,12,12*ro],[r,1,mo],[r,2,2*mo],[n,1,LO],[e,1,MI],[e,3,3*MI],[t,1,SS]];function o(c,h,d){const f=h<c;f&&([c,h]=[h,c]);const p=d&&typeof d.range=="function"?d:l(c,h,d),g=p?p.range(c,+h+1):[];return f?g.reverse():g}function l(c,h,d){const f=Math.abs(h-c)/d,p=TO(([,,b])=>b).right(a,f);if(p===a.length)return t.every(CE(c/SS,h/SS,d));if(p===0)return sx.every(Math.max(CE(c,h,d),1));const[g,m]=a[f/a[p-1][2]<a[p][2]/f?p-1:p];return g.every(m)}return[o,l]}const[Pte,Ote]=yF(vo,WO,s_,mF,zO,BO),[kte,Nte]=yF(yo,HO,i_,d0,UO,FO);function AS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ES(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ite(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Zp(i),h=eg(i),d=Zp(s),f=eg(s),p=Zp(a),g=eg(a),m=Zp(o),b=eg(o),y=Zp(l),w=eg(l),v={a:B,A:$,b:U,B:V,c:null,d:FI,e:FI,f:tne,g:hne,G:fne,H:Qte,I:Zte,j:ene,L:vF,m:nne,M:rne,p:G,q:W,Q:zI,s:HI,S:ine,u:sne,U:ane,V:one,w:lne,W:cne,x:null,X:null,y:une,Y:dne,Z:pne,"%":UI},_={a:Y,A:pe,b:he,B:Se,c:null,d:BI,e:BI,f:vne,g:Pne,G:kne,H:gne,I:mne,j:yne,L:wF,m:bne,M:wne,p:ke,q:fn,Q:zI,s:HI,S:xne,u:_ne,U:Sne,V:Ane,w:Ene,W:Tne,x:null,X:null,y:Cne,Y:One,Z:Nne,"%":UI},x={a:M,A:N,b:I,B:R,c:F,d:$I,e:$I,f:Kte,g:DI,G:jI,H:LI,I:LI,j:Wte,L:qte,m:Hte,M:Vte,p:k,q:zte,Q:Yte,s:Jte,S:Gte,u:$te,U:Lte,V:Fte,w:Dte,W:Bte,x:D,X:j,y:DI,Y:jI,Z:Ute,"%":Xte};v.x=S(n,v),v.X=S(r,v),v.c=S(e,v),_.x=S(n,_),_.X=S(r,_),_.c=S(e,_);function S(Z,de){return function(fe){var q=[],ht=-1,Ne=0,Yt=Z.length,Jt,pr,Co;for(fe instanceof Date||(fe=new Date(+fe));++ht<Yt;)Z.charCodeAt(ht)===37&&(q.push(Z.slice(Ne,ht)),(pr=RI[Jt=Z.charAt(++ht)])!=null?Jt=Z.charAt(++ht):pr=Jt==="e"?" ":"0",(Co=de[Jt])&&(Jt=Co(fe,pr)),q.push(Jt),Ne=ht+1);return q.push(Z.slice(Ne,ht)),q.join("")}}function T(Z,de){return function(fe){var q=Qp(1900,void 0,1),ht=O(q,Z,fe+="",0),Ne,Yt;if(ht!=fe.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(de&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Ne=ES(Qp(q.y,0,1)),Yt=Ne.getUTCDay(),Ne=Yt>4||Yt===0?ox.ceil(Ne):ox(Ne),Ne=r_.offset(Ne,(q.V-1)*7),q.y=Ne.getUTCFullYear(),q.m=Ne.getUTCMonth(),q.d=Ne.getUTCDate()+(q.w+6)%7):(Ne=AS(Qp(q.y,0,1)),Yt=Ne.getDay(),Ne=Yt>4||Yt===0?ax.ceil(Ne):ax(Ne),Ne=d0.offset(Ne,(q.V-1)*7),q.y=Ne.getFullYear(),q.m=Ne.getMonth(),q.d=Ne.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),Yt="Z"in q?ES(Qp(q.y,0,1)).getUTCDay():AS(Qp(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(Yt+5)%7:q.w+q.U*7-(Yt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,ES(q)):AS(q)}}function O(Z,de,fe,q){for(var ht=0,Ne=de.length,Yt=fe.length,Jt,pr;ht<Ne;){if(q>=Yt)return-1;if(Jt=de.charCodeAt(ht++),Jt===37){if(Jt=de.charAt(ht++),pr=x[Jt in RI?de.charAt(ht++):Jt],!pr||(q=pr(Z,fe,q))<0)return-1}else if(Jt!=fe.charCodeAt(q++))return-1}return q}function k(Z,de,fe){var q=c.exec(de.slice(fe));return q?(Z.p=h.get(q[0].toLowerCase()),fe+q[0].length):-1}function M(Z,de,fe){var q=p.exec(de.slice(fe));return q?(Z.w=g.get(q[0].toLowerCase()),fe+q[0].length):-1}function N(Z,de,fe){var q=d.exec(de.slice(fe));return q?(Z.w=f.get(q[0].toLowerCase()),fe+q[0].length):-1}function I(Z,de,fe){var q=y.exec(de.slice(fe));return q?(Z.m=w.get(q[0].toLowerCase()),fe+q[0].length):-1}function R(Z,de,fe){var q=m.exec(de.slice(fe));return q?(Z.m=b.get(q[0].toLowerCase()),fe+q[0].length):-1}function F(Z,de,fe){return O(Z,e,de,fe)}function D(Z,de,fe){return O(Z,n,de,fe)}function j(Z,de,fe){return O(Z,r,de,fe)}function B(Z){return a[Z.getDay()]}function $(Z){return s[Z.getDay()]}function U(Z){return l[Z.getMonth()]}function V(Z){return o[Z.getMonth()]}function G(Z){return i[+(Z.getHours()>=12)]}function W(Z){return 1+~~(Z.getMonth()/3)}function Y(Z){return a[Z.getUTCDay()]}function pe(Z){return s[Z.getUTCDay()]}function he(Z){return l[Z.getUTCMonth()]}function Se(Z){return o[Z.getUTCMonth()]}function ke(Z){return i[+(Z.getUTCHours()>=12)]}function fn(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var de=S(Z+="",v);return de.toString=function(){return Z},de},parse:function(Z){var de=T(Z+="",!1);return de.toString=function(){return Z},de},utcFormat:function(Z){var de=S(Z+="",_);return de.toString=function(){return Z},de},utcParse:function(Z){var de=T(Z+="",!0);return de.toString=function(){return Z},de}}}var RI={"-":"",_:" ",0:"0"},An=/^\s*\d+/,Mte=/^%/,Rte=/[\\^$*+?|[\]().{}]/g;function Le(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function jte(t){return t.replace(Rte,"\\$&")}function Zp(t){return new RegExp("^(?:"+t.map(jte).join("|")+")","i")}function eg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Dte(t,e,n){var r=An.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $te(t,e,n){var r=An.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Lte(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Fte(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Bte(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function jI(t,e,n){var r=An.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function DI(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ute(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zte(t,e,n){var r=An.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Hte(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $I(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Wte(t,e,n){var r=An.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function LI(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Vte(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Gte(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function qte(t,e,n){var r=An.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Kte(t,e,n){var r=An.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Xte(t,e,n){var r=Mte.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Yte(t,e,n){var r=An.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Jte(t,e,n){var r=An.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function FI(t,e){return Le(t.getDate(),e,2)}function Qte(t,e){return Le(t.getHours(),e,2)}function Zte(t,e){return Le(t.getHours()%12||12,e,2)}function ene(t,e){return Le(1+d0.count(yo(t),t),e,3)}function vF(t,e){return Le(t.getMilliseconds(),e,3)}function tne(t,e){return vF(t,e)+"000"}function nne(t,e){return Le(t.getMonth()+1,e,2)}function rne(t,e){return Le(t.getMinutes(),e,2)}function ine(t,e){return Le(t.getSeconds(),e,2)}function sne(t){var e=t.getDay();return e===0?7:e}function ane(t,e){return Le(i_.count(yo(t)-1,t),e,2)}function bF(t){var e=t.getDay();return e>=4||e===0?lp(t):lp.ceil(t)}function one(t,e){return t=bF(t),Le(lp.count(yo(t),t)+(yo(t).getDay()===4),e,2)}function lne(t){return t.getDay()}function cne(t,e){return Le(ax.count(yo(t)-1,t),e,2)}function une(t,e){return Le(t.getFullYear()%100,e,2)}function hne(t,e){return t=bF(t),Le(t.getFullYear()%100,e,2)}function dne(t,e){return Le(t.getFullYear()%1e4,e,4)}function fne(t,e){var n=t.getDay();return t=n>=4||n===0?lp(t):lp.ceil(t),Le(t.getFullYear()%1e4,e,4)}function pne(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Le(e/60|0,"0",2)+Le(e%60,"0",2)}function BI(t,e){return Le(t.getUTCDate(),e,2)}function gne(t,e){return Le(t.getUTCHours(),e,2)}function mne(t,e){return Le(t.getUTCHours()%12||12,e,2)}function yne(t,e){return Le(1+r_.count(vo(t),t),e,3)}function wF(t,e){return Le(t.getUTCMilliseconds(),e,3)}function vne(t,e){return wF(t,e)+"000"}function bne(t,e){return Le(t.getUTCMonth()+1,e,2)}function wne(t,e){return Le(t.getUTCMinutes(),e,2)}function xne(t,e){return Le(t.getUTCSeconds(),e,2)}function _ne(t){var e=t.getUTCDay();return e===0?7:e}function Sne(t,e){return Le(s_.count(vo(t)-1,t),e,2)}function xF(t){var e=t.getUTCDay();return e>=4||e===0?cp(t):cp.ceil(t)}function Ane(t,e){return t=xF(t),Le(cp.count(vo(t),t)+(vo(t).getUTCDay()===4),e,2)}function Ene(t){return t.getUTCDay()}function Tne(t,e){return Le(ox.count(vo(t)-1,t),e,2)}function Cne(t,e){return Le(t.getUTCFullYear()%100,e,2)}function Pne(t,e){return t=xF(t),Le(t.getUTCFullYear()%100,e,2)}function One(t,e){return Le(t.getUTCFullYear()%1e4,e,4)}function kne(t,e){var n=t.getUTCDay();return t=n>=4||n===0?cp(t):cp.ceil(t),Le(t.getUTCFullYear()%1e4,e,4)}function Nne(){return"+0000"}function UI(){return"%"}function zI(t){return+t}function HI(t){return Math.floor(+t/1e3)}var xh,_F,SF;Ine({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ine(t){return xh=Ite(t),_F=xh.format,xh.parse,SF=xh.utcFormat,xh.utcParse,xh}function Mne(t){return new Date(t)}function Rne(t){return t instanceof Date?+t:+new Date(+t)}function VO(t,e,n,r,i,s,a,o,l,c){var h=NO(),d=h.invert,f=h.domain,p=c(".%L"),g=c(":%S"),m=c("%I:%M"),b=c("%I %p"),y=c("%a %d"),w=c("%b %d"),v=c("%B"),_=c("%Y");function x(S){return(l(S)<S?p:o(S)<S?g:a(S)<S?m:s(S)<S?b:r(S)<S?i(S)<S?y:w:n(S)<S?v:_)(S)}return h.invert=function(S){return new Date(d(S))},h.domain=function(S){return arguments.length?f(Array.from(S,Rne)):f().map(Mne)},h.ticks=function(S){var T=f();return t(T[0],T[T.length-1],S??10)},h.tickFormat=function(S,T){return T==null?x:c(T)},h.nice=function(S){var T=f();return(!S||typeof S.range!="function")&&(S=e(T[0],T[T.length-1],S??10)),S?f(cF(T,S)):h},h.copy=function(){return h0(h,VO(t,e,n,r,i,s,a,o,l,c))},h}function jne(){return Vi.apply(VO(kte,Nte,yo,HO,i_,d0,UO,FO,Pc,_F).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dne(){return Vi.apply(VO(Pte,Ote,vo,WO,s_,r_,zO,BO,Pc,SF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a_(){var t=0,e=1,n,r,i,s,a=lr,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function h(d){return function(f){var p,g;return arguments.length?([p,g]=f,a=d(p,g),c):[a(0),a(1)]}}return c.range=h(Lp),c.rangeRound=h(kO),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function ec(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function AF(){var t=Zl(a_()(lr));return t.copy=function(){return ec(t,AF())},Eo.apply(t,arguments)}function EF(){var t=RO(a_()).domain([1,10]);return t.copy=function(){return ec(t,EF()).base(t.base())},Eo.apply(t,arguments)}function TF(){var t=jO(a_());return t.copy=function(){return ec(t,TF()).constant(t.constant())},Eo.apply(t,arguments)}function GO(){var t=DO(a_());return t.copy=function(){return ec(t,GO()).exponent(t.exponent())},Eo.apply(t,arguments)}function $ne(){return GO.apply(null,arguments).exponent(.5)}function CF(){var t=[],e=lr;function n(r){if(r!=null&&!isNaN(r=+r))return e((c0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(zl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>See(t,s/r))},n.copy=function(){return CF(e).domain(t)},Eo.apply(n,arguments)}function o_(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=lr,h,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+h(m))-s)*(r*m<r*s?o:l),c(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,i=h(t=+t),s=h(e=+e),a=h(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(c=m,p):c};function g(m){return function(b){var y,w,v;return arguments.length?([y,w,v]=b,c=Xee(m,[y,w,v]),p):[c(0),c(.5),c(1)]}}return p.range=g(Lp),p.rangeRound=g(kO),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return h=m,i=m(t),s=m(e),a=m(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function PF(){var t=Zl(o_()(lr));return t.copy=function(){return ec(t,PF())},Eo.apply(t,arguments)}function OF(){var t=RO(o_()).domain([.1,1,10]);return t.copy=function(){return ec(t,OF()).base(t.base())},Eo.apply(t,arguments)}function kF(){var t=jO(o_());return t.copy=function(){return ec(t,kF()).constant(t.constant())},Eo.apply(t,arguments)}function qO(){var t=DO(o_());return t.copy=function(){return ec(t,qO()).exponent(t.exponent())},Eo.apply(t,arguments)}function Lne(){return qO.apply(null,arguments).exponent(.5)}const WI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Em,scaleDiverging:PF,scaleDivergingLog:OF,scaleDivergingPow:qO,scaleDivergingSqrt:Lne,scaleDivergingSymlog:kF,scaleIdentity:lF,scaleImplicit:PE,scaleLinear:ix,scaleLog:uF,scaleOrdinal:CO,scalePoint:Kg,scalePow:$O,scaleQuantile:fF,scaleQuantize:pF,scaleRadial:dF,scaleSequential:AF,scaleSequentialLog:EF,scaleSequentialPow:GO,scaleSequentialQuantile:CF,scaleSequentialSqrt:$ne,scaleSequentialSymlog:TF,scaleSqrt:vte,scaleSymlog:hF,scaleThreshold:gF,scaleTime:jne,scaleUtc:Dne,tickFormat:oF},Symbol.toStringTag,{value:"Module"}));var Fne=Cp;function Bne(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(o===void 0?a===a&&!Fne(a):n(a,o)))var o=a,l=s}return l}var NF=Bne;function Une(t,e){return t>e}var zne=Une,Hne=NF,Wne=zne,Vne=jp;function Gne(t){return t&&t.length?Hne(t,Vne,Wne):void 0}var qne=Gne;const Il=ut(qne);function Kne(t,e){return t<e}var Xne=Kne,Yne=NF,Jne=Xne,Qne=jp;function Zne(t){return t&&t.length?Yne(t,Qne,Jne):void 0}var ere=Zne;const l_=ut(ere);var tre=aO,nre=Dp,rre=FL,ire=kr;function sre(t,e){var n=ire(t)?tre:rre;return n(t,nre(e))}var are=sre,ore=$L,lre=are;function cre(t,e){return ore(lre(t,e),1)}var ure=cre;const hre=ut(ure);var dre=_O;function fre(t,e){return dre(t,e)}var pre=fre;const km=ut(pre);var Fp=1e9,gre={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},XO,xt=!0,zi="[DecimalError] ",Ju=zi+"Invalid argument: ",KO=zi+"Exponent out of range: ",Bp=Math.floor,dc=Math.pow,mre=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ii,xn=1e7,gt=7,IF=9007199254740991,lx=Bp(IF/gt),ie={};ie.absoluteValue=ie.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ie.comparedTo=ie.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};ie.decimalPlaces=ie.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*gt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ie.dividedBy=ie.div=function(t){return oo(this,new this.constructor(t))};ie.dividedToIntegerBy=ie.idiv=function(t){var e=this,n=e.constructor;return nt(oo(e,new n(t),0,1),n.precision)};ie.equals=ie.eq=function(t){return!this.cmp(t)};ie.exponent=function(){return Kt(this)};ie.greaterThan=ie.gt=function(t){return this.cmp(t)>0};ie.greaterThanOrEqualTo=ie.gte=function(t){return this.cmp(t)>=0};ie.isInteger=ie.isint=function(){return this.e>this.d.length-2};ie.isNegative=ie.isneg=function(){return this.s<0};ie.isPositive=ie.ispos=function(){return this.s>0};ie.isZero=function(){return this.s===0};ie.lessThan=ie.lt=function(t){return this.cmp(t)<0};ie.lessThanOrEqualTo=ie.lte=function(t){return this.cmp(t)<1};ie.logarithm=ie.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ii))throw Error(zi+"NaN");if(n.s<1)throw Error(zi+(n.s?"NaN":"-Infinity"));return n.eq(ii)?new r(0):(xt=!1,e=oo(Nm(n,s),Nm(t,s),s),xt=!0,nt(e,i))};ie.minus=ie.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jF(e,t):MF(e,(t.s=-t.s,t))};ie.modulo=ie.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(zi+"NaN");return n.s?(xt=!1,e=oo(n,t,0,1).times(t),xt=!0,n.minus(e)):nt(new r(n),i)};ie.naturalExponential=ie.exp=function(){return RF(this)};ie.naturalLogarithm=ie.ln=function(){return Nm(this)};ie.negated=ie.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ie.plus=ie.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MF(e,t):jF(e,(t.s=-t.s,t))};ie.precision=ie.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ju+t);if(e=Kt(i)+1,r=i.d.length-1,n=r*gt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ie.squareRoot=ie.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(zi+"NaN")}for(t=Kt(o),xt=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Zs(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bp((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(oo(o,s,a+2)).times(.5),Zs(s.d).slice(0,a)===(e=Zs(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(nt(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return xt=!0,nt(r,n)};ie.times=ie.mul=function(t){var e,n,r,i,s,a,o,l,c,h=this,d=h.constructor,f=h.d,p=(t=new d(t)).d;if(!h.s||!t.s)return new d(0);for(t.s*=h.s,n=h.e+t.e,l=f.length,c=p.length,l<c&&(s=f,f=p,p=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+p[r]*f[i-r-1]+e,s[i--]=o%xn|0,e=o/xn|0;s[i]=(s[i]+e)%xn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,xt?nt(t,d.precision):t};ie.toDecimalPlaces=ie.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(sa(t,0,Fp),e===void 0?e=r.rounding:sa(e,0,8),nt(n,t+Kt(n)+1,e))};ie.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=sh(r,!0):(sa(t,0,Fp),e===void 0?e=i.rounding:sa(e,0,8),r=nt(new i(r),t+1,e),n=sh(r,!0,t+1)),n};ie.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?sh(i):(sa(t,0,Fp),e===void 0?e=s.rounding:sa(e,0,8),r=nt(new s(i),t+Kt(i)+1,e),n=sh(r.abs(),!1,t+Kt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ie.toInteger=ie.toint=function(){var t=this,e=t.constructor;return nt(new e(t),Kt(t)+1,e.rounding)};ie.toNumber=function(){return+this};ie.toPower=ie.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,h=+(t=new l(t));if(!t.s)return new l(ii);if(o=new l(o),!o.s){if(t.s<1)throw Error(zi+"Infinity");return o}if(o.eq(ii))return o;if(r=l.precision,t.eq(ii))return nt(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=h<0?-h:h)<=IF){for(i=new l(ii),e=Math.ceil(r/gt+4),xt=!1;n%2&&(i=i.times(o),GI(i.d,e)),n=Bp(n/2),n!==0;)o=o.times(o),GI(o.d,e);return xt=!0,t.s<0?new l(ii).div(i):nt(i,r)}}else if(s<0)throw Error(zi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,xt=!1,i=t.times(Nm(o,r+c)),xt=!0,i=RF(i),i.s=s,i};ie.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Kt(i),r=sh(i,n<=s.toExpNeg||n>=s.toExpPos)):(sa(t,1,Fp),e===void 0?e=s.rounding:sa(e,0,8),i=nt(new s(i),t,e),n=Kt(i),r=sh(i,t<=n||n<=s.toExpNeg,t)),r};ie.toSignificantDigits=ie.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(sa(t,1,Fp),e===void 0?e=r.rounding:sa(e,0,8)),nt(new r(n),t,e)};ie.toString=ie.valueOf=ie.val=ie.toJSON=ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Kt(t),n=t.constructor;return sh(t,e<=n.toExpNeg||e>=n.toExpPos)};function MF(t,e){var n,r,i,s,a,o,l,c,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),xt?nt(e,d):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(d/gt),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/xn|0,l[s]%=xn;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,xt?nt(e,d):e}function sa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ju+t)}function Zs(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=gt-r.length,n&&(s+=Mo(n)),s+=r;a=t[e],r=a+"",n=gt-r.length,n&&(s+=Mo(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var oo=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%xn|0,a=s/xn|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*xn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,h,d,f,p,g,m,b,y,w,v,_,x,S,T,O,k=r.constructor,M=r.s==i.s?1:-1,N=r.d,I=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(zi+"Division by zero");for(l=r.e-i.e,T=I.length,x=N.length,p=new k(M),g=p.d=[],c=0;I[c]==(N[c]||0);)++c;if(I[c]>(N[c]||0)&&--l,s==null?w=s=k.precision:a?w=s+(Kt(r)-Kt(i))+1:w=s,w<0)return new k(0);if(w=w/gt+2|0,c=0,T==1)for(h=0,I=I[0],w++;(c<x||h)&&w--;c++)v=h*xn+(N[c]||0),g[c]=v/I|0,h=v%I|0;else{for(h=xn/(I[0]+1)|0,h>1&&(I=t(I,h),N=t(N,h),T=I.length,x=N.length),_=T,m=N.slice(0,T),b=m.length;b<T;)m[b++]=0;O=I.slice(),O.unshift(0),S=I[0],I[1]>=xn/2&&++S;do h=0,o=e(I,m,T,b),o<0?(y=m[0],T!=b&&(y=y*xn+(m[1]||0)),h=y/S|0,h>1?(h>=xn&&(h=xn-1),d=t(I,h),f=d.length,b=m.length,o=e(d,m,f,b),o==1&&(h--,n(d,T<f?O:I,f))):(h==0&&(o=h=1),d=I.slice()),f=d.length,f<b&&d.unshift(0),n(m,d,b),o==-1&&(b=m.length,o=e(I,m,T,b),o<1&&(h++,n(m,T<b?O:I,b))),b=m.length):o===0&&(h++,m=[0]),g[c++]=h,o&&m[0]?m[b++]=N[_]||0:(m=[N[_]],b=1);while((_++<x||m[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=l,nt(p,a?s+Kt(p)+1:s)}}();function RF(t,e){var n,r,i,s,a,o,l=0,c=0,h=t.constructor,d=h.precision;if(Kt(t)>16)throw Error(KO+Kt(t));if(!t.s)return new h(ii);for(xt=!1,o=d,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(dc(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new h(ii),h.precision=o;;){if(i=nt(i.times(t),o),n=n.times(++l),a=s.plus(oo(i,n,o)),Zs(a.d).slice(0,o)===Zs(s.d).slice(0,o)){for(;c--;)s=nt(s.times(s),o);return h.precision=d,e==null?(xt=!0,nt(s,d)):s}s=a}}function Kt(t){for(var e=t.e*gt,n=t.d[0];n>=10;n/=10)e++;return e}function TS(t,e,n){if(e>t.LN10.sd())throw xt=!0,n&&(t.precision=n),Error(zi+"LN10 precision limit exceeded");return nt(new t(t.LN10),e)}function Mo(t){for(var e="";t--;)e+="0";return e}function Nm(t,e){var n,r,i,s,a,o,l,c,h,d=1,f=10,p=t,g=p.d,m=p.constructor,b=m.precision;if(p.s<1)throw Error(zi+(p.s?"NaN":"-Infinity"));if(p.eq(ii))return new m(0);if(e==null?(xt=!1,c=b):c=e,p.eq(10))return e==null&&(xt=!0),TS(m,c);if(c+=f,m.precision=c,n=Zs(g),r=n.charAt(0),s=Kt(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Zs(p.d),r=n.charAt(0),d++;s=Kt(p),r>1?(p=new m("0."+n),s++):p=new m(r+"."+n.slice(1))}else return l=TS(m,c+2,b).times(s+""),p=Nm(new m(r+"."+n.slice(1)),c-f).plus(l),m.precision=b,e==null?(xt=!0,nt(p,b)):p;for(o=a=p=oo(p.minus(ii),p.plus(ii),c),h=nt(p.times(p),c),i=3;;){if(a=nt(a.times(h),c),l=o.plus(oo(a,new m(i),c)),Zs(l.d).slice(0,c)===Zs(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(TS(m,c+2,b).times(s+""))),o=oo(o,new m(d),c),m.precision=b,e==null?(xt=!0,nt(o,b)):o;o=l,i+=2}}function VI(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bp(n/gt),t.d=[],r=(n+1)%gt,n<0&&(r+=gt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=gt;r<i;)t.d.push(+e.slice(r,r+=gt));e=e.slice(r),r=gt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),xt&&(t.e>lx||t.e<-lx))throw Error(KO+n)}else t.s=0,t.e=0,t.d=[0];return t}function nt(t,e,n){var r,i,s,a,o,l,c,h,d=t.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=gt,i=e,c=d[h=0];else{if(h=Math.ceil((r+1)/gt),s=d.length,h>=s)return t;for(c=s=d[h],a=1;s>=10;s/=10)a++;r%=gt,i=r-gt+a}if(n!==void 0&&(s=dc(10,a-i-1),o=c/s%10|0,l=e<0||d[h+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/dc(10,a-i):0:d[h-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=Kt(t),d.length=1,e=e-s-1,d[0]=dc(10,(gt-e%gt)%gt),t.e=Bp(-e/gt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=h,s=1,h--):(d.length=h+1,s=dc(10,gt-r),d[h]=i>0?(c/dc(10,a-i)%dc(10,i)|0)*s:0),l)for(;;)if(h==0){(d[0]+=s)==xn&&(d[0]=1,++t.e);break}else{if(d[h]+=s,d[h]!=xn)break;d[h--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(xt&&(t.e>lx||t.e<-lx))throw Error(KO+Kt(t));return t}function jF(t,e){var n,r,i,s,a,o,l,c,h,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),xt?nt(e,p):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(h=a<0,h?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),i=Math.max(Math.ceil(p/gt),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,h=i<o,h&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){h=l[i]<d[i];break}a=0}for(h&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=xn-1;--l[s],l[i]+=xn}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,xt?nt(e,p):e):new f(0)}function sh(t,e,n){var r,i=Kt(t),s=Zs(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Mo(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Mo(-i-1)+s,n&&(r=n-a)>0&&(s+=Mo(r))):i>=a?(s+=Mo(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Mo(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Mo(r))),t.s<0?"-"+s:s}function GI(t,e){if(t.length>e)return t.length=e,!0}function DF(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ju+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return VI(a,s.toString())}else if(typeof s!="string")throw Error(Ju+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,mre.test(s))VI(a,s);else throw Error(Ju+s)}if(i.prototype=ie,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=DF,i.config=i.set=yre,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function yre(t){if(!t||typeof t!="object")throw Error(zi+"Object expected");var e,n,r,i=["precision",1,Fp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bp(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ju+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ju+n+": "+r);return this}var XO=DF(gre);ii=new XO(1);const Je=XO;function vre(t){return _re(t)||xre(t)||wre(t)||bre()}function bre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wre(t,e){if(t){if(typeof t=="string")return IE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IE(t,e)}}function xre(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _re(t){if(Array.isArray(t))return IE(t)}function IE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Sre=function(e){return e},$F={},LF=function(e){return e===$F},qI=function(e){return function n(){return arguments.length===0||arguments.length===1&&LF(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Are=function t(e,n){return e===1?n:qI(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==$F}).length;return a>=e?n.apply(void 0,i):t(e-a,qI(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var h=i.map(function(d){return LF(d)?l.shift():d});return n.apply(void 0,vre(h).concat(l))}))})},c_=function(e){return Are(e.length,e)},ME=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Ere=c_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Tre=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Sre;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},RE=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},FF=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,l){return o===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function Cre(t){var e;return t===0?e=1:e=Math.floor(new Je(t).abs().log(10).toNumber())+1,e}function Pre(t,e,n){for(var r=new Je(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Ore=c_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),kre=c_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Nre=c_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const u_={rangeStep:Pre,getDigitCount:Cre,interpolateNumber:Ore,uninterpolateNumber:kre,uninterpolateTruncation:Nre};function jE(t){return Rre(t)||Mre(t)||BF(t)||Ire()}function Ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mre(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Rre(t){if(Array.isArray(t))return DE(t)}function Im(t,e){return $re(t)||Dre(t,e)||BF(t,e)||jre()}function jre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BF(t,e){if(t){if(typeof t=="string")return DE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DE(t,e)}}function DE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dre(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function $re(t){if(Array.isArray(t))return t}function UF(t){var e=Im(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function zF(t,e,n){if(t.lte(0))return new Je(0);var r=u_.getDigitCount(t.toNumber()),i=new Je(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new Je(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?l:new Je(Math.ceil(l))}function Lre(t,e,n){var r=1,i=new Je(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Je(10).pow(u_.getDigitCount(t)-1),i=new Je(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Je(Math.floor(t)))}else t===0?i=new Je(Math.floor((e-1)/2)):n||(i=new Je(Math.floor(t)));var a=Math.floor((e-1)/2),o=Tre(Ere(function(l){return i.add(new Je(l-a).mul(r)).toNumber()}),ME);return o(0,e)}function HF(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Je(0),tickMin:new Je(0),tickMax:new Je(0)};var s=zF(new Je(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Je(0):(a=new Je(t).add(e).div(2),a=a.sub(new Je(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),l=Math.ceil(new Je(e).sub(a).div(s).toNumber()),c=o+l+1;return c>n?HF(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:s,tickMin:a.sub(new Je(o).mul(s)),tickMax:a.add(new Je(l).mul(s))})}function Fre(t){var e=Im(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=UF([n,r]),l=Im(o,2),c=l[0],h=l[1];if(c===-1/0||h===1/0){var d=h===1/0?[c].concat(jE(ME(0,i-1).map(function(){return 1/0}))):[].concat(jE(ME(0,i-1).map(function(){return-1/0})),[h]);return n>r?RE(d):d}if(c===h)return Lre(c,i,s);var f=HF(c,h,a,s),p=f.step,g=f.tickMin,m=f.tickMax,b=u_.rangeStep(g,m.add(new Je(.1).mul(p)),p);return n>r?RE(b):b}function Bre(t,e){var n=Im(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=UF([r,i]),o=Im(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var h=Math.max(e,2),d=zF(new Je(c).sub(l).div(h-1),s,0),f=[].concat(jE(u_.rangeStep(new Je(l),new Je(c).sub(new Je(.99).mul(d)),d)),[c]);return r>i?RE(f):f}var Ure=FF(Fre),zre=FF(Bre),Hre="Invariant failed";function ah(t,e){throw new Error(Hre)}var Wre=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cx.apply(this,arguments)}function Vre(t,e){return Xre(t)||Kre(t,e)||qre(t,e)||Gre()}function Gre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qre(t,e){if(t){if(typeof t=="string")return KI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KI(t,e)}}function KI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Xre(t){if(Array.isArray(t))return t}function Yre(t,e){if(t==null)return{};var n=Jre(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GF(r.key),r)}}function eie(t,e,n){return e&&Zre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tie(t,e,n){return e=ux(e),nie(t,WF()?Reflect.construct(e,n||[],ux(t).constructor):e.apply(t,n))}function nie(t,e){if(e&&(up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rie(t)}function rie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WF=function(){return!!t})()}function ux(t){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ux(t)}function iie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$E(t,e)}function $E(t,e){return $E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$E(t,e)}function VF(t,e,n){return e=GF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GF(t){var e=sie(t,"string");return up(e)=="symbol"?e:e+""}function sie(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var h_=function(t){function e(){return Qre(this,e),tie(this,e,arguments)}return iie(e,t),eie(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,h=r.xAxis,d=r.yAxis,f=Yre(r,Wre),p=Pe(f,!1);this.props.direction==="x"&&h.type!=="number"&&ah();var g=l.map(function(m){var b=c(m,o),y=b.x,w=b.y,v=b.value,_=b.errorVal;if(!_)return null;var x=[],S,T;if(Array.isArray(_)){var O=Vre(_,2);S=O[0],T=O[1]}else S=T=_;if(s==="vertical"){var k=h.scale,M=w+i,N=M+a,I=M-a,R=k(v-S),F=k(v+T);x.push({x1:F,y1:N,x2:F,y2:I}),x.push({x1:R,y1:M,x2:F,y2:M}),x.push({x1:R,y1:N,x2:R,y2:I})}else if(s==="horizontal"){var D=d.scale,j=y+i,B=j-a,$=j+a,U=D(v-S),V=D(v+T);x.push({x1:B,y1:V,x2:$,y2:V}),x.push({x1:j,y1:U,x2:j,y2:V}),x.push({x1:B,y1:U,x2:$,y2:U})}return L.createElement(Tt,cx({className:"recharts-errorBar",key:"bar-".concat(x.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},p),x.map(function(G){return L.createElement("line",cx({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return L.createElement(Tt,{className:"recharts-errorBars"},g)}}])}(L.Component);VF(h_,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});VF(h_,"displayName","ErrorBar");function Mm(t){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mm(t)}function XI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XI(Object(n),!0).forEach(function(r){aie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aie(t,e,n){return e=oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oie(t){var e=lie(t,"string");return Mm(e)=="symbol"?e:e+""}function lie(t,e){if(Mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qF=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=ti(n,md);if(!a)return null;var o=md.defaultProps,l=o!==void 0?sc(sc({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(r||[]).reduce(function(h,d){var f=d.item,p=d.props,g=p.sectors||p.data||[];return h.concat(g.map(function(m){return{type:a.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):c=(r||[]).map(function(h){var d=h.item,f=d.type.defaultProps,p=f!==void 0?sc(sc({},f),d.props):{},g=p.dataKey,m=p.name,b=p.legendType,y=p.hide;return{inactive:y,dataKey:g,type:l.iconType||b||"square",color:YO(d),value:m||g,payload:p}}),sc(sc(sc({},l),md.getWithHeight(a,i)),{},{payload:c,item:a})};function Rm(t){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rm(t)}function YI(t){return die(t)||hie(t)||uie(t)||cie()}function cie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uie(t,e){if(t){if(typeof t=="string")return LE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LE(t,e)}}function hie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function die(t){if(Array.isArray(t))return LE(t)}function LE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(n),!0).forEach(function(r){vd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vd(t,e,n){return e=fie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fie(t){var e=pie(t,"string");return Rm(e)=="symbol"?e:e+""}function pie(t,e){if(Rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hi(t,e,n){return Oe(t)||Oe(e)?n:cn(e)?Li(t,e,n):Ee(e)?e(t):n}function Xg(t,e,n,r){var i=hre(t,function(o){return hi(o,e)});if(n==="number"){var s=i.filter(function(o){return J(o)||parseFloat(o)});return s.length?[l_(s),Il(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!Oe(o)}):i;return a.map(function(o){return cn(o)||o instanceof Date?o:""})}var gie=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var h=c>0?i[c-1].coordinate:i[o-1].coordinate,d=i[c].coordinate,f=c>=o-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(ms(d-h)!==ms(f-d)){var g=[];if(ms(f-d)===ms(l[1]-l[0])){p=f;var m=d+l[1]-l[0];g[0]=Math.min(m,(m+h)/2),g[1]=Math.max(m,(m+h)/2)}else{p=h;var b=f+l[1]-l[0];g[0]=Math.min(d,(b+d)/2),g[1]=Math.max(d,(b+d)/2)}var y=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>y[0]&&e<=y[1]||e>=g[0]&&e<=g[1]){a=i[c].index;break}}else{var w=Math.min(h,f),v=Math.max(h,f);if(e>(w+d)/2&&e<=(v+d)/2){a=i[c].index;break}}}else for(var _=0;_<o;_++)if(_===0&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<o-1&&e>(r[_].coordinate+r[_-1].coordinate)/2&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_===o-1&&e>(r[_].coordinate+r[_-1].coordinate)/2){a=r[_].index;break}return a},YO=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?$t($t({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},mie=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var h=s[o[l]].stackGroups,d=Object.keys(h),f=0,p=d.length;f<p;f++){var g=h[d[f]],m=g.items,b=g.cateAxisId,y=m.filter(function(T){return ao(T.type).indexOf("Bar")>=0});if(y&&y.length){var w=y[0].type.defaultProps,v=w!==void 0?$t($t({},w),y[0].props):y[0].props,_=v.barSize,x=v[b];a[x]||(a[x]=[]);var S=Oe(_)?n:_;a[x].push({item:y[0],stackList:y.slice(1),barSize:Oe(S)?void 0:ih(S,r,0)})}}return a},yie=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var c=ih(n,i,0,!0),h,d=[];if(a[0].barSize===+a[0].barSize){var f=!1,p=i/l,g=a.reduce(function(_,x){return _+x.barSize||0},0);g+=(l-1)*c,g>=i&&(g-=(l-1)*c,c=0),g>=i&&p>0&&(f=!0,p*=.9,g=l*p);var m=(i-g)/2>>0,b={offset:m-c,size:0};h=a.reduce(function(_,x){var S={item:x.item,position:{offset:b.offset+b.size+c,size:f?p:x.barSize}},T=[].concat(YI(_),[S]);return b=T[T.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(O){T.push({item:O,position:b})}),T},d)}else{var y=ih(r,i,0,!0);i-2*y-(l-1)*c<=0&&(c=0);var w=(i-2*y-(l-1)*c)/l;w>1&&(w>>=0);var v=o===+o?Math.min(w,o):w;h=a.reduce(function(_,x,S){var T=[].concat(YI(_),[{item:x.item,position:{offset:y+(w+c)*S+(w-v)/2,size:v}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(O){T.push({item:O,position:T[T.length-1].position})}),T},d)}return h},vie=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,l=a-(o.left||0)-(o.right||0),c=qF({children:s,legendWidth:l});if(c){var h=i||{},d=h.width,f=h.height,p=c.align,g=c.verticalAlign,m=c.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&p!=="center"&&J(e[p]))return $t($t({},e),{},vd({},p,e[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&g!=="middle"&&J(e[g]))return $t($t({},e),{},vd({},g,e[g]+(f||0)))}return e},bie=function(e,n,r){return Oe(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},KF=function(e,n,r,i,s){var a=n.props.children,o=ws(a,h_).filter(function(c){return bie(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,h){var d=hi(h,r);if(Oe(d))return c;var f=Array.isArray(d)?[l_(d),Il(d)]:[d,d],p=l.reduce(function(g,m){var b=hi(h,m,0),y=f[0]-Math.abs(Array.isArray(b)?b[0]:b),w=f[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(y,g[0]),Math.max(w,g[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},wie=function(e,n,r,i,s){var a=n.map(function(o){return KF(e,o,r,s,i)}).filter(function(o){return!Oe(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},XF=function(e,n,r,i,s){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&KF(e,l,c,i)||Xg(e,c,r,s)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var h=0,d=c.length;h<d;h++)o[c[h]]||(o[c[h]]=!0,l.push(c[h]));return l},[])},YF=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Oc=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ms(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(d){var f=s?s.indexOf(d):d;return{coordinate:i(f)+c,value:d,offset:c}});return h.filter(function(d){return!Ip(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+c,value:d,index:f,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,f){return{coordinate:i(d)+c,value:s?s[d]:d,index:f,offset:c}})},CS=new WeakMap,Y0=function(e,n){if(typeof n!="function")return e;CS.has(e)||CS.set(e,new WeakMap);var r=CS.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},xie=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:Em(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:ix(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Kg(),realScaleType:"point"}:s==="category"?{scale:Em(),realScaleType:"band"}:{scale:ix(),realScaleType:"linear"};if(rh(i)){var l="scale".concat(X1(i));return{scale:(WI[l]||Kg)(),realScaleType:WI[l]?l:"point"}}return Ee(i)?{scale:i}:{scale:Kg(),realScaleType:"point"}},QI=1e-4,_ie=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-QI,a=Math.max(i[0],i[1])+QI,o=e(n[0]),l=e(n[r-1]);(o<s||o>a||l<s||l>a)&&e.domain([n[0],n[r-1]])}},Sie=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Aie=function(e,n){if(!n||n.length!==2||!J(n[0])||!J(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!J(e[0])||e[0]<r)&&(s[0]=r),(!J(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},Eie=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var l=Ip(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1])}},Tie=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=Ip(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Cie={sign:Eie,expand:BG,none:np,silhouette:UG,wiggle:zG,positive:Tie},Pie=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=Cie[r],a=FG().keys(i).value(function(o,l){return+hi(o,l,0)}).order(cE).offset(s);return a(e)},Oie=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,l={},c=o.reduce(function(d,f){var p,g=(p=f.type)!==null&&p!==void 0&&p.defaultProps?$t($t({},f.type.defaultProps),f.props):f.props,m=g.stackId,b=g.hide;if(b)return d;var y=g[r],w=d[y]||{hasStack:!1,stackGroups:{}};if(cn(m)){var v=w.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};v.items.push(f),w.hasStack=!0,w.stackGroups[m]=v}else w.stackGroups[l0("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return $t($t({},d),{},vd({},y,w))},l),h={};return Object.keys(c).reduce(function(d,f){var p=c[f];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,b){var y=p.stackGroups[b];return $t($t({},m),{},vd({},b,{numericAxisId:r,cateAxisId:i,items:y.items,stackedData:Pie(e,y.items,s)}))},g)}return $t($t({},d),{},vd({},f,p))},h)},kie=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var h=Ure(c,s,o);return e.domain([l_(h),Il(h)]),{niceTicks:h}}if(s&&i==="number"){var d=e.domain(),f=zre(d,s,o);return{niceTicks:f}}return null};function ZI(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Oe(i[e.dataKey])){var o=jw(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=hi(i,Oe(a)?e.dataKey:a);return Oe(l)?null:e.scale(l)}var eM=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=hi(a,n.dataKey,n.domain[o]);return Oe(l)?null:n.scale(l)-s/2+i},Nie=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},Iie=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?$t($t({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(cn(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},Mie=function(e){return e.reduce(function(n,r){return[l_(r.concat([n[0]]).filter(J)),Il(r.concat([n[1]]).filter(J))]},[1/0,-1/0])},JF=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,l=o.reduce(function(c,h){var d=Mie(h.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},tM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FE=function(e,n,r){if(Ee(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(J(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(tM.test(e[0])){var s=+tM.exec(e[0])[1];i[0]=n[0]-s}else Ee(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(J(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(nM.test(e[1])){var a=+nM.exec(e[1])[1];i[1]=n[1]+a}else Ee(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},hx=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=AO(n,function(d){return d.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],h=s[o-1];a=Math.min((c.coordinate||0)-(h.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},rM=function(e,n,r){return!e||!e.length||km(e,Li(r,"type.defaultProps.domain"))?n:e},QF=function(e,n){var r=e.type.defaultProps?$t($t({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,h=r.hide;return $t($t({},Pe(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:YO(e),value:hi(n,i),type:l,payload:n,chartType:c,hide:h})};function jm(t){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(t)}function iM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iM(Object(n),!0).forEach(function(r){Rie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rie(t,e,n){return e=jie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jie(t){var e=Die(t,"string");return jm(e)=="symbol"?e:e+""}function Die(t,e){if(jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dx=Math.PI/180,$ie=function(e){return e*180/Math.PI},Ln=function(e,n,r,i){return{x:e+Math.cos(-dx*i)*r,y:n+Math.sin(-dx*i)*r}},Lie=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},Fie=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=Lie({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(r-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:$ie(c),angleInRadian:c}},Bie=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},Uie=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},aM=function(e,n){var r=e.x,i=e.y,s=Fie({x:r,y:i},n),a=s.radius,o=s.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var h=Bie(n),d=h.startAngle,f=h.endAngle,p=o,g;if(d<=f){for(;p>f;)p-=360;for(;p<d;)p+=360;g=p>=d&&p<=f}else{for(;p>d;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=d}return g?sM(sM({},n),{},{radius:a,angle:Uie(p,n)}):null};function Dm(t){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(t)}var zie=["offset"];function Hie(t){return qie(t)||Gie(t)||Vie(t)||Wie()}function Wie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vie(t,e){if(t){if(typeof t=="string")return BE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BE(t,e)}}function Gie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qie(t){if(Array.isArray(t))return BE(t)}function BE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kie(t,e){if(t==null)return{};var n=Xie(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oM(Object(n),!0).forEach(function(r){Yie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yie(t,e,n){return e=Jie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jie(t){var e=Qie(t,"string");return Dm(e)=="symbol"?e:e+""}function Qie(t,e){if(Dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$m.apply(this,arguments)}var Zie=function(e){var n=e.value,r=e.formatter,i=Oe(e.children)?n:e.children;return Ee(r)?r(i):i},ese=function(e,n){var r=ms(n-e),i=Math.min(Math.abs(n-e),360);return r*i},tse=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,l=s,c=l.cx,h=l.cy,d=l.innerRadius,f=l.outerRadius,p=l.startAngle,g=l.endAngle,m=l.clockWise,b=(d+f)/2,y=ese(p,g),w=y>=0?1:-1,v,_;i==="insideStart"?(v=p+w*a,_=m):i==="insideEnd"?(v=g-w*a,_=!m):i==="end"&&(v=g+w*a,_=m),_=y<=0?_:!_;var x=Ln(c,h,b,v),S=Ln(c,h,b,v+(_?1:-1)*359),T="M".concat(x.x,",").concat(x.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),O=Oe(e.id)?l0("recharts-radial-line-"):e.id;return L.createElement("text",$m({},r,{dominantBaseline:"central",className:De("recharts-radial-bar-label",o)}),L.createElement("defs",null,L.createElement("path",{id:O,d:T})),L.createElement("textPath",{xlinkHref:"#".concat(O)},n))},nse=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,h=s.startAngle,d=s.endAngle,f=(h+d)/2;if(i==="outside"){var p=Ln(a,o,c+r,f),g=p.x,m=p.y;return{x:g,y:m,textAnchor:g>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(l+c)/2,y=Ln(a,o,b,f),w=y.x,v=y.y;return{x:w,y:v,textAnchor:"middle",verticalAnchor:"middle"}},rse=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,l=a.y,c=a.width,h=a.height,d=h>=0?1:-1,f=d*i,p=d>0?"end":"start",g=d>0?"start":"end",m=c>=0?1:-1,b=m*i,y=m>0?"end":"start",w=m>0?"start":"end";if(s==="top"){var v={x:o+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:p};return en(en({},v),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var _={x:o+c/2,y:l+h+f,textAnchor:"middle",verticalAnchor:g};return en(en({},_),r?{height:Math.max(r.y+r.height-(l+h),0),width:c}:{})}if(s==="left"){var x={x:o-b,y:l+h/2,textAnchor:y,verticalAnchor:"middle"};return en(en({},x),r?{width:Math.max(x.x-r.x,0),height:h}:{})}if(s==="right"){var S={x:o+c+b,y:l+h/2,textAnchor:w,verticalAnchor:"middle"};return en(en({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:h}:{})}var T=r?{width:c,height:h}:{};return s==="insideLeft"?en({x:o+b,y:l+h/2,textAnchor:w,verticalAnchor:"middle"},T):s==="insideRight"?en({x:o+c-b,y:l+h/2,textAnchor:y,verticalAnchor:"middle"},T):s==="insideTop"?en({x:o+c/2,y:l+f,textAnchor:"middle",verticalAnchor:g},T):s==="insideBottom"?en({x:o+c/2,y:l+h-f,textAnchor:"middle",verticalAnchor:p},T):s==="insideTopLeft"?en({x:o+b,y:l+f,textAnchor:w,verticalAnchor:g},T):s==="insideTopRight"?en({x:o+c-b,y:l+f,textAnchor:y,verticalAnchor:g},T):s==="insideBottomLeft"?en({x:o+b,y:l+h-f,textAnchor:w,verticalAnchor:p},T):s==="insideBottomRight"?en({x:o+c-b,y:l+h-f,textAnchor:y,verticalAnchor:p},T):Pp(s)&&(J(s.x)||Tc(s.x))&&(J(s.y)||Tc(s.y))?en({x:o+ih(s.x,c),y:l+ih(s.y,h),textAnchor:"end",verticalAnchor:"end"},T):en({x:o+c/2,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},T)},ise=function(e){return"cx"in e&&J(e.cx)};function Qn(t){var e=t.offset,n=e===void 0?5:e,r=Kie(t,zie),i=en({offset:n},r),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,h=i.className,d=h===void 0?"":h,f=i.textBreakAll;if(!s||Oe(o)&&Oe(l)&&!z.isValidElement(c)&&!Ee(c))return null;if(z.isValidElement(c))return z.cloneElement(c,i);var p;if(Ee(c)){if(p=z.createElement(c,i),z.isValidElement(p))return p}else p=Zie(i);var g=ise(s),m=Pe(i,!0);if(g&&(a==="insideStart"||a==="insideEnd"||a==="end"))return tse(i,p,m);var b=g?nse(i):rse(i);return L.createElement(Jw,$m({className:De("recharts-label",d)},m,b,{breakAll:f}),p)}Qn.displayName="Label";var ZF=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,h=e.outerRadius,d=e.x,f=e.y,p=e.top,g=e.left,m=e.width,b=e.height,y=e.clockWise,w=e.labelViewBox;if(w)return w;if(J(m)&&J(b)){if(J(d)&&J(f))return{x:d,y:f,width:m,height:b};if(J(p)&&J(g))return{x:p,y:g,width:m,height:b}}return J(d)&&J(f)?{x:d,y:f,width:0,height:0}:J(n)&&J(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:h||l||o||0,clockWise:y}:e.viewBox?e.viewBox:{}},sse=function(e,n){return e?e===!0?L.createElement(Qn,{key:"label-implicit",viewBox:n}):cn(e)?L.createElement(Qn,{key:"label-implicit",viewBox:n,value:e}):z.isValidElement(e)?e.type===Qn?z.cloneElement(e,{key:"label-implicit",viewBox:n}):L.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):Ee(e)?L.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):Pp(e)?L.createElement(Qn,$m({viewBox:n},e,{key:"label-implicit"})):null:null},ase=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=ZF(e),a=ws(i,Qn).map(function(l,c){return z.cloneElement(l,{viewBox:n||s,key:"label-".concat(c)})});if(!r)return a;var o=sse(e.label,n||s);return[o].concat(Hie(a))};Qn.parseViewBox=ZF;Qn.renderCallByParent=ase;function ose(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var lse=ose;const cse=ut(lse);function Lm(t){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(t)}var use=["valueAccessor"],hse=["data","dataKey","clockWise","id","textBreakAll"];function dse(t){return mse(t)||gse(t)||pse(t)||fse()}function fse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pse(t,e){if(t){if(typeof t=="string")return UE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(t,e)}}function gse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mse(t){if(Array.isArray(t))return UE(t)}function UE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(this,arguments)}function lM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lM(Object(n),!0).forEach(function(r){yse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yse(t,e,n){return e=vse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vse(t){var e=bse(t,"string");return Lm(e)=="symbol"?e:e+""}function bse(t,e){if(Lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uM(t,e){if(t==null)return{};var n=wse(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var xse=function(e){return Array.isArray(e.value)?cse(e.value):e.value};function Hl(t){var e=t.valueAccessor,n=e===void 0?xse:e,r=uM(t,use),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,l=r.textBreakAll,c=uM(r,hse);return!i||!i.length?null:L.createElement(Tt,{className:"recharts-label-list"},i.map(function(h,d){var f=Oe(s)?n(h,d):hi(h&&h.payload,s),p=Oe(o)?{}:{id:"".concat(o,"-").concat(d)};return L.createElement(Qn,fx({},Pe(h,!0),c,p,{parentViewBox:h.parentViewBox,value:f,textBreakAll:l,viewBox:Qn.parseViewBox(Oe(a)?h:cM(cM({},h),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}Hl.displayName="LabelList";function _se(t,e){return t?t===!0?L.createElement(Hl,{key:"labelList-implicit",data:e}):L.isValidElement(t)||Ee(t)?L.createElement(Hl,{key:"labelList-implicit",data:e,content:t}):Pp(t)?L.createElement(Hl,fx({data:e},t,{key:"labelList-implicit"})):null:null}function Sse(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=ws(r,Hl).map(function(a,o){return z.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=_se(t.label,e);return[s].concat(dse(i))}Hl.renderCallByParent=Sse;function Fm(t){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fm(t)}function zE(){return zE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zE.apply(this,arguments)}function hM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hM(Object(n),!0).forEach(function(r){Ase(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ase(t,e,n){return e=Ese(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ese(t){var e=Tse(t,"string");return Fm(e)=="symbol"?e:e+""}function Tse(t,e){if(Fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cse=function(e,n){var r=ms(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},J0=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,h=l*(o?1:-1)+i,d=Math.asin(l/h)/dx,f=c?s:s+a*d,p=Ln(n,r,h,f),g=Ln(n,r,i,f),m=c?s-a*d:s,b=Ln(n,r,h*Math.cos(d*dx),m);return{center:p,circleTangency:g,lineTangency:b,theta:d}},eB=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,l=Cse(a,o),c=a+l,h=Ln(n,r,s,a),d=Ln(n,r,s,c),f="M ".concat(h.x,",").concat(h.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=Ln(n,r,i,a),g=Ln(n,r,i,c);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},Pse=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,h=e.endAngle,d=ms(h-c),f=J0({cx:n,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:l}),p=f.circleTangency,g=f.lineTangency,m=f.theta,b=J0({cx:n,cy:r,radius:s,angle:h,sign:-d,cornerRadius:a,cornerIsExternal:l}),y=b.circleTangency,w=b.lineTangency,v=b.theta,_=l?Math.abs(c-h):Math.abs(c-h)-m-v;if(_<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):eB({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:h});var x="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var S=J0({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),T=S.circleTangency,O=S.lineTangency,k=S.theta,M=J0({cx:n,cy:r,radius:i,angle:h,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),N=M.circleTangency,I=M.lineTangency,R=M.theta,F=l?Math.abs(c-h):Math.abs(c-h)-k-R;if(F<0&&a===0)return"".concat(x,"L").concat(n,",").concat(r,"Z");x+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(F>180),",").concat(+(d>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,"Z")}else x+="L".concat(n,",").concat(r,"Z");return x},Ose={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tB=function(e){var n=dM(dM({},Ose),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,h=n.startAngle,d=n.endAngle,f=n.className;if(a<s||h===d)return null;var p=De("recharts-sector",f),g=a-s,m=ih(o,g,0,!0),b;return m>0&&Math.abs(h-d)<360?b=Pse({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(m,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:d}):b=eB({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:h,endAngle:d}),L.createElement("path",zE({},Pe(n,!0),{className:p,d:b,role:"img"}))};function Bm(t){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(t)}function HE(){return HE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HE.apply(this,arguments)}function fM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fM(Object(n),!0).forEach(function(r){kse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kse(t,e,n){return e=Nse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nse(t){var e=Ise(t,"string");return Bm(e)=="symbol"?e:e+""}function Ise(t,e){if(Bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gM={curveBasisClosed:PG,curveBasisOpen:OG,curveBasis:CG,curveBumpX:fG,curveBumpY:pG,curveLinearClosed:kG,curveLinear:J1,curveMonotoneX:NG,curveMonotoneY:IG,curveNatural:MG,curveStep:RG,curveStepAfter:DG,curveStepBefore:jG},Q0=function(e){return e.x===+e.x&&e.y===+e.y},tg=function(e){return e.x},ng=function(e){return e.y},Mse=function(e,n){if(Ee(e))return e;var r="curve".concat(X1(e));return(r==="curveMonotone"||r==="curveBump")&&n?gM["".concat(r).concat(n==="vertical"?"Y":"X")]:gM[r]||J1},Rse=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,h=Mse(r,o),d=c?s.filter(function(m){return Q0(m)}):s,f;if(Array.isArray(a)){var p=c?a.filter(function(m){return Q0(m)}):a,g=d.map(function(m,b){return pM(pM({},m),{},{base:p[b]})});return o==="vertical"?f=z0().y(ng).x1(tg).x0(function(m){return m.base.x}):f=z0().x(tg).y1(ng).y0(function(m){return m.base.y}),f.defined(Q0).curve(h),f(g)}return o==="vertical"&&J(a)?f=z0().y(ng).x1(tg).x0(a):J(a)?f=z0().x(tg).y1(ng).y0(a):f=rL().x(tg).y(ng),f.defined(Q0).curve(h),f(d)},Yg=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?Rse(e):i;return z.createElement("path",HE({},Pe(e,!1),Dw(e),{className:De("recharts-curve",n),d:a,ref:s}))},nB={exports:{}},jse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Dse=jse,$se=Dse;function rB(){}function iB(){}iB.resetWarningCache=rB;var Lse=function(){function t(r,i,s,a,o,l){if(l!==$se){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:iB,resetWarningCache:rB};return n.PropTypes=n,n};nB.exports=Lse();var Fse=nB.exports;const Be=ut(Fse),{getOwnPropertyNames:Bse,getOwnPropertySymbols:Use}=Object,{hasOwnProperty:zse}=Object.prototype;function PS(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Z0(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);const l=t(n,r,i);return s.delete(n),s.delete(r),l}}function Hse(t){return t!=null?t[Symbol.toStringTag]:void 0}function mM(t){return Bse(t).concat(Use(t))}const Wse=Object.hasOwn||((t,e)=>zse.call(t,e));function gh(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Vse="__v",Gse="__o",qse="_owner",{getOwnPropertyDescriptor:yM,keys:vM}=Object;function Kse(t,e){return t.byteLength===e.byteLength&&px(new Uint8Array(t),new Uint8Array(e))}function Xse(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Yse(t,e){return t.byteLength===e.byteLength&&px(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Jse(t,e){return gh(t.getTime(),e.getTime())}function Qse(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Zse(t,e){return t===e}function bM(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let a,o,l=0;for(;(a=s.next())&&!a.done;){const c=e.entries();let h=!1,d=0;for(;(o=c.next())&&!o.done;){if(i[d]){d++;continue}const f=a.value,p=o.value;if(n.equals(f[0],p[0],l,d,t,e,n)&&n.equals(f[1],p[1],f[0],p[0],t,e,n)){h=i[d]=!0;break}d++}if(!h)return!1;l++}return!0}const eae=gh;function tae(t,e,n){const r=vM(t);let i=r.length;if(vM(e).length!==i)return!1;for(;i-- >0;)if(!sB(t,e,n,r[i]))return!1;return!0}function rg(t,e,n){const r=mM(t);let i=r.length;if(mM(e).length!==i)return!1;let s,a,o;for(;i-- >0;)if(s=r[i],!sB(t,e,n,s)||(a=yM(t,s),o=yM(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function nae(t,e){return gh(t.valueOf(),e.valueOf())}function rae(t,e){return t.source===e.source&&t.flags===e.flags}function wM(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let a,o;for(;(a=s.next())&&!a.done;){const l=e.values();let c=!1,h=0;for(;(o=l.next())&&!o.done;){if(!i[h]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){c=i[h]=!0;break}h++}if(!c)return!1}return!0}function px(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function iae(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function sB(t,e,n,r){return(r===qse||r===Gse||r===Vse)&&(t.$$typeof||e.$$typeof)?!0:Wse(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const sae="[object ArrayBuffer]",aae="[object Arguments]",oae="[object Boolean]",lae="[object DataView]",cae="[object Date]",uae="[object Error]",hae="[object Map]",dae="[object Number]",fae="[object Object]",pae="[object RegExp]",gae="[object Set]",mae="[object String]",yae={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},vae="[object URL]",bae=Object.prototype.toString;function wae({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:o,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:h,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:g}){return function(b,y,w){if(b===y)return!0;if(b==null||y==null)return!1;const v=typeof b;if(v!==typeof y)return!1;if(v!=="object")return v==="number"?o(b,y,w):v==="function"?s(b,y,w):!1;const _=b.constructor;if(_!==y.constructor)return!1;if(_===Object)return l(b,y,w);if(Array.isArray(b))return e(b,y,w);if(_===Date)return r(b,y,w);if(_===RegExp)return h(b,y,w);if(_===Map)return a(b,y,w);if(_===Set)return d(b,y,w);const x=bae.call(b);if(x===cae)return r(b,y,w);if(x===pae)return h(b,y,w);if(x===hae)return a(b,y,w);if(x===gae)return d(b,y,w);if(x===fae)return typeof b.then!="function"&&typeof y.then!="function"&&l(b,y,w);if(x===vae)return p(b,y,w);if(x===uae)return i(b,y,w);if(x===aae)return l(b,y,w);if(yae[x])return f(b,y,w);if(x===sae)return t(b,y,w);if(x===lae)return n(b,y,w);if(x===oae||x===dae||x===mae)return c(b,y,w);if(g){let S=g[x];if(!S){const T=Hse(b);T&&(S=g[T])}if(S)return S(b,y,w)}return!1}}function xae({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:Kse,areArraysEqual:n?rg:Xse,areDataViewsEqual:Yse,areDatesEqual:Jse,areErrorsEqual:Qse,areFunctionsEqual:Zse,areMapsEqual:n?PS(bM,rg):bM,areNumbersEqual:eae,areObjectsEqual:n?rg:tae,arePrimitiveWrappersEqual:nae,areRegExpsEqual:rae,areSetsEqual:n?PS(wM,rg):wM,areTypedArraysEqual:n?PS(px,rg):px,areUrlsEqual:iae,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Z0(r.areArraysEqual),s=Z0(r.areMapsEqual),a=Z0(r.areObjectsEqual),o=Z0(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:o})}return r}function _ae(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function Sae({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(o,l){const{cache:c=t?new WeakMap:void 0,meta:h}=n();return e(o,l,{cache:c,equals:r,meta:h,strict:i})};if(t)return function(o,l){return e(o,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,l){return e(o,l,s)}}const Aae=tc();tc({strict:!0});tc({circular:!0});tc({circular:!0,strict:!0});tc({createInternalComparator:()=>gh});tc({strict:!0,createInternalComparator:()=>gh});tc({circular:!0,createInternalComparator:()=>gh});tc({circular:!0,createInternalComparator:()=>gh,strict:!0});function tc(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=xae(t),a=wae(s),o=n?n(a):_ae(a);return Sae({circular:e,comparator:a,createState:r,equals:o,strict:i})}function Eae(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function xM(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Eae(i)};requestAnimationFrame(r)}function WE(t){"@babel/helpers - typeof";return WE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WE(t)}function Tae(t){return kae(t)||Oae(t)||Pae(t)||Cae()}function Cae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pae(t,e){if(t){if(typeof t=="string")return _M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _M(t,e)}}function _M(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Oae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kae(t){if(Array.isArray(t))return t}function Nae(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=Tae(a),l=o[0],c=o.slice(1);if(typeof l=="number"){xM(i.bind(null,c),l);return}i(l),xM(i.bind(null,c));return}WE(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Um(t){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Um(t)}function SM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SM(Object(n),!0).forEach(function(r){aB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aB(t,e,n){return e=Iae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iae(t){var e=Mae(t,"string");return Um(e)==="symbol"?e:String(e)}function Mae(t,e){if(Um(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Um(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rae=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},jae=function(e){return e},Dae=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Jg=function(e,n){return Object.keys(n).reduce(function(r,i){return AM(AM({},r),{},aB({},i,e(i,n[i])))},{})},EM=function(e,n,r){return e.map(function(i){return"".concat(Dae(i)," ").concat(n,"ms ").concat(r)}).join(",")};function $ae(t,e){return Bae(t)||Fae(t,e)||oB(t,e)||Lae()}function Lae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Bae(t){if(Array.isArray(t))return t}function Uae(t){return Wae(t)||Hae(t)||oB(t)||zae()}function zae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oB(t,e){if(t){if(typeof t=="string")return VE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VE(t,e)}}function Hae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wae(t){if(Array.isArray(t))return VE(t)}function VE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gx=1e-4,lB=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},cB=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},TM=function(e,n){return function(r){var i=lB(e,n);return cB(i,r)}},Vae=function(e,n){return function(r){var i=lB(e,n),s=[].concat(Uae(i.map(function(a,o){return a*o}).slice(1)),[0]);return cB(s,r)}},CM=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),h=$ae(c,4);i=h[0],s=h[1],a=h[2],o=h[3]}}}var d=TM(i,a),f=TM(s,o),p=Vae(i,a),g=function(y){return y>1?1:y<0?0:y},m=function(y){for(var w=y>1?1:y,v=w,_=0;_<8;++_){var x=d(v)-w,S=p(v);if(Math.abs(x-w)<gx||S<gx)return f(v);v=g(v-x/S)}return f(v)};return m.isStepper=!1,m},Gae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,l=function(h,d,f){var p=-(h-d)*r,g=f*s,m=f+(p-g)*o/1e3,b=f*o/1e3+h;return Math.abs(b-d)<gx&&Math.abs(m)<gx?[d,0]:[b,m]};return l.isStepper=!0,l.dt=o,l},qae=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CM(i);case"spring":return Gae();default:if(i.split("(")[0]==="cubic-bezier")return CM(i)}return typeof i=="function"?i:null};function zm(t){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zm(t)}function PM(t){return Yae(t)||Xae(t)||uB(t)||Kae()}function Kae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yae(t){if(Array.isArray(t))return qE(t)}function OM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OM(Object(n),!0).forEach(function(r){GE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GE(t,e,n){return e=Jae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jae(t){var e=Qae(t,"string");return zm(e)==="symbol"?e:String(e)}function Qae(t,e){if(zm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zae(t,e){return noe(t)||toe(t,e)||uB(t,e)||eoe()}function eoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uB(t,e){if(t){if(typeof t=="string")return qE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qE(t,e)}}function qE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function toe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function noe(t){if(Array.isArray(t))return t}var mx=function(e,n,r){return e+(n-e)*r},KE=function(e){var n=e.from,r=e.to;return n!==r},roe=function t(e,n,r){var i=Jg(function(s,a){if(KE(a)){var o=e(a.from,a.to,a.velocity),l=Zae(o,2),c=l[0],h=l[1];return Mn(Mn({},a),{},{from:c,velocity:h})}return a},n);return r<1?Jg(function(s,a){return KE(a)?Mn(Mn({},a),{},{velocity:mx(a.velocity,i[s].velocity,r),from:mx(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const ioe=function(t,e,n,r,i){var s=Rae(t,e),a=s.reduce(function(b,y){return Mn(Mn({},b),{},GE({},y,[t[y],e[y]]))},{}),o=s.reduce(function(b,y){return Mn(Mn({},b),{},GE({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,c,h,d=function(){return null},f=function(){return Jg(function(y,w){return w.from},o)},p=function(){return!Object.values(o).filter(KE).length},g=function(y){c||(c=y);var w=y-c,v=w/n.dt;o=roe(n,o,v),i(Mn(Mn(Mn({},t),e),f())),c=y,p()||(l=requestAnimationFrame(d))},m=function(y){h||(h=y);var w=(y-h)/r,v=Jg(function(x,S){return mx.apply(void 0,PM(S).concat([n(w)]))},a);if(i(Mn(Mn(Mn({},t),e),v)),w<1)l=requestAnimationFrame(d);else{var _=Jg(function(x,S){return mx.apply(void 0,PM(S).concat([n(1)]))},a);i(Mn(Mn(Mn({},t),e),_))}};return d=n.isStepper?g:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}var soe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function aoe(t,e){if(t==null)return{};var n=ooe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ooe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function OS(t){return hoe(t)||uoe(t)||coe(t)||loe()}function loe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function coe(t,e){if(t){if(typeof t=="string")return XE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XE(t,e)}}function uoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hoe(t){if(Array.isArray(t))return XE(t)}function XE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kM(Object(n),!0).forEach(function(r){pg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pg(t,e,n){return e=hB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function doe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function foe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hB(r.key),r)}}function poe(t,e,n){return e&&foe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hB(t){var e=goe(t,"string");return hp(e)==="symbol"?e:String(e)}function goe(t,e){if(hp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function moe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YE(t,e)}function YE(t,e){return YE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YE(t,e)}function yoe(t){var e=voe();return function(){var r=yx(t),i;if(e){var s=yx(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return JE(this,i)}}function JE(t,e){if(e&&(hp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QE(t)}function QE(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function voe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yx(t){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yx(t)}var bo=function(t){moe(n,t);var e=yoe(n);function n(r,i){var s;doe(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,h=a.to,d=a.steps,f=a.children,p=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(QE(s)),s.changeStyle=s.changeStyle.bind(QE(s)),!o||p<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:h}),JE(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof f=="function")return s.state={style:c},JE(s);s.state={style:l?pg({},l,c):c}}else s.state={style:{}};return s}return poe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,h=s.to,d=s.from,f=this.state.style;if(o){if(!a){var p={style:l?pg({},l,h):h};this.state&&f&&(l&&f[l]!==h||!l&&f!==h)&&this.setState(p);return}if(!(Aae(i.to,h)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||c?d:i.to;if(this.state&&f){var b={style:l?pg({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(b)}this.runAnimation(qi(qi({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,h=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,p=ioe(a,o,qae(c),l,this.changeStyle),g=function(){s.stopJSAnimation=p()};this.manager.start([f,h,g,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],h=c.style,d=c.duration,f=d===void 0?0:d,p=function(m,b,y){if(y===0)return m;var w=b.duration,v=b.easing,_=v===void 0?"ease":v,x=b.style,S=b.properties,T=b.onAnimationEnd,O=y>0?a[y-1]:b,k=S||Object.keys(x);if(typeof _=="function"||_==="spring")return[].concat(OS(m),[s.runJSAnimation.bind(s,{from:O.style,to:x,duration:w,easing:_}),w]);var M=EM(k,w,_),N=qi(qi(qi({},O.style),x),{},{transition:M});return[].concat(OS(m),[N,w,T]).filter(jae)};return this.manager.start([l].concat(OS(a.reduce(p,[h,Math.max(f,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Nae());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,h=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,p=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var m=o?pg({},o,l):l,b=EM(Object.keys(m),a,c);g.start([h,s,qi(qi({},m),{},{transition:b}),a,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=aoe(i,soe),c=z.Children.count(s),h=this.state.style;if(typeof s=="function")return s(h);if(!o||c===0||a<=0)return s;var d=function(p){var g=p.props,m=g.style,b=m===void 0?{}:m,y=g.className,w=z.cloneElement(p,qi(qi({},l),{},{style:qi(qi({},b),h),className:y}));return w};return c===1?d(z.Children.only(s)):L.createElement("div",null,z.Children.map(s,function(f){return d(f)}))}}]),n}(z.PureComponent);bo.displayName="Animate";bo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};bo.propTypes={from:Be.oneOfType([Be.object,Be.string]),to:Be.oneOfType([Be.object,Be.string]),attributeName:Be.string,duration:Be.number,begin:Be.number,easing:Be.oneOfType([Be.string,Be.func]),steps:Be.arrayOf(Be.shape({duration:Be.number.isRequired,style:Be.object.isRequired,easing:Be.oneOfType([Be.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Be.func]),properties:Be.arrayOf("string"),onAnimationEnd:Be.func})),children:Be.oneOfType([Be.node,Be.func]),isActive:Be.bool,canBegin:Be.bool,onAnimationEnd:Be.func,shouldReAnimate:Be.bool,onAnimationStart:Be.func,onAnimationReStart:Be.func};function Hm(t){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(t)}function vx(){return vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vx.apply(this,arguments)}function boe(t,e){return Soe(t)||_oe(t,e)||xoe(t,e)||woe()}function woe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xoe(t,e){if(t){if(typeof t=="string")return NM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NM(t,e)}}function NM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _oe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Soe(t){if(Array.isArray(t))return t}function IM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(n),!0).forEach(function(r){Aoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aoe(t,e,n){return e=Eoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eoe(t){var e=Toe(t,"string");return Hm(e)=="symbol"?e:e+""}function Toe(t,e){if(Hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RM=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,h;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=s[f]>a?a:s[f];h="M".concat(e,",").concat(n+o*d[0]),d[0]>0&&(h+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),h+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(h+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*d[1])),h+="L ".concat(e+r,",").concat(n+i-o*d[2]),d[2]>0&&(h+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),h+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(h+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*d[3])),h+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);h="M ".concat(e,",").concat(n+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+l*g,",").concat(n,`
            L `).concat(e+r-l*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*g,`
            L `).concat(e+r,",").concat(n+i-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-l*g,",").concat(n+i,`
            L `).concat(e+l*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*g," Z")}else h="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},Coe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),h=Math.max(s,s+o),d=Math.min(a,a+l),f=Math.max(a,a+l);return r>=c&&r<=h&&i>=d&&i<=f}return!1},Poe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JO=function(e){var n=MM(MM({},Poe),e),r=z.useRef(),i=z.useState(-1),s=boe(i,2),a=s[0],o=s[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&o(_)}catch{}},[]);var l=n.x,c=n.y,h=n.width,d=n.height,f=n.radius,p=n.className,g=n.animationEasing,m=n.animationDuration,b=n.animationBegin,y=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||d!==+d||h===0||d===0)return null;var v=De("recharts-rectangle",p);return w?L.createElement(bo,{canBegin:a>0,from:{width:h,height:d,x:l,y:c},to:{width:h,height:d,x:l,y:c},duration:m,animationEasing:g,isActive:w},function(_){var x=_.width,S=_.height,T=_.x,O=_.y;return L.createElement(bo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:m,isActive:y,easing:g},L.createElement("path",vx({},Pe(n,!0),{className:v,d:RM(T,O,x,S,f),ref:r})))}):L.createElement("path",vx({},Pe(n,!0),{className:v,d:RM(l,c,h,d,f)}))};function ZE(){return ZE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZE.apply(this,arguments)}var QO=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=De("recharts-dot",s);return n===+n&&r===+r&&i===+i?z.createElement("circle",ZE({},Pe(e,!1),Dw(e),{className:a,cx:n,cy:r,r:i})):null};function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}var Ooe=["x","y","top","left","width","height","className"];function eT(){return eT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eT.apply(this,arguments)}function jM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function koe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jM(Object(n),!0).forEach(function(r){Noe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Noe(t,e,n){return e=Ioe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ioe(t){var e=Moe(t,"string");return Wm(e)=="symbol"?e:e+""}function Moe(t,e){if(Wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Roe(t,e){if(t==null)return{};var n=joe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function joe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Doe=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},$oe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,l=e.left,c=l===void 0?0:l,h=e.width,d=h===void 0?0:h,f=e.height,p=f===void 0?0:f,g=e.className,m=Roe(e,Ooe),b=koe({x:r,y:s,top:o,left:c,width:d,height:p},m);return!J(r)||!J(s)||!J(d)||!J(p)||!J(o)||!J(c)?null:L.createElement("path",eT({},Pe(b,!0),{className:De("recharts-cross",g),d:Doe(r,s,d,p,o,c)}))},Loe=CL,Foe=Loe(Object.getPrototypeOf,Object),Boe=Foe,Uoe=So,zoe=Boe,Hoe=Ao,Woe="[object Object]",Voe=Function.prototype,Goe=Object.prototype,dB=Voe.toString,qoe=Goe.hasOwnProperty,Koe=dB.call(Object);function Xoe(t){if(!Hoe(t)||Uoe(t)!=Woe)return!1;var e=zoe(t);if(e===null)return!0;var n=qoe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&dB.call(n)==Koe}var Yoe=Xoe;const Joe=ut(Yoe);var Qoe=So,Zoe=Ao,ele="[object Boolean]";function tle(t){return t===!0||t===!1||Zoe(t)&&Qoe(t)==ele}var nle=tle;const rle=ut(nle);function Vm(t){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vm(t)}function bx(){return bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bx.apply(this,arguments)}function ile(t,e){return lle(t)||ole(t,e)||ale(t,e)||sle()}function sle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ale(t,e){if(t){if(typeof t=="string")return DM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DM(t,e)}}function DM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ole(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function lle(t){if(Array.isArray(t))return t}function $M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$M(Object(n),!0).forEach(function(r){cle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cle(t,e,n){return e=ule(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ule(t){var e=hle(t,"string");return Vm(e)=="symbol"?e:e+""}function hle(t,e){if(Vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FM=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},dle={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fle=function(e){var n=LM(LM({},dle),e),r=z.useRef(),i=z.useState(-1),s=ile(i,2),a=s[0],o=s[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&o(v)}catch{}},[]);var l=n.x,c=n.y,h=n.upperWidth,d=n.lowerWidth,f=n.height,p=n.className,g=n.animationEasing,m=n.animationDuration,b=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||d!==+d||f!==+f||h===0&&d===0||f===0)return null;var w=De("recharts-trapezoid",p);return y?L.createElement(bo,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:h,lowerWidth:d,height:f,x:l,y:c},duration:m,animationEasing:g,isActive:y},function(v){var _=v.upperWidth,x=v.lowerWidth,S=v.height,T=v.x,O=v.y;return L.createElement(bo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:m,easing:g},L.createElement("path",bx({},Pe(n,!0),{className:w,d:FM(T,O,_,x,S),ref:r})))}):L.createElement("g",null,L.createElement("path",bx({},Pe(n,!0),{className:w,d:FM(l,c,h,d,f)})))},ple=["option","shapeType","propTransformer","activeClassName","isActive"];function Gm(t){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gm(t)}function gle(t,e){if(t==null)return{};var n=mle(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BM(Object(n),!0).forEach(function(r){yle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yle(t,e,n){return e=vle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vle(t){var e=ble(t,"string");return Gm(e)=="symbol"?e:e+""}function ble(t,e){if(Gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wle(t,e){return wx(wx({},e),t)}function xle(t,e){return t==="symbols"}function UM(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return L.createElement(JO,n);case"trapezoid":return L.createElement(fle,n);case"sector":return L.createElement(tB,n);case"symbols":if(xle(e))return L.createElement(gO,n);break;default:return null}}function _le(t){return z.isValidElement(t)?t.props:t}function Sle(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?wle:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,l=gle(t,ple),c;if(z.isValidElement(e))c=z.cloneElement(e,wx(wx({},l),_le(e)));else if(Ee(e))c=e(l);else if(Joe(e)&&!rle(e)){var h=i(e,l);c=L.createElement(UM,{shapeType:n,elementProps:h})}else{var d=l;c=L.createElement(UM,{shapeType:n,elementProps:d})}return o?L.createElement(Tt,{className:a},c):c}function d_(t,e){return e!=null&&"trapezoids"in t.props}function f_(t,e){return e!=null&&"sectors"in t.props}function qm(t,e){return e!=null&&"points"in t.props}function Ale(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function Ele(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Tle(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Cle(t,e){var n;return d_(t,e)?n=Ale:f_(t,e)?n=Ele:qm(t,e)&&(n=Tle),n}function Ple(t,e){var n;return d_(t,e)?n="trapezoids":f_(t,e)?n="sectors":qm(t,e)&&(n="points"),n}function Ole(t,e){if(d_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(f_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return qm(t,e)?e.payload:{}}function kle(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Ple(n,e),s=Ole(n,e),a=r.filter(function(l,c){var h=km(s,l),d=n.props[i].filter(function(g){var m=Cle(n,e);return m(g,e)}),f=n.props[i].indexOf(d[d.length-1]),p=c===f;return h&&p}),o=r.indexOf(a[a.length-1]);return o}var Nle=Math.ceil,Ile=Math.max;function Mle(t,e,n,r){for(var i=-1,s=Ile(Nle((e-t)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=t,t+=n;return a}var Rle=Mle,jle=VL,zM=1/0,Dle=17976931348623157e292;function $le(t){if(!t)return t===0?t:0;if(t=jle(t),t===zM||t===-zM){var e=t<0?-1:1;return e*Dle}return t===t?t:0}var Lle=$le,Fle=Rle,Ble=t_,kS=Lle;function Ule(t){return function(e,n,r){return r&&typeof r!="number"&&Ble(e,n,r)&&(n=r=void 0),e=kS(e),n===void 0?(n=e,e=0):n=kS(n),r=r===void 0?e<n?1:-1:kS(r),Fle(e,n,r,t)}}var zle=Ule,Hle=zle,Wle=Hle(),Vle=Wle;const xx=ut(Vle);function Km(t){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Km(t)}function HM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HM(Object(n),!0).forEach(function(r){fB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fB(t,e,n){return e=Gle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gle(t){var e=qle(t,"string");return Km(e)=="symbol"?e:e+""}function qle(t,e){if(Km(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kle=["Webkit","Moz","O","ms"],Xle=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=Kle.reduce(function(s,a){return WM(WM({},s),{},fB({},a+r,n))},{});return i[e]=n,i};function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function _x(){return _x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_x.apply(this,arguments)}function VM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VM(Object(n),!0).forEach(function(r){Mr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gB(r.key),r)}}function Jle(t,e,n){return e&&GM(t.prototype,e),n&&GM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qle(t,e,n){return e=Sx(e),Zle(t,pB()?Reflect.construct(e,n||[],Sx(t).constructor):e.apply(t,n))}function Zle(t,e){if(e&&(dp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ece(t)}function ece(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pB=function(){return!!t})()}function Sx(t){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sx(t)}function tce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tT(t,e)}function tT(t,e){return tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tT(t,e)}function Mr(t,e,n){return e=gB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gB(t){var e=nce(t,"string");return dp(e)=="symbol"?e:e+""}function nce(t,e){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rce=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Kg().domain(xx(0,l)).range([s,s+a-o]),h=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:h}},qM=function(e){return e.changedTouches&&!!e.changedTouches.length},fp=function(t){function e(n){var r;return Yle(this,e),r=Qle(this,e,[n]),Mr(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Mr(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Mr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),Mr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Mr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Mr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Mr(r,"handleSlideDragStart",function(i){var s=qM(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return tce(e,t),Jle(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,h=c.length-1,d=Math.min(i,s),f=Math.max(i,s),p=e.getIndexInRange(a,d),g=e.getIndexInRange(a,f);return{startIndex:p-p%l,endIndex:g===h?h:g-g%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=hi(s[r],o,r);return Ee(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,h=l.width,d=l.travellerWidth,f=l.startIndex,p=l.endIndex,g=l.onChange,m=r.pageX-s;m>0?m=Math.min(m,c+h-d-o,c+h-d-a):m<0&&(m=Math.max(m,c-a,c-o));var b=this.getIndex({startX:a+m,endX:o+m});(b.startIndex!==f||b.endIndex!==p)&&g&&g(b),this.setState({startX:a+m,endX:o+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=qM(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],h=this.props,d=h.x,f=h.width,p=h.travellerWidth,g=h.onChange,m=h.gap,b=h.data,y={startX:this.state.startX,endX:this.state.endX},w=r.pageX-s;w>0?w=Math.min(w,d+f-p-c):w<0&&(w=Math.max(w,d-c)),y[a]=c+w;var v=this.getIndex(y),_=v.startIndex,x=v.endIndex,S=function(){var O=b.length-1;return a==="startX"&&(o>l?_%m===0:x%m===0)||o<l&&x===O||a==="endX"&&(o>l?x%m===0:_%m===0)||o>l&&x===O};this.setState(Mr(Mr({},a,c+w),"brushMoveStartX",r.pageX),function(){g&&S()&&g(v)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,h=this.state[i],d=o.indexOf(h);if(d!==-1){var f=d+r;if(!(f===-1||f>=o.length)){var p=o[f];i==="startX"&&p>=c||i==="endX"&&p<=l||this.setState(Mr({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.fill,c=r.stroke;return L.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.data,c=r.children,h=r.padding,d=z.Children.only(c);return d?L.cloneElement(d,{x:i,y:s,width:a,height:o,margin:h,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,l=this.props,c=l.y,h=l.travellerWidth,d=l.height,f=l.traveller,p=l.ariaLabel,g=l.data,m=l.startIndex,b=l.endIndex,y=Math.max(r,this.props.x),w=NS(NS({},Pe(this.props,!1)),{},{x:y,y:c,width:h,height:d}),v=p||"Min value: ".concat((s=g[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=g[b])===null||a===void 0?void 0:a.name);return L.createElement(Tt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),o.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,w))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,h=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:h,y:a,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,h=this.state,d=h.startX,f=h.endX,p=5,g={pointerEvents:"none",fill:c};return L.createElement(Tt,{className:"recharts-brush-texts"},L.createElement(Jw,_x({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-p,y:a+o/2},g),this.getTextOfTick(i)),L.createElement(Jw,_x({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+p,y:a+o/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,l=r.y,c=r.width,h=r.height,d=r.alwaysShowText,f=this.state,p=f.startX,g=f.endX,m=f.isTextActive,b=f.isSlideMoving,y=f.isTravellerMoving,w=f.isTravellerFocused;if(!i||!i.length||!J(o)||!J(l)||!J(c)||!J(h)||c<=0||h<=0)return null;var v=De("recharts-brush",s),_=L.Children.count(a)===1,x=Xle("userSelect","none");return L.createElement(Tt,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(m||b||y||w||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,l=r.stroke,c=Math.floor(s+o/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),L.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return L.isValidElement(r)?s=L.cloneElement(r,i):Ee(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,h=r.startIndex,d=r.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return NS({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?rce({data:s,width:a,x:o,travellerWidth:l,startIndex:h,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);r[l]>i?o=l:a=l}return i>=r[o]?o:a}}])}(z.PureComponent);Mr(fp,"displayName","Brush");Mr(fp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ice=SO;function sce(t,e){var n;return ice(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var ace=sce,oce=bL,lce=Dp,cce=ace,uce=kr,hce=t_;function dce(t,e,n){var r=uce(t)?oce:cce;return n&&hce(t,e,n)&&(e=void 0),r(t,lce(e))}var fce=dce;const pce=ut(fce);var ia=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},KM=BL;function gce(t,e,n){e=="__proto__"&&KM?KM(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var mce=gce,yce=mce,vce=LL,bce=Dp;function wce(t,e){var n={};return e=bce(e),vce(t,function(r,i,s){yce(n,i,e(r,i,s))}),n}var xce=wce;const _ce=ut(xce);function Sce(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Ace=Sce,Ece=SO;function Tce(t,e){var n=!0;return Ece(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var Cce=Tce,Pce=Ace,Oce=Cce,kce=Dp,Nce=kr,Ice=t_;function Mce(t,e,n){var r=Nce(t)?Pce:Oce;return n&&Ice(t,e,n)&&(e=void 0),r(t,kce(e))}var Rce=Mce;const jce=ut(Rce);var Dce=["x","y"];function Xm(t){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(t)}function nT(){return nT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nT.apply(this,arguments)}function XM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ig(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(n),!0).forEach(function(r){$ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ce(t,e,n){return e=Lce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lce(t){var e=Fce(t,"string");return Xm(e)=="symbol"?e:e+""}function Fce(t,e){if(Xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bce(t,e){if(t==null)return{};var n=Uce(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zce(t,e){var n=t.x,r=t.y,i=Bce(t,Dce),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),h=parseInt(c,10),d="".concat(e.width||i.width),f=parseInt(d,10);return ig(ig(ig(ig(ig({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:h,width:f,name:e.name,radius:e.radius})}function YM(t){return L.createElement(Sle,nT({shapeType:"rectangle",propTransformer:zce,activeClassName:"recharts-active-bar"},t))}var Hce=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=J(r)||QW(r);return s?e(r,i):(s||ah(),n)}},Wce=["value","background"],mB;function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function Vce(t,e){if(t==null)return{};var n=Gce(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ax(){return Ax=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ax.apply(this,arguments)}function JM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(n),!0).forEach(function(r){Ml(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vB(r.key),r)}}function Kce(t,e,n){return e&&QM(t.prototype,e),n&&QM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xce(t,e,n){return e=Ex(e),Yce(t,yB()?Reflect.construct(e,n||[],Ex(t).constructor):e.apply(t,n))}function Yce(t,e){if(e&&(pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jce(t)}function Jce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yB=function(){return!!t})()}function Ex(t){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ex(t)}function Qce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rT(t,e)}function rT(t,e){return rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rT(t,e)}function Ml(t,e,n){return e=vB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vB(t){var e=Zce(t,"string");return pp(e)=="symbol"?e:e+""}function Zce(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var f0=function(t){function e(){var n;qce(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Xce(this,e,[].concat(i)),Ml(n,"state",{isAnimationFinished:!1}),Ml(n,"id",l0("recharts-bar-")),Ml(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Ml(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return Qce(e,t),Kce(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,h=Pe(this.props,!1);return r&&r.map(function(d,f){var p=f===l,g=p?c:a,m=Vt(Vt(Vt({},h),d),{},{isActive:p,option:g,index:f,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return L.createElement(Tt,Ax({className:"recharts-bar-rectangle"},$w(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),L.createElement(YM,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,h=i.animationEasing,d=i.animationId,f=this.state.prevData;return L.createElement(bo,{begin:l,duration:c,isActive:o,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,m=s.map(function(b,y){var w=f&&f[y];if(w){var v=Mi(w.x,b.x),_=Mi(w.y,b.y),x=Mi(w.width,b.width),S=Mi(w.height,b.height);return Vt(Vt({},b),{},{x:v(g),y:_(g),width:x(g),height:S(g)})}if(a==="horizontal"){var T=Mi(0,b.height),O=T(g);return Vt(Vt({},b),{},{y:b.y+b.height-O,height:O})}var k=Mi(0,b.width),M=k(g);return Vt(Vt({},b),{},{width:M})});return L.createElement(Tt,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!km(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=Pe(this.props.background,!1);return s.map(function(c,h){c.value;var d=c.background,f=Vce(c,Wce);if(!d)return null;var p=Vt(Vt(Vt(Vt(Vt({},f),{},{fill:"#eee"},d),l),$w(r.props,c,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:h,className:"recharts-bar-background-rectangle"});return L.createElement(YM,Ax({key:"background-bar-".concat(h),option:r.props.background,isActive:h===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,h=s.children,d=ws(h,h_);if(!d)return null;var f=c==="vertical"?a[0].height/2:a[0].width/2,p=function(b,y){var w=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:w,errorVal:hi(b,y)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return L.createElement(Tt,g,d.map(function(m){return L.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,l=r.yAxis,c=r.left,h=r.top,d=r.width,f=r.height,p=r.isAnimationActive,g=r.background,m=r.id;if(i||!s||!s.length)return null;var b=this.state.isAnimationFinished,y=De("recharts-bar",a),w=o&&o.allowDataOverflow,v=l&&l.allowDataOverflow,_=w||v,x=Oe(m)?this.id:m;return L.createElement(Tt,{className:y},w||v?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(x)},L.createElement("rect",{x:w?c:c-d/2,y:v?h:h-f/2,width:w?d:d*2,height:v?f:f*2}))):null,L.createElement(Tt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(x,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,x),(!p||b)&&Hl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(z.PureComponent);mB=f0;Ml(f0,"displayName","Bar");Ml(f0,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!$p.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ml(f0,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,h=t.dataStartIndex,d=t.displayedData,f=t.offset,p=Sie(r,n);if(!p)return null;var g=e.layout,m=n.type.defaultProps,b=m!==void 0?Vt(Vt({},m),n.props):n.props,y=b.dataKey,w=b.children,v=b.minPointSize,_=g==="horizontal"?a:s,x=c?_.scale.domain():null,S=Nie({numericAxis:_}),T=ws(w,qL),O=d.map(function(k,M){var N,I,R,F,D,j;c?N=Aie(c[h+M],x):(N=hi(k,y),Array.isArray(N)||(N=[S,N]));var B=Hce(v,mB.defaultProps.minPointSize)(N[1],M);if(g==="horizontal"){var $,U=[a.scale(N[0]),a.scale(N[1])],V=U[0],G=U[1];I=eM({axis:s,ticks:o,bandSize:i,offset:p.offset,entry:k,index:M}),R=($=G??V)!==null&&$!==void 0?$:void 0,F=p.size;var W=V-G;if(D=Number.isNaN(W)?0:W,j={x:I,y:a.y,width:F,height:a.height},Math.abs(B)>0&&Math.abs(D)<Math.abs(B)){var Y=ms(D||B)*(Math.abs(B)-Math.abs(D));R-=Y,D+=Y}}else{var pe=[s.scale(N[0]),s.scale(N[1])],he=pe[0],Se=pe[1];if(I=he,R=eM({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:k,index:M}),F=Se-he,D=p.size,j={x:s.x,y:R,width:s.width,height:D},Math.abs(B)>0&&Math.abs(F)<Math.abs(B)){var ke=ms(F||B)*(Math.abs(B)-Math.abs(F));F+=ke}}return Vt(Vt(Vt({},k),{},{x:I,y:R,width:F,height:D,value:c?N:N[1],payload:k,background:j},T&&T[M]&&T[M].props),{},{tooltipPayload:[QF(n,k)],tooltipPosition:{x:I+F/2,y:R+D/2}})});return Vt({data:O,layout:g},f)});function Ym(t){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ym(t)}function eue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bB(r.key),r)}}function tue(t,e,n){return e&&ZM(t.prototype,e),n&&ZM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eR(Object(n),!0).forEach(function(r){p_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p_(t,e,n){return e=bB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bB(t){var e=nue(t,"string");return Ym(e)=="symbol"?e:e+""}function nue(t,e){if(Ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rue=function(e,n,r,i,s){var a=e.width,o=e.height,l=e.layout,c=e.children,h=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},f=!!ti(c,f0);return h.reduce(function(p,g){var m=n[g],b=m.orientation,y=m.domain,w=m.padding,v=w===void 0?{}:w,_=m.mirror,x=m.reversed,S="".concat(b).concat(_?"Mirror":""),T,O,k,M,N;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var I=y[1]-y[0],R=1/0,F=m.categoricalDomain.sort(tV);if(F.forEach(function(pe,he){he>0&&(R=Math.min((pe||0)-(F[he-1]||0),R))}),Number.isFinite(R)){var D=R/I,j=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(T=D*j/2),m.padding==="no-gap"){var B=ih(e.barCategoryGap,D*j),$=D*j/2;T=$-B-($-B)/j*B}}}i==="xAxis"?O=[r.left+(v.left||0)+(T||0),r.left+r.width-(v.right||0)-(T||0)]:i==="yAxis"?O=l==="horizontal"?[r.top+r.height-(v.bottom||0),r.top+(v.top||0)]:[r.top+(v.top||0)+(T||0),r.top+r.height-(v.bottom||0)-(T||0)]:O=m.range,x&&(O=[O[1],O[0]]);var U=xie(m,s,f),V=U.scale,G=U.realScaleType;V.domain(y).range(O),_ie(V);var W=kie(V,ds(ds({},m),{},{realScaleType:G}));i==="xAxis"?(N=b==="top"&&!_||b==="bottom"&&_,k=r.left,M=d[S]-N*m.height):i==="yAxis"&&(N=b==="left"&&!_||b==="right"&&_,k=d[S]-N*m.width,M=r.top);var Y=ds(ds(ds({},m),W),{},{realScaleType:G,x:k,y:M,scale:V,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return Y.bandSize=hx(Y,W),!m.hide&&i==="xAxis"?d[S]+=(N?-1:1)*Y.height:m.hide||(d[S]+=(N?-1:1)*Y.width),ds(ds({},p),{},p_({},g,Y))},{})},wB=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},iue=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return wB({x:n,y:r},{x:i,y:s})},xB=function(){function t(e){eue(this,t),this.scale=e}return tue(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();p_(xB,"EPS",1e-4);var ZO=function(e){var n=Object.keys(e).reduce(function(r,i){return ds(ds({},r),{},p_({},i,xB.create(e[i])))},{});return ds(ds({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return _ce(i,function(l,c){return n[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return jce(i,function(s,a){return n[a].isInRange(s)})}})};function sue(t){return(t%180+180)%180}var aue=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=sue(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},oue=iW(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),_B=z.createContext(void 0),SB=z.createContext(void 0),AB=z.createContext(void 0),lue=z.createContext({}),EB=z.createContext(void 0),TB=z.createContext(0),CB=z.createContext(0),tR=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,l=e.width,c=e.height,h=oue(s);return L.createElement(_B.Provider,{value:r},L.createElement(SB.Provider,{value:i},L.createElement(lue.Provider,{value:s},L.createElement(AB.Provider,{value:h},L.createElement(EB.Provider,{value:a},L.createElement(TB.Provider,{value:c},L.createElement(CB.Provider,{value:l},o)))))))},cue=function(){return z.useContext(EB)},PB=function(e){var n=z.useContext(_B);n==null&&ah();var r=n[e];return r==null&&ah(),r},OB=function(e){var n=z.useContext(SB);n==null&&ah();var r=n[e];return r==null&&ah(),r},uue=function(){var e=z.useContext(AB);return e},kB=function(){return z.useContext(CB)},NB=function(){return z.useContext(TB)};function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function hue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function due(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MB(r.key),r)}}function fue(t,e,n){return e&&due(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pue(t,e,n){return e=Tx(e),gue(t,IB()?Reflect.construct(e,n||[],Tx(t).constructor):e.apply(t,n))}function gue(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mue(t)}function mue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IB=function(){return!!t})()}function Tx(t){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tx(t)}function yue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iT(t,e)}function iT(t,e){return iT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iT(t,e)}function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(r){ek(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ek(t,e,n){return e=MB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MB(t){var e=vue(t,"string");return gp(e)=="symbol"?e:e+""}function vue(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bue(t,e){return Sue(t)||_ue(t,e)||xue(t,e)||wue()}function wue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xue(t,e){if(t){if(typeof t=="string")return iR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iR(t,e)}}function iR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _ue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Sue(t){if(Array.isArray(t))return t}function sT(){return sT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sT.apply(this,arguments)}var Aue=function(e,n){var r;return L.isValidElement(e)?r=L.cloneElement(e,n):Ee(e)?r=e(n):r=L.createElement("line",sT({},n,{className:"recharts-reference-line-line"})),r},Eue=function(e,n,r,i,s,a,o,l,c){var h=s.x,d=s.y,f=s.width,p=s.height;if(r){var g=c.y,m=e.y.apply(g,{position:a});if(ia(c,"discard")&&!e.y.isInRange(m))return null;var b=[{x:h+f,y:m},{x:h,y:m}];return l==="left"?b.reverse():b}if(n){var y=c.x,w=e.x.apply(y,{position:a});if(ia(c,"discard")&&!e.x.isInRange(w))return null;var v=[{x:w,y:d+p},{x:w,y:d}];return o==="top"?v.reverse():v}if(i){var _=c.segment,x=_.map(function(S){return e.apply(S,{position:a})});return ia(c,"discard")&&pce(x,function(S){return!e.isInRange(S)})?null:x}return null};function Tue(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,l=t.alwaysShow,c=cue(),h=PB(i),d=OB(s),f=uue();if(!c||!f)return null;Xu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=ZO({x:h.scale,y:d.scale}),g=cn(e),m=cn(n),b=r&&r.length===2,y=Eue(p,g,m,b,f,t.position,h.orientation,d.orientation,t);if(!y)return null;var w=bue(y,2),v=w[0],_=v.x,x=v.y,S=w[1],T=S.x,O=S.y,k=ia(t,"hidden")?"url(#".concat(c,")"):void 0,M=rR(rR({clipPath:k},Pe(t,!0)),{},{x1:_,y1:x,x2:T,y2:O});return L.createElement(Tt,{className:De("recharts-reference-line",o)},Aue(a,M),Qn.renderCallByParent(t,iue({x1:_,y1:x,x2:T,y2:O})))}var tk=function(t){function e(){return hue(this,e),pue(this,e,arguments)}return yue(e,t),fue(e,[{key:"render",value:function(){return L.createElement(Tue,this.props)}}])}(L.Component);ek(tk,"displayName","ReferenceLine");ek(tk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function aT(){return aT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aT.apply(this,arguments)}function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function sR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sR(Object(n),!0).forEach(function(r){g_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jB(r.key),r)}}function Oue(t,e,n){return e&&Pue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kue(t,e,n){return e=Cx(e),Nue(t,RB()?Reflect.construct(e,n||[],Cx(t).constructor):e.apply(t,n))}function Nue(t,e){if(e&&(mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iue(t)}function Iue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RB=function(){return!!t})()}function Cx(t){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cx(t)}function Mue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oT(t,e)}function oT(t,e){return oT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oT(t,e)}function g_(t,e,n){return e=jB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jB(t){var e=Rue(t,"string");return mp(e)=="symbol"?e:e+""}function Rue(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jue=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=ZO({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return ia(e,"discard")&&!a.isInRange(o)?null:o},m_=function(t){function e(){return Cue(this,e),kue(this,e,arguments)}return Mue(e,t),Oue(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,l=r.clipPathId,c=cn(i),h=cn(s);if(Xu(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!h)return null;var d=jue(this.props);if(!d)return null;var f=d.x,p=d.y,g=this.props,m=g.shape,b=g.className,y=ia(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=aR(aR({clipPath:y},Pe(this.props,!0)),{},{cx:f,cy:p});return L.createElement(Tt,{className:De("recharts-reference-dot",b)},e.renderDot(m,w),Qn.renderCallByParent(this.props,{x:f-a,y:p-a,width:2*a,height:2*a}))}}])}(L.Component);g_(m_,"displayName","ReferenceDot");g_(m_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});g_(m_,"renderDot",function(t,e){var n;return L.isValidElement(t)?n=L.cloneElement(t,e):Ee(t)?n=t(e):n=L.createElement(QO,aT({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function lT(){return lT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lT.apply(this,arguments)}function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function oR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oR(Object(n),!0).forEach(function(r){y_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Due(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$B(r.key),r)}}function Lue(t,e,n){return e&&$ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fue(t,e,n){return e=Px(e),Bue(t,DB()?Reflect.construct(e,n||[],Px(t).constructor):e.apply(t,n))}function Bue(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uue(t)}function Uue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DB=function(){return!!t})()}function Px(t){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Px(t)}function zue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cT(t,e)}function cT(t,e){return cT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cT(t,e)}function y_(t,e,n){return e=$B(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $B(t){var e=Hue(t,"string");return yp(e)=="symbol"?e:e+""}function Hue(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wue=function(e,n,r,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,h=s.xAxis,d=s.yAxis;if(!h||!d)return null;var f=ZO({x:h.scale,y:d.scale}),p={x:e?f.x.apply(a,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(c,{position:"end"}):f.y.rangeMax};return ia(s,"discard")&&(!f.isInRange(p)||!f.isInRange(g))?null:wB(p,g)},v_=function(t){function e(){return Due(this,e),Fue(this,e,arguments)}return zue(e,t),Lue(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,h=r.clipPathId;Xu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=cn(i),f=cn(s),p=cn(a),g=cn(o),m=this.props.shape;if(!d&&!f&&!p&&!g&&!m)return null;var b=Wue(d,f,p,g,this.props);if(!b&&!m)return null;var y=ia(this.props,"hidden")?"url(#".concat(h,")"):void 0;return L.createElement(Tt,{className:De("recharts-reference-area",l)},e.renderRect(m,lR(lR({clipPath:y},Pe(this.props,!0)),b)),Qn.renderCallByParent(this.props,b))}}])}(L.Component);y_(v_,"displayName","ReferenceArea");y_(v_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});y_(v_,"renderRect",function(t,e){var n;return L.isValidElement(t)?n=L.cloneElement(t,e):Ee(t)?n=t(e):n=L.createElement(JO,lT({},e,{className:"recharts-reference-area-rect"})),n});function LB(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Vue(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return aue(r,n)}function Gue(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function Ox(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function que(t,e){return LB(t,e+1)}function Kue(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,l=0,c=1,h=a,d=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:LB(r,c)};var m=l,b,y=function(){return b===void 0&&(b=n(g,m)),b},w=g.coordinate,v=l===0||Ox(t,w,y,h,o);v||(l=0,h=a,c+=1),v&&(h=w+t*(y()/2+i),l+=c)},f;c<=s.length;)if(f=d(),f)return f.v;return[]}function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function cR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cR(Object(n),!0).forEach(function(r){Xue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xue(t,e,n){return e=Yue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yue(t){var e=Jue(t,"string");return Jm(e)=="symbol"?e:e+""}function Jue(t,e){if(Jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Que(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,l=e.end,c=function(f){var p=s[f],g,m=function(){return g===void 0&&(g=n(p,f)),g};if(f===a-1){var b=t*(p.coordinate+t*m()/2-l);s[f]=p=Yn(Yn({},p),{},{tickCoord:b>0?p.coordinate-b*t:p.coordinate})}else s[f]=p=Yn(Yn({},p),{},{tickCoord:p.coordinate});var y=Ox(t,p.tickCoord,m,o,l);y&&(l=p.tickCoord-t*(m()/2+i),s[f]=Yn(Yn({},p),{},{isShow:!0}))},h=a-1;h>=0;h--)c(h);return s}function Zue(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end;if(s){var h=r[o-1],d=n(h,o-1),f=t*(h.coordinate+t*d/2-c);a[o-1]=h=Yn(Yn({},h),{},{tickCoord:f>0?h.coordinate-f*t:h.coordinate});var p=Ox(t,h.tickCoord,function(){return d},l,c);p&&(c=h.tickCoord-t*(d/2+i),a[o-1]=Yn(Yn({},h),{},{isShow:!0}))}for(var g=s?o-1:o,m=function(w){var v=a[w],_,x=function(){return _===void 0&&(_=n(v,w)),_};if(w===0){var S=t*(v.coordinate-t*x()/2-l);a[w]=v=Yn(Yn({},v),{},{tickCoord:S<0?v.coordinate-S*t:v.coordinate})}else a[w]=v=Yn(Yn({},v),{},{tickCoord:v.coordinate});var T=Ox(t,v.tickCoord,x,l,c);T&&(l=v.tickCoord+t*(x()/2+i),a[w]=Yn(Yn({},v),{},{isShow:!0}))},b=0;b<g;b++)m(b);return a}function ehe(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,h=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(J(l)||$p.isSsr)return que(i,typeof l=="number"&&J(l)?l:0);var f=[],p=o==="top"||o==="bottom"?"width":"height",g=h&&p==="width"?qg(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(v,_){var x=Ee(c)?c(v.value,_):v.value;return p==="width"?Vue(qg(x,{fontSize:e,letterSpacing:n}),g,d):qg(x,{fontSize:e,letterSpacing:n})[p]},b=i.length>=2?ms(i[1].coordinate-i[0].coordinate):1,y=Gue(s,b,p);return l==="equidistantPreserveStart"?Kue(b,y,m,i,a):(l==="preserveStart"||l==="preserveStartEnd"?f=Zue(b,y,m,i,a,l==="preserveStartEnd"):f=Que(b,y,m,i,a),f.filter(function(w){return w.isShow}))}var the=["viewBox"],nhe=["viewBox"],rhe=["ticks"];function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(this,arguments)}function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(r){nk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IS(t,e){if(t==null)return{};var n=ihe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ihe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function she(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BB(r.key),r)}}function ahe(t,e,n){return e&&hR(t.prototype,e),n&&hR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ohe(t,e,n){return e=kx(e),lhe(t,FB()?Reflect.construct(e,n||[],kx(t).constructor):e.apply(t,n))}function lhe(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return che(t)}function che(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!t})()}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kx(t)}function uhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uT(t,e)}function uT(t,e){return uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uT(t,e)}function nk(t,e,n){return e=BB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BB(t){var e=hhe(t,"string");return vp(e)=="symbol"?e:e+""}function hhe(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b_=function(t){function e(n){var r;return she(this,e),r=ohe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return uhe(e,t),ahe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=IS(r,the),o=this.props,l=o.viewBox,c=IS(o,nhe);return!gd(s,l)||!gd(a,c)||!gd(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,h=i.tickSize,d=i.mirror,f=i.tickMargin,p,g,m,b,y,w,v=d?-1:1,_=r.tickSize||h,x=J(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":p=g=r.coordinate,b=a+ +!d*l,m=b-v*_,w=m-v*f,y=x;break;case"left":m=b=r.coordinate,g=s+ +!d*o,p=g-v*_,y=p-v*f,w=x;break;case"right":m=b=r.coordinate,g=s+ +d*o,p=g+v*_,y=p+v*f,w=x;break;default:p=g=r.coordinate,b=a+ +d*l,m=b+v*_,w=m+v*f,y=x;break}return{line:{x1:p,y1:m,x2:g,y2:b},tick:{x:y,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.orientation,c=r.mirror,h=r.axisLine,d=Zt(Zt(Zt({},Pe(this.props,!1)),Pe(h,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=Zt(Zt({},d),{},{x1:i,y1:s+f*o,x2:i+a,y2:s+f*o})}else{var p=+(l==="left"&&!c||l==="right"&&c);d=Zt(Zt({},d),{},{x1:i+p*a,y1:s,x2:i+p*a,y2:s+o})}return L.createElement("line",ed({},d,{className:De("recharts-cartesian-axis-line",Li(h,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,h=o.tick,d=o.tickFormatter,f=o.unit,p=ehe(Zt(Zt({},this.props),{},{ticks:r}),i,s),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),b=Pe(this.props,!1),y=Pe(h,!1),w=Zt(Zt({},b),{},{fill:"none"},Pe(l,!1)),v=p.map(function(_,x){var S=a.getTickLineCoord(_),T=S.line,O=S.tick,k=Zt(Zt(Zt(Zt({textAnchor:g,verticalAnchor:m},b),{},{stroke:"none",fill:c},y),O),{},{index:x,payload:_,visibleTicksCount:p.length,tickFormatter:d});return L.createElement(Tt,ed({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},$w(a.props,_,x)),l&&L.createElement("line",ed({},w,T,{className:De("recharts-cartesian-axis-tick-line",Li(l,"className"))})),h&&e.renderTickItem(h,k,"".concat(Ee(d)?d(_.value,x):_.value).concat(f||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,h=i.hide;if(h)return null;var d=this.props,f=d.ticks,p=IS(d,rhe),g=f;return Ee(l)&&(g=f&&f.length>0?l(this.props):l(p)),a<=0||o<=0||!g||!g.length?null:L.createElement(Tt,{className:De("recharts-cartesian-axis",c),ref:function(b){r.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Qn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,o=De(i.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(r)?a=L.cloneElement(r,Zt(Zt({},i),{},{className:o})):Ee(r)?a=r(Zt(Zt({},i),{},{className:o})):a=L.createElement(Jw,ed({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(z.Component);nk(b_,"displayName","CartesianAxis");nk(b_,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var dhe=["layout","type","stroke","connectNulls","isRange","ref"],fhe=["key"],UB;function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function zB(t,e){if(t==null)return{};var n=phe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function phe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(this,arguments)}function dR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dR(Object(n),!0).forEach(function(r){ea(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ghe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WB(r.key),r)}}function mhe(t,e,n){return e&&fR(t.prototype,e),n&&fR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yhe(t,e,n){return e=Nx(e),vhe(t,HB()?Reflect.construct(e,n||[],Nx(t).constructor):e.apply(t,n))}function vhe(t,e){if(e&&(bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bhe(t)}function bhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HB=function(){return!!t})()}function Nx(t){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nx(t)}function whe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hT(t,e)}function hT(t,e){return hT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hT(t,e)}function ea(t,e,n){return e=WB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WB(t){var e=xhe(t,"string");return bp(e)=="symbol"?e:e+""}function xhe(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nc=function(t){function e(){var n;ghe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=yhe(this,e,[].concat(i)),ea(n,"state",{isAnimationFinished:!0}),ea(n,"id",l0("recharts-area-")),ea(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ee(a)&&a()}),ea(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ee(a)&&a()}),n}return whe(e,t),mhe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var l=this.props,c=l.dot,h=l.points,d=l.dataKey,f=Pe(this.props,!1),p=Pe(c,!0),g=h.map(function(b,y){var w=Oo(Oo(Oo({key:"dot-".concat(y),r:3},f),p),{},{index:y,cx:b.x,cy:b.y,dataKey:d,value:b.value,payload:b.payload,points:h});return e.renderDotItem(c,w)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return L.createElement(Tt,kc({className:"recharts-area-dots"},m),g)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,h=r*Math.abs(l-c),d=Il(a.map(function(f){return f.y||0}));return J(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Il(s.map(function(f){return f.y||0})),d)),J(d)?L.createElement("rect",{x:l<c?l:l-h,y:0,width:h,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,h=r*Math.abs(l-c),d=Il(a.map(function(f){return f.x||0}));return J(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Il(s.map(function(f){return f.x||0})),d)),J(d)?L.createElement("rect",{x:0,y:l<c?l:l-h,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,l=o.layout,c=o.type,h=o.stroke,d=o.connectNulls,f=o.isRange;o.ref;var p=zB(o,dhe);return L.createElement(Tt,{clipPath:s?"url(#clipPath-".concat(a,")"):null},L.createElement(Yg,kc({},Pe(p,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),h!=="none"&&L.createElement(Yg,kc({},Pe(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),h!=="none"&&f&&L.createElement(Yg,kc({},Pe(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,h=a.animationBegin,d=a.animationDuration,f=a.animationEasing,p=a.animationId,g=this.state,m=g.prevPoints,b=g.prevBaseLine;return L.createElement(bo,{begin:h,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var w=y.t;if(m){var v=m.length/o.length,_=o.map(function(O,k){var M=Math.floor(k*v);if(m[M]){var N=m[M],I=Mi(N.x,O.x),R=Mi(N.y,O.y);return Oo(Oo({},O),{},{x:I(w),y:R(w)})}return O}),x;if(J(l)&&typeof l=="number"){var S=Mi(b,l);x=S(w)}else if(Oe(l)||Ip(l)){var T=Mi(b,0);x=T(w)}else x=l.map(function(O,k){var M=Math.floor(k*v);if(b[M]){var N=b[M],I=Mi(N.x,O.x),R=Mi(N.y,O.y);return Oo(Oo({},O),{},{x:I(w),y:R(w)})}return O});return s.renderAreaStatically(_,x,r,i)}return L.createElement(Tt,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(w))),L.createElement(Tt,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,l=s.isAnimationActive,c=this.state,h=c.prevPoints,d=c.prevBaseLine,f=c.totalLength;return l&&a&&a.length&&(!h&&f>0||!km(h,a)||!km(d,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.top,h=i.left,d=i.xAxis,f=i.yAxis,p=i.width,g=i.height,m=i.isAnimationActive,b=i.id;if(s||!o||!o.length)return null;var y=this.state.isAnimationFinished,w=o.length===1,v=De("recharts-area",l),_=d&&d.allowDataOverflow,x=f&&f.allowDataOverflow,S=_||x,T=Oe(b)?this.id:b,O=(r=Pe(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=O.r,M=k===void 0?3:k,N=O.strokeWidth,I=N===void 0?2:N,R=uV(a)?a:{},F=R.clipDot,D=F===void 0?!0:F,j=M*2+I;return L.createElement(Tt,{className:v},_||x?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(T)},L.createElement("rect",{x:_?h:h-p/2,y:x?c:c-g/2,width:_?p:p*2,height:x?g:g*2})),!D&&L.createElement("clipPath",{id:"clipPath-dots-".concat(T)},L.createElement("rect",{x:h-j/2,y:c-j/2,width:p+j,height:g+j}))):null,w?null:this.renderArea(S,T),(a||w)&&this.renderDots(S,D,T),(!m||y)&&Hl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(z.PureComponent);UB=nc;ea(nc,"displayName","Area");ea(nc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!$p.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ea(nc,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(J(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var h=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return o==="dataMin"?d:o==="dataMax"||h<0?h:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});ea(nc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,l=t.dataKey,c=t.stackedData,h=t.dataStartIndex,d=t.displayedData,f=t.offset,p=e.layout,g=c&&c.length,m=UB.getBaseValue(e,n,r,i),b=p==="horizontal",y=!1,w=d.map(function(_,x){var S;g?S=c[h+x]:(S=hi(_,l),Array.isArray(S)?y=!0:S=[m,S]);var T=S[1]==null||g&&hi(_,l)==null;return b?{x:ZI({axis:r,ticks:s,bandSize:o,entry:_,index:x}),y:T?null:i.scale(S[1]),value:S,payload:_}:{x:T?null:r.scale(S[1]),y:ZI({axis:i,ticks:a,bandSize:o,entry:_,index:x}),value:S,payload:_}}),v;return g||y?v=w.map(function(_){var x=Array.isArray(_.value)?_.value[0]:null;return b?{x:_.x,y:x!=null&&_.y!=null?i.scale(x):null}:{x:x!=null?r.scale(x):null,y:_.y}}):v=b?i.scale(m):r.scale(m),Oo({points:w,baseLine:v,layout:p,isRange:y},f)});ea(nc,"renderDotItem",function(t,e){var n;if(L.isValidElement(t))n=L.cloneElement(t,e);else if(Ee(t))n=t(e);else{var r=De("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=zB(e,fhe);n=L.createElement(QO,kc({},s,{key:i,className:r}))}return n});function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function _he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function She(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qB(r.key),r)}}function Ahe(t,e,n){return e&&She(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ehe(t,e,n){return e=Ix(e),The(t,VB()?Reflect.construct(e,n||[],Ix(t).constructor):e.apply(t,n))}function The(t,e){if(e&&(wp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Che(t)}function Che(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VB=function(){return!!t})()}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ix(t)}function Phe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dT(t,e)}function dT(t,e){return dT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dT(t,e)}function GB(t,e,n){return e=qB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qB(t){var e=Ohe(t,"string");return wp(e)=="symbol"?e:e+""}function Ohe(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fT(){return fT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fT.apply(this,arguments)}function khe(t){var e=t.xAxisId,n=kB(),r=NB(),i=PB(e);return i==null?null:z.createElement(b_,fT({},i,{className:De("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Oc(a,!0)}}))}var w_=function(t){function e(){return _he(this,e),Ehe(this,e,arguments)}return Phe(e,t),Ahe(e,[{key:"render",value:function(){return z.createElement(khe,this.props)}}])}(z.Component);GB(w_,"displayName","XAxis");GB(w_,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function Nhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ihe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YB(r.key),r)}}function Mhe(t,e,n){return e&&Ihe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rhe(t,e,n){return e=Mx(e),jhe(t,KB()?Reflect.construct(e,n||[],Mx(t).constructor):e.apply(t,n))}function jhe(t,e){if(e&&(xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dhe(t)}function Dhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KB=function(){return!!t})()}function Mx(t){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mx(t)}function $he(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pT(t,e)}function pT(t,e){return pT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pT(t,e)}function XB(t,e,n){return e=YB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YB(t){var e=Lhe(t,"string");return xp(e)=="symbol"?e:e+""}function Lhe(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gT(){return gT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gT.apply(this,arguments)}var Fhe=function(e){var n=e.yAxisId,r=kB(),i=NB(),s=OB(n);return s==null?null:z.createElement(b_,gT({},s,{className:De("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Oc(o,!0)}}))},x_=function(t){function e(){return Nhe(this,e),Rhe(this,e,arguments)}return $he(e,t),Mhe(e,[{key:"render",value:function(){return z.createElement(Fhe,this.props)}}])}(z.Component);XB(x_,"displayName","YAxis");XB(x_,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function pR(t){return Hhe(t)||zhe(t)||Uhe(t)||Bhe()}function Bhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uhe(t,e){if(t){if(typeof t=="string")return mT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mT(t,e)}}function zhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hhe(t){if(Array.isArray(t))return mT(t)}function mT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var yT=function(e,n,r,i,s){var a=ws(e,tk),o=ws(e,m_),l=[].concat(pR(a),pR(o)),c=ws(e,v_),h="".concat(i,"Id"),d=i[0],f=n;if(l.length&&(f=l.reduce(function(m,b){if(b.props[h]===r&&ia(b.props,"extendDomain")&&J(b.props[d])){var y=b.props[d];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),c.length){var p="".concat(d,"1"),g="".concat(d,"2");f=c.reduce(function(m,b){if(b.props[h]===r&&ia(b.props,"extendDomain")&&J(b.props[p])&&J(b.props[g])){var y=b.props[p],w=b.props[g];return[Math.min(m[0],y,w),Math.max(m[1],y,w)]}return m},f)}return s&&s.length&&(f=s.reduce(function(m,b){return J(b)?[Math.min(m[0],b),Math.max(m[1],b)]:m},f)),f},JB={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function s(l,c,h,d,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new i(h,d||l,f),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(c){var h=n?n+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},o.prototype.listenerCount=function(c){var h=n?n+c:c,d=this._events[h];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,h,d,f,p,g){var m=n?n+c:c;if(!this._events[m])return!1;var b=this._events[m],y=arguments.length,w,v;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,f),!0;case 5:return b.fn.call(b.context,h,d,f,p),!0;case 6:return b.fn.call(b.context,h,d,f,p,g),!0}for(v=1,w=new Array(y-1);v<y;v++)w[v-1]=arguments[v];b.fn.apply(b.context,w)}else{var _=b.length,x;for(v=0;v<_;v++)switch(b[v].once&&this.removeListener(c,b[v].fn,void 0,!0),y){case 1:b[v].fn.call(b[v].context);break;case 2:b[v].fn.call(b[v].context,h);break;case 3:b[v].fn.call(b[v].context,h,d);break;case 4:b[v].fn.call(b[v].context,h,d,f);break;default:if(!w)for(x=1,w=new Array(y-1);x<y;x++)w[x-1]=arguments[x];b[v].fn.apply(b[v].context,w)}}return!0},o.prototype.on=function(c,h,d){return s(this,c,h,d,!1)},o.prototype.once=function(c,h,d){return s(this,c,h,d,!0)},o.prototype.removeListener=function(c,h,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!h)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===h&&(!f||g.once)&&(!d||g.context===d)&&a(this,p);else{for(var m=0,b=[],y=g.length;m<y;m++)(g[m].fn!==h||f&&!g[m].once||d&&g[m].context!==d)&&b.push(g[m]);b.length?this._events[p]=b.length===1?b[0]:b:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(JB);var Whe=JB.exports;const Vhe=ut(Whe);var MS=new Vhe,RS="recharts.syncMouseEvents";function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}function Ghe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qhe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QB(r.key),r)}}function Khe(t,e,n){return e&&qhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jS(t,e,n){return e=QB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QB(t){var e=Xhe(t,"string");return Qm(e)=="symbol"?e:e+""}function Xhe(t,e){if(Qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yhe=function(){function t(){Ghe(this,t),jS(this,"activeIndex",0),jS(this,"coordinateList",[]),jS(this,"layout","horizontal")}return Khe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,h=n.offset,d=h===void 0?null:h,f=n.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+c,f=a+this.offset.top+o/2+h;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function Jhe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&J(r)&&J(i))return!0}return!1}function Qhe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function ZB(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=Ln(e,n,r,i),o=Ln(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function Zhe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,h=e.outerRadius,d=e.angle,f=Ln(o,l,c,d),p=Ln(o,l,h,d);r=f.x,i=f.y,s=p.x,a=p.y}else return ZB(e);return[{x:r,y:i},{x:s,y:a}]}function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function gR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(n),!0).forEach(function(r){ede(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ede(t,e,n){return e=tde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tde(t){var e=nde(t,"string");return Zm(e)=="symbol"?e:e+""}function nde(t,e){if(Zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rde(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,h=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!s||!a||f!=="ScatterChart"&&i!=="axis")return null;var g,m=Yg;if(f==="ScatterChart")g=a,m=$oe;else if(f==="BarChart")g=Qhe(d,a,l,h),m=JO;else if(d==="radial"){var b=ZB(a),y=b.cx,w=b.cy,v=b.radius,_=b.startAngle,x=b.endAngle;g={cx:y,cy:w,startAngle:_,endAngle:x,innerRadius:v,outerRadius:v},m=tB}else g={points:Zhe(d,a,l)},m=Yg;var S=eb(eb(eb(eb({stroke:"#ccc",pointerEvents:"none"},l),g),Pe(p,!1)),{},{payload:o,payloadIndex:c,className:De("recharts-tooltip-cursor",p.className)});return z.isValidElement(p)?z.cloneElement(p,S):z.createElement(m,S)}var ide=["item"],sde=["children","className","width","height","style","compact","title","desc"];function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}function mR(t,e){return lde(t)||ode(t,e)||t3(t,e)||ade()}function ade(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ode(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function lde(t){if(Array.isArray(t))return t}function yR(t,e){if(t==null)return{};var n=cde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ude(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n3(r.key),r)}}function dde(t,e,n){return e&&hde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fde(t,e,n){return e=Rx(e),pde(t,e3()?Reflect.construct(e,n||[],Rx(t).constructor):e.apply(t,n))}function pde(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gde(t)}function gde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e3=function(){return!!t})()}function Rx(t){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rx(t)}function mde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vT(t,e)}function vT(t,e){return vT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vT(t,e)}function Sp(t){return bde(t)||vde(t)||t3(t)||yde()}function yde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t3(t,e){if(t){if(typeof t=="string")return bT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bT(t,e)}}function vde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bde(t){if(Array.isArray(t))return bT(t)}function bT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vR(Object(n),!0).forEach(function(r){le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function le(t,e,n){return e=n3(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n3(t){var e=wde(t,"string");return _p(e)=="symbol"?e:e+""}function wde(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xde={xAxis:["bottom","top"],yAxis:["left","right"]},_de={width:"100%",height:"100%"},r3={x:0,y:0};function tb(t){return t}var Sde=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Ade=function(e,n,r,i){var s=n.find(function(h){return h&&h.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return H(H(H({},i),Ln(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return H(H(H({},i),Ln(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return r3},__=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Sp(o),Sp(c)):o},[]);return a.length>0?a:e&&e.length&&J(i)&&J(s)?e.slice(i,s+1):[]};function i3(t){return t==="number"?[0,"auto"]:void 0}var wT=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=__(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(l,c){var h,d=(h=c.props.data)!==null&&h!==void 0?h:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(a.dataKey&&!a.allowDuplicatedCategory){var p=d===void 0?o:d;f=jw(p,a.dataKey,i)}else f=d&&d[r]||o[r];return f?[].concat(Sp(l),[QF(c,f)]):l},[])},bR=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=Sde(s,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,h=gie(a,o,c,l);if(h>=0&&c){var d=c[h]&&c[h].value,f=wT(e,n,h,d),p=Ade(r,o,h,s);return{activeTooltipIndex:h,activeLabel:d,activePayload:f,activeCoordinate:p}}return null},Ede=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.layout,d=e.children,f=e.stackOffset,p=YF(h,s);return r.reduce(function(g,m){var b,y=m.type.defaultProps!==void 0?H(H({},m.type.defaultProps),m.props):m.props,w=y.type,v=y.dataKey,_=y.allowDataOverflow,x=y.allowDuplicatedCategory,S=y.scale,T=y.ticks,O=y.includeHidden,k=y[a];if(g[k])return g;var M=__(e.data,{graphicalItems:i.filter(function(W){var Y,pe=a in W.props?W.props[a]:(Y=W.type.defaultProps)===null||Y===void 0?void 0:Y[a];return pe===k}),dataStartIndex:l,dataEndIndex:c}),N=M.length,I,R,F;Jhe(y.domain,_,w)&&(I=FE(y.domain,null,_),p&&(w==="number"||S!=="auto")&&(F=Xg(M,v,"category")));var D=i3(w);if(!I||I.length===0){var j,B=(j=y.domain)!==null&&j!==void 0?j:D;if(v){if(I=Xg(M,v,w),w==="category"&&p){var $=eV(I);x&&$?(R=I,I=xx(0,N)):x||(I=rM(B,I,m).reduce(function(W,Y){return W.indexOf(Y)>=0?W:[].concat(Sp(W),[Y])},[]))}else if(w==="category")x?I=I.filter(function(W){return W!==""&&!Oe(W)}):I=rM(B,I,m).reduce(function(W,Y){return W.indexOf(Y)>=0||Y===""||Oe(Y)?W:[].concat(Sp(W),[Y])},[]);else if(w==="number"){var U=wie(M,i.filter(function(W){var Y,pe,he=a in W.props?W.props[a]:(Y=W.type.defaultProps)===null||Y===void 0?void 0:Y[a],Se="hide"in W.props?W.props.hide:(pe=W.type.defaultProps)===null||pe===void 0?void 0:pe.hide;return he===k&&(O||!Se)}),v,s,h);U&&(I=U)}p&&(w==="number"||S!=="auto")&&(F=Xg(M,v,"category"))}else p?I=xx(0,N):o&&o[k]&&o[k].hasStack&&w==="number"?I=f==="expand"?[0,1]:JF(o[k].stackGroups,l,c):I=XF(M,i.filter(function(W){var Y=a in W.props?W.props[a]:W.type.defaultProps[a],pe="hide"in W.props?W.props.hide:W.type.defaultProps.hide;return Y===k&&(O||!pe)}),w,h,!0);if(w==="number")I=yT(d,I,k,s,T),B&&(I=FE(B,I,_));else if(w==="category"&&B){var V=B,G=I.every(function(W){return V.indexOf(W)>=0});G&&(I=V)}}return H(H({},g),{},le({},k,H(H({},y),{},{axisType:s,domain:I,categoricalDomain:F,duplicateDomain:R,originalDomain:(b=y.domain)!==null&&b!==void 0?b:D,isCategorical:p,layout:h})))},{})},Tde=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.layout,d=e.children,f=__(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),p=f.length,g=YF(h,s),m=-1;return r.reduce(function(b,y){var w=y.type.defaultProps!==void 0?H(H({},y.type.defaultProps),y.props):y.props,v=w[a],_=i3("number");if(!b[v]){m++;var x;return g?x=xx(0,p):o&&o[v]&&o[v].hasStack?(x=JF(o[v].stackGroups,l,c),x=yT(d,x,v,s)):(x=FE(_,XF(f,r.filter(function(S){var T,O,k=a in S.props?S.props[a]:(T=S.type.defaultProps)===null||T===void 0?void 0:T[a],M="hide"in S.props?S.props.hide:(O=S.type.defaultProps)===null||O===void 0?void 0:O.hide;return k===v&&!M}),"number",h),i.defaultProps.allowDataOverflow),x=yT(d,x,v,s)),H(H({},b),{},le({},v,H(H({axisType:s},i.defaultProps),{},{hide:!0,orientation:Li(xde,"".concat(s,".").concat(m%2),null),domain:x,originalDomain:_,isCategorical:g,layout:h})))}return b},{})},Cde=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.children,d="".concat(i,"Id"),f=ws(h,s),p={};return f&&f.length?p=Ede(e,{axes:f,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(p=Tde(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),p},Pde=function(e){var n=Oh(e),r=Oc(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:AO(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:hx(n,r)}},wR=function(e){var n=e.children,r=e.defaultShowTooltip,i=ti(n,fp),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},Ode=function(e){return!e||!e.length?!1:e.some(function(n){var r=ao(n&&n.type);return r&&r.indexOf("Bar")>=0})},xR=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},kde=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,h=r.height,d=r.children,f=r.margin||{},p=ti(d,fp),g=ti(d,md),m=Object.keys(l).reduce(function(x,S){var T=l[S],O=T.orientation;return!T.mirror&&!T.hide?H(H({},x),{},le({},O,x[O]+T.width)):x},{left:f.left||0,right:f.right||0}),b=Object.keys(a).reduce(function(x,S){var T=a[S],O=T.orientation;return!T.mirror&&!T.hide?H(H({},x),{},le({},O,Li(x,"".concat(O))+T.height)):x},{top:f.top||0,bottom:f.bottom||0}),y=H(H({},b),m),w=y.bottom;p&&(y.bottom+=p.props.height||fp.defaultProps.height),g&&n&&(y=vie(y,i,r,n));var v=c-y.left-y.right,_=h-y.top-y.bottom;return H(H({brushBottom:w},y),{},{width:Math.max(v,0),height:Math.max(_,0)})},Nde=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Ide=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,h=e.formatAxisMap,d=e.defaultProps,f=function(y,w){var v=w.graphicalItems,_=w.stackGroups,x=w.offset,S=w.updateId,T=w.dataStartIndex,O=w.dataEndIndex,k=y.barSize,M=y.layout,N=y.barGap,I=y.barCategoryGap,R=y.maxBarSize,F=xR(M),D=F.numericAxisName,j=F.cateAxisName,B=Ode(v),$=[];return v.forEach(function(U,V){var G=__(y.data,{graphicalItems:[U],dataStartIndex:T,dataEndIndex:O}),W=U.type.defaultProps!==void 0?H(H({},U.type.defaultProps),U.props):U.props,Y=W.dataKey,pe=W.maxBarSize,he=W["".concat(D,"Id")],Se=W["".concat(j,"Id")],ke={},fn=l.reduce(function(rc,ic){var M_=w["".concat(ic.axisType,"Map")],Ek=W["".concat(ic.axisType,"Id")];M_&&M_[Ek]||ic.axisType==="zAxis"||ah();var Tk=M_[Ek];return H(H({},rc),{},le(le({},ic.axisType,Tk),"".concat(ic.axisType,"Ticks"),Oc(Tk)))},ke),Z=fn[j],de=fn["".concat(j,"Ticks")],fe=_&&_[he]&&_[he].hasStack&&Iie(U,_[he].stackGroups),q=ao(U.type).indexOf("Bar")>=0,ht=hx(Z,de),Ne=[],Yt=B&&mie({barSize:k,stackGroups:_,totalSize:Nde(fn,j)});if(q){var Jt,pr,Co=Oe(pe)?R:pe,vh=(Jt=(pr=hx(Z,de,!0))!==null&&pr!==void 0?pr:Co)!==null&&Jt!==void 0?Jt:0;Ne=yie({barGap:N,barCategoryGap:I,bandSize:vh!==ht?vh:ht,sizeList:Yt[Se],maxBarSize:Co}),vh!==ht&&(Ne=Ne.map(function(rc){return H(H({},rc),{},{position:H(H({},rc.position),{},{offset:rc.position.offset-vh/2})})}))}var S0=U&&U.type&&U.type.getComposedData;S0&&$.push({props:H(H({},S0(H(H({},fn),{},{displayedData:G,props:y,dataKey:Y,item:U,bandSize:ht,barPosition:Ne,offset:x,stackedData:fe,layout:M,dataStartIndex:T,dataEndIndex:O}))),{},le(le(le({key:U.key||"item-".concat(V)},D,fn[D]),j,fn[j]),"animationId",S)),childIndex:fV(U,y.children),item:U})}),$},p=function(y,w){var v=y.props,_=y.dataStartIndex,x=y.dataEndIndex,S=y.updateId;if(!Y2({props:v}))return null;var T=v.children,O=v.layout,k=v.stackOffset,M=v.data,N=v.reverseStackOrder,I=xR(O),R=I.numericAxisName,F=I.cateAxisName,D=ws(T,r),j=Oie(M,D,"".concat(R,"Id"),"".concat(F,"Id"),k,N),B=l.reduce(function(W,Y){var pe="".concat(Y.axisType,"Map");return H(H({},W),{},le({},pe,Cde(v,H(H({},Y),{},{graphicalItems:D,stackGroups:Y.axisType===R&&j,dataStartIndex:_,dataEndIndex:x}))))},{}),$=kde(H(H({},B),{},{props:v,graphicalItems:D}),w==null?void 0:w.legendBBox);Object.keys(B).forEach(function(W){B[W]=h(v,B[W],$,W.replace("Map",""),n)});var U=B["".concat(F,"Map")],V=Pde(U),G=f(v,H(H({},B),{},{dataStartIndex:_,dataEndIndex:x,updateId:S,graphicalItems:D,stackGroups:j,offset:$}));return H(H({formattedGraphicalItems:G,graphicalItems:D,offset:$,stackGroups:j},V),B)},g=function(b){function y(w){var v,_,x;return ude(this,y),x=fde(this,y,[w]),le(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),le(x,"accessibilityManager",new Yhe),le(x,"handleLegendBBoxUpdate",function(S){if(S){var T=x.state,O=T.dataStartIndex,k=T.dataEndIndex,M=T.updateId;x.setState(H({legendBBox:S},p({props:x.props,dataStartIndex:O,dataEndIndex:k,updateId:M},H(H({},x.state),{},{legendBBox:S}))))}}),le(x,"handleReceiveSyncEvent",function(S,T,O){if(x.props.syncId===S){if(O===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(T)}}),le(x,"handleBrushChange",function(S){var T=S.startIndex,O=S.endIndex;if(T!==x.state.dataStartIndex||O!==x.state.dataEndIndex){var k=x.state.updateId;x.setState(function(){return H({dataStartIndex:T,dataEndIndex:O},p({props:x.props,dataStartIndex:T,dataEndIndex:O,updateId:k},x.state))}),x.triggerSyncEvent({dataStartIndex:T,dataEndIndex:O})}}),le(x,"handleMouseEnter",function(S){var T=x.getMouseInfo(S);if(T){var O=H(H({},T),{},{isTooltipActive:!0});x.setState(O),x.triggerSyncEvent(O);var k=x.props.onMouseEnter;Ee(k)&&k(O,S)}}),le(x,"triggeredAfterMouseMove",function(S){var T=x.getMouseInfo(S),O=T?H(H({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(O),x.triggerSyncEvent(O);var k=x.props.onMouseMove;Ee(k)&&k(O,S)}),le(x,"handleItemMouseEnter",function(S){x.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),le(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),le(x,"handleMouseMove",function(S){S.persist(),x.throttleTriggeredAfterMouseMove(S)}),le(x,"handleMouseLeave",function(S){x.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};x.setState(T),x.triggerSyncEvent(T);var O=x.props.onMouseLeave;Ee(O)&&O(T,S)}),le(x,"handleOuterEvent",function(S){var T=dV(S),O=Li(x.props,"".concat(T));if(T&&Ee(O)){var k,M;/.*touch.*/i.test(T)?M=x.getMouseInfo(S.changedTouches[0]):M=x.getMouseInfo(S),O((k=M)!==null&&k!==void 0?k:{},S)}}),le(x,"handleClick",function(S){var T=x.getMouseInfo(S);if(T){var O=H(H({},T),{},{isTooltipActive:!0});x.setState(O),x.triggerSyncEvent(O);var k=x.props.onClick;Ee(k)&&k(O,S)}}),le(x,"handleMouseDown",function(S){var T=x.props.onMouseDown;if(Ee(T)){var O=x.getMouseInfo(S);T(O,S)}}),le(x,"handleMouseUp",function(S){var T=x.props.onMouseUp;if(Ee(T)){var O=x.getMouseInfo(S);T(O,S)}}),le(x,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),le(x,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseDown(S.changedTouches[0])}),le(x,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseUp(S.changedTouches[0])}),le(x,"handleDoubleClick",function(S){var T=x.props.onDoubleClick;if(Ee(T)){var O=x.getMouseInfo(S);T(O,S)}}),le(x,"handleContextMenu",function(S){var T=x.props.onContextMenu;if(Ee(T)){var O=x.getMouseInfo(S);T(O,S)}}),le(x,"triggerSyncEvent",function(S){x.props.syncId!==void 0&&MS.emit(RS,x.props.syncId,S,x.eventEmitterSymbol)}),le(x,"applySyncEvent",function(S){var T=x.props,O=T.layout,k=T.syncMethod,M=x.state.updateId,N=S.dataStartIndex,I=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)x.setState(H({dataStartIndex:N,dataEndIndex:I},p({props:x.props,dataStartIndex:N,dataEndIndex:I,updateId:M},x.state)));else if(S.activeTooltipIndex!==void 0){var R=S.chartX,F=S.chartY,D=S.activeTooltipIndex,j=x.state,B=j.offset,$=j.tooltipTicks;if(!B)return;if(typeof k=="function")D=k($,S);else if(k==="value"){D=-1;for(var U=0;U<$.length;U++)if($[U].value===S.activeLabel){D=U;break}}var V=H(H({},B),{},{x:B.left,y:B.top}),G=Math.min(R,V.x+V.width),W=Math.min(F,V.y+V.height),Y=$[D]&&$[D].value,pe=wT(x.state,x.props.data,D),he=$[D]?{x:O==="horizontal"?$[D].coordinate:G,y:O==="horizontal"?W:$[D].coordinate}:r3;x.setState(H(H({},S),{},{activeLabel:Y,activeCoordinate:he,activePayload:pe,activeTooltipIndex:D}))}else x.setState(S)}),le(x,"renderCursor",function(S){var T,O=x.state,k=O.isTooltipActive,M=O.activeCoordinate,N=O.activePayload,I=O.offset,R=O.activeTooltipIndex,F=O.tooltipAxisBandSize,D=x.getTooltipEventType(),j=(T=S.props.active)!==null&&T!==void 0?T:k,B=x.props.layout,$=S.key||"_recharts-cursor";return L.createElement(rde,{key:$,activeCoordinate:M,activePayload:N,activeTooltipIndex:R,chartName:n,element:S,isActive:j,layout:B,offset:I,tooltipAxisBandSize:F,tooltipEventType:D})}),le(x,"renderPolarAxis",function(S,T,O){var k=Li(S,"type.axisType"),M=Li(x.state,"".concat(k,"Map")),N=S.type.defaultProps,I=N!==void 0?H(H({},N),S.props):S.props,R=M&&M[I["".concat(k,"Id")]];return z.cloneElement(S,H(H({},R),{},{className:De(k,R.className),key:S.key||"".concat(T,"-").concat(O),ticks:Oc(R,!0)}))}),le(x,"renderPolarGrid",function(S){var T=S.props,O=T.radialLines,k=T.polarAngles,M=T.polarRadius,N=x.state,I=N.radiusAxisMap,R=N.angleAxisMap,F=Oh(I),D=Oh(R),j=D.cx,B=D.cy,$=D.innerRadius,U=D.outerRadius;return z.cloneElement(S,{polarAngles:Array.isArray(k)?k:Oc(D,!0).map(function(V){return V.coordinate}),polarRadius:Array.isArray(M)?M:Oc(F,!0).map(function(V){return V.coordinate}),cx:j,cy:B,innerRadius:$,outerRadius:U,key:S.key||"polar-grid",radialLines:O})}),le(x,"renderLegend",function(){var S=x.state.formattedGraphicalItems,T=x.props,O=T.children,k=T.width,M=T.height,N=x.props.margin||{},I=k-(N.left||0)-(N.right||0),R=qF({children:O,formattedGraphicalItems:S,legendWidth:I,legendContent:c});if(!R)return null;var F=R.item,D=yR(R,ide);return z.cloneElement(F,H(H({},D),{},{chartWidth:k,chartHeight:M,margin:N,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),le(x,"renderTooltip",function(){var S,T=x.props,O=T.children,k=T.accessibilityLayer,M=ti(O,pa);if(!M)return null;var N=x.state,I=N.isTooltipActive,R=N.activeCoordinate,F=N.activePayload,D=N.activeLabel,j=N.offset,B=(S=M.props.active)!==null&&S!==void 0?S:I;return z.cloneElement(M,{viewBox:H(H({},j),{},{x:j.left,y:j.top}),active:B,label:D,payload:B?F:[],coordinate:R,accessibilityLayer:k})}),le(x,"renderBrush",function(S){var T=x.props,O=T.margin,k=T.data,M=x.state,N=M.offset,I=M.dataStartIndex,R=M.dataEndIndex,F=M.updateId;return z.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Y0(x.handleBrushChange,S.props.onChange),data:k,x:J(S.props.x)?S.props.x:N.left,y:J(S.props.y)?S.props.y:N.top+N.height+N.brushBottom-(O.bottom||0),width:J(S.props.width)?S.props.width:N.width,startIndex:I,endIndex:R,updateId:"brush-".concat(F)})}),le(x,"renderReferenceElement",function(S,T,O){if(!S)return null;var k=x,M=k.clipPathId,N=x.state,I=N.xAxisMap,R=N.yAxisMap,F=N.offset,D=S.type.defaultProps||{},j=S.props,B=j.xAxisId,$=B===void 0?D.xAxisId:B,U=j.yAxisId,V=U===void 0?D.yAxisId:U;return z.cloneElement(S,{key:S.key||"".concat(T,"-").concat(O),xAxis:I[$],yAxis:R[V],viewBox:{x:F.left,y:F.top,width:F.width,height:F.height},clipPathId:M})}),le(x,"renderActivePoints",function(S){var T=S.item,O=S.activePoint,k=S.basePoint,M=S.childIndex,N=S.isRange,I=[],R=T.props.key,F=T.item.type.defaultProps!==void 0?H(H({},T.item.type.defaultProps),T.item.props):T.item.props,D=F.activeDot,j=F.dataKey,B=H(H({index:M,dataKey:j,cx:O.x,cy:O.y,r:4,fill:YO(T.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},Pe(D,!1)),Dw(D));return I.push(y.renderActiveDot(D,B,"".concat(R,"-activePoint-").concat(M))),k?I.push(y.renderActiveDot(D,H(H({},B),{},{cx:k.x,cy:k.y}),"".concat(R,"-basePoint-").concat(M))):N&&I.push(null),I}),le(x,"renderGraphicChild",function(S,T,O){var k=x.filterFormatItem(S,T,O);if(!k)return null;var M=x.getTooltipEventType(),N=x.state,I=N.isTooltipActive,R=N.tooltipAxis,F=N.activeTooltipIndex,D=N.activeLabel,j=x.props.children,B=ti(j,pa),$=k.props,U=$.points,V=$.isRange,G=$.baseLine,W=k.item.type.defaultProps!==void 0?H(H({},k.item.type.defaultProps),k.item.props):k.item.props,Y=W.activeDot,pe=W.hide,he=W.activeBar,Se=W.activeShape,ke=!!(!pe&&I&&B&&(Y||he||Se)),fn={};M!=="axis"&&B&&B.props.trigger==="click"?fn={onClick:Y0(x.handleItemMouseEnter,S.props.onClick)}:M!=="axis"&&(fn={onMouseLeave:Y0(x.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Y0(x.handleItemMouseEnter,S.props.onMouseEnter)});var Z=z.cloneElement(S,H(H({},k.props),fn));function de(ic){return typeof R.dataKey=="function"?R.dataKey(ic.payload):null}if(ke)if(F>=0){var fe,q;if(R.dataKey&&!R.allowDuplicatedCategory){var ht=typeof R.dataKey=="function"?de:"payload.".concat(R.dataKey.toString());fe=jw(U,ht,D),q=V&&G&&jw(G,ht,D)}else fe=U==null?void 0:U[F],q=V&&G&&G[F];if(Se||he){var Ne=S.props.activeIndex!==void 0?S.props.activeIndex:F;return[z.cloneElement(S,H(H(H({},k.props),fn),{},{activeIndex:Ne})),null,null]}if(!Oe(fe))return[Z].concat(Sp(x.renderActivePoints({item:k,activePoint:fe,basePoint:q,childIndex:F,isRange:V})))}else{var Yt,Jt=(Yt=x.getItemByXY(x.state.activeCoordinate))!==null&&Yt!==void 0?Yt:{graphicalItem:Z},pr=Jt.graphicalItem,Co=pr.item,vh=Co===void 0?S:Co,S0=pr.childIndex,rc=H(H(H({},k.props),fn),{},{activeIndex:S0});return[z.cloneElement(vh,rc),null,null]}return V?[Z,null,null]:[Z,null]}),le(x,"renderCustomized",function(S,T,O){return z.cloneElement(S,H(H({key:"recharts-customized-".concat(O)},x.props),x.state))}),le(x,"renderMap",{CartesianGrid:{handler:tb,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:tb},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:tb},YAxis:{handler:tb},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((v=w.id)!==null&&v!==void 0?v:l0("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=GL(x.triggeredAfterMouseMove,(_=w.throttleDelay)!==null&&_!==void 0?_:1e3/60),x.state={},x}return mde(y,b),dde(y,[{key:"componentDidMount",value:function(){var v,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,_=v.children,x=v.data,S=v.height,T=v.layout,O=ti(_,pa);if(O){var k=O.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,N=wT(this.state,x,k,M),I=this.state.tooltipTicks[k].coordinate,R=(this.state.offset.top+S)/2,F=T==="horizontal",D=F?{x:I,y:R}:{y:I,x:R},j=this.state.formattedGraphicalItems.find(function($){var U=$.item;return U.type.name==="Scatter"});j&&(D=H(H({},D),j.props.points[k].tooltipPosition),N=j.props.points[k].tooltipPayload);var B={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:M,activePayload:N,activeCoordinate:D};this.setState(B),this.renderCursor(O),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var x,S;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(v){eE([ti(v.children,pa)],[ti(this.props.children,pa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=ti(this.props.children,pa);if(v&&typeof v.props.shared=="boolean"){var _=v.props.shared?"axis":"item";return o.indexOf(_)>=0?_:s}return s}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var _=this.container,x=_.getBoundingClientRect(),S=UZ(x),T={chartX:Math.round(v.pageX-S.left),chartY:Math.round(v.pageY-S.top)},O=x.width/_.offsetWidth||1,k=this.inRange(T.chartX,T.chartY,O);if(!k)return null;var M=this.state,N=M.xAxisMap,I=M.yAxisMap,R=this.getTooltipEventType(),F=bR(this.state,this.props.data,this.props.layout,k);if(R!=="axis"&&N&&I){var D=Oh(N).scale,j=Oh(I).scale,B=D&&D.invert?D.invert(T.chartX):null,$=j&&j.invert?j.invert(T.chartY):null;return H(H({},T),{},{xValue:B,yValue:$},F)}return F?H(H({},T),F):null}},{key:"inRange",value:function(v,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,T=v/x,O=_/x;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,M=T>=k.left&&T<=k.left+k.width&&O>=k.top&&O<=k.top+k.height;return M?{x:T,y:O}:null}var N=this.state,I=N.angleAxisMap,R=N.radiusAxisMap;if(I&&R){var F=Oh(I);return aM({x:T,y:O},F)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,_=this.getTooltipEventType(),x=ti(v,pa),S={};x&&_==="axis"&&(x.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=Dw(this.props,this.handleOuterEvent);return H(H({},T),S)}},{key:"addListener",value:function(){MS.on(RS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){MS.removeListener(RS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,_,x){for(var S=this.state.formattedGraphicalItems,T=0,O=S.length;T<O;T++){var k=S[T];if(k.item===v||k.props.key===v.key||_===ao(k.item.type)&&x===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,_=this.state.offset,x=_.left,S=_.top,T=_.height,O=_.width;return L.createElement("defs",null,L.createElement("clipPath",{id:v},L.createElement("rect",{x,y:S,height:T,width:O})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(_,x){var S=mR(x,2),T=S[0],O=S[1];return H(H({},_),{},le({},T,O.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(_,x){var S=mR(x,2),T=S[0],O=S[1];return H(H({},_),{},le({},T,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[v])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(v){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[v])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(v){var _=this.state,x=_.formattedGraphicalItems,S=_.activeItem;if(x&&x.length)for(var T=0,O=x.length;T<O;T++){var k=x[T],M=k.props,N=k.item,I=N.type.defaultProps!==void 0?H(H({},N.type.defaultProps),N.props):N.props,R=ao(N.type);if(R==="Bar"){var F=(M.data||[]).find(function($){return Coe(v,$)});if(F)return{graphicalItem:k,payload:F}}else if(R==="RadialBar"){var D=(M.data||[]).find(function($){return aM(v,$)});if(D)return{graphicalItem:k,payload:D}}else if(d_(k,S)||f_(k,S)||qm(k,S)){var j=kle({graphicalItem:k,activeTooltipItem:S,itemData:I.data}),B=I.activeIndex===void 0?j:I.activeIndex;return{graphicalItem:H(H({},k),{},{childIndex:B}),payload:qm(k,S)?I.data[j]:k.props.data[j]}}}return null}},{key:"render",value:function(){var v=this;if(!Y2(this))return null;var _=this.props,x=_.children,S=_.className,T=_.width,O=_.height,k=_.style,M=_.compact,N=_.title,I=_.desc,R=yR(_,sde),F=Pe(R,!1);if(M)return L.createElement(tR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(nE,td({},F,{width:T,height:O,title:N,desc:I}),this.renderClipPath(),Q2(x,this.renderMap)));if(this.props.accessibilityLayer){var D,j;F.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,F.role=(j=this.props.role)!==null&&j!==void 0?j:"application",F.onKeyDown=function($){v.accessibilityManager.keyboardEvent($)},F.onFocus=function(){v.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return L.createElement(tR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",td({className:De("recharts-wrapper",S),style:H({position:"relative",cursor:"default",width:T,height:O},k)},B,{ref:function(U){v.container=U}}),L.createElement(nE,td({},F,{width:T,height:O,title:N,desc:I,style:_de}),this.renderClipPath(),Q2(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(z.Component);le(g,"displayName",n),le(g,"defaultProps",H({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),le(g,"getDerivedStateFromProps",function(b,y){var w=b.dataKey,v=b.data,_=b.children,x=b.width,S=b.height,T=b.layout,O=b.stackOffset,k=b.margin,M=y.dataStartIndex,N=y.dataEndIndex;if(y.updateId===void 0){var I=wR(b);return H(H(H({},I),{},{updateId:0},p(H(H({props:b},I),{},{updateId:0}),y)),{},{prevDataKey:w,prevData:v,prevWidth:x,prevHeight:S,prevLayout:T,prevStackOffset:O,prevMargin:k,prevChildren:_})}if(w!==y.prevDataKey||v!==y.prevData||x!==y.prevWidth||S!==y.prevHeight||T!==y.prevLayout||O!==y.prevStackOffset||!gd(k,y.prevMargin)){var R=wR(b),F={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},D=H(H({},bR(y,v,T)),{},{updateId:y.updateId+1}),j=H(H(H({},R),F),D);return H(H(H({},j),p(H({props:b},j),y)),{},{prevDataKey:w,prevData:v,prevWidth:x,prevHeight:S,prevLayout:T,prevStackOffset:O,prevMargin:k,prevChildren:_})}if(!eE(_,y.prevChildren)){var B,$,U,V,G=ti(_,fp),W=G&&(B=($=G.props)===null||$===void 0?void 0:$.startIndex)!==null&&B!==void 0?B:M,Y=G&&(U=(V=G.props)===null||V===void 0?void 0:V.endIndex)!==null&&U!==void 0?U:N,pe=W!==M||Y!==N,he=!Oe(v),Se=he&&!pe?y.updateId:y.updateId+1;return H(H({updateId:Se},p(H(H({props:b},y),{},{updateId:Se,dataStartIndex:W,dataEndIndex:Y}),y)),{},{prevChildren:_,dataStartIndex:W,dataEndIndex:Y})}return null}),le(g,"renderActiveDot",function(b,y,w){var v;return z.isValidElement(b)?v=z.cloneElement(b,y):Ee(b)?v=b(y):v=L.createElement(QO,y),L.createElement(Tt,{className:"recharts-active-dot",key:w},v)});var m=z.forwardRef(function(y,w){return L.createElement(g,td({},y,{ref:w}))});return m.displayName=g.displayName,m},Mde=Ide({chartName:"AreaChart",GraphicalChild:nc,axisComponents:[{axisType:"xAxis",AxisComp:w_},{axisType:"yAxis",AxisComp:x_}],formatAxisMap:rue});/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rde={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jde=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(t,e)=>{const n=z.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...c},h)=>z.createElement("svg",{ref:h,...Rde,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${jde(t)}`,o].join(" "),...c},[...e.map(([d,f])=>z.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dde=be("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $de=be("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=be("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lde=be("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fde=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bde=be("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ude=be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=be("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zde=be("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hde=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wde=be("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vde=be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gde=be("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qde=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kde=be("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xde=be("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yde=be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jde=be("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qde=be("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zde=be("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const efe=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tfe=be("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=be("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=be("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nfe=be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=be("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rfe=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ife=be("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=be("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),DS=[{ruleId:"RD-001",ruleName:"R&D Personnel Detection",category:"rd_credit",keywords:["engineer","developer","lab","research"],valuePerMatch:5e3,flatBonus:0,maxValue:null,requiresMinMatches:1,description:"Identifies R&D qualified personnel and activities",irsReference:"IRC 41(b)(2)(B)"},{ruleId:"RD-002",ruleName:"R&D Activity Indicators",category:"rd_credit",keywords:["prototype","experiment","testing","innovation","patent"],valuePerMatch:3500,flatBonus:0,maxValue:null,requiresMinMatches:1,description:"Identifies specific R&D activities",irsReference:"IRC 41(d)"},{ruleId:"RD-003",ruleName:"Technical Uncertainty Indicators",category:"rd_credit",keywords:["uncertainty","unknown","feasibility","capability","alternative"],valuePerMatch:2500,flatBonus:0,maxValue:null,requiresMinMatches:2,description:"Identifies technical uncertainty language",irsReference:"Treas. Reg. 1.41-4(a)(3)"},{ruleId:"TRN-001",ruleName:"Training Program Detection",category:"training",keywords:["tuition","course","workshop"],valuePerMatch:2e3,flatBonus:0,maxValue:null,requiresMinMatches:1,description:"Identifies qualified educational expenses",irsReference:"IRC 127"},{ruleId:"TRN-002",ruleName:"Educational Assistance Indicators",category:"training",keywords:["certification","training","seminar","education","learning"],valuePerMatch:1500,flatBonus:0,maxValue:null,requiresMinMatches:1,description:"Identifies educational assistance indicators",irsReference:"IRC 127(c)"},{ruleId:"GRN-001",ruleName:"Green Energy Detection",category:"green_energy",keywords:["solar","energy","retrofit"],valuePerMatch:0,flatBonus:15e3,maxValue:15e3,requiresMinMatches:1,description:"Identifies energy efficiency improvements",irsReference:"IRC 179D"},{ruleId:"GRN-002",ruleName:"Energy Efficiency Indicators",category:"green_energy",keywords:["hvac","insulation","lighting","efficiency","sustainable"],valuePerMatch:2500,flatBonus:0,maxValue:5e4,requiresMinMatches:2,description:"Identifies specific energy efficiency improvements",irsReference:"IRC 179D(c)"},{ruleId:"ERC-001",ruleName:"ERC Eligibility Indicators",category:"employee_retention",keywords:["pandemic","covid","shutdown","suspension","gross receipts decline"],valuePerMatch:0,flatBonus:25e3,maxValue:25e3,requiresMinMatches:2,description:"Identifies potential ERC eligibility",irsReference:"IRC 3134"}],sfe=[{pattern:/\b(estimated|approximately|about|roughly)\s+\$[\d,]+/gi,type:"caution",category:"financial_uncertainty",description:"Estimated financial figures detected",recommendation:"Request supporting documentation"},{pattern:/\b(verbal|oral|informal)\s+(agreement|contract)/gi,type:"warning",category:"documentation_gap",description:"Informal agreement referenced",recommendation:"Obtain written documentation"},{pattern:/\b(independent contractor|1099|freelance)/gi,type:"info",category:"worker_classification",description:"Independent contractor reference detected",recommendation:"Verify proper worker classification"}];function afe(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(16).padStart(8,"0")}function ofe(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,8);return`SCAN-${t}-${e}`.toUpperCase()}function lfe(t,e){const n=t.substring(0,e).split(`
`);return{line:n.length,column:n[n.length-1].length+1}}function cfe(t,e,n,r=50){const i=Math.max(0,e-r),s=Math.min(t.length,e+n+r);let a=t.substring(i,s).replace(/\s+/g," ").trim();return i>0&&(a="..."+a),s<t.length&&(a=a+"..."),{context:a,start:i,end:s}}function ufe(t,e){const n=[],r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`\\b${r}\\b`,"gi");let s;for(;(s=i.exec(t))!==null;){const{line:a,column:o}=lfe(t,s.index),{context:l,start:c,end:h}=cfe(t,s.index,s[0].length);n.push({keyword:e.toLowerCase(),pattern:s[0],position:s.index,lineNumber:a,columnNumber:o,context:l,contextStart:c,contextEnd:h,confidence:1})}return n}function hfe(t,e){const n=t.split(/\s+/).filter(c=>c.length>0),r=t.split(/[.!?]+/).filter(c=>c.trim().length>0),i=t.split(`
`),s={};n.forEach(c=>{const h=c.toLowerCase().replace(/[^a-z0-9]/g,"");h.length>2&&(s[h]=(s[h]||0)+1)});const a=Object.entries(s).sort((c,h)=>h[1]-c[1]).slice(0,20).map(([c,h])=>({word:c,count:h})),o=n.reduce((c,h)=>c+h.length,0),l=new Set(n.map(c=>c.toLowerCase())).size;return{totalCharacters:t.length,totalWords:n.length,totalLines:i.length,totalSentences:r.length,averageWordLength:n.length>0?o/n.length:0,averageSentenceLength:r.length>0?n.length/r.length:0,lexicalDensity:n.length>0?l/n.length*100:0,keywordDensity:n.length>0?e.length/n.length*100:0,topWords:a}}function dfe(t){const e=[];return sfe.forEach((n,r)=>{let i;const s=new RegExp(n.pattern.source,n.pattern.flags);for(;(i=s.exec(t))!==null;)e.push({indicatorId:`RISK-${String(r+1).padStart(3,"0")}-${e.length}`,type:n.type,category:n.category,description:n.description,evidence:i[0],position:i.index,recommendation:n.recommendation})}),e}function ffe(t,e,n){if(t===0)return"none";const r=e/n;return t>=5&&r>=.5?"strong":t>=3&&r>=.3?"moderate":t>=1?"weak":"none"}function pfe(t,e,n,r){if(t<r)return 0;const i=e/n*.4,s=Math.min(1,t/10)*.4,a=Math.min(1,t/(r*2))*.2;return Math.min(1,i+s+a)}function m3(t){const e=performance.now(),n=ofe(),r=[];r.push({action:"SCAN_INITIATED",timestamp:new Date().toISOString(),details:`Analysis ${n} started, content length: ${t.length} characters`});const i=[],s={},a=[];DS.forEach(I=>{const R=[],F=new Set;I.keywords.forEach(V=>{const G=ufe(t,V);G.length>0&&(F.add(V.toLowerCase()),R.push(...G),i.push(...G),s[I.category]||(s[I.category]=[]),s[I.category].push(...G))});let D=0;const j=R.length>=I.requiresMinMatches;j&&(D=R.length*I.valuePerMatch,D+=I.flatBonus,I.maxValue!==null&&(D=Math.min(D,I.maxValue)));const B=pfe(R.length,F.size,I.keywords.length,I.requiresMinMatches),$=ffe(R.length,F.size,I.keywords.length),U=[];!j&&R.length>0&&U.push(`Found ${R.length} matches but requires minimum ${I.requiresMinMatches}`),$==="strong"&&U.push("Strong evidence supporting qualification"),a.push({ruleId:I.ruleId,ruleName:I.ruleName,category:I.category,qualified:j,matchCount:R.length,uniqueKeywordsMatched:Array.from(F),matches:R,calculatedValue:D,valueBreakdown:{perMatchValue:R.length*I.valuePerMatch,flatBonus:j?I.flatBonus:0,total:D},confidence:B,evidenceStrength:$,notes:U})}),r.push({action:"RULES_PROCESSED",timestamp:new Date().toISOString(),details:`Processed ${DS.length} rules, found ${i.length} total matches`});const o=a.filter(I=>I.category==="rd_credit"),l=a.filter(I=>I.category==="training"),c=a.filter(I=>I.category==="green_energy"),h=a.filter(I=>I.category==="employee_retention"),d=o.some(I=>I.qualified),f=l.some(I=>I.qualified),p=c.some(I=>I.qualified),g=h.some(I=>I.qualified),m=o.reduce((I,R)=>I+R.calculatedValue,0),b=l.reduce((I,R)=>I+R.calculatedValue,0),y=c.reduce((I,R)=>I+R.calculatedValue,0),w=h.reduce((I,R)=>I+R.calculatedValue,0),v=m+b+y+w,_=hfe(t,i),x=dfe(t),S=x.filter(I=>I.type==="warning").length>=2?"high":x.filter(I=>I.type==="warning").length>=1?"medium":"low",T=(I,R,F,D,j,B)=>{const $=D.filter(G=>G.qualified).map(G=>G.ruleId),U=D.reduce((G,W)=>G+W.matchCount,0),V=D.length>0?D.reduce((G,W)=>G+W.confidence,0)/D.length:0;return{programId:R,programName:I,irsForm:F,isEligible:j,eligibilityScore:Math.round(V*100),estimatedValue:B,valueRange:{minimum:Math.round(B*.7),expected:B,maximum:Math.round(B*1.3)},matchedRules:$,evidenceCount:U,confidence:V,requirements:D.map(G=>({requirement:G.ruleName,met:G.qualified,evidence:G.qualified?`${G.matchCount} matches found`:null})),recommendations:j?["Gather supporting documentation","Review contemporaneous records"]:["Insufficient evidence found"]}},O=new Set(i.map(I=>I.keyword)).size,k=a.filter(I=>I.qualified).length,M=a.reduce((I,R)=>I+R.calculatedValue*R.confidence,0),N=performance.now();return r.push({action:"SCAN_COMPLETE",timestamp:new Date().toISOString(),details:`Analysis complete in ${Math.round(N-e)}ms`}),{analysisId:n,analysisVersion:"5.0.0",timestamp:new Date().toISOString(),processingTimeMs:Math.round(N-e),source:{contentLength:t.length,contentHash:afe(t),contentType:"plain_text",language:"en",encoding:"UTF-8"},isRdEligible:d,isTrainingEligible:f,isGreenEligible:p,isErcEligible:g,isWotcEligible:!1,is179dEligible:p,financialSummary:{totalEstimatedValue:v,rdCreditValue:m,trainingCreditValue:b,greenEnergyValue:y,otherCreditsValue:w,confidenceWeightedValue:Math.round(M),valueByCategory:{rd_credit:m,training:b,green_energy:y,employee_retention:w}},ruleEvaluations:a,qualifications:{rdCredit:T("Federal R&D Tax Credit","IRC-41","Form 6765",o,d,m),trainingGrant:T("Training & Education Grant","TRN-127","Form W-2",l,f,b),greenEnergy:T("Energy Efficiency Deduction","SEC-179D","Form 7205",c,p,y),employeeRetention:T("Employee Retention Credit","ERC-3134","Form 941-X",h,g,w)},allMatches:i,matchesByCategory:s,statistics:_,riskIndicators:x,overallRiskLevel:S,processingDetails:{rulesApplied:DS.length,rulesTriggered:k,totalMatchesFound:i.length,uniqueKeywordsFound:O,scanCoverage:100,confidenceScore:k>0?a.filter(I=>I.qualified).reduce((I,R)=>I+R.confidence,0)/k:0},auditLog:r}}function io(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function A_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gfe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(h){try{c(r.next(h))}catch(d){a(d)}}function l(h){try{c(r.throw(h))}catch(d){a(d)}}function c(h){h.done?s(h.value):i(h.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}const mfe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class sk extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class yfe extends sk{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class SR extends sk{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AR extends sk{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xT;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xT||(xT={}));class vfe{constructor(e,{headers:n={},customFetch:r,region:i=xT.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=mfe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return gfe(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:o,method:l,body:c,signal:h,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let m;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=c):typeof c=="string"?(f["Content-Type"]="text/plain",m=c):typeof FormData<"u"&&c instanceof FormData?m=c:(f["Content-Type"]="application/json",m=JSON.stringify(c)):m=c;let b=h;d&&(a=new AbortController,s=setTimeout(()=>a.abort(),d),h?(b=a.signal,h.addEventListener("abort",()=>a.abort())):b=a.signal);const y=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:m,signal:b}).catch(x=>{throw new yfe(x)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new SR(y);if(!y.ok)throw new AR(y);let v=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield y.json():v==="application/octet-stream"||v==="application/pdf"?_=yield y.blob():v==="text/event-stream"?_=y:v==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof AR||o instanceof SR?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var bfe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},wfe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,c=s.status,h=s.statusText;if(s.ok){var d,f;if(n.method!=="HEAD"){var p;const y=await s.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=y:o=JSON.parse(y))}const m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),b=(f=s.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,h="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var g;const m=await s.text();try{a=JSON.parse(m),Array.isArray(a)&&s.status===404&&(o=[],a=null,c=200,h="OK")}catch{s.status===404&&m===""?(c=204,h="No Content"):a={message:m}}if(a&&n.isMaybeSingle&&(!(a==null||(g=a.details)===null||g===void 0)&&g.includes("0 rows"))&&(a=null,c=200,h="OK"),a&&n.shouldThrowOnError)throw new bfe(a)}return{error:a,data:o,count:l,status:c,statusText:h}});return this.shouldThrowOnError||(i=i.catch(s=>{var a;let o="";const l=s==null?void 0:s.cause;if(l){var c,h,d,f;const g=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",m=(h=l==null?void 0:l.code)!==null&&h!==void 0?h:"";o=`${(d=s==null?void 0:s.name)!==null&&d!==void 0?d:"FetchError"}: ${s==null?void 0:s.message}`,o+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${g}`,m&&(o+=` (${m})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=s==null?void 0:s.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},xfe=class extends wfe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ER=new RegExp("[,()]");var kh=class extends xfe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ER.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ER.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},_fe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new kh({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((a,o)=>a.concat(Object.keys(o)),[]);if(s.length>0){const a=[...new Set(s)].map(o=>`"${o}"`);this.url.searchParams.set("columns",a.join(","))}}return new kh({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new kh({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new kh({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new kh({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Sfe=class y3{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _fe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new y3(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=n);const h=new Headers(this.headers);return s&&h.set("Prefer",`count=${s}`),new kh({method:o,url:l,headers:h,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class Afe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Efe="2.89.0",Tfe=`realtime-js/${Efe}`,v3="1.0.0",Cfe="2.0.0",TR=v3,_T=1e4,Pfe=1e3,Ofe=100;var Ro;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ro||(Ro={}));var nn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(nn||(nn={}));var fs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fs||(fs={}));var ST;(function(t){t.websocket="websocket"})(ST||(ST={}));var yc;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yc||(yc={}));class kfe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,s;const a=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(p),m=0;g.setUint8(m++,this.KINDS.userBroadcastPush),g.setUint8(m++,l.length),g.setUint8(m++,o.length),g.setUint8(m++,a.length),g.setUint8(m++,c.length),g.setUint8(m++,d.length),g.setUint8(m++,n),Array.from(l,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(o,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(a,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(c,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(d,y=>g.setUint8(m++,y.charCodeAt(0)));var b=new Uint8Array(p.byteLength+r.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(r),p.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,a,o,l]=r;return n({join_ref:i,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+a));l=l+a;const f=e.slice(l,e.byteLength),p=o===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,g={type:this.BROADCAST_EVENT,event:h,payload:p};return a>0&&(g.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class b3{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const CR=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=Nfe(a,t,e,i),s),{}):{}},Nfe=(t,e,n,r)=>{const i=e.find(o=>o.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?w3(s,a):AT(a)},w3=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return jfe(e,n)}switch(t){case it.bool:return Ife(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return Mfe(e);case it.json:case it.jsonb:return Rfe(e);case it.timestamp:return Dfe(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return AT(e);default:return AT(e)}},AT=t=>t,Ife=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Mfe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Rfe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},jfe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>w3(e,o))}return t},Dfe=t=>typeof t=="string"?t.replace(" ","T"):t,x3=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class $S{constructor(e,n,r={},i=_T){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var PR;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(PR||(PR={}));class Zg{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zg.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Zg.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Zg.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(c,h)=>{a[c]||(l[c]=h)}),this.map(a,(c,h)=>{const d=s[c];if(d){const f=h.map(b=>b.presence_ref),p=d.map(b=>b.presence_ref),g=h.filter(b=>p.indexOf(b.presence_ref)<0),m=d.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(o[c]=g),m.length>0&&(l[c]=m)}else o[c]=h}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const h=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),h.length>0){const d=e[o].map(p=>p.presence_ref),f=h.filter(p=>d.indexOf(p.presence_ref)<0);e[o].unshift(...f)}r(o,h,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const h=l.map(d=>d.presence_ref);c=c.filter(d=>h.indexOf(d.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var OR;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(OR||(OR={}));var em;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(em||(em={}));var ga;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ga||(ga={}));class nd{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new $S(this,fs.join,this.params,this.timeout),this.rejoinTimer=new b3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fs.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Zg(this),this.broadcastEndpointURL=x3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==nn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[em.PRESENCE]&&this.bindings[em.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(ga.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ga.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(ga.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(g=m==null?void 0:m.length)!==null&&g!==void 0?g:0,y=[];for(let w=0;w<b;w++){const v=m[w],{filter:{event:_,schema:x,table:S,filter:T}}=v,O=p&&p[w];if(O&&O.event===_&&nd.isFilterValueEqual(O.schema,x)&&nd.isFilterValueEqual(O.table,S)&&nd.isFilterValueEqual(O.filter,T))y.push(Object.assign(Object.assign({},v),{id:O.id}));else{this.unsubscribe(),this.state=nn.errored,e==null||e(ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ga.SUBSCRIBED);return}}).receive("error",p=>{this.state=nn.errored,e==null||e(ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===nn.joined&&e===em.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new $S(this,fs.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new $S(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ofe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:h}=fs;if(r&&[o,l,c,h].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,m,b;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(m=p.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(f,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var g,m,b,y,w,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const _=p.id,x=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((m=n.ids)===null||m===void 0?void 0:m.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(w=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:m,table:b,commit_timestamp:y,type:w,errors:v}=g;f=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:y,eventType:w,new:{},old:{},errors:v}),this._getPayloadRecords(g))}p.callback(f,r)})}_isClosed(){return this.state===nn.closed}_isJoined(){return this.state===nn.joined}_isJoining(){return this.state===nn.joining}_isLeaving(){return this.state===nn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&nd.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fs.close,{},e)}_onError(e){this._on(fs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=CR(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=CR(e.columns,e.old_record)),n}}const LS=()=>{},nb={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$fe=[1e3,2e3,5e3,1e4],Lfe=1e4,Ffe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Bfe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_T,this.transport=null,this.heartbeatIntervalMs=nb.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=LS,this.ref=0,this.reconnectTimer=null,this.vsn=TR,this.logger=LS,this.conn=null,this.sendBuffer=[],this.serializer=new kfe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ST.websocket}`,this.httpEndpoint=x3(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Afe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ro.connecting:return yc.Connecting;case Ro.open:return yc.Open;case Ro.closing:return yc.Closing;default:return yc.Closed}}isConnected(){return this.connectionState()===yc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new nd(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Pfe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},nb.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ro.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ro.open||this.conn.readyState===Ro.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ffe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Tfe};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(fs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new b3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nb.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,o,l,c,h,d,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:_T,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:nb.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:LS,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:TR,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:g=>$fe[g-1]||Lfe,this.vsn){case v3:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(g,m)=>m(JSON.stringify(g)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(g,m)=>m(JSON.parse(g));break;case Cfe:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ty=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ufe(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function zfe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Hfe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=Ufe(t.baseUrl,r,i),l=await zfe(t.auth),c=await e(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),h=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!c.ok){const p=d?f:void 0,g=p==null?void 0:p.error;throw new ty((g==null?void 0:g.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function rb(t){return t.join("")}var Wfe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:rb(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rb(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rb(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rb(t.namespace)}`}),!0}catch(e){if(e instanceof ty&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ty&&n.status===409)return;throw n}}};function _h(t){return t.join("")}var Vfe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_h(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_h(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_h(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_h(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_h(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_h(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ty&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ty&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Gfe=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Hfe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Wfe(this.client,e),this.tableOps=new Vfe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},E_=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var qfe=class extends E_{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ET=class extends E_{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const ak=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Kfe=()=>Response,TT=t=>{if(Array.isArray(t))return t.map(n=>TT(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=TT(r)}),e},Xfe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yfe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(t)}function Jfe(t,e){if(ny(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qfe(t){var e=Jfe(t,"string");return ny(e)=="symbol"?e:e+""}function Zfe(t,e,n){return(e=Qfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(n),!0).forEach(function(r){Zfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const FS=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},epe=async(t,e,n)=>{t instanceof await Kfe()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new qfe(FS(r),i,s))}).catch(r=>{e(new ET(FS(r),r))}):e(new ET(FS(t),t))},tpe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Xfe(r)?(i.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),ue(ue({},i),n))};async function g0(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,tpe(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>epe(l,o,r))})}async function ry(t,e,n,r){return g0(t,"GET",e,n,r)}async function Qi(t,e,n,r,i){return g0(t,"POST",e,r,i,n)}async function CT(t,e,n,r,i){return g0(t,"PUT",e,r,i,n)}async function npe(t,e,n,r){return g0(t,"HEAD",e,ue(ue({},n),{},{noResolveJson:!0}),r)}async function ok(t,e,n,r,i){return g0(t,"DELETE",e,r,i,n)}var rpe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}};let _3;_3=Symbol.toStringTag;var ipe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[_3]="BlobDownloadBuilder",this.promise=null}asStream(){return new rpe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}};const spe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},NR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ape=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=ak(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const a=ue(ue({},NR),r);let o=ue(ue({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(o=ue(ue({},o),r.headers));const c=i._removeEmptyFolders(e),h=i._getFinalPath(c),d=await(t=="PUT"?CT:Qi)(i.fetch,`${i.url}/object/${h}`,s,ue({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),a=i._getFinalPath(s),o=new URL(i.url+`/object/upload/sign/${a}`);o.searchParams.set("token",e);try{let l;const c=ue({upsert:NR.upsert},r),h=ue(ue({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType),{data:{path:s,fullPath:(await CT(i.fetch,o.toString(),l,{headers:h})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=ue({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await Qi(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new E_("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Qi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await Qi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await Qi(r.fetch,`${r.url}/object/sign/${i}`,ue({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await Qi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>ue(ue({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),a=()=>ry(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new ipe(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:TT(await ry(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await npe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r)&&r instanceof ET){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(t){var e=this;try{return{data:await ok(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=ue(ue(ue({},spe),e),{},{prefix:t||""});return{data:await Qi(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=ue({},t);return{data:await Qi(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const S3="2.89.0",A3={"X-Client-Info":`storage-js/${S3}`};var ope=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=ue(ue({},A3),e),this.fetch=ak(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await ry(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await ry(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Qi(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await CT(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Qi(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ok(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},lpe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},A3),e),this.fetch=ak(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Qi(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await ry(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ok(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Yfe(t))throw new E_("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Gfe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const a=i[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(i,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const lk={"X-Client-Info":`storage-js/${S3}`,"Content-Type":"application/json"};var E3=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function si(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var BS=class extends E3{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cpe=class extends E3{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const ck=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),upe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},IR=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hpe=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new BS(IR(s),r,a))}).catch(()=>{const s=r+"";e(new BS(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new BS(i.statusText||`HTTP ${r} error`,r,s))}}else e(new cpe(IR(t),t))},dpe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(upe(r)?(i.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,ue(ue({},i),n)):i};async function fpe(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,dpe(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>hpe(l,o,r))})}async function ai(t,e,n,r,i){return fpe(t,"POST",e,r,i,n)}var ppe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},lk),e),this.fetch=ck(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await ai(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await ai(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}}},gpe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},lk),e),this.fetch=ck(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ai(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ai(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ai(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}},mpe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},lk),e),this.fetch=ck(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await ai(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ai(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(si(n))return{data:null,error:n};throw n}}},ype=class extends mpe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new vpe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},vpe=class extends ppe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new bpe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},bpe=class extends gpe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},wpe=class extends ope{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new ape(this.url,this.headers,t,this.fetch)}get vectors(){return new ype(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lpe(this.url+"/iceberg",this.headers,this.fetch)}};const T3="2.89.0",Nh=30*1e3,PT=3,US=PT*Nh,xpe="http://localhost:9999",_pe="supabase.auth.token",Spe={"X-Client-Info":`gotrue-js/${T3}`},OT="X-Supabase-Api-Version",C3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ape=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Epe=10*60*1e3;class iy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Tpe extends iy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Cpe(t){return ae(t)&&t.name==="AuthApiError"}class vc extends iy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class To extends iy{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Nr extends To{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ppe(t){return ae(t)&&t.name==="AuthSessionMissingError"}class Sh extends To{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ib extends To{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class sb extends To{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ope(t){return ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class MR extends To{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kpe extends To{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class kT extends To{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function zS(t){return ae(t)&&t.name==="AuthRetryableFetchError"}class RR extends To{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class NT extends To{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const jx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jR=` 	
\r=`.split(""),Npe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<jR.length;e+=1)t[jR[e].charCodeAt(0)]=-2;for(let e=0;e<jx.length;e+=1)t[jx[e].charCodeAt(0)]=e;return t})();function DR(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(jx[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(jx[r]),e.queuedBits-=6}}function P3(t,e,n){const r=Npe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $R(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{Rpe(a,r,n)};for(let a=0;a<t.length;a+=1)P3(t.charCodeAt(a),i,s);return e.join("")}function Ipe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Mpe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Ipe(r,e)}}function Rpe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function bd(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)P3(t.charCodeAt(i),n,r);return new Uint8Array(e)}function jpe(t){const e=[];return Mpe(t,n=>e.push(n)),new Uint8Array(e)}function Nc(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>DR(i,n,r)),DR(null,n,r),e.join("")}function Dpe(t){return Math.round(Date.now()/1e3)+t}function $pe(){return Symbol("auth-callback")}const Tn=()=>typeof window<"u"&&typeof document<"u",ac={tested:!1,writable:!1},O3=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ac.tested)return ac.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ac.tested=!0,ac.writable=!0}catch{ac.tested=!0,ac.writable=!1}return ac.writable};function Lpe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const k3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Fpe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ih=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},oc=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},En=async(t,e)=>{await t.removeItem(e)};class T_{constructor(){this.promise=new T_.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}T_.promiseConstructor=Promise;function HS(t){const e=t.split(".");if(e.length!==3)throw new NT("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Ape.test(e[r]))throw new NT("JWT not in base64url format");return{header:JSON.parse($R(e[0])),payload:JSON.parse($R(e[1])),signature:bd(e[2]),raw:{header:e[0],payload:e[1]}}}async function Bpe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Upe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function zpe(t){return("0"+t.toString(16)).substr(-2)}function Hpe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,zpe).join("")}async function Wpe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Vpe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Wpe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ah(t,e,n=!1){const r=Hpe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ih(t,`${e}-code-verifier`,i);const s=await Vpe(r);return[s,r===s?"plain":"s256"]}const Gpe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qpe(t){const e=t.headers.get(OT);if(!e||!e.match(Gpe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Kpe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Xpe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ype=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Eh(t){if(!Ype.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function WS(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jpe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function LR(t){return JSON.parse(JSON.stringify(t))}const fc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qpe=[502,503,504];async function FR(t){var e;if(!Fpe(t))throw new kT(fc(t),0);if(Qpe.includes(t.status))throw new kT(fc(t),t.status);let n;try{n=await t.json()}catch(s){throw new vc(fc(s),s)}let r;const i=qpe(t);if(i&&i.getTime()>=C3["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new RR(fc(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new RR(fc(n),t.status,n.weak_password.reasons);throw new Tpe(fc(n),t.status||500,r)}const Zpe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ce(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[OT]||(s[OT]=C3["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await ege(t,e,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ege(t,e,n,r,i,s){const a=Zpe(e,r,i,s);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new kT(fc(l),0)}if(o.ok||await FR(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await FR(l)}}function Ki(t){var e;let n=null;rge(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Dpe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function BR(t){const e=Ki(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function tge(t){return{data:t,error:null}}function nge(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=A_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function UR(t){return t}function rge(t){return t.access_token&&t.refresh_token&&t.expires_in}const VS=["global","local","others"];class ige{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=k3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=VS[0]){if(VS.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${VS.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Lo})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=A_(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nge,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lo})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:UR});if(h.error)throw h.error;const d=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Eh(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lo})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Eh(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Lo})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Eh(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Lo})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Eh(e.userId);try{const{data:n,error:r}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Eh(e.userId),Eh(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:UR});if(h.error)throw h.error;const d=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ae(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}}function zR(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Th={debug:!!(globalThis&&O3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class N3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sge extends N3{}async function age(t,e,n){Th.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Th.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Th.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Th.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Th.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new sge(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Th.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function oge(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function I3(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function lge(t){return parseInt(t,16)}function cge(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function uge(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:h,uri:d,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=I3(t.address),g=h?`${h}://${r}`:r,m=t.statement?`${t.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${p}

${m}`;let y=`URI: ${d}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let w=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);w+=`
- ${v}`}y+=w}return`${b}
${y}`}class Gt extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Dx extends Gt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function hge({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Gt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(M3(a)){if(s.rp.id!==a)return new Gt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function dge({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Gt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(M3(r)){if(n.rpId!==r)return new Gt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class fge{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const pge=new fge;function gge(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=A_(t,["challenge","user","excludeCredentials"]),s=bd(e).buffer,a=Object.assign(Object.assign({},n),{id:bd(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:bd(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function mge(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=A_(t,["challenge","allowCredentials"]),i=bd(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:bd(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function yge(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Nc(new Uint8Array(t.response.attestationObject)),clientDataJSON:Nc(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vge(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Nc(new Uint8Array(i.authenticatorData)),clientDataJSON:Nc(new Uint8Array(i.clientDataJSON)),signature:Nc(new Uint8Array(i.signature)),userHandle:i.userHandle?Nc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function M3(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function HR(){var t,e;return!!(Tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function bge(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dx("Browser returned unexpected credential type",e)}:{data:null,error:new Dx("Empty credential response",e)}}catch(e){return{data:null,error:hge({error:e,options:t})}}}async function wge(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dx("Browser returned unexpected credential type",e)}:{data:null,error:new Dx("Empty credential response",e)}}catch(e){return{data:null,error:dge({error:e,options:t})}}}const xge={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_ge={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $x(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const o=r[s];e(o)?r[s]=$x(o,a):r[s]=$x(a)}else r[s]=a}return r}function Sge(t,e){return $x(xge,t,e||{})}function Age(t,e){return $x(_ge,t,e||{})}class Ege{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=i??pge.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=Sge(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:d}=await bge({publicKey:c,signal:l});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const c=Age(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:d}=await wge(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(a){return ae(a)?{data:null,error:a}:{data:null,error:new vc("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new iy("rpId is required for WebAuthn authentication")};try{if(!HR())return{data:null,error:new vc("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return ae(a)?{data:null,error:a}:{data:null,error:new vc("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new iy("rpId is required for WebAuthn registration")};try{if(!HR())return{data:null,error:new vc("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return ae(a)?{data:null,error:a}:{data:null,error:new vc("Unexpected error in register",a)}}}}oge();const Tge={url:xpe,storageKey:_pe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Spe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function WR(t,e,n){return await n()}const Ch={};class sy{get jwks(){var e,n;return(n=(e=Ch[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ch[this.storageKey]=Object.assign(Object.assign({},Ch[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ch[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ch[this.storageKey]=Object.assign(Object.assign({},Ch[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Tge),e);if(this.storageKey=s.storageKey,this.instanceID=(n=sy.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,sy.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Tn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ige({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=k3(s.fetch),this.lock=s.lock||WR,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Tn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=age:this.lock=WR,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ege(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:O3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zR(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zR(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${T3}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Tn()&&(n=Lpe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Ope(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ae(n)?this._returnResult({error:n}):this._returnResult({error:new vc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ki}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:d,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Ah(this.storage,this.storageKey)),s=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:Ki})}else if("phone"in e){const{phone:h,password:d,options:f}=e;s=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ki})}else throw new ib("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await En(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:BR})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:BR})}else throw new ib("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Sh;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,o,l,c,h,d,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:m,wallet:b,statement:y,options:w}=e;let v;if(Tn())if(typeof b=="object")v=b;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")v=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=b}const _=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),x=await v.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=I3(x[0]);let T=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const k=await v.request({method:"eth_chainId"});T=lge(k)}const O={domain:_.host,address:S,statement:y,uri:_.href,version:"1",chainId:T,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=w==null?void 0:w.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=uge(O),g=await v.request({method:"personal_sign",params:[cge(p),S]})}try{const{data:m,error:b}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ki});if(b)throw b;if(!m||!m.session||!m.user){const y=new Sh;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:b})}catch(m){if(ae(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var n,r,i,s,a,o,l,c,h,d,f,p;let g,m;if("message"in e)g=e.message,m=e.signature;else{const{chain:b,wallet:y,statement:w,options:v}=e;let _;if(Tn())if(typeof y=="object")_=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const x=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),w?{statement:w}:null));let T;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")T=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)T=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)g=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),m=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${x.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:b,error:y}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Nc(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ki});if(y)throw y;if(!b||!b.session||!b.user){const w=new Sh;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(ae(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await oc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new kpe;const{data:s,error:a}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ki});if(await En(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Sh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,o=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ki}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new Sh;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Ah(this.storage,this.storageKey));const{error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:h}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new ib("You must provide either an email or phone number.")}catch(o){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ki});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Ah(this.storage,this.storageKey));const c=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:tge});return!((s=c.data)===null||s===void 0)&&s.url&&Tn()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Nr;const{error:i}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new ib("You must provide either an email or phone number and a type")}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await oc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<US:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await oc(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=WS()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=Jpe(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lo}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nr}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Lo})})}catch(n){if(ae(n))return Ppe(n)&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Nr;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Ah(this.storage,this.storageKey));const{data:c,error:h}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Lo});if(h)throw h;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=HS(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(ae(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Nr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Tn())throw new sb("No browser detected.");if(e.error||e.error_description||e.error_code)throw new sb(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new MR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sb("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new MR("No code detected.");const{data:w,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!s||!o||!a||!c)throw new sb("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(o);let f=h+d;l&&(f=parseInt(l));const p=f-h;p*1e3<=Nh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const g=f-d;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,h);const{data:m,error:b}=await this._getUser(s);if(b)throw b;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:a,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(r){if(ae(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await oc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Cpe(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=$pe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ah(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,c,h;const{data:d,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Tn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ae(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:c,nonce:h}=e,d=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ki}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Sh}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(await En(this.storage,`${this.storageKey}-code-verifier`),ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Upe(async i=>(i>0&&await Bpe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ki})),(i,s)=>{const a=200*Math.pow(2,i);return s&&zS(s)&&Date.now()+a-r<Nh})}catch(r){if(this._debug(n,"error",r),ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await oc(this.storage,this.storageKey);if(i&&this.userStorage){let a=await oc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Ih(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:WS()}else if(i&&!i.user&&!i.user){const a=await oc(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await En(this.storage,this.storageKey+"-user"),await Ih(this.storage,this.storageKey,i)):i.user=WS()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<US;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${US}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),zS(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new T_;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Nr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),ae(s)){const a={data:null,error:s};return zS(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await En(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ih(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=LR(i);await Ih(this.storage,this.storageKey,s)}else{const i=LR(n);await Ih(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await En(this.storage,this.storageKey),await En(this.storage,this.storageKey+"-code-verifier"),await En(this.storage,this.storageKey+"-user"),this.userStorage&&await En(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nh);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Nh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Nh}ms, refresh threshold is ${PT} ticks`),i<=PT&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof N3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Ah(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?yge(e.webauthn.credential_response):vge(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:gge(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:mge(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=HS(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const c=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Nr});const a=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Tn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Nr});const a=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Tn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(e){if(ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nr})})}catch(n){if(ae(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Epe>i)return r;const{data:s,error:a}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=HS(r);n!=null&&n.allowExpired||Kpe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const h=Xpe(i.alg),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,a,jpe(`${o}.${l}`)))throw new NT("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}}sy.nextInstanceID={};const Cge=sy,Pge="2.89.0";let mg="";typeof Deno<"u"?mg="deno":typeof document<"u"?mg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mg="react-native":mg="node";const Oge={"X-Client-Info":`supabase-js-${mg}/${Pge}`},kge={headers:Oge},Nge={schema:"public"},Ige={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mge={};function ay(t){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(t)}function Rge(t,e){if(ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jge(t){var e=Rge(t,"string");return ay(e)=="symbol"?e:e+""}function Dge(t,e,n){return(e=jge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VR(Object(n),!0).forEach(function(r){Dge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const $ge=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Lge=()=>Headers,Fge=(t,e,n)=>{const r=$ge(n),i=Lge();return async(s,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Rt(Rt({},a),{},{headers:c}))}};function Bge(t){return t.endsWith("/")?t:t+"/"}function Uge(t,e){var n,r;const{db:i,auth:s,realtime:a,global:o}=t,{db:l,auth:c,realtime:h,global:d}=e,f={db:Rt(Rt({},l),i),auth:Rt(Rt({},c),s),realtime:Rt(Rt({},h),a),storage:{},global:Rt(Rt(Rt({},d),o),{},{headers:Rt(Rt({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function zge(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Bge(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Hge=class extends Cge{constructor(t){super(t)}},Wge=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=zge(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:Nge,realtime:Mge,auth:Rt(Rt({},Ige),{},{storageKey:a}),global:kge},l=Uge(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Fge(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Rt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Sfe(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new wpe(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new vfe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:c},h,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hge({url:this.authUrl.href,headers:Rt(Rt({},f),h),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Bfe(this.realtimeUrl.href,Rt(Rt({},t),{},{params:Rt(Rt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Vge=(t,e,n)=>new Wge(t,e,n);function Gge(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Gge()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qge="https://qmhqewbagjyfjbwobsfl.supabase.co",Kge="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFtaHFld2JhZ2p5Zmpid29ic2ZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcyOTc3OTgsImV4cCI6MjA4Mjg3Mzc5OH0.JxgFOTV3AOR5TDpIyJVBou44RFsi3RXxU7Yi8nr4iU4",wd=Vge(qge,Kge),sr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IT=[.001,0,0,.001,0,0],GS=1.35,Zr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Fo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},oy="pdfjs_internal_editor_",ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Xge={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},MT={TRIANGLES:1,LATTICE:2},tn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ob={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ht={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Mh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},C_={ERRORS:0,WARNINGS:1,INFOS:5},ly={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},sg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Yge={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let P_=C_.WARNINGS;function Jge(t){Number.isInteger(t)&&(P_=t)}function Qge(){return P_}function O_(t){P_>=C_.INFOS&&console.info(`Info: ${t}`)}function ge(t){P_>=C_.WARNINGS&&console.warn(`Warning: ${t}`)}function rt(t){throw new Error(t)}function Me(t,e){t||rt(e)}function Zge(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function R3(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=ime(t)}catch{}}const r=e?URL.parse(t,e):URL.parse(t);return Zge(r)?r:null}function j3(t,e,n=!1){const r=URL.parse(t);return r?(r.hash=e,r.href):n&&R3(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function me(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const mh=function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class GR extends mh{constructor(e,n){super(e,"PasswordException"),this.code=n}}class qS extends mh{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class RT extends mh{constructor(e){super(e,"InvalidPDFException")}}class Lx extends mh{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class eme extends mh{constructor(e){super(e,"FormatError")}}class Gl extends mh{constructor(e){super(e,"AbortException")}}function D3(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&rt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const s=Math.min(i+n,e),a=t.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function m0(t){typeof t!="string"&&rt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function tme(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function nme(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function rme(){try{return new Function(""),!0}catch{return!1}}class hn{static get isLittleEndian(){return me(this,"isLittleEndian",nme())}static get isEvalSupported(){return me(this,"isEvalSupported",rme())}static get isOffscreenCanvasSupported(){return me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return me(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return me(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return me(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){var e,n;return me(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const KS=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var lo,kb,jT;class ee{static makeHexColor(e,n,r){return`#${KS[e]}${KS[n]}${KS[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,r=0){const i=e[r],s=e[r+1];e[r]=i*n[0]+s*n[2]+n[4],e[r+1]=i*n[1]+s*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const i=n[0],s=n[1],a=n[2],o=n[3],l=n[4],c=n[5];for(let h=0;h<6;h+=2){const d=e[r+h],f=e[r+h+1];e[r+h]=d*i+f*a+l,e[r+h+1]=d*s+f*o+c}}static applyInverseTransform(e,n){const r=e[0],i=e[1],s=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-i*n[2]+n[2]*n[5]-n[4]*n[3])/s,e[1]=(-r*n[1]+i*n[0]+n[4]*n[1]-n[5]*n[0])/s}static axialAlignedBoundingBox(e,n,r){const i=n[0],s=n[1],a=n[2],o=n[3],l=n[4],c=n[5],h=e[0],d=e[1],f=e[2],p=e[3];let g=i*h+l,m=g,b=i*f+l,y=b,w=o*d+c,v=w,_=o*p+c,x=_;if(s!==0||a!==0){const S=s*h,T=s*f,O=a*d,k=a*p;g+=O,y+=O,b+=k,m+=k,w+=S,x+=S,_+=T,v+=T}r[0]=Math.min(r[0],g,b,m,y),r[1]=Math.min(r[1],w,_,v,x),r[2]=Math.max(r[2],g,b,m,y),r[3]=Math.max(r[3],w,_,v,x)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],i=e[1],s=e[2],a=e[3],o=r**2+i**2,l=r*s+i*a,c=s**2+a**2,h=(o+c)/2,d=Math.sqrt(h**2-(o*c-l**2));n[0]=Math.sqrt(h+d||1),n[1]=Math.sqrt(h-d||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>a?null:[r,s,i,a]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],n,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],n,i)}static bezierBoundingBox(e,n,r,i,s,a,o,l,c){c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],n,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],n,l),P(this,lo,jT).call(this,e,r,s,o,n,i,a,l,3*(-e+3*(r-s)+o),6*(e-2*r+s),3*(r-e),c),P(this,lo,jT).call(this,e,r,s,o,n,i,a,l,3*(-n+3*(i-a)+l),6*(n-2*i+a),3*(i-n),c)}}lo=new WeakSet,kb=function(e,n,r,i,s,a,o,l,c,h){if(c<=0||c>=1)return;const d=1-c,f=c*c,p=f*c,g=d*(d*(d*e+3*c*n)+3*f*r)+p*i,m=d*(d*(d*s+3*c*a)+3*f*o)+p*l;h[0]=Math.min(h[0],g),h[1]=Math.min(h[1],m),h[2]=Math.max(h[2],g),h[3]=Math.max(h[3],m)},jT=function(e,n,r,i,s,a,o,l,c,h,d,f){if(Math.abs(c)<1e-12){Math.abs(h)>=1e-12&&P(this,lo,kb).call(this,e,n,r,i,s,a,o,l,-d/h,f);return}const p=h**2-4*d*c;if(p<0)return;const g=Math.sqrt(p),m=2*c;P(this,lo,kb).call(this,e,n,r,i,s,a,o,l,(-h+g)/m,f),P(this,lo,kb).call(this,e,n,r,i,s,a,o,l,(-h-g)/m,f)},C(ee,lo);function ime(t){return decodeURIComponent(escape(t))}let XS=null,qR=null;function sme(t){return XS||(XS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qR=new Map([["","t"]])),t.replaceAll(XS,(e,n,r)=>n?n.normalize("NFKC"):qR.get(r))}function $3(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),D3(t)}const rd="pdfjs_internal_id_";function ame(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...s]=n;if(!t(r)&&!Number.isInteger(r)||!e(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function ar(t,e,n){return Math.min(Math.max(t,e),n)}function L3(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(D3(t))}function ome(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):m0(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class cy{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(cy.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&n.push({str:a}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class F3{static setupStorage(e,n,r,i,s){const a=i.getValue(n,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(n,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(n,{value:c})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:s}){const{attributes:a}=n,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,n,r)}static render(e){var d,f;const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:r});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);a.append(p),o&&cy.shouldBuildText(i.name)&&c.push(p)}return{textDivs:c}}const h=[[i,-1,a]];for(;h.length>0;){const[p,g,m]=h.at(-1);if(g+1===p.children.length){h.pop();continue}const b=p.children[++h.at(-1)[1]];if(b===null)continue;const{name:y}=b;if(y==="#text"){const v=document.createTextNode(b.value);c.push(v),m.append(v);continue}const w=(d=b==null?void 0:b.attributes)!=null&&d.xmlns?document.createElementNS(b.attributes.xmlns,y):document.createElement(y);if(m.append(w),b.attributes&&this.setAttributes({html:w,element:b,storage:n,intent:s,linkService:r}),((f=b.children)==null?void 0:f.length)>0)h.push([b,-1,w]);else if(b.value){const v=document.createTextNode(b.value);o&&cy.shouldBuildText(y)&&c.push(v),w.append(v)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const ua="http://www.w3.org/2000/svg",wc=class wc{};K(wc,"CSS",96),K(wc,"PDF",72),K(wc,"PDF_TO_CSS_UNITS",wc.CSS/wc.PDF);let ql=wc;async function y0(t,e="text"){if(yg(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class v0{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=a,r*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let g,m,b,y;h===0?(g=Math.abs(c-e[1])*r+s,m=Math.abs(l-e[0])*r+a,b=(e[3]-e[1])*r,y=(e[2]-e[0])*r):(g=Math.abs(l-e[0])*r+s,m=Math.abs(c-e[1])*r+a,b=(e[2]-e[0])*r,y=(e[3]-e[1])*r),this.transform=[h*r,d*r,f*r,p*r,g-h*r*l-f*r*c,m-d*r*l-p*r*c],this.width=b,this.height=y}get rawDims(){const e=this.viewBox;return me(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new v0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,n){const r=[e,n];return ee.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];ee.applyTransform(n,this.transform);const r=[e[2],e[3]];return ee.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return ee.applyInverseTransform(r,this.transform),r}}class uk extends mh{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function k_(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function hk(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function lme(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function cme(t,e="document.pdf"){if(typeof t!="string")return e;if(k_(t))return ge('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(t);if(!r)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(s.test(a))return i(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const c of o)if(s.test(c))return i(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class KR{constructor(){K(this,"started",Object.create(null));K(this,"times",[])}time(e){e in this.started&&ge(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ge(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(n)} ${s-i}ms
`);return e.join("")}}function yg(t,e){const n=e?URL.parse(t,e):URL.parse(t);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function Hi(t){t.preventDefault()}function Lt(t){t.preventDefault(),t.stopPropagation()}function ume(t){console.log("Deprecated API usage: "+t)}var dy;class Fx{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,dy)||A(this,dy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=u(this,dy).exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(n[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(n[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const c=n[7]||"Z";let h=parseInt(n[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(n[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(a+=h,o+=d):c==="+"&&(a-=h,o-=d),new Date(Date.UTC(r,i,s,a,o,l))}}dy=new WeakMap,C(Fx,dy);function hme(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new v0({viewBox:s,userUnit:1,scale:e,rotation:n})}function b0(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ge(`Not a valid color format: "${t}"`),[0,0,0])}function dme(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,b0(r))}e.remove()}function St(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform();return[e,n,r,i,s,a]}function Es(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform().invertSelf();return[e,n,r,i,s,a]}function oh(t,e,n=!1,r=!0){if(e instanceof v0){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=t,o=hn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,h=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!n||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}r&&t.setAttribute("data-main-rotation",e.rotation)}class aa{constructor(){const{pixelRatio:e}=aa;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,i,s=-1){let a=1/0,o=1/0,l=1/0;r=aa.capPixels(r,s),r>0&&(a=Math.sqrt(r/(e*n))),i!==-1&&(o=i/e,l=i/n);const c=Math.min(a,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const DT=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class fme{static get isDarkMode(){var e;return me(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class pme{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),me(this,"commentForegroundColor",b0(r))}}function gme(t,e,n,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return t=Math.round(t*r+i),e=Math.round(e*r+i),n=Math.round(n*r+i),[t,e,n]}function XR(t,e){const n=t[0]/255,r=t[1]/255,i=t[2]/255,s=Math.max(n,r,i),a=Math.min(n,r,i),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const l=s-a;switch(e[1]=o<.5?l/(s+a):l/(2-s-a),s){case n:e[0]=((r-i)/l+(r<i?6:0))*60;break;case r:e[0]=((i-n)/l+2)*60;break;case i:e[0]=((n-r)/l+4)*60;break}}e[2]=o}function $T(t,e){const n=t[0],r=t[1],i=t[2],s=(1-Math.abs(2*i-1))*r,a=s*(1-Math.abs(n/60%2-1)),o=i-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function YR(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function JR(t,e,n){$T(t,n),n.map(YR);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];$T(e,n),n.map(YR);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const QR=new Map;function mme(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=QR.get(n);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),a=i.subarray(3,6);XR(t,a);const o=i.subarray(6,9);XR(e,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),JR(a,o,s)<c){let h,d;l?(h=a[2],d=1):(h=0,d=a[2]);const f=.005;for(;d-h>f;){const p=a[2]=(h+d)/2;l===JR(a,o,s)<c?h=p:d=p}a[2]=l?d:h}return $T(a,s),r=ee.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),QR.set(n,r),r}function B3({html:t,dir:e,className:n},r){const i=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=t.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const c=a[o];s.append(document.createTextNode(c)),o<l-1&&s.append(document.createElement("br"))}i.append(s)}else F3.render({xfaHtml:t,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",n),r.append(i)}function U3(t){const e=new Path2D;if(!t)return e;for(let n=0,r=t.length;n<r;)switch(t[n++]){case sg.moveTo:e.moveTo(t[n++],t[n++]);break;case sg.lineTo:e.lineTo(t[n++],t[n++]);break;case sg.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case sg.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case sg.closePath:e.closePath();break;default:ge(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}var Bo,Uo,bi,wi,fy,zo,_d,Sd,py,Zx,z3,$n,H3,W3,Rh,vg;const ma=class ma{constructor(e){C(this,$n);C(this,Bo,null);C(this,Uo,null);C(this,bi);C(this,wi,null);C(this,fy,null);C(this,zo,null);C(this,_d,null);C(this,Sd,null);A(this,bi,e),u(ma,py)||A(ma,py,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=A(this,Bo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=u(this,bi)._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",Hi,{signal:n}),e.addEventListener("pointerdown",P(ma,Zx,z3),{signal:n}));const r=A(this,wi,document.createElement("div"));r.className="buttons",e.append(r);const i=u(this,bi).toolbarPosition;if(i){const{style:s}=e,a=u(this,bi)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Bo)}hide(){var e;u(this,Bo).classList.add("hidden"),(e=u(this,Uo))==null||e.hideDropdown()}show(){var e,n;u(this,Bo).classList.remove("hidden"),(e=u(this,fy))==null||e.shown(),(n=u(this,zo))==null||n.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=u(this,bi),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",u(ma,py)[e]),P(this,$n,Rh).call(this,r)&&r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),u(this,wi).append(r)}async addAltText(e){const n=await e.render();P(this,$n,Rh).call(this,n),u(this,wi).append(n,u(this,$n,vg)),A(this,fy,e)}addComment(e,n=null){if(u(this,zo))return;const r=e.renderForToolbar();if(!r)return;P(this,$n,Rh).call(this,r);const i=A(this,_d,u(this,$n,vg));n?(u(this,wi).insertBefore(r,n),u(this,wi).insertBefore(i,n)):u(this,wi).append(r,i),A(this,zo,e),e.toolbar=this}addColorPicker(e){if(u(this,Uo))return;A(this,Uo,e);const n=e.renderButton();P(this,$n,Rh).call(this,n),u(this,wi).append(n,u(this,$n,vg))}async addEditSignatureButton(e){const n=A(this,Sd,await e.renderEditButton(u(this,bi)));P(this,$n,Rh).call(this,n),u(this,wi).append(n,u(this,$n,vg))}removeButton(e){var n,r;switch(e){case"comment":(n=u(this,zo))==null||n.removeToolbarCommentButton(),A(this,zo,null),(r=u(this,_d))==null||r.remove(),A(this,_d,null);break}}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,r){if(!n&&e==="comment")return;const i=u(this,wi).querySelector(r);i&&e==="comment"&&this.addComment(n,i)}updateEditSignatureButton(e){u(this,Sd)&&(u(this,Sd).title=e)}remove(){var e;u(this,Bo).remove(),(e=u(this,Uo))==null||e.destroy(),A(this,Uo,null)}};Bo=new WeakMap,Uo=new WeakMap,bi=new WeakMap,wi=new WeakMap,fy=new WeakMap,zo=new WeakMap,_d=new WeakMap,Sd=new WeakMap,py=new WeakMap,Zx=new WeakSet,z3=function(e){e.stopPropagation()},$n=new WeakSet,H3=function(e){u(this,bi)._focusEventsAllowed=!1,Lt(e)},W3=function(e){u(this,bi)._focusEventsAllowed=!0,Lt(e)},Rh=function(e){const n=u(this,bi)._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",P(this,$n,H3).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",P(this,$n,W3).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",Hi,{signal:n}),!0)},vg=function(){const e=document.createElement("div");return e.className="divider",e},C(ma,Zx),C(ma,py,null);let LT=ma;var gy,Ic,ba,wo,V3,G3,FT;class yme{constructor(e){C(this,wo);C(this,gy,null);C(this,Ic,null);C(this,ba);A(this,ba,e)}show(e,n,r){const[i,s]=P(this,wo,G3).call(this,n,r),{style:a}=u(this,Ic)||A(this,Ic,P(this,wo,V3).call(this));e.append(u(this,Ic)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Ic).remove()}}gy=new WeakMap,Ic=new WeakMap,ba=new WeakMap,wo=new WeakSet,V3=function(){const e=A(this,Ic,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const n=u(this,ba)._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",Hi,{signal:n});const r=A(this,gy,document.createElement("div"));return r.className="buttons",e.append(r),u(this,ba).hasCommentManager()&&P(this,wo,FT).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,ba).commentSelection("floating_button")}),P(this,wo,FT).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,ba).highlightSelection("floating_button")}),e},G3=function(e,n){let r=0,i=0;for(const s of e){const a=s.y+s.height;if(a<r)continue;const o=s.x+(n?s.width:0);if(a>r){i=o,r=a;continue}n?o>i&&(i=o):o<i&&(i=o)}return[n?1-i:i,r]},FT=function(e,n,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",n);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",r);const o=u(this,ba)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",Hi,{signal:o}),s.addEventListener("click",i,{signal:o})),u(this,gy).append(s)};function q3(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}var Mc,Rc,Ad,jc;const Ge=class Ge{static initializeAndAddPointerId(e){(u(Ge,Rc)||A(Ge,Rc,new Set)).add(e)}static setPointer(e,n){u(Ge,Mc)||A(Ge,Mc,n),u(Ge,jc)??A(Ge,jc,e)}static setTimeStamp(e){A(Ge,Ad,e)}static isSamePointerId(e){return u(Ge,Mc)===e}static isSamePointerIdOrRemove(e){var n;return u(Ge,Mc)===e?!0:((n=u(Ge,Rc))==null||n.delete(e),!1)}static isSamePointerType(e){return u(Ge,jc)===e}static isInitializedAndDifferentPointerType(e){return u(Ge,jc)!==null&&!Ge.isSamePointerType(e)}static isSameTimeStamp(e){return u(Ge,Ad)===e}static isUsingMultiplePointers(){var e;return((e=u(Ge,Rc))==null?void 0:e.size)>=1}static clearPointerType(){A(Ge,jc,null)}static clearPointerIds(){A(Ge,Mc,NaN),A(Ge,Rc,null)}static clearTimeStamp(){A(Ge,Ad,NaN)}};Mc=new WeakMap,Rc=new WeakMap,Ad=new WeakMap,jc=new WeakMap,C(Ge,Mc,NaN),C(Ge,Rc,null),C(Ge,Ad,NaN),C(Ge,jc,null);let Wn=Ge;var e1;class vme{constructor(){C(this,e1,0)}get id(){return`${oy}${Qt(this,e1)._++}`}}e1=new WeakMap;var Ed,my,Vn,Td,Nb;const bk=class bk{constructor(){C(this,Td);C(this,Ed,$3());C(this,my,0);C(this,Vn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return me(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:n,name:r,size:i,type:s}=e;return P(this,Td,Nb).call(this,`${n}_${r}_${i}_${s}`,e)}async getFromUrl(e){return P(this,Td,Nb).call(this,e,e)}async getFromBlob(e,n){const r=await n;return P(this,Td,Nb).call(this,e,r)}async getFromId(e){u(this,Vn)||A(this,Vn,new Map);const n=u(this,Vn).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){u(this,Vn)||A(this,Vn,new Map);let r=u(this,Vn).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${u(this,Ed)}_${Qt(this,my)._++}`,refCounter:1,isSvg:!1},u(this,Vn).set(e,r),u(this,Vn).set(r.id,r),r}getSvgUrl(e){const n=u(this,Vn).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var i;u(this,Vn)||A(this,Vn,new Map);const n=u(this,Vn).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Ed)}_`)}};Ed=new WeakMap,my=new WeakMap,Vn=new WeakMap,Td=new WeakSet,Nb=async function(e,n){u(this,Vn)||A(this,Vn,new Map);let r=u(this,Vn).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${u(this,Ed)}_${Qt(this,my)._++}`,refCounter:0,isSvg:!1});let i;if(typeof n=="string"?(r.url=n,i=await y0(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const s=bk._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,h)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,c()},a.onload=async()=>{const d=r.svgUrl=a.result;o.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){ge(i),r=null}return u(this,Vn).set(e,r),r&&u(this,Vn).set(r.id,r),r};let BT=bk;var Ft,Ho,yy,_t;class bme{constructor(e=128){C(this,Ft,[]);C(this,Ho,!1);C(this,yy);C(this,_t,-1);A(this,yy,e)}add({cmd:e,undo:n,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),u(this,Ho))return;const l={cmd:e,undo:n,post:r,type:s};if(u(this,_t)===-1){u(this,Ft).length>0&&(u(this,Ft).length=0),A(this,_t,0),u(this,Ft).push(l);return}if(a&&u(this,Ft)[u(this,_t)].type===s){o&&(l.undo=u(this,Ft)[u(this,_t)].undo),u(this,Ft)[u(this,_t)]=l;return}const c=u(this,_t)+1;c===u(this,yy)?u(this,Ft).splice(0,1):(A(this,_t,c),c<u(this,Ft).length&&u(this,Ft).splice(c)),u(this,Ft).push(l)}undo(){if(u(this,_t)===-1)return;A(this,Ho,!0);const{undo:e,post:n}=u(this,Ft)[u(this,_t)];e(),n==null||n(),A(this,Ho,!1),A(this,_t,u(this,_t)-1)}redo(){if(u(this,_t)<u(this,Ft).length-1){A(this,_t,u(this,_t)+1),A(this,Ho,!0);const{cmd:e,post:n}=u(this,Ft)[u(this,_t)];e(),n==null||n(),A(this,Ho,!1)}}hasSomethingToUndo(){return u(this,_t)!==-1}hasSomethingToRedo(){return u(this,_t)<u(this,Ft).length-1}cleanType(e){if(u(this,_t)!==-1){for(let n=u(this,_t);n>=0;n--)if(u(this,Ft)[n].type!==e){u(this,Ft).splice(n+1,u(this,_t)-n),A(this,_t,n);return}u(this,Ft).length=0,A(this,_t,-1)}}destroy(){A(this,Ft,null)}}Ft=new WeakMap,Ho=new WeakMap,yy=new WeakMap,_t=new WeakMap;var t1,K3;class w0{constructor(e){C(this,t1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=hn.platform;for(const[r,i,s={}]of e)for(const a of r){const o=a.startsWith("mac+");n&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!n&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(P(this,t1,K3).call(this,n));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=r;o&&!o(e,n)||(i.bind(e,...a,n)(),s||Lt(n))}}t1=new WeakSet,K3=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const n1=class n1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return dme(e),me(this,"_colors",e)}convert(e){const n=b0(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((s,a)=>s===n[a]))return n1._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?ee.makeHexColor(...n):e}};K(n1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let UT=n1;var Cd,Rr,Pd,kt,sn,Od,xi,kd,_i,Gn,Wo,Vo,Nd,Go,Os,Si,Dc,vy,by,Id,wy,ks,qo,Md,Ko,Ns,r1,Xo,Rd,xy,Yo,$c,jd,Jo,_y,Wt,ze,wa,Qo,Zo,Sy,Dd,Ay,el,Is,xa,Ey,Ty,Ai,Q,Ib,zT,X3,Y3,bg,J3,Q3,Z3,HT,e4,t4,n4,r4,er,ha,i4,s4,WT,a4,wg,VT;const sd=class sd{constructor(e,n,r,i,s,a,o,l,c,h,d,f,p,g,m,b){C(this,Q);C(this,Cd,new AbortController);C(this,Rr,null);C(this,Pd,null);C(this,kt,new Map);C(this,sn,new Map);C(this,Od,null);C(this,xi,null);C(this,kd,null);C(this,_i,new bme);C(this,Gn,null);C(this,Wo,null);C(this,Vo,null);C(this,Nd,0);C(this,Go,new Set);C(this,Os,null);C(this,Si,null);C(this,Dc,new Set);K(this,"_editorUndoBar",null);C(this,vy,!1);C(this,by,!1);C(this,Id,!1);C(this,wy,null);C(this,ks,null);C(this,qo,null);C(this,Md,null);C(this,Ko,!1);C(this,Ns,null);C(this,r1,new vme);C(this,Xo,!1);C(this,Rd,!1);C(this,xy,!1);C(this,Yo,null);C(this,$c,null);C(this,jd,null);C(this,Jo,null);C(this,_y,null);C(this,Wt,ve.NONE);C(this,ze,new Set);C(this,wa,null);C(this,Qo,null);C(this,Zo,null);C(this,Sy,null);C(this,Dd,null);C(this,Ay,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,el,[0,0]);C(this,Is,null);C(this,xa,null);C(this,Ey,null);C(this,Ty,null);C(this,Ai,null);const y=this._signal=u(this,Cd).signal;A(this,xa,e),A(this,Ey,n),A(this,Ty,r),A(this,Od,i),A(this,Gn,s),A(this,Qo,a),A(this,Dd,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:y}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),o._on("setpreference",this.onSetPreference.bind(this),{signal:y}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:y}),window.addEventListener("pointerdown",()=>{A(this,Rd,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{A(this,Rd,!1)},{capture:!0,signal:y}),P(this,Q,J3).call(this),P(this,Q,r4).call(this),P(this,Q,HT).call(this),A(this,xi,l.annotationStorage),A(this,wy,l.filterFactory),A(this,Zo,c),A(this,Md,h||null),A(this,vy,d),A(this,by,f),A(this,Id,p),A(this,_y,g||null),this.viewParameters={realScale:ql.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=b!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=sd.prototype,n=a=>u(a,xa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return me(this,"_keyboardManager",new w0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,xa).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,xa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}destroy(){var e,n,r,i,s,a,o,l,c;(e=u(this,Ai))==null||e.resolve(),A(this,Ai,null),(n=u(this,Cd))==null||n.abort(),A(this,Cd,null),this._signal=null;for(const h of u(this,sn).values())h.destroy();u(this,sn).clear(),u(this,kt).clear(),u(this,Dc).clear(),(r=u(this,Jo))==null||r.clear(),A(this,Rr,null),u(this,ze).clear(),u(this,_i).destroy(),(i=u(this,Od))==null||i.destroy(),(s=u(this,Gn))==null||s.destroy(),(a=u(this,Qo))==null||a.destroy(),(o=u(this,Ns))==null||o.hide(),A(this,Ns,null),(l=u(this,jd))==null||l.destroy(),A(this,jd,null),A(this,Pd,null),u(this,ks)&&(clearTimeout(u(this,ks)),A(this,ks,null)),u(this,Is)&&(clearTimeout(u(this,Is)),A(this,Is,null)),(c=this._editorUndoBar)==null||c.destroy(),A(this,Dd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,_y)}get useNewAltTextFlow(){return u(this,by)}get useNewAltTextWhenAddingImage(){return u(this,Id)}get hcmFilter(){return me(this,"hcmFilter",u(this,Zo)?u(this,wy).addHCMFilter(u(this,Zo).foreground,u(this,Zo).background):"none")}get direction(){return me(this,"direction",getComputedStyle(u(this,xa)).direction)}get _highlightColors(){return me(this,"_highlightColors",u(this,Md)?new Map(u(this,Md).split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return me(this,"highlightColors",null);const n=new Map,r=!!u(this,Zo);for(const[i,s]of e){const a=i.endsWith("_HCM");if(r&&a){n.set(i.replace("_HCM",""),s);continue}!r&&!a&&n.set(i,s)}return me(this,"highlightColors",n)}get highlightColorNames(){return me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,Vo,e)}setMainHighlightColorPicker(e){A(this,jd,e)}editAltText(e,n=!1){var r;(r=u(this,Od))==null||r.editAltText(this,e,n)}hasCommentManager(){return!!u(this,Gn)}editComment(e,n,r,i){var s;(s=u(this,Gn))==null||s.showDialog(this,e,n,r,i)}selectComment(e,n){const r=u(this,sn).get(e),i=r==null?void 0:r.getEditorByUID(n);i==null||i.toggleComment(!0,!0)}updateComment(e){var n;(n=u(this,Gn))==null||n.updateComment(e.getData())}updatePopupColor(e){var n;(n=u(this,Gn))==null||n.updatePopupColor(e)}removeComment(e){var n;(n=u(this,Gn))==null||n.removeComments([e.uid])}toggleComment(e,n,r=void 0){var i;(i=u(this,Gn))==null||i.toggleCommentPopup(e,n,r)}makeCommentColor(e,n){var r;return e&&((r=u(this,Gn))==null?void 0:r.makeCommentColor(e,n))||null}getCommentDialogElement(){var e;return((e=u(this,Gn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,sn).has(e-1))return;const{resolve:n,promise:r}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),n())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var n;(n=u(this,Qo))==null||n.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Qo)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,Id,n);break}}onPageChanging({pageNumber:e}){A(this,Nd,e-1)}focusMainContainer(){u(this,xa).focus()}findParent(e,n){for(const r of u(this,sn).values()){const{x:i,y:s,width:a,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+a&&n>=s&&n<=s+o)return r}return null}disableUserSelect(e=!1){u(this,Ey).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Dc).add(e)}removeShouldRescale(e){u(this,Dc).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*ql.PDF_TO_CSS_UNITS;for(const r of u(this,Dc))r.onScaleChanging();(n=u(this,Vo))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",n=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=r,l=r.toString(),h=P(this,Q,Ib).call(this,r).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;r.empty();const f=P(this,Q,zT).call(this,h),p=u(this,Wt)===ve.NONE,g=()=>{const m=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o,text:l});p&&this.showAllEditors("highlight",!0,!0),n&&(m==null||m.editComment())};if(p){this.switchToMode(ve.HIGHLIGHT,g);return}g()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,xi))return null;const n=`${oy}${e}`,r=u(this,xi).getRawValue(n);return r&&u(this,xi).remove(n),r}addToAnnotationStorage(e){!e.isEmpty()&&u(this,xi)&&!u(this,xi).has(e.id)&&u(this,xi).setValue(e.id,e)}a11yAlert(e,n=null){const r=u(this,Ty);r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Ko)&&(A(this,Ko,!1),P(this,Q,bg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of u(this,ze))if(n.div.contains(e)){A(this,$c,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!u(this,$c))return;const[e,n]=u(this,$c);A(this,$c,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){P(this,Q,HT).call(this),this.setEditingState(!0)}removeEditListeners(){P(this,Q,e4).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of u(this,Si))if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of u(this,Si))if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=u(this,Rr))==null||r.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of u(this,ze)){const s=i.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const a of u(this,Si))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){ge(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=await i.deserialize(l);if(!c)return;s.push(c)}const a=()=>{for(const l of s)P(this,Q,WT).call(this,l);P(this,Q,VT).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){ge(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Wt)!==ve.NONE&&!this.isEditorHandlingKeyboard&&sd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Ko)&&(A(this,Ko,!1),P(this,Q,bg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(P(this,Q,Q3).call(this),P(this,Q,t4).call(this),P(this,Q,er).call(this,{isEditing:u(this,Wt)!==ve.NONE,isEmpty:P(this,Q,wg).call(this),hasSomethingToUndo:u(this,_i).hasSomethingToUndo(),hasSomethingToRedo:u(this,_i).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,Q,Z3).call(this),P(this,Q,n4).call(this),P(this,Q,er).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Si)){A(this,Si,e);for(const n of u(this,Si))P(this,Q,ha).call(this,n.defaultPropertiesToUpdate)}}getId(){return u(this,r1).id}get currentLayer(){return u(this,sn).get(u(this,Nd))}getLayer(e){return u(this,sn).get(e)}get currentPageIndex(){return u(this,Nd)}addLayer(e){u(this,sn).set(e.pageIndex,e),u(this,Xo)?e.enable():e.disable()}removeLayer(e){u(this,sn).delete(e.pageIndex)}async updateMode(e,n=null,r=!1,i=!1,s=!1,a=!1){var o,l,c,h,d,f;if(u(this,Wt)!==e&&!(u(this,Ai)&&(await u(this,Ai).promise,!u(this,Ai)))){if(A(this,Ai,Promise.withResolvers()),(o=u(this,Vo))==null||o.commitOrRemove(),u(this,Wt)===ve.POPUP&&((l=u(this,Gn))==null||l.hideSidebar()),(c=u(this,Gn))==null||c.destroyPopup(),A(this,Wt,e),e===ve.NONE){this.setEditingState(!1),P(this,Q,s4).call(this);for(const p of u(this,kt).values())p.hideStandaloneCommentButton();(h=this._editorUndoBar)==null||h.hide(),this.toggleComment(null),u(this,Ai).resolve();return}for(const p of u(this,kt).values())p.addStandaloneCommentButton();e===ve.SIGNATURE&&await((d=u(this,Qo))==null?void 0:d.loadSignatures()),r&&Wn.clearPointerType(),this.setEditingState(!0),await P(this,Q,i4).call(this),this.unselectAll();for(const p of u(this,sn).values())p.updateMode(e);if(e===ve.POPUP){u(this,Pd)||A(this,Pd,await u(this,Dd).getAnnotationsByType(new Set(u(this,Si).map(m=>m._editorType))));const p=new Set,g=[];for(const m of u(this,kt).values()){const{annotationElementId:b,hasComment:y,deleted:w}=m;b&&p.add(b),y&&!w&&g.push(m.getData())}for(const m of u(this,Pd)){const{id:b,popupRef:y,contentsObj:w}=m;y&&(w!=null&&w.str)&&!p.has(b)&&!u(this,Go).has(b)&&g.push(m)}(f=u(this,Gn))==null||f.showSidebar(g)}if(!n){i&&this.addNewEditorFromKeyboard(),u(this,Ai).resolve();return}for(const p of u(this,kt).values())p.uid===n?(this.setSelected(p),a?p.editComment():s?p.enterInEditMode():p.focus()):p.unselect();u(this,Ai).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(u(this,Si)){switch(e){case Ie.CREATE:this.currentLayer.addNewEditor(n);return;case Ie.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Sy)||A(this,Sy,new Map)).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const r of u(this,ze))r.updateParams(e,n);else for(const r of u(this,Si))r.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){var s;for(const a of u(this,kt).values())a.editorType===e&&a.show(n);(((s=u(this,Sy))==null?void 0:s.get(Ie.HIGHLIGHT_SHOW_ALL))??!0)!==n&&P(this,Q,ha).call(this,[[Ie.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(u(this,xy)!==e){A(this,xy,e);for(const n of u(this,sn).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}*getEditors(e){for(const n of u(this,kt).values())n.pageIndex===e&&(yield n)}getEditor(e){return u(this,kt).get(e)}addEditor(e){u(this,kt).set(e.id,e)}removeEditor(e){var n,r;e.div.contains(document.activeElement)&&(u(this,ks)&&clearTimeout(u(this,ks)),A(this,ks,setTimeout(()=>{this.focusMainContainer(),A(this,ks,null)},0))),u(this,kt).delete(e.id),e.annotationElementId&&((n=u(this,Jo))==null||n.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Go).has(e.annotationElementId))&&((r=u(this,xi))==null||r.remove(e.id))}addDeletedAnnotationElement(e){u(this,Go).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Go).has(e)}removeDeletedAnnotationElement(e){u(this,Go).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Rr)!==e&&(A(this,Rr,e),e&&P(this,Q,ha).call(this,e.propertiesToUpdate))}updateUI(e){u(this,Q,a4)===e&&P(this,Q,ha).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){P(this,Q,ha).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,ze).has(e)){u(this,ze).delete(e),e.unselect(),P(this,Q,er).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,ze).add(e),e.select(),P(this,Q,ha).call(this,e.propertiesToUpdate),P(this,Q,er).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;this.updateToolbar({mode:e.mode,editId:e.uid}),(n=u(this,Vo))==null||n.commitOrRemove();for(const r of u(this,ze))r!==e&&r.unselect();u(this,ze).clear(),u(this,ze).add(e),e.select(),P(this,Q,ha).call(this,e.propertiesToUpdate),P(this,Q,er).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,ze).has(e)}get firstSelectedEditor(){return u(this,ze).values().next().value}unselect(e){e.unselect(),u(this,ze).delete(e),P(this,Q,er).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,ze).size!==0}get isEnterHandled(){return u(this,ze).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,_i).undo(),P(this,Q,er).call(this,{hasSomethingToUndo:u(this,_i).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,Q,wg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,_i).redo(),P(this,Q,er).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,_i).hasSomethingToRedo(),isEmpty:P(this,Q,wg).call(this)})}addCommands(e){u(this,_i).add(e),P(this,Q,er).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,Q,wg).call(this)})}cleanUndoStack(e){u(this,_i).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...u(this,ze)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},i=()=>{for(const a of n)P(this,Q,WT).call(this,a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Rr))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Rr)||this.hasSelection}selectAll(){for(const e of u(this,ze))e.commit();P(this,Q,VT).call(this,u(this,kt).values())}unselectAll(){var e;if(!(u(this,Rr)&&(u(this,Rr).commitOrRemove(),u(this,Wt)!==ve.NONE))&&!((e=u(this,Vo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of u(this,ze))n.unselect();u(this,ze).clear(),P(this,Q,er).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;u(this,el)[0]+=e,u(this,el)[1]+=n;const[i,s]=u(this,el),a=[...u(this,ze)],o=1e3;u(this,Is)&&clearTimeout(u(this,Is)),A(this,Is,setTimeout(()=>{A(this,Is,null),u(this,el)[0]=u(this,el)[1]=0,this.addCommands({cmd:()=>{for(const l of a)u(this,kt).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)u(this,kt).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,n),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Os,new Map);for(const e of u(this,ze))u(this,Os).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Os))return!1;this.disableUserSelect(!1);const e=u(this,Os);A(this,Os,null);let n=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,n||(n=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!n)return!1;const r=(i,s,a,o)=>{if(u(this,kt).has(i.id)){const l=u(this,sn).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)r(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)r(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(u(this,Os))for(const r of u(this,Os).keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,ze).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Rr)===e}getActive(){return u(this,Rr)}getMode(){return u(this,Wt)}isEditingMode(){return u(this,Wt)!==ve.NONE}get imageManager(){return me(this,"imageManager",new BT)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let c=0,h=n.rangeCount;c<h;c++)if(!e.contains(n.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,h,d,f)=>({x:(h-i)/a,y:1-(c+d-r)/s,width:f/a,height:d/s});break;case"180":o=(c,h,d,f)=>({x:1-(c+d-r)/s,y:1-(h+f-i)/a,width:d/s,height:f/a});break;case"270":o=(c,h,d,f)=>({x:1-(h+f-i)/a,y:(c-r)/s,width:f/a,height:d/s});break;default:o=(c,h,d,f)=>({x:(c-r)/s,y:(h-i)/a,width:d/s,height:f/a});break}const l=[];for(let c=0,h=n.rangeCount;c<h;c++){const d=n.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:p,width:g,height:m}of d.getClientRects())g===0||m===0||l.push(o(f,p,g,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(u(this,kd)||A(this,kd,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=u(this,kd))==null||n.delete(e)}renderAnnotationElement(e){var i;const n=(i=u(this,kd))==null?void 0:i.get(e.data.id);if(!n)return;const r=u(this,xi).getRawValue(n);r&&(u(this,Wt)===ve.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){var s;const i=(s=u(this,Jo))==null?void 0:s.get(e);i&&(i.setCanvas(n,r),u(this,Jo).delete(e))}addMissingCanvas(e,n){(u(this,Jo)||A(this,Jo,new Map)).set(e,n)}};Cd=new WeakMap,Rr=new WeakMap,Pd=new WeakMap,kt=new WeakMap,sn=new WeakMap,Od=new WeakMap,xi=new WeakMap,kd=new WeakMap,_i=new WeakMap,Gn=new WeakMap,Wo=new WeakMap,Vo=new WeakMap,Nd=new WeakMap,Go=new WeakMap,Os=new WeakMap,Si=new WeakMap,Dc=new WeakMap,vy=new WeakMap,by=new WeakMap,Id=new WeakMap,wy=new WeakMap,ks=new WeakMap,qo=new WeakMap,Md=new WeakMap,Ko=new WeakMap,Ns=new WeakMap,r1=new WeakMap,Xo=new WeakMap,Rd=new WeakMap,xy=new WeakMap,Yo=new WeakMap,$c=new WeakMap,jd=new WeakMap,Jo=new WeakMap,_y=new WeakMap,Wt=new WeakMap,ze=new WeakMap,wa=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Sy=new WeakMap,Dd=new WeakMap,Ay=new WeakMap,el=new WeakMap,Is=new WeakMap,xa=new WeakMap,Ey=new WeakMap,Ty=new WeakMap,Ai=new WeakMap,Q=new WeakSet,Ib=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},zT=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of u(this,sn).values())if(r.hasTextLayer(e))return r;return null},X3=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=P(this,Q,Ib).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(u(this,Ns)||A(this,Ns,new yme(this)),u(this,Ns).show(r,i,this.direction==="ltr"))},Y3=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){u(this,wa)&&((s=u(this,Ns))==null||s.hide(),A(this,wa,null),P(this,Q,er).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===u(this,wa))return;const i=P(this,Q,Ib).call(this,e).closest(".textLayer");if(!i){u(this,wa)&&((a=u(this,Ns))==null||a.hide(),A(this,wa,null),P(this,Q,er).call(this,{hasSelectedText:!1}));return}if((o=u(this,Ns))==null||o.hide(),A(this,wa,n),P(this,Q,er).call(this,{hasSelectedText:!0}),!(u(this,Wt)!==ve.HIGHLIGHT&&u(this,Wt)!==ve.NONE)&&(u(this,Wt)===ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Ko,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,Wt)===ve.HIGHLIGHT?P(this,Q,zT).call(this,i):null;if(l==null||l.toggleDrawing(),u(this,Rd)){const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&P(this,Q,bg).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l==null||l.toggleDrawing(!0),P(this,Q,bg).call(this,"main_toolbar")}},bg=function(e=""){u(this,Wt)===ve.HIGHLIGHT?this.highlightSelection(e):u(this,vy)&&P(this,Q,X3).call(this)},J3=function(){document.addEventListener("selectionchange",P(this,Q,Y3).bind(this),{signal:this._signal})},Q3=function(){if(u(this,qo))return;A(this,qo,new AbortController);const e=this.combinedSignal(u(this,qo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Z3=function(){var e;(e=u(this,qo))==null||e.abort(),A(this,qo,null)},HT=function(){if(u(this,Yo))return;A(this,Yo,new AbortController);const e=this.combinedSignal(u(this,Yo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},e4=function(){var e;(e=u(this,Yo))==null||e.abort(),A(this,Yo,null)},t4=function(){if(u(this,Wo))return;A(this,Wo,new AbortController);const e=this.combinedSignal(u(this,Wo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},n4=function(){var e;(e=u(this,Wo))==null||e.abort(),A(this,Wo,null)},r4=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},er=function(e){Object.entries(e).some(([r,i])=>u(this,Ay)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Ay),e)}),u(this,Wt)===ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,Q,ha).call(this,[[Ie.HIGHLIGHT_FREE,!0]]))},ha=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},i4=async function(){if(!u(this,Xo)){A(this,Xo,!0);const e=[];for(const n of u(this,sn).values())e.push(n.enable());await Promise.all(e);for(const n of u(this,kt).values())n.enable()}},s4=function(){if(this.unselectAll(),u(this,Xo)){A(this,Xo,!1);for(const e of u(this,sn).values())e.disable();for(const e of u(this,kt).values())e.disable()}},WT=function(e){const n=u(this,sn).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},a4=function(){let e=null;for(e of u(this,ze));return e},wg=function(){if(u(this,kt).size===0)return!0;if(u(this,kt).size===1)for(const e of u(this,kt).values())return e.isEmpty();return!1},VT=function(e){for(const n of u(this,ze))n.unselect();u(this,ze).clear();for(const n of e)n.isEmpty()||(u(this,ze).add(n),n.select());P(this,Q,er).call(this,{hasSelectedEditor:this.hasSelection})},K(sd,"TRANSLATE_SMALL",1),K(sd,"TRANSLATE_BIG",10);let lh=sd;var pn,Ms,Zi,$d,Rs,jr,Ld,js,yr,_a,Lc,Ds,tl,ys,xg,Mb;const tr=class tr{constructor(e){C(this,ys);C(this,pn,null);C(this,Ms,!1);C(this,Zi,null);C(this,$d,null);C(this,Rs,null);C(this,jr,null);C(this,Ld,!1);C(this,js,null);C(this,yr,null);C(this,_a,null);C(this,Lc,null);C(this,Ds,!1);A(this,yr,e),A(this,Ds,e._uiManager.useNewAltTextFlow),u(tr,tl)||A(tr,tl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){tr._l10n??(tr._l10n=e)}async render(){const e=A(this,Zi,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=A(this,$d,document.createElement("span"));e.append(n),u(this,Ds)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(tr,tl).missing),n.setAttribute("data-l10n-id",u(tr,tl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=u(this,yr)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),u(this,yr)._uiManager.editAltText(u(this,yr)),u(this,Ds)&&u(this,yr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,ys,xg)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(A(this,Ld,!0),i(s))},{signal:r}),await P(this,ys,Mb).call(this),e}finish(){u(this,Zi)&&(u(this,Zi).focus({focusVisible:u(this,Ld)}),A(this,Ld,!1))}isEmpty(){return u(this,Ds)?u(this,pn)===null:!u(this,pn)&&!u(this,Ms)}hasData(){return u(this,Ds)?u(this,pn)!==null||!!u(this,_a):this.isEmpty()}get guessedText(){return u(this,_a)}async setGuessedText(e){u(this,pn)===null&&(A(this,_a,e),A(this,Lc,await tr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),P(this,ys,Mb).call(this))}toggleAltTextBadge(e=!1){var n;if(!u(this,Ds)||u(this,pn)){(n=u(this,js))==null||n.remove(),A(this,js,null);return}if(!u(this,js)){const r=A(this,js,document.createElement("div"));r.className="noAltTextBadge",u(this,yr).div.append(r)}u(this,js).classList.toggle("hidden",!e)}serialize(e){let n=u(this,pn);return!e&&u(this,_a)===n&&(n=u(this,Lc)),{altText:n,decorative:u(this,Ms),guessedText:u(this,_a),textWithDisclaimer:u(this,Lc)}}get data(){return{altText:u(this,pn),decorative:u(this,Ms)}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(A(this,_a,r),A(this,Lc,i)),!(u(this,pn)===e&&u(this,Ms)===n)&&(s||(A(this,pn,e),A(this,Ms,n)),P(this,ys,Mb).call(this))}toggle(e=!1){u(this,Zi)&&(!e&&u(this,jr)&&(clearTimeout(u(this,jr)),A(this,jr,null)),u(this,Zi).disabled=!e)}shown(){u(this,yr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,ys,xg)}})}destroy(){var e,n;(e=u(this,Zi))==null||e.remove(),A(this,Zi,null),A(this,$d,null),A(this,Rs,null),(n=u(this,js))==null||n.remove(),A(this,js,null)}};pn=new WeakMap,Ms=new WeakMap,Zi=new WeakMap,$d=new WeakMap,Rs=new WeakMap,jr=new WeakMap,Ld=new WeakMap,js=new WeakMap,yr=new WeakMap,_a=new WeakMap,Lc=new WeakMap,Ds=new WeakMap,tl=new WeakMap,ys=new WeakSet,xg=function(){return u(this,pn)&&"added"||u(this,pn)===null&&this.guessedText&&"review"||"missing"},Mb=async function(){var i,s,a;const e=u(this,Zi);if(!e)return;if(u(this,Ds)){if(e.classList.toggle("done",!!u(this,pn)),e.setAttribute("data-l10n-id",u(tr,tl)[u(this,ys,xg)]),(i=u(this,$d))==null||i.setAttribute("data-l10n-id",u(tr,tl)[`${u(this,ys,xg)}-label`]),!u(this,pn)){(s=u(this,Rs))==null||s.remove();return}}else{if(!u(this,pn)&&!u(this,Ms)){e.classList.remove("done"),(a=u(this,Rs))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=u(this,Rs);if(!n){A(this,Rs,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${u(this,yr).id}`;const o=100,l=u(this,yr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,jr)),A(this,jr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,jr,setTimeout(()=>{A(this,jr,null),u(this,Rs).classList.add("show"),u(this,yr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;u(this,jr)&&(clearTimeout(u(this,jr)),A(this,jr,null)),(c=u(this,Rs))==null||c.classList.remove("show")},{signal:l})}u(this,Ms)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=u(this,pn)),n.parentNode||e.append(n);const r=u(this,yr).getElementForAltText();r==null||r.setAttribute("aria-describedby",n.id)},C(tr,tl,null),K(tr,"_l10n",null);let Bx=tr;var Pn,Ei,Fc,at,Cy,Bc,es,Uc,zc,Hc,Py,GT;class ab{constructor(e){C(this,Py);C(this,Pn,null);C(this,Ei,null);C(this,Fc,!1);C(this,at,null);C(this,Cy,null);C(this,Bc,null);C(this,es,null);C(this,Uc,null);C(this,zc,!1);C(this,Hc,null);A(this,at,e)}renderForToolbar(){const e=A(this,Ei,document.createElement("button"));return e.className="comment",P(this,Py,GT).call(this,e,!1)}renderForStandalone(){const e=A(this,Pn,document.createElement("button"));e.className="annotationCommentButton";const n=u(this,at).commentButtonPosition;if(n){const{style:r}=e;r.insetInlineEnd=`calc(${100*(u(this,at)._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const i=u(this,at).commentButtonColor;i&&(r.backgroundColor=i)}return P(this,Py,GT).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,Pn)??u(this,Ei))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,Pn))return;const e=u(this,at).commentButtonColor;e&&(u(this,Pn).style.backgroundColor=e),u(this,at)._uiManager.updatePopupColor(u(this,at))}get commentButtonWidth(){var e;return(((e=u(this,Pn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,at).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,Hc))return u(this,Hc);if(!u(this,Pn))return null;const{x:e,y:n,height:r}=u(this,Pn).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=u(this,at).parent.boundingClientRect;return[(e-i)/a,(n+r-s)/o]}set commentPopupPositionInLayer(e){A(this,Hc,e)}hasDefaultPopupPosition(){return u(this,Hc)===null}removeStandaloneCommentButton(){var e;(e=u(this,Pn))==null||e.remove(),A(this,Pn,null)}removeToolbarCommentButton(){var e;(e=u(this,Ei))==null||e.remove(),A(this,Ei,null)}setCommentButtonStates({selected:e,hasPopup:n}){u(this,Pn)&&(u(this,Pn).classList.toggle("selected",e),u(this,Pn).ariaExpanded=n)}edit(e){const n=this.commentPopupPositionInLayer;let r,i;if(n)[r,i]=n;else{[r,i]=u(this,at).commentButtonPosition;const{width:h,height:d,x:f,y:p}=u(this,at);r=f+r*h,i=p+i*d}const s=u(this,at).parent.boundingClientRect,{x:a,y:o,width:l,height:c}=s;u(this,at)._uiManager.editComment(u(this,at),a+r*l,o+i*c,{...e,parentDimensions:s})}finish(){u(this,Ei)&&(u(this,Ei).focus({focusVisible:u(this,Fc)}),A(this,Fc,!1))}isDeleted(){return u(this,zc)||u(this,es)===""}isEmpty(){return u(this,es)===null}hasBeenEdited(){return this.isDeleted()||u(this,es)!==u(this,Cy)}serialize(){return this.data}get data(){return{text:u(this,es),richText:u(this,Bc),date:u(this,Uc),deleted:this.isDeleted()}}set data(e){if(e!==u(this,es)&&A(this,Bc,null),e===null){A(this,es,""),A(this,zc,!0);return}A(this,es,e),A(this,Uc,new Date),A(this,zc,!1)}setInitialText(e,n=null){A(this,Cy,e),this.data=e,A(this,Uc,null),A(this,Bc,n)}shown(){}destroy(){var e,n;(e=u(this,Ei))==null||e.remove(),A(this,Ei,null),(n=u(this,Pn))==null||n.remove(),A(this,Pn,null),A(this,es,""),A(this,Bc,null),A(this,Uc,null),A(this,at,null),A(this,Fc,!1),A(this,zc,!1)}}Pn=new WeakMap,Ei=new WeakMap,Fc=new WeakMap,at=new WeakMap,Cy=new WeakMap,Bc=new WeakMap,es=new WeakMap,Uc=new WeakMap,zc=new WeakMap,Hc=new WeakMap,Py=new WeakSet,GT=function(e,n){if(!u(this,at)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,at)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=u(this,at)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Hi,{signal:r}),n&&(e.addEventListener("focusin",s=>{u(this,at)._focusEventsAllowed=!1,Lt(s)},{capture:!0,signal:r}),e.addEventListener("focusout",s=>{u(this,at)._focusEventsAllowed=!0,Lt(s)},{capture:!0,signal:r})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),e===u(this,Ei)?this.edit():u(this,at).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(A(this,Fc,!0),i(s))},{signal:r}),e.addEventListener("pointerenter",()=>{u(this,at).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{u(this,at).toggleComment(!1,!1)},{signal:r}),e};var Fd,Wc,Oy,ky,Ny,Iy,My,Sa,Vc,Aa,Gc,Ea,Kl,o4,l4,c4;const wk=class wk{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){C(this,Kl);C(this,Fd);C(this,Wc,!1);C(this,Oy,null);C(this,ky);C(this,Ny);C(this,Iy);C(this,My);C(this,Sa,null);C(this,Vc);C(this,Aa,null);C(this,Gc);C(this,Ea,null);A(this,Fd,e),A(this,Oy,r),A(this,ky,n),A(this,Ny,i),A(this,Iy,s),A(this,My,a),A(this,Gc,new AbortController),A(this,Vc,AbortSignal.any([o,u(this,Gc).signal])),e.addEventListener("touchstart",P(this,Kl,o4).bind(this),{passive:!1,signal:u(this,Vc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/aa.pixelRatio}destroy(){var e,n;(e=u(this,Gc))==null||e.abort(),A(this,Gc,null),(n=u(this,Sa))==null||n.abort(),A(this,Sa,null)}};Fd=new WeakMap,Wc=new WeakMap,Oy=new WeakMap,ky=new WeakMap,Ny=new WeakMap,Iy=new WeakMap,My=new WeakMap,Sa=new WeakMap,Vc=new WeakMap,Aa=new WeakMap,Gc=new WeakMap,Ea=new WeakMap,Kl=new WeakSet,o4=function(e){var i,s,a;if((i=u(this,ky))!=null&&i.call(this))return;if(e.touches.length===1){if(u(this,Sa))return;const o=A(this,Sa,new AbortController),l=AbortSignal.any([u(this,Vc),o.signal]),c=u(this,Fd),h={capture:!0,signal:l,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=u(this,Sa))==null||p.abort(),A(this,Sa,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Lt(f),d(f))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!u(this,Ea)){A(this,Ea,new AbortController);const o=AbortSignal.any([u(this,Vc),u(this,Ea).signal]),l=u(this,Fd),c={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",P(this,Kl,l4).bind(this),c);const h=P(this,Kl,c4).bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",Lt,c),l.addEventListener("pointermove",Lt,c),l.addEventListener("pointercancel",Lt,c),l.addEventListener("pointerup",Lt,c),(s=u(this,Ny))==null||s.call(this)}if(Lt(e),e.touches.length!==2||(a=u(this,Oy))!=null&&a.call(this)){A(this,Aa,null);return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),A(this,Aa,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY})},l4=function(e){var _;if(!u(this,Aa)||e.touches.length!==2)return;Lt(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:s}=n,{screenX:a,screenY:o}=r,l=u(this,Aa),{touch0X:c,touch0Y:h,touch1X:d,touch1Y:f}=l,p=d-c,g=f-h,m=a-i,b=o-s,y=Math.hypot(m,b)||1,w=Math.hypot(p,g)||1;if(!u(this,Wc)&&Math.abs(w-y)<=wk.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!u(this,Wc)){A(this,Wc,!0);return}const v=[(i+a)/2,(s+o)/2];(_=u(this,Iy))==null||_.call(this,v,w,y)},c4=function(e){var n;e.touches.length>=2||(u(this,Ea)&&(u(this,Ea).abort(),A(this,Ea,null),(n=u(this,My))==null||n.call(this)),u(this,Aa)&&(Lt(e),A(this,Aa,null),A(this,Wc,!1)))};let Ux=wk;var qc,ts,vt,Ze,Ta,Bd,nl,Ry,On,Kc,Ca,Ti,rl,jy,Xc,Dr,Dy,Yc,Pa,$s,Ud,zd,Ci,Jc,$y,i1,oe,qT,Ly,KT,Rb,u4,h4,XT,jb,YT,d4,f4,p4,JT,g4,QT,m4,y4,v4,ZT,_g;const ye=class ye{constructor(e){C(this,oe);C(this,qc,null);C(this,ts,null);C(this,vt,null);C(this,Ze,null);C(this,Ta,null);C(this,Bd,!1);C(this,nl,null);C(this,Ry,"");C(this,On,null);C(this,Kc,null);C(this,Ca,null);C(this,Ti,null);C(this,rl,null);C(this,jy,"");C(this,Xc,!1);C(this,Dr,null);C(this,Dy,!1);C(this,Yc,!1);C(this,Pa,!1);C(this,$s,null);C(this,Ud,0);C(this,zd,0);C(this,Ci,null);C(this,Jc,null);K(this,"isSelected",!1);K(this,"_isCopy",!1);K(this,"_editToolbar",null);K(this,"_initialOptions",Object.create(null));K(this,"_initialData",null);K(this,"_isVisible",!0);K(this,"_uiManager",null);K(this,"_focusEventsAllowed",!0);C(this,$y,!1);C(this,i1,ye._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ye.prototype._resizeWithKeyboard,n=lh.TRANSLATE_SMALL,r=lh.TRANSLATE_BIG;return me(this,"_resizerKeyboardManager",new w0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],ye.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new wme({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(ye._l10n??(ye._l10n=e),ye._l10nResizer||(ye._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ye._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);ye._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,$y)}set _isDraggable(e){var n;A(this,$y,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,i1)}setParent(e){var n;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(P(this,oe,_g).call(this),(n=u(this,Ti))==null||n.remove(),A(this,Ti,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Xc)?A(this,Xc,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[s,a]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(n+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,i]=this.parentDimensions;this.setAt(e*r,n*i,this.width*r,this.height*i),this._onTranslated()}translate(e,n){P(this,oe,qT).call(this,this.parentDimensions,e,n)}translateInPage(e,n){u(this,Dr)||A(this,Dr,[this.x,this.y,this.width,this.height]),P(this,oe,qT).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){u(this,Dr)||A(this,Dr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:h}=r;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!u(this,Dr)&&(u(this,Dr)[0]!==this.x||u(this,Dr)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Dr)&&(u(this,Dr)[2]!==this.width||u(this,Dr)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=ye,i=r/e,s=r/n;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=r,l*=i,s*=r,a*=i,this._mustFixPosition)switch(e){case 0:s=ar(s,0,r-o),a=ar(a,0,i-l);break;case 90:s=ar(s,0,r-l),a=ar(a,o,i);break;case 180:s=ar(s,o,r),a=ar(a,l,i);break;case 270:s=ar(s,l,r),a=ar(a,0,i-o);break}this.x=s/=r,this.y=a/=i;const[c,h]=this.getBaseTranslation();s+=c,a+=h,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var r;return P(r=ye,Ly,KT).call(r,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var r;return P(r=ye,Ly,KT).call(r,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(){const{div:{style:e},width:n,height:r}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,vt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Yc))return this._editToolbar;this._editToolbar=new LT(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,n;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(n=u(this,vt))==null||n.destroy()}addContainer(e){var r;const n=(r=this._editToolbar)==null?void 0:r.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,vt)||(Bx.initialize(ye._l10n),A(this,vt,new Bx(this)),u(this,qc)&&(u(this,vt).data=u(this,qc),A(this,qc,null))),u(this,vt)}get altTextData(){var e;return(e=u(this,vt))==null?void 0:e.data}set altTextData(e){u(this,vt)&&(u(this,vt).data=e)}get guessedAltText(){var e;return(e=u(this,vt))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=u(this,vt))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=u(this,vt))==null?void 0:n.serialize(e)}hasAltText(){return!!u(this,vt)&&!u(this,vt).isEmpty()}hasAltTextData(){var e;return((e=u(this,vt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,Ze))==null||e.focusButton()}addCommentButton(){return this.canAddComment?u(this,Ze)||A(this,Ze,new ab(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,Ta)){this._uiManager.isEditingMode()&&u(this,Ta).classList.remove("hidden");return}this.hasComment&&(A(this,Ta,u(this,Ze).renderForStandalone()),this.div.append(u(this,Ta)))}}removeStandaloneCommentButton(){u(this,Ze).removeStandaloneCommentButton(),A(this,Ta,null)}hideStandaloneCommentButton(){var e;(e=u(this,Ta))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:r,deleted:i}}=u(this,Ze);return{text:n,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,Ze)||A(this,Ze,new ab(this)),u(this,Ze).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:r}){if(!n||(u(this,Ze)||A(this,Ze,new ab(this)),u(this,Ze).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=u(this,Ze))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,Ze))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,Ze)&&!u(this,Ze).isEmpty()&&!u(this,Ze).isDeleted()}async editComment(e){u(this,Ze)||A(this,Ze,new ab(this)),u(this,Ze).edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){u(this,Ze).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=i-100,c=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){u(this,Ze).data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Bd)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),P(this,oe,QT).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),q3(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,Jc)||A(this,Jc,new Ux({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:P(this,oe,d4).bind(this),onPinching:P(this,oe,f4).bind(this),onPinchEnd:P(this,oe,p4).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:n}=hn.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(A(this,Xc,!0),this._isDraggable){P(this,oe,g4).call(this,e);return}P(this,oe,JT).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,$s)&&clearTimeout(u(this,$s)),A(this,$s,setTimeout(()=>{var e;A(this,$s,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/i,h=n/i,d=this.x*s,f=this.y*a,p=this.width*s,g=this.height*a;switch(r){case 0:return[d+c+o,a-f-h-g+l,d+c+p+o,a-f-h+l];case 90:return[d+h+o,a-f+c+l,d+h+g+o,a-f+c+p+l];case 180:return[d-c-p+o,a-f+h+l,d-c+o,a-f+h+g+l];case 270:return[d-h-g+o,a-f-c-p+l,d-h+o,a-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,s,a]=e,o=s-r,l=a-i;switch(this.rotation){case 0:return[r,n-a,o,l];case 90:return[r,n-i,l,o];case 180:return[s,n-i,o,l];case 270:return[s,n-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,Ze))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:r,opacity:i,deleted:s,richText:a},uid:o,pageIndex:l,creationDate:c,modificationDate:h}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:c,modificationDate:r||h,popupRef:!s,color:n,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,Yc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,Yc,!1),!0):!1}isInEditMode(){return u(this,Yc)}shouldGetKeyboardEvents(){return u(this,Pa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return n<a&&i>0&&e<s&&r>0}rebuild(){P(this,oe,QT).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,A(i,qc,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,c,h]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=c/s,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n,r;if((e=u(this,rl))==null||e.abort(),A(this,rl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,$s)&&(clearTimeout(u(this,$s)),A(this,$s,null)),P(this,oe,_g).call(this),this.removeEditToolbar(),u(this,Ci)){for(const i of u(this,Ci).values())clearTimeout(i);A(this,Ci,null)}this.parent=null,(n=u(this,Jc))==null||n.destroy(),A(this,Jc,null),(r=u(this,Ti))==null||r.remove(),A(this,Ti,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,oe,u4).call(this),u(this,On).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[r,i,s,a]=this.getPDFRect();return[ye._round(r+(s-r)*e),ye._round(i+(a-i)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,Ze).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,Ze).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,Ze).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,Ze).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var n;(n=u(this,Ze))==null||n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Ca,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=u(this,On).children;if(!u(this,ts)){A(this,ts,Array.from(n));const a=P(this,oe,m4).bind(this),o=P(this,oe,y4).bind(this),l=this._uiManager._signal;for(const c of u(this,ts)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",P(this,oe,v4).bind(this,h),{signal:l}),c.setAttribute("data-l10n-id",ye._l10nResizer[h])}}const r=u(this,ts)[0];let i=0;for(const a of n){if(a===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(u(this,ts).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)u(this,On).append(u(this,On).firstElementChild);else if(s>i)for(let o=0;o<s-i;o++)u(this,On).firstElementChild.before(u(this,On).lastElementChild);let a=0;for(const o of n){const c=u(this,ts)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ye._l10nResizer[c])}}P(this,oe,ZT).call(this,0),A(this,Pa,!0),u(this,On).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){u(this,Pa)&&P(this,oe,YT).call(this,u(this,jy),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){P(this,oe,_g).call(this),this.div.focus()}select(){var e,n,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(n=this._editToolbar)==null||n.show(),(r=u(this,vt))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,n,r,i,s;this.isSelected&&(this.isSelected=!1,(e=u(this,On))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=u(this,vt))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,Dy)}set isEditing(e){A(this,Dy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){u(this,Ci)||A(this,Ci,new Map);const{action:r}=e;let i=u(this,Ci).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),u(this,Ci).delete(r),u(this,Ci).size===0&&A(this,Ci,null)},ye._telemetryTimeout),u(this,Ci).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,Bd,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Bd,!0)}updateFakeAnnotationElement(e){if(!u(this,Ti)&&!this.deleted){A(this,Ti,e.addFakeAnnotation(this));return}if(this.deleted){u(this,Ti).remove(),A(this,Ti,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,Ti).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstElementChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};qc=new WeakMap,ts=new WeakMap,vt=new WeakMap,Ze=new WeakMap,Ta=new WeakMap,Bd=new WeakMap,nl=new WeakMap,Ry=new WeakMap,On=new WeakMap,Kc=new WeakMap,Ca=new WeakMap,Ti=new WeakMap,rl=new WeakMap,jy=new WeakMap,Xc=new WeakMap,Dr=new WeakMap,Dy=new WeakMap,Yc=new WeakMap,Pa=new WeakMap,$s=new WeakMap,Ud=new WeakMap,zd=new WeakMap,Ci=new WeakMap,Jc=new WeakMap,$y=new WeakMap,i1=new WeakMap,oe=new WeakSet,qT=function([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ly=new WeakSet,KT=function(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},Rb=function(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}},u4=function(){if(u(this,On))return;A(this,On,document.createElement("div")),u(this,On).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");u(this,On).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",P(this,oe,h4).bind(this,r),{signal:n}),i.addEventListener("contextmenu",Hi,{signal:n}),i.tabIndex=-1}this.div.prepend(u(this,On))},h4=function(e,n){var h;n.preventDefault();const{isMac:r}=hn.platform;if(n.button!==0||n.ctrlKey&&r)return;(h=u(this,vt))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,A(this,Kc,[n.screenX,n.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,oe,YT).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Lt,{passive:!1,signal:a}),window.addEventListener("contextmenu",Hi,{signal:a}),A(this,Ca,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const c=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=u(this,vt))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,P(this,oe,jb).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},XT=function(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()},jb=function(){if(!u(this,Ca))return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=u(this,Ca);A(this,Ca,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===n&&o===r&&l===i||this.addCommands({cmd:P(this,oe,XT).bind(this,s,a,o,l),undo:P(this,oe,XT).bind(this,e,n,r,i),mustExec:!0})},YT=function(e,n){const[r,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=ye.MIN_SIZE/r,h=ye.MIN_SIZE/i,d=P(this,oe,Rb).call(this,this.rotation),f=(j,B)=>[d[0]*j+d[2]*B,d[1]*j+d[3]*B],p=P(this,oe,Rb).call(this,360-this.rotation),g=(j,B)=>[p[0]*j+p[2]*B,p[1]*j+p[3]*B];let m,b,y=!1,w=!1;switch(e){case"topLeft":y=!0,m=(j,B)=>[0,0],b=(j,B)=>[j,B];break;case"topMiddle":m=(j,B)=>[j/2,0],b=(j,B)=>[j/2,B];break;case"topRight":y=!0,m=(j,B)=>[j,0],b=(j,B)=>[0,B];break;case"middleRight":w=!0,m=(j,B)=>[j,B/2],b=(j,B)=>[0,B/2];break;case"bottomRight":y=!0,m=(j,B)=>[j,B],b=(j,B)=>[0,0];break;case"bottomMiddle":m=(j,B)=>[j/2,B],b=(j,B)=>[j/2,0];break;case"bottomLeft":y=!0,m=(j,B)=>[0,B],b=(j,B)=>[j,0];break;case"middleLeft":w=!0,m=(j,B)=>[0,B/2],b=(j,B)=>[j,B/2];break}const v=m(o,l),_=b(o,l);let x=f(..._);const S=ye._round(s+x[0]),T=ye._round(a+x[1]);let O=1,k=1,M,N;if(n.fromKeyboard)({deltaX:M,deltaY:N}=n);else{const{screenX:j,screenY:B}=n,[$,U]=u(this,Kc);[M,N]=this.screenToPageTranslation(j-$,B-U),u(this,Kc)[0]=j,u(this,Kc)[1]=B}if([M,N]=g(M/r,N/i),y){const j=Math.hypot(o,l);O=k=Math.max(Math.min(Math.hypot(_[0]-v[0]-M,_[1]-v[1]-N)/j,1/o,1/l),c/o,h/l)}else w?O=ar(Math.abs(_[0]-v[0]-M),c,1)/o:k=ar(Math.abs(_[1]-v[1]-N),h,1)/l;const I=ye._round(o*O),R=ye._round(l*k);x=f(...b(I,R));const F=S-x[0],D=T-x[1];u(this,Dr)||A(this,Dr,[this.x,this.y,this.width,this.height]),this.width=I,this.height=R,this.x=F,this.y=D,this.setDims(),this.fixAndSetPosition(),this._onResizing()},d4=function(){var e;A(this,Ca,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,vt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},f4=function(e,n,r){let s=.7*(r/n)+1-.7;if(s===1)return;const a=P(this,oe,Rb).call(this,this.rotation),o=(S,T)=>[a[0]*S+a[2]*T,a[1]*S+a[3]*T],[l,c]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,g=ye.MIN_SIZE/l,m=ye.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/p),g/f,m/p);const b=ye._round(f*s),y=ye._round(p*s);if(b===f&&y===p)return;u(this,Dr)||A(this,Dr,[h,d,f,p]);const w=o(f/2,p/2),v=ye._round(h+w[0]),_=ye._round(d+w[1]),x=o(b/2,y/2);this.x=v-x[0],this.y=_-x[1],this.width=b,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},p4=function(){var e;(e=u(this,vt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),P(this,oe,jb).call(this)},JT=function(e){const{isMac:n}=hn.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},g4=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=c=>{i.abort(),A(this,nl,null),A(this,Xc,!1),this._uiManager.endDragSession()||P(this,oe,JT).call(this,c),r&&this._onStopDragging()};n&&(A(this,Ud,e.clientX),A(this,zd,e.clientY),A(this,nl,e.pointerId),A(this,Ry,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=c;if(f!==u(this,nl)){Lt(c);return}const[p,g]=this.screenToPageTranslation(h-u(this,Ud),d-u(this,zd));A(this,Ud,h),A(this,zd,d),this._uiManager.dragSelectedEditors(p,g)},a),window.addEventListener("touchmove",Lt,a),window.addEventListener("pointerdown",c=>{c.pointerType===u(this,Ry)&&(u(this,Jc)||c.isPrimary)&&o(c),Lt(c)},a));const l=c=>{if(!u(this,nl)||u(this,nl)===c.pointerId){o(c);return}Lt(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},QT=function(){if(u(this,rl)||!this.div)return;A(this,rl,new AbortController);const e=this._uiManager.combinedSignal(u(this,rl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},m4=function(e){ye._resizerKeyboardManager.exec(this,e)},y4=function(e){var n;u(this,Pa)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==u(this,On)&&P(this,oe,_g).call(this)},v4=function(e){A(this,jy,u(this,Pa)?e:"")},ZT=function(e){if(u(this,ts))for(const n of u(this,ts))n.tabIndex=e},_g=function(){A(this,Pa,!1),P(this,oe,ZT).call(this,-1),P(this,oe,jb).call(this)},C(ye,Ly),K(ye,"_l10n",null),K(ye,"_l10nResizer",null),K(ye,"_borderLineWidth",-1),K(ye,"_colorManager",new UT),K(ye,"_zIndex",1),K(ye,"_telemetryTimeout",1e3);let ct=ye;class wme extends ct{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZR=3285377520,yi=4294901760,Ts=65535;class b4{constructor(e){this.h1=e?e&4294967295:ZR,this.h2=e?e&4294967295:ZR}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let m=0,b=e.length;m<b;m++){const y=e.charCodeAt(m);y<=255?n[r++]=y:(n[r++]=y>>>8,n[r++]=y&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,a=new Uint32Array(n.buffer,0,i);let o=0,l=0,c=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ts,g=f&Ts;for(let m=0;m<i;m++)m&1?(o=a[m],o=o*d&yi|o*p&Ts,o=o<<15|o>>>17,o=o*f&yi|o*g&Ts,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[m],l=l*d&yi|l*p&Ts,l=l<<15|l>>>17,l=l*f&yi|l*g&Ts,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,s){case 3:o^=n[i*4+2]<<16;case 2:o^=n[i*4+1]<<8;case 1:o^=n[i*4],o=o*d&yi|o*p&Ts,o=o<<15|o>>>17,o=o*f&yi|o*g&Ts,i&1?c^=o:h^=o}this.h1=c,this.h2=h}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&yi|e*36045&Ts,n=n*4283543511&yi|((n<<16|e>>>16)*2950163797&yi)>>>16,e^=n>>>1,e=e*444984403&yi|e*60499&Ts,n=n*3301882366&yi|((n<<16|e>>>16)*3120437893&yi)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const eC=Object.freeze({map:null,hash:"",transfer:void 0});var Qc,Zc,Oa,kn,s1,w4;class dk{constructor(){C(this,s1);C(this,Qc,!1);C(this,Zc,null);C(this,Oa,null);C(this,kn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=u(this,kn).get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return u(this,kn).get(e)}remove(e){const n=u(this,kn).get(e);if(n!==void 0&&(n instanceof ct&&u(this,Oa).delete(n.annotationElementId),u(this,kn).delete(e),u(this,kn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of u(this,kn).values())if(r instanceof ct)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=u(this,kn).get(e);let i=!1;if(r!==void 0)for(const[s,a]of Object.entries(n))r[s]!==a&&(i=!0,r[s]=a);else i=!0,u(this,kn).set(e,n);i&&P(this,s1,w4).call(this),n instanceof ct&&((u(this,Oa)||A(this,Oa,new Map)).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return u(this,kn).has(e)}get size(){return u(this,kn).size}resetModified(){u(this,Qc)&&(A(this,Qc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new x4(this)}get serializable(){if(u(this,kn).size===0)return eC;const e=new Map,n=new b4,r=[],i=Object.create(null);let s=!1;for(const[a,o]of u(this,kn)){const l=o instanceof ct?o.serialize(!1,i):o;l&&(e.set(a,l),n.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:eC}get editorStats(){let e=null;const n=new Map;let r=0,i=0;for(const s of u(this,kn).values()){if(!(s instanceof ct)){s.popup&&(s.popup.deleted?i+=1:r+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(r+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;n.has(o)||n.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[c,h]of Object.entries(a)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const f=d.get(h)??0;d.set(h,f+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[s,a]of n)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){A(this,Zc,null)}updateEditor(e,n){var i;const r=(i=u(this,Oa))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(n),!0):!1}getEditor(e){var n;return((n=u(this,Oa))==null?void 0:n.get(e))||null}get modifiedIds(){if(u(this,Zc))return u(this,Zc);const e=[];if(u(this,Oa))for(const n of u(this,Oa).values())n.serialize()&&e.push(n.annotationElementId);return A(this,Zc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,kn).entries()}}Qc=new WeakMap,Zc=new WeakMap,Oa=new WeakMap,kn=new WeakMap,s1=new WeakSet,w4=function(){u(this,Qc)||(A(this,Qc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Fy;class x4 extends dk{constructor(n){super();C(this,Fy);const{map:r,hash:i,transfer:s}=n.serializable,a=structuredClone(r,s?{transfer:s}:null);A(this,Fy,{map:a,hash:i,transfer:s})}get print(){rt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Fy)}get modifiedIds(){return me(this,"modifiedIds",{ids:new Set,hash:""})}}Fy=new WeakMap;var Hd;class xme{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){C(this,Hd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Hd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||u(this,Hd).has(e.loadedName))){if(Me(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),u(this,Hd).add(i),r==null||r(e)}catch{ge(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw ge(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return me(this,"isSyncFontLoadingSupported",sr||hn.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(Me(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(_,x){return _.charCodeAt(x)<<24|_.charCodeAt(x+1)<<16|_.charCodeAt(x+2)<<8|_.charCodeAt(x+3)&255}function i(_,x,S,T){const O=_.substring(0,x),k=_.substring(x+S);return O+T+k}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function h(_,x){if(++c>30){ge("Load test font never loaded."),x();return}if(l.font="30px "+_,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(h.bind(null,_,x))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const g=16,m=1482184792;let b=r(f,g);for(s=0,a=d.length-3;s<a;s+=4)b=b-m+r(d,s)|0;s<d.length&&(b=b-m+r(d+"XXX",s)|0),f=i(f,g,4,tme(b));const y=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(w);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const _ of[e.loadedName,d]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=_,v.append(x)}this._document.body.append(v),h(d,()=>{v.remove(),n.complete()})}}Hd=new WeakMap;var qe;class _me{constructor(e,n=null,r,i){C(this,qe);this.compiledGlyphs=Object.create(null),A(this,qe,e),this._inspectFont=n,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${L3(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(a){ge(`getPathGenerator - ignoring character: "${a}".`)}const s=U3(i==null?void 0:i.path);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=s}get black(){return u(this,qe).black}get bold(){return u(this,qe).bold}get disableFontFace(){return u(this,qe).disableFontFace??!1}set disableFontFace(e){me(this,"disableFontFace",!!e)}get fontExtraProperties(){return u(this,qe).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,qe).isInvalidPDFjsFont}get isType3Font(){return u(this,qe).isType3Font}get italic(){return u(this,qe).italic}get missingFile(){return u(this,qe).missingFile}get remeasure(){return u(this,qe).remeasure}get vertical(){return u(this,qe).vertical}get ascent(){return u(this,qe).ascent}get defaultWidth(){return u(this,qe).defaultWidth}get descent(){return u(this,qe).descent}get bbox(){return u(this,qe).bbox}set bbox(e){me(this,"bbox",e)}get fontMatrix(){return u(this,qe).fontMatrix}get fallbackName(){return u(this,qe).fallbackName}get loadedName(){return u(this,qe).loadedName}get mimetype(){return u(this,qe).mimetype}get name(){return u(this,qe).name}get data(){return u(this,qe).data}clearData(){u(this,qe).clearData()}get cssFontInfo(){return u(this,qe).cssFontInfo}get systemFontInfo(){return u(this,qe).systemFontInfo}get defaultVMetrics(){return u(this,qe).defaultVMetrics}}qe=new WeakMap;var Wd,Vd,By,Gd,Db;const ad=class ad{constructor(e){C(this,Gd);C(this,Wd);C(this,Vd);C(this,By);A(this,Wd,e),A(this,Vd,new DataView(u(this,Wd))),A(this,By,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const c of ad.strings){const h=n.encode(e[c]);r[c]=h,i+=4+h.length}const s=new ArrayBuffer(i),a=new Uint8Array(s),o=new DataView(s);let l=0;for(const c of ad.strings){const h=r[c],d=h.length;o.setUint32(l,d),a.set(h,l+4),l+=4+d}return Me(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return P(this,Gd,Db).call(this,0)}get fontWeight(){return P(this,Gd,Db).call(this,1)}get italicAngle(){return P(this,Gd,Db).call(this,2)}};Wd=new WeakMap,Vd=new WeakMap,By=new WeakMap,Gd=new WeakSet,Db=function(e){Me(e<ad.strings.length,"Invalid string index");let n=0;for(let i=0;i<e;i++)n+=u(this,Vd).getUint32(n)+4;const r=u(this,Vd).getUint32(n);return u(this,By).decode(new Uint8Array(u(this,Wd),n+4,r))},K(ad,"strings",["fontFamily","fontWeight","italicAngle"]);let zx=ad;var il,Ls,eu,tu,Sg;const od=class od{constructor(e){C(this,tu);C(this,il);C(this,Ls);C(this,eu);A(this,il,e),A(this,Ls,new DataView(u(this,il))),A(this,eu,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const f of od.strings){const p=n.encode(e[f]);r[f]=p,i+=4+p.length}i+=4;let s,a,o=1+i;e.style&&(s=n.encode(e.style.style),a=n.encode(e.style.weight),o+=4+s.length+4+a.length);const l=new ArrayBuffer(o),c=new Uint8Array(l),h=new DataView(l);let d=0;h.setUint8(d++,e.guessFallback?1:0),h.setUint32(d,0),d+=4,i=0;for(const f of od.strings){const p=r[f],g=p.length;i+=4+g,h.setUint32(d,g),c.set(p,d+4),d+=4+g}return h.setUint32(d-i-4,i),e.style&&(h.setUint32(d,s.length),c.set(s,d+4),d+=4+s.length,h.setUint32(d,a.length),c.set(a,d+4),d+=4+a.length),Me(d<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(d)}get guessFallback(){return u(this,Ls).getUint8(0)!==0}get css(){return P(this,tu,Sg).call(this,0)}get loadedName(){return P(this,tu,Sg).call(this,1)}get baseFontName(){return P(this,tu,Sg).call(this,2)}get src(){return P(this,tu,Sg).call(this,3)}get style(){let e=1;e+=4+u(this,Ls).getUint32(e);const n=u(this,Ls).getUint32(e),r=u(this,eu).decode(new Uint8Array(u(this,il),e+4,n));e+=4+n;const i=u(this,Ls).getUint32(e),s=u(this,eu).decode(new Uint8Array(u(this,il),e+4,i));return{style:r,weight:s}}};il=new WeakMap,Ls=new WeakMap,eu=new WeakMap,tu=new WeakSet,Sg=function(e){Me(e<od.strings.length,"Invalid string index");let n=5;for(let i=0;i<e;i++)n+=u(this,Ls).getUint32(n)+4;const r=u(this,Ls).getUint32(n);return u(this,eu).decode(new Uint8Array(u(this,il),n+4,r))},K(od,"strings",["css","loadedName","baseFontName","src"]);let Hx=od;var qd,Kd,Xd,Yd,$r,Fs,Uy,Ke,jt,Xi,$b,Ag;const we=class we{constructor({data:e,extra:n}){C(this,jt);C(this,Fs);C(this,Uy);C(this,Ke);A(this,Fs,e),A(this,Uy,new TextDecoder),A(this,Ke,new DataView(u(this,Fs))),n&&Object.assign(this,n)}get black(){return P(this,jt,Xi).call(this,0)}get bold(){return P(this,jt,Xi).call(this,1)}get disableFontFace(){return P(this,jt,Xi).call(this,2)}get fontExtraProperties(){return P(this,jt,Xi).call(this,3)}get isInvalidPDFjsFont(){return P(this,jt,Xi).call(this,4)}get isType3Font(){return P(this,jt,Xi).call(this,5)}get italic(){return P(this,jt,Xi).call(this,6)}get missingFile(){return P(this,jt,Xi).call(this,7)}get remeasure(){return P(this,jt,Xi).call(this,8)}get vertical(){return P(this,jt,Xi).call(this,9)}get ascent(){return P(this,jt,$b).call(this,0)}get defaultWidth(){return P(this,jt,$b).call(this,1)}get descent(){return P(this,jt,$b).call(this,2)}get bbox(){let e=u(we,Kd);if(u(this,Ke).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(u(this,Ke).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=u(we,Xd);if(u(this,Ke).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(u(this,Ke).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=u(we,Yd);if(u(this,Ke).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(u(this,Ke).getInt16(e,!0)),e+=2;return r}get fallbackName(){return P(this,jt,Ag).call(this,0)}get loadedName(){return P(this,jt,Ag).call(this,1)}get mimetype(){return P(this,jt,Ag).call(this,2)}get name(){return P(this,jt,Ag).call(this,3)}get data(){let e=u(we,$r);const n=u(this,Ke).getUint32(e);e+=4+n;const r=u(this,Ke).getUint32(e);e+=4+r;const i=u(this,Ke).getUint32(e);e+=4+i;const s=u(this,Ke).getUint32(e);if(s!==0)return new Uint8Array(u(this,Fs),e+4,s)}clearData(){let e=u(we,$r);const n=u(this,Ke).getUint32(e);e+=4+n;const r=u(this,Ke).getUint32(e);e+=4+r;const i=u(this,Ke).getUint32(e);e+=4+i;const s=u(this,Ke).getUint32(e);new Uint8Array(u(this,Fs),e+4,s).fill(0),u(this,Ke).setUint32(e,0)}get cssFontInfo(){let e=u(we,$r);const n=u(this,Ke).getUint32(e);e+=4+n;const r=u(this,Ke).getUint32(e);e+=4+r;const i=u(this,Ke).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(u(this,Fs),e+4,i)),new zx(s.buffer)}get systemFontInfo(){let e=u(we,$r);const n=u(this,Ke).getUint32(e);e+=4+n;const r=u(this,Ke).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(u(this,Fs),e+4,r)),new Hx(i.buffer)}static write(e){const n=e.systemFontInfo?Hx.write(e.systemFontInfo):null,r=e.cssFontInfo?zx.write(e.cssFontInfo):null,i=new TextEncoder,s={};let a=0;for(const m of we.strings)s[m]=i.encode(e[m]),a+=4+s[m].length;const o=u(we,$r)+4+a+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),c=new Uint8Array(l),h=new DataView(l);let d=0;const f=we.bools.length;let p=0,g=0;for(let m=0;m<f;m++){const b=e[we.bools[m]];p|=(b===void 0?0:b?2:1)<<g,g+=2,(g===8||m===f-1)&&(h.setUint8(d++,p),p=0,g=0)}Me(d===u(we,qd),"FontInfo.write: Boolean properties offset mismatch");for(const m of we.numbers)h.setFloat64(d,e[m]),d+=8;if(Me(d===u(we,Kd),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(d++,4);for(const m of e.bbox)h.setInt16(d,m,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(Me(d===u(we,Xd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(d++,6);for(const m of e.fontMatrix)h.setFloat64(d,m,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(Me(d===u(we,Yd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(d++,1);for(const m of e.defaultVMetrics)h.setInt16(d,m,!0),d+=2}else h.setUint8(d++,0),d+=3*2;Me(d===u(we,$r),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(u(we,$r),0),d+=4;for(const m of we.strings){const b=s[m],y=b.length;h.setUint32(d,y),c.set(b,d+4),d+=4+y}if(h.setUint32(u(we,$r),d-u(we,$r)-4),!n)h.setUint32(d,0),d+=4;else{const m=n.byteLength;h.setUint32(d,m),Me(d+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(n),d+4),d+=4+m}if(!r)h.setUint32(d,0),d+=4;else{const m=r.byteLength;h.setUint32(d,m),Me(d+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(r),d+4),d+=4+m}return e.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,e.data.length),c.set(e.data,d+4),d+=4+e.data.length),Me(d<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(d)}};qd=new WeakMap,Kd=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,$r=new WeakMap,Fs=new WeakMap,Uy=new WeakMap,Ke=new WeakMap,jt=new WeakSet,Xi=function(e){Me(e<we.bools.length,"Invalid boolean index");const n=Math.floor(e/4),r=e*2%8,i=u(this,Ke).getUint8(n)>>r&3;return i===0?void 0:i===2},$b=function(e){return Me(e<we.numbers.length,"Invalid number index"),u(this,Ke).getFloat64(u(we,qd)+e*8)},Ag=function(e){Me(e<we.strings.length,"Invalid string index");let n=u(we,$r)+4;for(let s=0;s<e;s++)n+=u(this,Ke).getUint32(n)+4;const r=u(this,Ke).getUint32(n),i=new Uint8Array(r);return i.set(new Uint8Array(u(this,Fs),n+4,r)),u(this,Uy).decode(i)},K(we,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),K(we,"numbers",["ascent","defaultWidth","descent"]),K(we,"strings",["fallbackName","loadedName","mimetype","name"]),C(we,qd,Math.ceil(we.bools.length*2/8)),C(we,Kd,u(we,qd)+we.numbers.length*8),C(we,Xd,u(we,Kd)+1+2*4),C(we,Yd,u(we,Xd)+1+8*6),C(we,$r,u(we,Yd)+1+2*3);let tC=we;var zy,Hy,Wy,Vy,Gy,qy,Ky,Xy;const st=class st{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,r=null,i=[],s=[],a=[],o=[],l=null,c=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,r=e[2],a=e[3],n===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,l=e[1],i=e[2],s=e[3],o=e[4]||[],r=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const h=Math.floor(i.length/2),d=Math.floor(s.length/3),f=a.length,p=o.length;let g=0;for(const x of o)g+=1,g=Math.ceil(g/4)*4,g+=4+x.coords.length*4,g+=4+x.colors.length*4,x.verticesPerRow!==void 0&&(g+=4);const m=20+h*8+d*3+f*8+(r?16:0)+(c?3:0)+g,b=new ArrayBuffer(m),y=new DataView(b),w=new Uint8Array(b);y.setUint8(u(st,zy),n),y.setUint8(u(st,Hy),r?1:0),y.setUint8(u(st,Wy),c?1:0),y.setUint8(u(st,Vy),l),y.setUint32(u(st,Gy),h,!0),y.setUint32(u(st,qy),d,!0),y.setUint32(u(st,Ky),f,!0),y.setUint32(u(st,Xy),p,!0);let v=20;new Float32Array(b,v,h*2).set(i),v+=h*8,w.set(s,v),v+=d*3;for(const[x,S]of a)y.setFloat32(v,x,!0),v+=4,y.setUint32(v,parseInt(S.slice(1),16),!0),v+=4;if(r)for(const x of r)y.setFloat32(v,x,!0),v+=4;c&&(w.set(c,v),v+=3);for(let x=0;x<o.length;x++){const S=o[x];y.setUint8(v,S.type),v+=1,v=Math.ceil(v/4)*4,y.setUint32(v,S.coords.length,!0),v+=4,new Int32Array(b,v,S.coords.length).set(S.coords),v+=S.coords.length*4,y.setUint32(v,S.colors.length,!0),v+=4,new Int32Array(b,v,S.colors.length).set(S.colors),v+=S.colors.length*4,S.verticesPerRow!==void 0&&(y.setUint32(v,S.verticesPerRow,!0),v+=4)}return b}getIR(){const e=this.view,n=this.data[u(st,zy)],r=!!this.data[u(st,Hy)],i=!!this.data[u(st,Wy)],s=e.getUint32(u(st,Gy),!0),a=e.getUint32(u(st,qy),!0),o=e.getUint32(u(st,Ky),!0),l=e.getUint32(u(st,Xy),!0);let c=20;const h=new Float32Array(this.buffer,c,s*2);c+=s*8;const d=new Uint8Array(this.buffer,c,a*3);c+=a*3;const f=[];for(let b=0;b<o;++b){const y=e.getFloat32(c,!0);c+=4;const w=e.getUint32(c,!0);c+=4,f.push([y,`#${w.toString(16).padStart(6,"0")}`])}let p=null;if(r){p=[];for(let b=0;b<4;++b)p.push(e.getFloat32(c,!0)),c+=4}let g=null;i&&(g=new Uint8Array(this.buffer,c,3),c+=3);const m=[];for(let b=0;b<l;++b){const y=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;const w=e.getUint32(c,!0);c+=4;const v=new Int32Array(this.buffer,c,w);c+=w*4;const _=e.getUint32(c,!0);c+=4;const x=new Int32Array(this.buffer,c,_);c+=_*4;const S={type:y,coords:v,colors:x};y===MT.LATTICE&&(S.verticesPerRow=e.getUint32(c,!0),c+=4),m.push(S)}if(n===1)return["RadialAxial","axial",p,f,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",p,f,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(n===3){const b=this.data[u(st,Vy)];let y=null;if(h.length>0){let w=h[0],v=h[0],_=h[1],x=h[1];for(let S=0;S<h.length;S+=2){const T=h[S],O=h[S+1];w=w>T?T:w,_=_>O?O:_,v=v<T?T:v,x=x<O?O:x}y=[w,_,v,x]}return["Mesh",b,h,d,m,y,p,g]}throw new Error(`Unsupported pattern kind: ${n}`)}};zy=new WeakMap,Hy=new WeakMap,Wy=new WeakMap,Vy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Ky=new WeakMap,Xy=new WeakMap,C(st,zy,0),C(st,Hy,1),C(st,Wy,2),C(st,Vy,3),C(st,Gy,4),C(st,qy,8),C(st,Ky,12),C(st,Xy,16);let nC=st;var Jd;class Sme{constructor(e){C(this,Jd);A(this,Jd,e)}static write(e){let n,r;return hn.isFloat16ArraySupported?(r=new ArrayBuffer(e.length*2),n=new Float16Array(r)):(r=new ArrayBuffer(e.length*4),n=new Float32Array(r)),n.set(e),r}get path(){return hn.isFloat16ArraySupported?new Float16Array(u(this,Jd)):new Float32Array(u(this,Jd))}}Jd=new WeakMap;function Ame(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(sr)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Eme(t){if(sr&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return m0(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ob(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const rC=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,Tme=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",Cme=ame.bind(null,rC,Tme);var ka,a1;class Pme{constructor(){C(this,ka,new Map);C(this,a1,Promise.resolve())}postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};u(this,a1).then(()=>{for(const[i]of u(this,ka))i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){ge("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,n);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}u(this,ka).set(n,i)}removeEventListener(e,n){const r=u(this,ka).get(n);r==null||r(),u(this,ka).delete(n)}terminate(){for(const[,e]of u(this,ka))e==null||e();u(this,ka).clear()}}ka=new WeakMap,a1=new WeakMap;const lb={DATA:1,ERROR:2},zt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ej(){}function gr(t){if(t instanceof Gl||t instanceof RT||t instanceof GR||t instanceof Lx||t instanceof qS)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Gl(t.message);case"InvalidPDFException":return new RT(t.message);case"PasswordException":return new GR(t.message,t.code);case"ResponseException":return new Lx(t.message,t.status,t.missing);case"UnknownErrorException":return new qS(t.message,t.details)}return new qS(t.message,t.toString())}var Qd,Fi,_4,S4,A4,Lb;class Eg{constructor(e,n,r){C(this,Fi);C(this,Qd,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",P(this,Fi,_4).bind(this),{signal:u(this,Qd).signal})}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,n,r,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:n,desiredSize:c.desiredSize},i),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:zt.PULL,streamId:s,desiredSize:c.desiredSize}),h.promise},cancel:c=>{Me(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:zt.CANCEL,streamId:s,reason:gr(c)}),h.promise}},r)}destroy(){var e;(e=u(this,Qd))==null||e.abort(),A(this,Qd,null)}}Qd=new WeakMap,Fi=new WeakSet,_4=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){P(this,Fi,A4).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===lb.DATA)i.resolve(e.data);else if(e.callback===lb.ERROR)i.reject(gr(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(a){s.postMessage({sourceName:r,targetName:i,callback:lb.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:r,targetName:i,callback:lb.ERROR,callbackId:e.callbackId,reason:gr(a)})});return}if(e.streamId){P(this,Fi,S4).call(this,e);return}n(e.data)},S4=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:zt.ENQUEUE,streamId:n,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:zt.CLOSE,streamId:n}),delete a.streamSinks[n])},error(c){Me(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:zt.ERROR,streamId:n,reason:gr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:zt.START_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:zt.START_COMPLETE,streamId:n,reason:gr(c)})})},A4=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[n],o=this.streamSinks[n];switch(e.stream){case zt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(gr(e.reason));break;case zt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(gr(e.reason));break;case zt.PULL:if(!o){s.postMessage({sourceName:r,targetName:i,stream:zt.PULL_COMPLETE,streamId:n,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||ej).then(function(){s.postMessage({sourceName:r,targetName:i,stream:zt.PULL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:zt.PULL_COMPLETE,streamId:n,reason:gr(c)})});break;case zt.ENQUEUE:if(Me(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case zt.CLOSE:if(Me(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),P(this,Fi,Lb).call(this,a,n);break;case zt.ERROR:Me(a,"error should have stream controller"),a.controller.error(gr(e.reason)),P(this,Fi,Lb).call(this,a,n);break;case zt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(gr(e.reason)),P(this,Fi,Lb).call(this,a,n);break;case zt.CANCEL:if(!o)break;const l=gr(e.reason);Promise.try(o.onCancel||ej,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:zt.CANCEL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:zt.CANCEL_COMPLETE,streamId:n,reason:gr(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},Lb=async function(e,n){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[n]};var Yy;class E4{constructor({enableHWA:e=!1}){C(this,Yy,!1);A(this,Yy,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!u(this,Yy)})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){rt("Abstract method `_createCanvas` called.")}}Yy=new WeakMap;class Ome extends E4{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class T4{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class tj extends T4{async _fetch(e){const n=await y0(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):m0(n)}}class C4{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,s){return"none"}destroy(e=!1){}}var nu,Zd,Na,Ia,qn,ru,iu,te,Hn,Tg,jh,Fb,Dh,P4,iC,$h,Cg,Pg,sC,Og;class kme extends C4{constructor({docId:n,ownerDocument:r=globalThis.document}){super();C(this,te);C(this,nu);C(this,Zd);C(this,Na);C(this,Ia);C(this,qn);C(this,ru);C(this,iu,0);A(this,Ia,n),A(this,qn,r)}addFilter(n){if(!n)return"none";let r=u(this,te,Hn).get(n);if(r)return r;const[i,s,a]=P(this,te,Fb).call(this,n),o=n.length===1?i:`${i}${s}${a}`;if(r=u(this,te,Hn).get(o),r)return u(this,te,Hn).set(n,r),r;const l=`g_${u(this,Ia)}_transfer_map_${Qt(this,iu)._++}`,c=P(this,te,Dh).call(this,l);u(this,te,Hn).set(n,c),u(this,te,Hn).set(o,c);const h=P(this,te,$h).call(this,l);return P(this,te,Pg).call(this,i,s,a,h),c}addHCMFilter(n,r){var g;const i=`${n}-${r}`,s="base";let a=u(this,te,Tg).get(s);if((a==null?void 0:a.key)===i||(a?((g=a.filter)==null||g.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},u(this,te,Tg).set(s,a)),!n||!r))return a.url;const o=P(this,te,Og).call(this,n);n=ee.makeHexColor(...o);const l=P(this,te,Og).call(this,r);if(r=ee.makeHexColor(...l),u(this,te,jh).style.color="",n==="#000000"&&r==="#ffffff"||n===r)return a.url;const c=new Array(256);for(let m=0;m<=255;m++){const b=m/255;c[m]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const h=c.join(","),d=`g_${u(this,Ia)}_hcm_filter`,f=a.filter=P(this,te,$h).call(this,d);P(this,te,Pg).call(this,h,h,h,f),P(this,te,iC).call(this,f);const p=(m,b)=>{const y=o[m]/255,w=l[m]/255,v=new Array(b+1);for(let _=0;_<=b;_++)v[_]=y+_/b*(w-y);return v.join(",")};return P(this,te,Pg).call(this,p(0,5),p(1,5),p(2,5),f),a.url=P(this,te,Dh).call(this,d),a.url}addAlphaFilter(n){let r=u(this,te,Hn).get(n);if(r)return r;const[i]=P(this,te,Fb).call(this,[n]),s=`alpha_${i}`;if(r=u(this,te,Hn).get(s),r)return u(this,te,Hn).set(n,r),r;const a=`g_${u(this,Ia)}_alpha_map_${Qt(this,iu)._++}`,o=P(this,te,Dh).call(this,a);u(this,te,Hn).set(n,o),u(this,te,Hn).set(s,o);const l=P(this,te,$h).call(this,a);return P(this,te,sC).call(this,i,l),o}addLuminosityFilter(n){let r=u(this,te,Hn).get(n||"luminosity");if(r)return r;let i,s;if(n?([i]=P(this,te,Fb).call(this,[n]),s=`luminosity_${i}`):s="luminosity",r=u(this,te,Hn).get(s),r)return u(this,te,Hn).set(n,r),r;const a=`g_${u(this,Ia)}_luminosity_map_${Qt(this,iu)._++}`,o=P(this,te,Dh).call(this,a);u(this,te,Hn).set(n,o),u(this,te,Hn).set(s,o);const l=P(this,te,$h).call(this,a);return P(this,te,P4).call(this,l),n&&P(this,te,sC).call(this,i,l),o}addHighlightHCMFilter(n,r,i,s,a){var w;const o=`${r}-${i}-${s}-${a}`;let l=u(this,te,Tg).get(n);if((l==null?void 0:l.key)===o||(l?((w=l.filter)==null||w.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},u(this,te,Tg).set(n,l)),!r||!i))return l.url;const[c,h]=[r,i].map(P(this,te,Og).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,g]=[s,a].map(P(this,te,Og).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),u(this,te,jh).style.color="";const m=(v,_,x)=>{const S=new Array(256),T=(f-d)/x,O=v/255,k=(_-v)/(255*x);let M=0;for(let N=0;N<=x;N++){const I=Math.round(d+N*T),R=O+N*k;for(let F=M;F<=I;F++)S[F]=R;M=I+1}for(let N=M;N<256;N++)S[N]=S[M-1];return S.join(",")},b=`g_${u(this,Ia)}_hcm_${n}_filter`,y=l.filter=P(this,te,$h).call(this,b);return P(this,te,iC).call(this,y),P(this,te,Pg).call(this,m(p[0],g[0],5),m(p[1],g[1],5),m(p[2],g[2],5),y),l.url=P(this,te,Dh).call(this,b),l.url}destroy(n=!1){var r,i,s,a;n&&((r=u(this,ru))!=null&&r.size)||((i=u(this,Na))==null||i.parentNode.parentNode.remove(),A(this,Na,null),(s=u(this,Zd))==null||s.clear(),A(this,Zd,null),(a=u(this,ru))==null||a.clear(),A(this,ru,null),A(this,iu,0))}}nu=new WeakMap,Zd=new WeakMap,Na=new WeakMap,Ia=new WeakMap,qn=new WeakMap,ru=new WeakMap,iu=new WeakMap,te=new WeakSet,Hn=function(){return u(this,Zd)||A(this,Zd,new Map)},Tg=function(){return u(this,ru)||A(this,ru,new Map)},jh=function(){if(!u(this,Na)){const n=u(this,qn).createElement("div"),{style:r}=n;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=u(this,qn).createElementNS(ua,"svg");i.setAttribute("width",0),i.setAttribute("height",0),A(this,Na,u(this,qn).createElementNS(ua,"defs")),n.append(i),i.append(u(this,Na)),u(this,qn).body.append(n)}return u(this,Na)},Fb=function(n){if(n.length===1){const c=n[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=c[f]/255;const d=h.join(",");return[d,d,d]}const[r,i,s]=n,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=i[c]/255,l[c]=s[c]/255;return[a.join(","),o.join(","),l.join(",")]},Dh=function(n){if(u(this,nu)===void 0){A(this,nu,"");const r=u(this,qn).URL;r!==u(this,qn).baseURI&&(k_(r)?ge('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,nu,j3(r,"")))}return`url(${u(this,nu)}#${n})`},P4=function(n){const r=u(this,qn).createElementNS(ua,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(r)},iC=function(n){const r=u(this,qn).createElementNS(ua,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(r)},$h=function(n){const r=u(this,qn).createElementNS(ua,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",n),u(this,te,jh).append(r),r},Cg=function(n,r,i){const s=u(this,qn).createElementNS(ua,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),n.append(s)},Pg=function(n,r,i,s){const a=u(this,qn).createElementNS(ua,"feComponentTransfer");s.append(a),P(this,te,Cg).call(this,a,"feFuncR",n),P(this,te,Cg).call(this,a,"feFuncG",r),P(this,te,Cg).call(this,a,"feFuncB",i)},sC=function(n,r){const i=u(this,qn).createElementNS(ua,"feComponentTransfer");r.append(i),P(this,te,Cg).call(this,i,"feFuncA",n)},Og=function(n){return u(this,te,jh).style.color=n,b0(getComputedStyle(u(this,te,jh)).getPropertyValue("color"))};class O4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class nj extends O4{async _fetch(e){const n=await y0(e,"arraybuffer");return new Uint8Array(n)}}class k4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class rj extends k4{async _fetch(e){const n=await y0(e,"arraybuffer");return new Uint8Array(n)}}sr&&ge("Please use the `legacy` build in Node.js environments.");async function fk(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class Nme extends C4{}class Ime extends E4{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Mme extends T4{async _fetch(e){return fk(e)}}class Rme extends O4{async _fetch(e){return fk(e)}}class jme extends k4{async _fetch(e){return fk(e)}}const Ph="__forcedDependency",{floor:ij,ceil:sj}=Math;function cb(t,e,n,r,i,s){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],r),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],s)}const aC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var ef,sl;class Dme{constructor(e,n){C(this,ef);C(this,sl);A(this,ef,e),A(this,sl,n)}get length(){return u(this,ef).length}isEmpty(e){return u(this,ef)[e]===aC}minX(e){return u(this,sl)[e*4+0]/256}minY(e){return u(this,sl)[e*4+1]/256}maxX(e){return(u(this,sl)[e*4+2]+1)/256}maxY(e){return(u(this,sl)[e*4+3]+1)/256}}ef=new WeakMap,sl=new WeakMap;const ub=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};var vr,br,su,ns,au,Ma,He,Xe,Ra,wr,Jy,tf,ou,lu,ja,Kn,Bs,Qy,oC;class $me{constructor(e,n,r=!1){C(this,Qy);C(this,vr,{__proto__:null});C(this,br,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Ph]:[]});C(this,su,new Map);C(this,ns,[]);C(this,au,[]);C(this,Ma,[[1,0,0,1,0,0]]);C(this,He,[-1/0,-1/0,1/0,1/0]);C(this,Xe,new Float64Array([1/0,1/0,-1/0,-1/0]));C(this,Ra,-1);C(this,wr,new Set);C(this,Jy,new Map);C(this,tf,new Map);C(this,ou);C(this,lu);C(this,ja);C(this,Kn);C(this,Bs);A(this,ou,e.width),A(this,lu,e.height),P(this,Qy,oC).call(this,n),r&&A(this,Bs,new Map)}growOperationsCount(e){e>=u(this,Kn).length&&P(this,Qy,oC).call(this,e,u(this,Kn))}save(e){return A(this,vr,{__proto__:u(this,vr)}),A(this,br,{__proto__:u(this,br),transform:{__proto__:u(this,br).transform},moveText:{__proto__:u(this,br).moveText},sameLineText:{__proto__:u(this,br).sameLineText},[Ph]:{__proto__:u(this,br)[Ph]}}),A(this,He,{__proto__:u(this,He)}),u(this,ns).push(e),this}restore(e){var i;const n=Object.getPrototypeOf(u(this,vr));if(n===null)return this;A(this,vr,n),A(this,br,Object.getPrototypeOf(u(this,br))),A(this,He,Object.getPrototypeOf(u(this,He)));const r=u(this,ns).pop();return r!==void 0&&((i=ub(u(this,Bs),e))==null||i.dependencies.add(r),u(this,Kn)[e]=u(this,Kn)[r]),this}recordOpenMarker(e){return u(this,ns).push(e),this}getOpenMarker(){return u(this,ns).length===0?null:u(this,ns).at(-1)}recordCloseMarker(e){var r;const n=u(this,ns).pop();return n!==void 0&&((r=ub(u(this,Bs),e))==null||r.dependencies.add(n),u(this,Kn)[e]=u(this,Kn)[n]),this}beginMarkedContent(e){return u(this,au).push(e),this}endMarkedContent(e){var r;const n=u(this,au).pop();return n!==void 0&&((r=ub(u(this,Bs),e))==null||r.dependencies.add(n),u(this,Kn)[e]=u(this,Kn)[n]),this}pushBaseTransform(e){return u(this,Ma).push(ee.multiplyByDOMMatrix(u(this,Ma).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Ma).length>1&&u(this,Ma).pop(),this}recordSimpleData(e,n){return u(this,vr)[e]=n,this}recordIncrementalData(e,n){return u(this,br)[e].push(n),this}resetIncrementalData(e,n){return u(this,br)[e].length=0,this}recordNamedData(e,n){return u(this,su).set(e,n),this}recordSimpleDataFromNamed(e,n,r){u(this,vr)[e]=u(this,su).get(n)??r}recordFutureForcedDependency(e,n){return this.recordIncrementalData(Ph,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in u(this,vr)&&this.recordFutureForcedDependency(n,u(this,vr)[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,wr))this.recordFutureForcedDependency(Ph,e);return this}resetBBox(e){return u(this,Ra)!==e&&(A(this,Ra,e),u(this,Xe)[0]=1/0,u(this,Xe)[1]=1/0,u(this,Xe)[2]=-1/0,u(this,Xe)[3]=-1/0),this}recordClipBox(e,n,r,i,s,a){const o=ee.multiplyByDOMMatrix(u(this,Ma).at(-1),n.getTransform()),l=[1/0,1/0,-1/0,-1/0];ee.axialAlignedBoundingBox([r,s,i,a],o,l);const c=ee.intersect(u(this,He),l);return c?(u(this,He)[0]=c[0],u(this,He)[1]=c[1],u(this,He)[2]=c[2],u(this,He)[3]=c[3]):(u(this,He)[0]=u(this,He)[1]=1/0,u(this,He)[2]=u(this,He)[3]=-1/0),this}recordBBox(e,n,r,i,s,a){const o=u(this,He);if(o[0]===1/0)return this;const l=ee.multiplyByDOMMatrix(u(this,Ma).at(-1),n.getTransform());if(o[0]===-1/0)return ee.axialAlignedBoundingBox([r,s,i,a],l,u(this,Xe)),this;const c=[1/0,1/0,-1/0,-1/0];return ee.axialAlignedBoundingBox([r,s,i,a],l,c),u(this,Xe)[0]=Math.min(u(this,Xe)[0],Math.max(c[0],o[0])),u(this,Xe)[1]=Math.min(u(this,Xe)[1],Math.max(c[1],o[1])),u(this,Xe)[2]=Math.max(u(this,Xe)[2],Math.min(c[2],o[2])),u(this,Xe)[3]=Math.max(u(this,Xe)[3],Math.min(c[3],o[3])),this}recordCharacterBBox(e,n,r,i=1,s=0,a=0,o){const l=r.bbox;let c,h;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&u(this,tf).get(r),c!==!1&&(h=[0,0,0,0],ee.axialAlignedBoundingBox(l,r.fontMatrix,h),(i!==1||s!==0||a!==0)&&ee.scaleMinMax([i,0,0,-i,s,a],h),c)))return this.recordBBox(e,n,h[0],h[2],h[1],h[3]);if(!o)return this.recordFullPageBBox(e);const d=o();return l&&h&&c===void 0&&(c=h[0]<=s-d.actualBoundingBoxLeft&&h[2]>=s+d.actualBoundingBoxRight&&h[1]<=a-d.actualBoundingBoxAscent&&h[3]>=a+d.actualBoundingBoxDescent,u(this,tf).set(r,c),c)?this.recordBBox(e,n,h[0],h[2],h[1],h[3]):this.recordBBox(e,n,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,a-d.actualBoundingBoxAscent,a+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,Xe)[0]=Math.max(0,u(this,He)[0]),u(this,Xe)[1]=Math.max(0,u(this,He)[1]),u(this,Xe)[2]=Math.min(u(this,ou),u(this,He)[2]),u(this,Xe)[3]=Math.min(u(this,lu),u(this,He)[3]),this}getSimpleIndex(e){return u(this,vr)[e]}recordDependencies(e,n){const r=u(this,wr),i=u(this,vr),s=u(this,br);for(const a of n)a in u(this,vr)?r.add(i[a]):a in s&&s[a].forEach(r.add,r);return this}recordNamedDependency(e,n){return u(this,su).has(n)&&u(this,wr).add(u(this,su).get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[Ph]),u(this,Bs)){const r=ub(u(this,Bs),e),{dependencies:i}=r;u(this,wr).forEach(i.add,i),u(this,ns).forEach(i.add,i),u(this,au).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(u(this,Ra)===e){const r=ij(u(this,Xe)[0]*256/u(this,ou)),i=ij(u(this,Xe)[1]*256/u(this,lu)),s=sj(u(this,Xe)[2]*256/u(this,ou)),a=sj(u(this,Xe)[3]*256/u(this,lu));cb(u(this,ja),e,r,i,s,a);for(const o of u(this,wr))o!==e&&cb(u(this,ja),o,r,i,s,a);for(const o of u(this,ns))o!==e&&cb(u(this,ja),o,r,i,s,a);for(const o of u(this,au))o!==e&&cb(u(this,ja),o,r,i,s,a);n||(u(this,wr).clear(),A(this,Ra,-1))}return this}recordShowTextOperation(e,n=!1){const r=Array.from(u(this,wr));this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,n=!1){return u(this,Ra)===e&&(A(this,Ra,-1),u(this,He)[0]=Math.max(u(this,He)[0],u(this,Xe)[0]),u(this,He)[1]=Math.max(u(this,He)[1],u(this,Xe)[1]),u(this,He)[2]=Math.min(u(this,He)[2],u(this,Xe)[2]),u(this,He)[3]=Math.min(u(this,He)[3],u(this,Xe)[3]),n||u(this,wr).clear()),this}_takePendingDependencies(){const e=u(this,wr);return A(this,wr,new Set),e}_extractOperation(e){const n=u(this,Jy).get(e);return u(this,Jy).delete(e),n}_pushPendingDependencies(e){for(const n of e)u(this,wr).add(n)}take(){return u(this,tf).clear(),new Dme(u(this,Kn),u(this,ja))}takeDebugMetadata(){return u(this,Bs)}}vr=new WeakMap,br=new WeakMap,su=new WeakMap,ns=new WeakMap,au=new WeakMap,Ma=new WeakMap,He=new WeakMap,Xe=new WeakMap,Ra=new WeakMap,wr=new WeakMap,Jy=new WeakMap,tf=new WeakMap,ou=new WeakMap,lu=new WeakMap,ja=new WeakMap,Kn=new WeakMap,Bs=new WeakMap,Qy=new WeakSet,oC=function(e,n){const r=new ArrayBuffer(e*4);A(this,ja,new Uint8ClampedArray(r)),A(this,Kn,new Uint32Array(r)),n&&n.length>0?(u(this,Kn).set(n),u(this,Kn).fill(aC,n.length)):u(this,Kn).fill(aC)};var et,Nt,rs,nf,rf;const xk=class xk{constructor(e,n,r){C(this,et);C(this,Nt);C(this,rs);C(this,nf,0);C(this,rf,0);if(e instanceof xk&&u(e,rs)===!!r)return e;A(this,et,e),A(this,Nt,n),A(this,rs,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Qt(this,rf)._++,u(this,et).save(u(this,Nt)),this}restore(e){return u(this,rf)>0&&(u(this,et).restore(u(this,Nt)),Qt(this,rf)._--),this}recordOpenMarker(e){return Qt(this,nf)._++,this}getOpenMarker(){return u(this,nf)>0?u(this,Nt):u(this,et).getOpenMarker()}recordCloseMarker(e){return Qt(this,nf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,et).pushBaseTransform(e),this}popBaseTransform(){return u(this,et).popBaseTransform(),this}recordSimpleData(e,n){return u(this,et).recordSimpleData(e,u(this,Nt)),this}recordIncrementalData(e,n){return u(this,et).recordIncrementalData(e,u(this,Nt)),this}resetIncrementalData(e,n){return u(this,et).resetIncrementalData(e,u(this,Nt)),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,r){return u(this,et).recordSimpleDataFromNamed(e,n,u(this,Nt)),this}recordFutureForcedDependency(e,n){return u(this,et).recordFutureForcedDependency(e,u(this,Nt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,et).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,et).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,rs)||u(this,et).resetBBox(u(this,Nt)),this}recordClipBox(e,n,r,i,s,a){return u(this,rs)||u(this,et).recordClipBox(u(this,Nt),n,r,i,s,a),this}recordBBox(e,n,r,i,s,a){return u(this,rs)||u(this,et).recordBBox(u(this,Nt),n,r,i,s,a),this}recordCharacterBBox(e,n,r,i,s,a,o){return u(this,rs)||u(this,et).recordCharacterBBox(u(this,Nt),n,r,i,s,a,o),this}recordFullPageBBox(e){return u(this,rs)||u(this,et).recordFullPageBBox(u(this,Nt)),this}getSimpleIndex(e){return u(this,et).getSimpleIndex(e)}recordDependencies(e,n){return u(this,et).recordDependencies(u(this,Nt),n),this}recordNamedDependency(e,n){return u(this,et).recordNamedDependency(u(this,Nt),n),this}recordOperation(e){return u(this,et).recordOperation(u(this,Nt),!0),this}recordShowTextOperation(e){return u(this,et).recordShowTextOperation(u(this,Nt),!0),this}bboxToClipBoxDropOperation(e){return u(this,rs)||u(this,et).bboxToClipBoxDropOperation(u(this,Nt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};et=new WeakMap,Nt=new WeakMap,rs=new WeakMap,nf=new WeakMap,rf=new WeakMap;let Wx=xk;const vi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},jn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function lC(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class pk{isModifyingCurrentTransform(){return!1}getPattern(){rt("Abstract method `getPattern` called.")}}class Lme extends pk{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,n=null){let r,i=this._p0,s=this._p1;if(n&&(i=i.slice(),s=s.slice(),ee.applyTransform(i,n),ee.applyTransform(s,n)),this._type==="axial")r=e.createLinearGradient(i[0],i[1],s[0],s[1]);else if(this._type==="radial"){let a=this._r0,o=this._r1;if(n){const l=new Float32Array(2);ee.singularValueDecompose2dScale(n,l),a*=l[0],o*=l[0]}r=e.createRadialGradient(i[0],i[1],a,s[0],s[1],o)}for(const a of this._colorStops)r.addColorStop(a[0],a[1]);return r}getPattern(e,n,r,i){let s;if(i===jn.STROKE||i===jn.FILL){if(this.isOriginBased()){let f=ee.transform(r,n.baseTransform);this.matrix&&(f=ee.transform(f,this.matrix));const p=.001,g=Math.hypot(f[0],f[1]),m=Math.hypot(f[2],f[3]),b=(f[0]*f[2]+f[1]*f[3])/(g*m);if(Math.abs(b)<p)if(this.isRadial()){if(Math.abs(g-m)<p)return this._createGradient(e,f)}else return this._createGradient(e,f)}const a=n.current.getClippedPathBoundingBox(i,St(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=n.cachedCanvases.getCanvas("pattern",o,l),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),r=ee.transform(r,[1,0,0,1,a[0],a[1]]),h.transform(...n.baseTransform),this.matrix&&h.transform(...this.matrix),lC(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(r);s.setTransform(d)}else lC(e,this._bbox),s=this._createGradient(e);return s}}function YS(t,e,n,r,i,s,a,o){const l=e.coords,c=e.colors,h=t.data,d=t.width*4;let f;l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=a,a=f),l[r+1]>l[i+1]&&(f=r,r=i,i=f,f=a,a=o,o=f),l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=a,a=f);const p=(l[n]+e.offsetX)*e.scaleX,g=(l[n+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,w=(l[i+1]+e.offsetY)*e.scaleY;if(g>=w)return;const v=c[s],_=c[s+1],x=c[s+2],S=c[a],T=c[a+1],O=c[a+2],k=c[o],M=c[o+1],N=c[o+2],I=Math.round(g),R=Math.round(w);let F,D,j,B,$,U,V,G;for(let W=I;W<=R;W++){if(W<b){const ke=W<g?0:(g-W)/(g-b);F=p-(p-m)*ke,D=v-(v-S)*ke,j=_-(_-T)*ke,B=x-(x-O)*ke}else{let ke;W>w?ke=1:b===w?ke=0:ke=(b-W)/(b-w),F=m-(m-y)*ke,D=S-(S-k)*ke,j=T-(T-M)*ke,B=O-(O-N)*ke}let Y;W<g?Y=0:W>w?Y=1:Y=(g-W)/(g-w),$=p-(p-y)*Y,U=v-(v-k)*Y,V=_-(_-M)*Y,G=x-(x-N)*Y;const pe=Math.round(Math.min(F,$)),he=Math.round(Math.max(F,$));let Se=d*W+pe*4;for(let ke=pe;ke<=he;ke++)Y=(F-ke)/(F-$),Y<0?Y=0:Y>1&&(Y=1),h[Se++]=D-(D-U)*Y|0,h[Se++]=j-(j-V)*Y|0,h[Se++]=B-(B-G)*Y|0,h[Se++]=255}}function Fme(t,e,n){const r=e.coords,i=e.colors;let s,a;switch(e.type){case MT.LATTICE:const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(s=0;s<l;s++){let h=s*o;for(let d=0;d<c;d++,h++)YS(t,n,r[h],r[h+1],r[h+o],i[h],i[h+1],i[h+o]),YS(t,n,r[h+o+1],r[h+1],r[h+o],i[h+o+1],i[h+1],i[h+o])}break;case MT.TRIANGLES:for(s=0,a=r.length;s<a;s+=3)YS(t,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class Bme extends pk{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=c/d,g=h/f,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/g},b=d+2*2,y=f+2*2,w=r.getCanvas("mesh",b,y),v=w.context,_=v.createImageData(d,f);if(n){const S=_.data;for(let T=0,O=S.length;T<O;T+=4)S[T]=n[0],S[T+1]=n[1],S[T+2]=n[2],S[T+3]=255}for(const S of this._figures)Fme(_,S,m);return v.putImageData(_,2,2),{canvas:w.canvas,offsetX:o-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,i){lC(e,this._bbox);const s=new Float32Array(2);if(i===jn.SHADING)ee.singularValueDecompose2dScale(St(e),s);else if(this.matrix){ee.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;ee.singularValueDecompose2dScale(n.baseTransform,s),s[0]*=o,s[1]*=l}else ee.singularValueDecompose2dScale(n.baseTransform,s);const a=this._createMeshCanvas(s,i===jn.SHADING?null:this._background,n.cachedCanvases);return i!==jn.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Ume extends pk{getPattern(){return"hotpink"}}function zme(t){switch(t[0]){case"RadialAxial":return new Lme(t);case"Mesh":return new Bme(t);case"Dummy":return new Ume}throw new Error(`Unknown IR type: ${t[0]}`)}const aj={COLORED:1,UNCOLORED:2},o1=class o1{constructor(e,n,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,n){var U,V;const{bbox:r,operatorList:i,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),O_("TilingType: "+a);const d=r[0],f=r[1],p=r[2],g=r[3],m=p-d,b=g-f,y=new Float32Array(2);ee.singularValueDecompose2dScale(this.matrix,y);const[w,v]=y;ee.singularValueDecompose2dScale(this.baseTransform,y);const _=w*y[0],x=v*y[1];let S=m,T=b,O=!1,k=!1;const M=Math.ceil(c*_),N=Math.ceil(h*x),I=Math.ceil(m*_),R=Math.ceil(b*x);M>=I?S=c:O=!0,N>=R?T=h:k=!0;const F=this.getSizeAndScale(S,this.ctx.canvas.width,_),D=this.getSizeAndScale(T,this.ctx.canvas.height,x),j=e.cachedCanvases.getCanvas("pattern",F.size,D.size),B=j.context,$=l.createCanvasGraphics(B,n);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,s,o),B.translate(-F.scale*d,-D.scale*f),$.transform(0,F.scale,0,0,D.scale,0,0),B.save(),(U=$.dependencyTracker)==null||U.save(),this.clipBbox($,d,f,p,g),$.baseTransform=St($.ctx),$.executeOperatorList(i),$.endDrawing(),(V=$.dependencyTracker)==null||V.restore(),B.restore(),O||k){const G=j.canvas;O&&(S=c),k&&(T=h);const W=this.getSizeAndScale(S,this.ctx.canvas.width,_),Y=this.getSizeAndScale(T,this.ctx.canvas.height,x),pe=W.size,he=Y.size,Se=e.cachedCanvases.getCanvas("pattern-workaround",pe,he),ke=Se.context,fn=O?Math.floor(m/c):0,Z=k?Math.floor(b/h):0;for(let de=0;de<=fn;de++)for(let fe=0;fe<=Z;fe++)ke.drawImage(G,pe*de,he*fe,pe,he,0,0,pe,he);return{canvas:Se.canvas,scaleX:W.scale,scaleY:Y.scale,offsetX:d,offsetY:f}}return{canvas:j.canvas,scaleX:F.scale,scaleY:D.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,n,r){const i=Math.max(o1.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,n,r,i,s){const a=i-n,o=s-r;e.ctx.rect(n,r,a,o),ee.axialAlignedBoundingBox([n,r,i,s],St(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,s=e.current;switch(n){case aj.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case aj.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new eme(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,i,s){let a=r;i!==jn.SHADING&&(a=ee.transform(a,n.baseTransform),this.matrix&&(a=ee.transform(a,this.matrix)));const o=this.createPatternCanvas(n,s);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};K(o1,"MAX_PATTERN_SIZE",3e3);let cC=o1;function Hme({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=hn.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],h=r>>3,d=r&7,f=t.length;n=new Uint32Array(n.buffer);let p=0;for(let g=0;g<i;g++){for(const b=e+h;e<b;e++){const y=e<f?t[e]:255;n[p++]=y&128?c:l,n[p++]=y&64?c:l,n[p++]=y&32?c:l,n[p++]=y&16?c:l,n[p++]=y&8?c:l,n[p++]=y&4?c:l,n[p++]=y&2?c:l,n[p++]=y&1?c:l}if(d===0)continue;const m=e<f?t[e++]:255;for(let b=0;b<d;b++)n[p++]=m&1<<7-b?c:l}return{srcPos:e,destPos:p}}const oj=16,lj=100,Wme=15,cj=10,Sr=16,JS=new DOMMatrix,ni=new Float32Array(2),id=new Float32Array([1/0,1/0,-1/0,-1/0]);function Vme(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},t.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},t.transform=function(n,r,i,s,a,o){e.transform(n,r,i,s,a,o),this.__originalTransform(n,r,i,s,a,o)},t.setTransform=function(n,r,i,s,a,o){e.setTransform(n,r,i,s,a,o),this.__originalSetTransform(n,r,i,s,a,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,s,a,o){e.bezierCurveTo(n,r,i,s,a,o),this.__originalBezierCurveTo(n,r,i,s,a,o)},t.rect=function(n,r,i,s){e.rect(n,r,i,s),this.__originalRect(n,r,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Gme{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function hb(t,e,n,r,i,s,a,o,l,c){const[h,d,f,p,g,m]=St(t);if(d===0&&f===0){const w=a*h+g,v=Math.round(w),_=o*p+m,x=Math.round(_),S=(a+l)*h+g,T=Math.abs(Math.round(S)-v)||1,O=(o+c)*p+m,k=Math.abs(Math.round(O)-x)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(p),v,x),t.drawImage(e,n,r,i,s,0,0,T,k),t.setTransform(h,d,f,p,g,m),[T,k]}if(h===0&&p===0){const w=o*f+g,v=Math.round(w),_=a*d+m,x=Math.round(_),S=(o+c)*f+g,T=Math.abs(Math.round(S)-v)||1,O=(a+l)*d+m,k=Math.abs(Math.round(O)-x)||1;return t.setTransform(0,Math.sign(d),Math.sign(f),0,v,x),t.drawImage(e,n,r,i,s,0,0,k,T),t.setTransform(h,d,f,p,g,m),[k,T]}t.drawImage(e,n,r,i,s,a,o,l,c);const b=Math.hypot(h,d),y=Math.hypot(f,p);return[b*l,y*c]}class uj{constructor(e,n,r){K(this,"alphaIsShape",!1);K(this,"fontSize",0);K(this,"fontSizeScale",1);K(this,"textMatrix",null);K(this,"textMatrixScale",1);K(this,"fontMatrix",IT);K(this,"leading",0);K(this,"x",0);K(this,"y",0);K(this,"lineX",0);K(this,"lineY",0);K(this,"charSpacing",0);K(this,"wordSpacing",0);K(this,"textHScale",1);K(this,"textRenderingMode",tn.FILL);K(this,"textRise",0);K(this,"fillColor","#000000");K(this,"strokeColor","#000000");K(this,"patternFill",!1);K(this,"patternStroke",!1);K(this,"fillAlpha",1);K(this,"strokeAlpha",1);K(this,"lineWidth",1);K(this,"activeSMask",null);K(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=id.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=jn.FILL,n=null){const r=this.minMax.slice();if(e===jn.STROKE){n||rt("Stroke bounding box must include transform."),ee.singularValueDecompose2dScale(n,ni);const i=ni[0]*this.lineWidth/2,s=ni[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(id,0)}getClippedPathBoundingBox(e=jn.FILL,n=null){return ee.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function hj(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%Sr,s=(n-i)/Sr,a=i===0?s:s+1,o=t.createImageData(r,Sr);let l=0,c;const h=e.data,d=o.data;let f,p,g,m;if(e.kind===Ob.GRAYSCALE_1BPP){const b=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),w=y.length,v=r+7>>3,_=4294967295,x=hn.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(g=f<s?Sr:i,c=0,p=0;p<g;p++){const S=b-l;let T=0;const O=S>v?r:S*8-7,k=O&-8;let M=0,N=0;for(;T<k;T+=8)N=h[l++],y[c++]=N&128?_:x,y[c++]=N&64?_:x,y[c++]=N&32?_:x,y[c++]=N&16?_:x,y[c++]=N&8?_:x,y[c++]=N&4?_:x,y[c++]=N&2?_:x,y[c++]=N&1?_:x;for(;T<O;T++)M===0&&(N=h[l++],M=128),y[c++]=N&M?_:x,M>>=1}for(;c<w;)y[c++]=0;t.putImageData(o,0,f*Sr)}}else if(e.kind===Ob.RGBA_32BPP){for(p=0,m=r*Sr*4,f=0;f<s;f++)d.set(h.subarray(l,l+m)),l+=m,t.putImageData(o,0,p),p+=Sr;f<a&&(m=r*i*4,d.set(h.subarray(l,l+m)),t.putImageData(o,0,p))}else if(e.kind===Ob.RGB_24BPP)for(g=Sr,m=r*g,f=0;f<a;f++){for(f>=s&&(g=i,m=r*g),c=0,p=m;p--;)d[c++]=h[l++],d[c++]=h[l++],d[c++]=h[l++],d[c++]=255;t.putImageData(o,0,f*Sr)}else throw new Error(`bad image kind: ${e.kind}`)}function dj(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%Sr,s=(n-i)/Sr,a=i===0?s:s+1,o=t.createImageData(r,Sr);let l=0;const c=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<s?Sr:i;({srcPos:l}=Hme({src:c,srcPos:l,dest:h,width:r,height:f,nonBlackColor:0})),t.putImageData(o,0,d*Sr)}}function ag(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function db(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function fj(t,e){if(e)return!0;ee.singularValueDecompose2dScale(t,ni);const n=Math.fround(aa.pixelRatio*ql.PDF_TO_CSS_UNITS);return ni[0]<=n&&ni[1]<=n}const qme=["butt","round","square"],Kme=["miter","round","bevel"],Xme={},pj={};var _s,uC,hC,dC;const _k=class _k{constructor(e,n,r,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,c,h){C(this,_s);this.ctx=e,this.current=new uj(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Gme(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,n,r=null){var i;return typeof n=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):r}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...St(this.compositeCtx))}this.ctx.save(),db(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=St(this.ctx)}executeOperatorList(e,n,r,i,s){var y;const a=e.argsArray,o=e.fnArray;let l=n||0;const c=a.length;if(c===l)return l;const h=c-l>cj&&typeof r=="function",d=h?Date.now()+Wme:0;let f=0;const p=this.commonObjs,g=this.objs;let m,b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s(l))if(m=o[l],b=a[l]??null,m!==ly.dependency)b===null?this[m](l):this[m](l,...b);else for(const w of b){(y=this.dependencyTracker)==null||y.recordNamedData(w,l);const v=w.startsWith("g_")?p:g;if(!v.has(w))return v.get(w,r),l}if(l++,l===c)return l;if(h&&++f>cj){if(Date.now()>d)return r(),l;f=0}}}endDrawing(){P(this,_s,uC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,_s,hC).call(this)}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),a=Math.max(Math.hypot(n[2],n[3]),1),o=r,l=i,c="prescale1",h,d;for(;s>2&&o>1||a>2&&l>1;){let f=o,p=l;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),h=this.cachedCanvases.getCanvas(c,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,l,0,0,f,p),e=h.canvas,o=f,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,n){var M,N;const r=this.ctx,{width:i,height:s}=n,a=this.current.fillColor,o=this.current.patternFill,l=St(r);let c,h,d,f;if((n.bitmap||n.data)&&n.count>1){const I=n.bitmap||n.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(I),c||(c=new Map,this._cachedBitmapsMap.set(I,c));const R=c.get(h);if(R&&!o){const F=Math.round(Math.min(l[0],l[2])+l[4]),D=Math.round(Math.min(l[1],l[3])+l[5]);return(M=this.dependencyTracker)==null||M.recordDependencies(e,vi.transformAndFill),{canvas:R,offsetX:F,offsetY:D}}d=R}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),dj(f.context,n));let p=ee.transform(l,[1/i,0,0,-1/s,0,0]);p=ee.transform(p,[1,0,0,1,0,-s]);const g=id.slice();ee.axialAlignedBoundingBox([0,0,i,s],p,g);const[m,b,y,w]=g,v=Math.round(y-m)||1,_=Math.round(w-b)||1,x=this.cachedCanvases.getCanvas("fillCanvas",v,_),S=x.context,T=m,O=b;S.translate(-T,-O),S.transform(...p),d||(d=this._scaleImage(f.canvas,Es(S)),d=d.img,c&&o&&c.set(h,d)),S.imageSmoothingEnabled=fj(St(S),n.interpolate),hb(S,d,0,0,d.width,d.height,0,0,i,s),S.globalCompositeOperation="source-in";const k=ee.transform(Es(S),[1,0,0,1,-T,-O]);return S.fillStyle=o?a.getPattern(r,this,k,jn.FILL,e):a,S.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,x.canvas)),(N=this.dependencyTracker)==null||N.recordDependencies(e,vi.transformAndFill),{canvas:x.canvas,offsetX:Math.round(T),offsetY:Math.round(O)}}setLineWidth(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=qme[n]}setLineJoin(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Kme[n]}setMiterLimit(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,r){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=r)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){var r,i,s,a,o;for(const[l,c]of n)switch(l){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,n,r);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),ag(this.suspendedCtx,a),Vme(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ag(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(n.context,r,o,l,n.subtype,n.backdrop,n.transferMap,s,a,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,s,a,o,l,c,h,d){let f=e.canvas,p=l-h,g=c-d;if(a)if(p<0||g<0||p+r>f.width||g+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,i),y=b.context;y.drawImage(f,-p,-g),y.globalCompositeOperation="destination-atop",y.fillStyle=a,y.fillRect(0,0,r,i),y.globalCompositeOperation="source-over",f=b.canvas,p=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,g,r,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(p,g,r,i),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?n.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,c,r,i),n.clip(m),n.globalCompositeOperation="destination-in",n.drawImage(f,p,g,r,i,l,c,r,i),n.restore()}save(e){var r;this.inSMaskMode&&ag(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var n;if((n=this.dependencyTracker)==null||n.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ag(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,i,s,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(n,r,i,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r,i){let[s]=r;if(!i){s||(s=r[0]=new Path2D),this[n](e,s);return}if(this.dependencyTracker!==null){const a=n===ly.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=r[0]=U3(s)),ee.axialAlignedBoundingBox(i,St(this.ctx),this.current.minMax),this[n](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,r=!0){var a;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Es(i),jn.STROKE,e),o){const l=new Path2D;l.addPath(n,i.getTransform().invertSelf().multiplySelf(o)),n=l}this.rescaleAndStroke(n,!1),i.restore()}else this.rescaleAndStroke(n,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,vi.stroke),r&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(jn.STROKE,St(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,r=!0){var c,h,d;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const f=s.isModifyingCurrentTransform()?i.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),i.save(),i.fillStyle=s.getPattern(i,this,Es(i),jn.FILL,e),f){const p=new Path2D;p.addPath(n,i.getTransform().invertSelf().multiplySelf(f)),n=p}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(n,"evenodd"),this.pendingEOFill=!1):i.fill(n)),(h=this.dependencyTracker)==null||h.recordDependencies(e,vi.fill),o&&(i.restore(),(d=this.dependencyTracker)==null||d.restore(e)),r&&this.consumePath(e,n,l)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){var r;this.ctx.fill(n),(r=this.dependencyTracker)==null||r.recordDependencies(e,vi.rawFillPath).recordOperation(e)}clip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=Xme}eoClip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=pj}beginText(e){var n;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(n=this.dependencyTracker)==null||n.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;n!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(n!==void 0){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:c,path:h}of n)h&&i.addPath(h,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(c,-c));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,r){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const i=this.commonObjs.get(n),s=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(s.fontMatrix=i.fontMatrix||IT,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ge("Invalid font matrix for font "+n),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((f=i.systemFontInfo)==null?void 0:f.css)||`"${a}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let h=r;r<oj?h=oj:r>lj&&(h=lj),this.current.fontSizeScale=r/h,this.ctx.font=`${c} ${l} ${h}px ${o}`}setTextRenderingMode(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,n,r){this.setLeading(e,-r),this.moveText(e,n,r)}setTextMatrix(e,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=n,r.textMatrixScale=Math.hypot(n[0],n[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var n;this.moveText(e,0,this.current.leading),(n=this.dependencyTracker)==null||n.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,n,r,i,s,a){var y,w,v,_;const o=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,f=h&tn.FILL_STROKE_MASK,p=!!(h&tn.ADD_TO_PATH_FLAG),g=l.patternFill&&!c.missingFile,m=l.patternStroke&&!c.missingFile;let b;if((c.disableFontFace||p||g||m)&&!c.missingFile&&(b=c.getPathGenerator(this.commonObjs,n)),b&&(c.disableFontFace||g||m)){o.save(),o.translate(r,i),o.scale(d,-d),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,c);let x;if(f===tn.FILL||f===tn.FILL_STROKE)if(s){x=o.getTransform(),o.setTransform(...s);const S=P(this,_s,dC).call(this,b,x,s);o.fill(S)}else o.fill(b);if(f===tn.STROKE||f===tn.FILL_STROKE)if(a){x||(x=o.getTransform()),o.setTransform(...a);const{a:S,b:T,c:O,d:k}=x,M=ee.inverseTransform(a),N=ee.transform([S,T,O,k,0,0],M);ee.singularValueDecompose2dScale(N,ni),o.lineWidth*=Math.max(ni[0],ni[1])/d,o.stroke(P(this,_s,dC).call(this,b,x,a))}else o.lineWidth/=d,o.stroke(b);o.restore()}else(f===tn.FILL||f===tn.FILL_STROKE)&&(o.fillText(n,r,i),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,c,d,r,i,()=>o.measureText(n))),(f===tn.STROKE||f===tn.FILL_STROKE)&&(this.dependencyTracker&&((v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,c,d,r,i,()=>o.measureText(n)).recordDependencies(e,vi.stroke)),o.strokeText(n,r,i));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:St(o),x:r,y:i,fontSize:d,path:b}),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,o,c,d,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return me(this,"isFontSubpixelAAEnabled",r)}showText(e,n){var N,I,R,F;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,vi.showText).resetBBox(e),this.current.textRenderingMode&tn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,n),(N=this.dependencyTracker)==null||N.recordShowTextOperation(e);return}const s=r.fontSize;if(s===0){(I=this.dependencyTracker)==null||I.recordOperation(e);return}const a=this.ctx,o=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,h=r.fontDirection,d=r.textHScale*h,f=n.length,p=i.vertical,g=p?1:-1,m=i.defaultVMetrics,b=s*r.fontMatrix[0],y=r.textRenderingMode===tn.FILL&&!i.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),h>0?a.scale(d,-1):a.scale(d,1);let w,v;const _=r.textRenderingMode&tn.FILL_STROKE_MASK,x=_===tn.FILL||_===tn.FILL_STROKE,S=_===tn.STROKE||_===tn.FILL_STROKE;if(x&&r.patternFill){a.save();const D=r.fillColor.getPattern(a,this,Es(a),jn.FILL,e);w=St(a),a.restore(),a.fillStyle=D}if(S&&r.patternStroke){a.save();const D=r.strokeColor.getPattern(a,this,Es(a),jn.STROKE,e);v=St(a),a.restore(),a.strokeStyle=D}let T=r.lineWidth;const O=r.textMatrixScale;if(O===0||T===0?S&&(T=this.getSinglePixelWidth()):T/=O,o!==1&&(a.scale(o,o),T/=o),a.lineWidth=T,i.isInvalidPDFjsFont){const D=[];let j=0;for(const $ of n)D.push($.unicode),j+=$.width;const B=D.join("");if(a.fillText(B,0,0),this.dependencyTracker!==null){const $=a.measureText(B);this.dependencyTracker.recordBBox(e,this.ctx,-$.actualBoundingBoxLeft,$.actualBoundingBoxRight,-$.actualBoundingBoxAscent,$.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=j*b*d,a.restore(),this.compose();return}let k=0,M;for(M=0;M<f;++M){const D=n[M];if(typeof D=="number"){k+=g*D*s/1e3;continue}let j=!1;const B=(D.isSpace?c:0)+l,$=D.fontChar,U=D.accent;let V,G,W=D.width;if(p){const he=D.vmetric||m,Se=-(D.vmetric?he[1]:W*.5)*b,ke=he[2]*b;W=he?-he[0]:W,V=Se/o,G=(k+ke)/o}else V=k/o,G=0;let Y;if(i.remeasure&&W>0){Y=a.measureText($);const he=Y.width*1e3/s*o;if(W<he&&this.isFontSubpixelAAEnabled){const Se=W/he;j=!0,a.save(),a.scale(Se,1),V/=Se}else W!==he&&(V+=(W-he)/2e3*s/o)}if(this.contentVisible&&(D.isInFont||i.missingFile)){if(y&&!U)a.fillText($,V,G),(R=this.dependencyTracker)==null||R.recordCharacterBBox(e,a,Y?{bbox:null}:i,s/o,V,G,()=>Y??a.measureText($));else if(this.paintChar(e,$,V,G,w,v),U){const he=V+s*U.offset.x/o,Se=G-s*U.offset.y/o;this.paintChar(e,U.fontChar,he,Se,w,v)}}const pe=p?W*b-B*h:W*b+B*h;k+=pe,j&&a.restore()}p?r.y-=k:r.x+=k*d,a.restore(),this.compose(),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e)}showType3Text(e,n){const r=this.ctx,i=this.current,s=i.font,a=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,h=i.wordSpacing,d=i.textHScale*o,f=i.fontMatrix||IT,p=n.length,g=i.textRenderingMode===tn.INVISIBLE;let m,b,y,w;if(g||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(d,o);const v=this.dependencyTracker;for(this.dependencyTracker=v?new Wx(v,e):null,m=0;m<p;++m){if(b=n[m],typeof b=="number"){w=l*b*a/1e3,this.ctx.translate(w,0),i.x+=w*d;continue}const _=(b.isSpace?h:0)+c,x=s.charProcOperatorList[b.operatorListId];x?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...f),this.executeOperatorList(x),this.restore()):ge(`Type3 character "${b.operatorListId}" is not available.`);const S=[b.width,0];ee.applyTransform(S,f),y=S[0]*a+_,r.translate(y,0),i.x+=y*d}r.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,n,r){}setCharWidthAndBounds(e,n,r,i,s,a,o){var c;const l=new Path2D;l.rect(i,s,a-i,o-s),this.ctx.clip(l),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,i,a,s,o).recordClipBox(e,this.ctx,i,a,s,o),this.endPath(e)}getColorN_Pattern(e,n){let r;if(n[0]==="TilingPattern"){const i=this.baseTransform||St(this.ctx),s={createCanvasGraphics:(a,o)=>new _k(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Wx(this.dependencyTracker,o,!0):null)};r=new cC(n,this.ctx,s,i)}else r=this._getPattern(e,n[1],n[2]);return r}setStrokeColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,r=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=zme(this.getObject(e,n)),this.cachedPatterns.set(n,i)),r&&(i.matrix=r),i}shadingFill(e,n){var a;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,n);r.fillStyle=i.getPattern(r,this,Es(r),jn.SHADING,e);const s=Es(r);if(s){const{width:o,height:l}=r.canvas,c=id.slice();ee.axialAlignedBoundingBox([0,0,o,l],s,c);const[h,d,f,p]=c;this.ctx.fillRect(h,d,f-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,vi.transform).recordDependencies(e,vi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){rt("Should not call beginInlineImage")}beginImageData(){rt("Should not call beginImageData")}paintFormXObjectBegin(e,n,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=St(this.ctx),r)){ee.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,a,o,l]=r,c=new Path2D;c.rect(s,a,o-s,l-a),this.ctx.clip(c),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){var v;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;n.isolated||O_("TODO: Support non-isolated groups."),n.knockout&&ge("Knockout groups not supported.");const i=St(r);if(n.matrix&&r.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let s=id.slice();ee.axialAlignedBoundingBox(n.bbox,St(r),s);const a=[0,0,r.canvas.width,r.canvas.height];s=ee.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),h=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;n.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,c,h),p=f.context;p.translate(-o,-l),p.transform(...i);let g=new Path2D;const[m,b,y,w]=n.bbox;if(g.rect(m,b,y-m,w-b),n.matrix){const _=new Path2D;_.addPath(g,new DOMMatrix(n.matrix)),g=_}p.clip(g),n.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:l,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),ag(r,p),this.ctx=p,(v=this.dependencyTracker)==null||v.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,n){var s;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=St(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=id.slice();ee.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,n,r,i,s,a){if(P(this,_s,uC).call(this),db(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,ee.singularValueDecompose2dScale(St(this.ctx),ni);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(n,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(ni[0],0,0,-ni[1],0,l*ni[1]),db(this.ctx)}else{db(this.ctx),this.endPath(e);const c=new Path2D;c.rect(r[0],r[1],o,l),this.ctx.clip(c)}}this.current=new uj(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),P(this,_s,hC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){var o;if(!this.contentVisible)return;const r=n.count;n=this.getObject(e,n.data,n),n.count=r;const i=this.ctx,s=this._createMaskCanvas(e,n),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r,i=0,s=0,a,o){var d,f,p;if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const l=this.ctx;l.save();const c=St(l);l.transform(r,i,s,a,0,0);const h=this._createMaskCanvas(e,n);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]),(d=this.dependencyTracker)==null||d.resetBBox(e);for(let g=0,m=o.length;g<m;g+=2){const b=ee.transform(c,[r,i,s,a,o[g],o[g+1]]);l.drawImage(h.canvas,b[4],b[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,b[4],b[4]+h.canvas.width,b[5],b[5]+h.canvas.height)}l.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,n){var a,o,l;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,vi.transformAndFill);for(const c of n){const{data:h,width:d,height:f,transform:p}=c,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),m=g.context;m.save();const b=this.getObject(e,h,c);dj(m,b),m.globalCompositeOperation="source-in",m.fillStyle=s?i.getPattern(m,this,Es(r),jn.FILL,e):i,m.fillRect(0,0,d,f),m.restore(),r.save(),r.transform(...p),r.scale(1,-1),hb(r,g.canvas,0,0,d,f,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,d,0,f),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const r=this.getObject(e,n);if(!r){ge("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,n,r,i,s){if(!this.contentVisible)return;const a=this.getObject(e,n);if(!a){ge("Dependent image isn't ready yet");return}const o=a.width,l=a.height,c=[];for(let h=0,d=s.length;h<d;h+=2)c.push({transform:[r,0,0,i,s[h],s[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(n,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,n){var c;if(!this.contentVisible)return;const r=n.width,i=n.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/r,-1/i);let o;if(n.bitmap)o=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)o=n;else{const d=this.cachedCanvases.getCanvas("inlineImage",r,i).context;hj(d,n),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,Es(s));s.imageSmoothingEnabled=fj(St(s),n.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,vi.imageXObject).recordOperation(e),hb(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,r){var a,o,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(n.bitmap)s=n.bitmap;else{const c=n.width,h=n.height,f=this.cachedCanvases.getCanvas("inlineImage",c,h).context;hj(f,n),s=this.applyTransferMapsToCanvas(f)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const c of r)i.save(),i.transform(...c.transform),i.scale(1,-1),hb(i,s,c.x,c.y,c.w,c.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var n;this.contentVisible&&((n=this.dependencyTracker)==null||n.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,vi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,r){}beginMarkedContent(e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var n;(n=this.dependencyTracker)==null||n.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,r){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===pj?s.clip(n,"evenodd"):s.clip(n)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=St(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:s}=this.ctx.getTransform();let a,o;if(r===0&&i===0){const l=Math.abs(n),c=Math.abs(s);if(l===c)if(e===0)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(e===0)a=1/l,o=1/c;else{const h=l*e,d=c*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const l=Math.abs(n*s-r*i),c=Math.hypot(n,r),h=Math.hypot(i,s);if(e===0)a=h/l,o=c/l;else{const d=e*l;a=h>d?h/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){r.lineWidth=(i||1)*s,r.stroke(e);return}const o=r.getLineDash();n&&r.save(),r.scale(s,a),JS.a=1/s,JS.d=1/a;const l=new Path2D;if(l.addPath(e,JS),o.length>0){const c=Math.max(s,a);r.setLineDash(o.map(h=>h/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};_s=new WeakSet,uC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},hC=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},dC=function(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i};let xd=_k;for(const t in ly)xd.prototype[t]!==void 0&&(xd.prototype[ly[t]]=xd.prototype[t]);var Zy,ev;class Qs{static get workerPort(){return u(this,Zy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,Zy,e)}static get workerSrc(){return u(this,ev)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,ev,e)}}Zy=new WeakMap,ev=new WeakMap,C(Qs,Zy,null),C(Qs,ev,"");var sf,tv;class Yme{constructor({parsedData:e,rawData:n}){C(this,sf);C(this,tv);A(this,sf,e),A(this,tv,n)}getRaw(){return u(this,tv)}get(e){return u(this,sf).get(e)??null}[Symbol.iterator](){return u(this,sf).entries()}}sf=new WeakMap,tv=new WeakMap;const Lh=Symbol("INTERNAL");var nv,rv,iv,af;class Jme{constructor(e,{name:n,intent:r,usage:i,rbGroups:s}){C(this,nv,!1);C(this,rv,!1);C(this,iv,!1);C(this,af,!0);A(this,nv,!!(e&Zr.DISPLAY)),A(this,rv,!!(e&Zr.PRINT)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(u(this,iv))return u(this,af);if(!u(this,af))return!1;const{print:e,view:n}=this.usage;return u(this,nv)?(n==null?void 0:n.viewState)!=="OFF":u(this,rv)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,r=!1){e!==Lh&&rt("Internal method `_setVisible` called."),A(this,iv,r),A(this,af,n)}}nv=new WeakMap,rv=new WeakMap,iv=new WeakMap,af=new WeakMap;var al,Ye,of,lf,sv,fC;class Qme{constructor(e,n=Zr.DISPLAY){C(this,sv);C(this,al,null);C(this,Ye,new Map);C(this,of,null);C(this,lf,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,lf,e.order);for(const r of e.groups)u(this,Ye).set(r.id,new Jme(n,r));if(e.baseState==="OFF")for(const r of u(this,Ye).values())r._setVisible(Lh,!1);for(const r of e.on)u(this,Ye).get(r)._setVisible(Lh,!0);for(const r of e.off)u(this,Ye).get(r)._setVisible(Lh,!1);A(this,of,this.getHash())}}isVisible(e){if(u(this,Ye).size===0)return!0;if(!e)return O_("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Ye).has(e.id)?u(this,Ye).get(e.id).visible:(ge(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,sv,fC).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!u(this,Ye).has(n))return ge(`Optional content group not found: ${n}`),!0;if(u(this,Ye).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!u(this,Ye).has(n))return ge(`Optional content group not found: ${n}`),!0;if(!u(this,Ye).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!u(this,Ye).has(n))return ge(`Optional content group not found: ${n}`),!0;if(!u(this,Ye).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!u(this,Ye).has(n))return ge(`Optional content group not found: ${n}`),!0;if(u(this,Ye).get(n).visible)return!1}return!0}return ge(`Unknown optional content policy ${e.policy}.`),!0}return ge(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){var s;const i=u(this,Ye).get(e);if(!i){ge(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=u(this,Ye).get(o))==null||s._setVisible(Lh,!1,!0));i._setVisible(Lh,!!n,!0),A(this,al,null)}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=u(this,Ye).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!s.visible,n);break}}A(this,al,null)}get hasInitialVisibility(){return u(this,of)===null||this.getHash()===u(this,of)}getOrder(){return u(this,Ye).size?u(this,lf)?u(this,lf).slice():[...u(this,Ye).keys()]:null}getGroup(e){return u(this,Ye).get(e)||null}getHash(){if(u(this,al)!==null)return u(this,al);const e=new b4;for(const[n,r]of u(this,Ye))e.update(`${n}:${r.visible}`);return A(this,al,e.hexdigest())}[Symbol.iterator](){return u(this,Ye).entries()}}al=new WeakMap,Ye=new WeakMap,of=new WeakMap,lf=new WeakMap,sv=new WeakSet,fC=function(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const s=e[i];let a;if(Array.isArray(s))a=P(this,sv,fC).call(this,s);else if(u(this,Ye).has(s))a=u(this,Ye).get(s).visible;else return ge(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class Zme{constructor(e,{disableRange:n=!1,disableStream:r=!1}){Me(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});Me(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,r,i,s;e.total===void 0?(r=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Me(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new eye(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new tye(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class eye{constructor(e,n,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=hk(i)?i:null,this._queuedChunks=n||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tye{constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function nye(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let h=o(n);return h=unescape(h),h=l(h),h=c(h),s(h)}if(n=a(t),n){const h=c(n);return s(h)}if(n=r("filename","i").exec(t),n){n=n[1];let h=o(n);return h=c(h),s(h)}function r(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=m0(d);d=f.decode(p),e=!1}catch{}}return d}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,m,b,y]=f;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[b,y]}const g=[];for(let m=0;m<d.length&&m in d;++m){let[b,y]=d[m];y=o(y),b&&(y=unescape(y),m===0&&(y=l(y))),g.push(y)}return g.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),g=h.slice(d+1).replace(/^[^']*'/,"");return i(f,g)}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,b){return String.fromCharCode(parseInt(b,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function N4(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function N_(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function I4({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function M4(t){const e=t.get("Content-Disposition");if(e){let n=nye(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(hk(n))return n}return null}function x0(t,e){return new Lx(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function R4(t){return t===200||t===206}function j4(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function D4(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ge(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class rye{constructor(e){K(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=N4(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Me(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new iye(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new sye(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class iye{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),i=n.url;fetch(i,j4(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=N_(s.url),!R4(s.status))throw x0(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=I4({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=M4(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Gl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:D4(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class sye{constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${n}-${r-1}`);const a=i.url;fetch(a,j4(s,this._withCredentials,this._abortController)).then(o=>{const l=N_(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!R4(o.status))throw x0(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:D4(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const QS=200,ZS=206;function aye(t){const e=t.response;return typeof e!="string"?e:m0(e).buffer}class oye{constructor({url:e,httpHeaders:n,withCredentials:r}){K(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=N4(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[s,a]of this.headers)n.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=ZS):i.expectedStatus=QS,n.responseType="arraybuffer",Me(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,n))}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||QS;if(!(s===QS&&r.expectedStatus===ZS)&&s!==r.expectedStatus){r.onError(i.status);return}const o=aye(i);if(s===ZS){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:o}):(ge('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class lye{constructor(e){this._source=e,this._manager=new oye(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Me(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new cye(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new uye(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class cye{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=N_(n.responseURL);const r=n.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=I4({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=M4(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=x0(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class uye{constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=N_((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=x0(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const hye=/^[a-z][a-z0-9\-+.]+:/i;function dye(t){if(hye.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class fye{constructor(e){this.source=e,this.url=dye(e.url),Me(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Me(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new pye(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new gye(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class pye{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=x0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Gl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class gye{constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const og=Symbol("INITIAL_DATA");var Lr,av,pC;class $4{constructor(){C(this,av);C(this,Lr,Object.create(null))}get(e,n=null){if(n){const i=P(this,av,pC).call(this,e);return i.promise.then(()=>n(i.data)),null}const r=u(this,Lr)[e];if(!r||r.data===og)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=u(this,Lr)[e];return!!n&&n.data!==og}delete(e){const n=u(this,Lr)[e];return!n||n.data===og?!1:(delete u(this,Lr)[e],!0)}resolve(e,n=null){const r=P(this,av,pC).call(this,e);r.data=n,r.resolve()}clear(){var e;for(const n in u(this,Lr)){const{data:r}=u(this,Lr)[n];(e=r==null?void 0:r.bitmap)==null||e.close()}A(this,Lr,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Lr)){const{data:n}=u(this,Lr)[e];n!==og&&(yield[e,n])}}}Lr=new WeakMap,av=new WeakSet,pC=function(e){var n;return(n=u(this,Lr))[e]||(n[e]={...Promise.withResolvers(),data:og})};const mye=1e5,gj=30;var bj,ol,Fr,ov,lv,cu,Da,cv,uv,uu,hv,cf,ll,uf,dv,hf,hu,fv,pv,df,du,gv,ff,pf,xo,L4,F4,gC,ci,Bb,mC,B4,U4;const Cn=class Cn{constructor({textContentSource:e,container:n,viewport:r}){C(this,xo);C(this,ol,Promise.withResolvers());C(this,Fr,null);C(this,ov,!1);C(this,lv,!!((bj=globalThis.FontInspector)!=null&&bj.enabled));C(this,cu,null);C(this,Da,null);C(this,cv,0);C(this,uv,0);C(this,uu,null);C(this,hv,null);C(this,cf,0);C(this,ll,0);C(this,uf,Object.create(null));C(this,dv,[]);C(this,hf,null);C(this,hu,[]);C(this,fv,new WeakMap);C(this,pv,null);var l;if(e instanceof ReadableStream)A(this,hf,e);else if(typeof e=="object")A(this,hf,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Fr,A(this,hv,n)),A(this,ll,r.scale*aa.pixelRatio),A(this,cf,r.rotation),A(this,Da,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=r.rawDims;A(this,pv,[1,0,0,-1,-a,o+s]),A(this,uv,i),A(this,cv,s),P(l=Cn,ci,B4).call(l),n.style.setProperty("--min-font-size",u(Cn,ff)),oh(n,r),u(this,ol).promise.finally(()=>{u(Cn,pf).delete(this),A(this,Da,null),A(this,uf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=hn.platform;return me(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,uu).read().then(({value:n,done:r})=>{if(r){u(this,ol).resolve();return}u(this,cu)??A(this,cu,n.lang),Object.assign(u(this,uf),n.styles),P(this,xo,L4).call(this,n.items),e()},u(this,ol).reject)};return A(this,uu,u(this,hf).getReader()),u(Cn,pf).add(this),e(),u(this,ol).promise}update({viewport:e,onBefore:n=null}){var s;const r=e.scale*aa.pixelRatio,i=e.rotation;if(i!==u(this,cf)&&(n==null||n(),A(this,cf,i),oh(u(this,hv),{rotation:i})),r!==u(this,ll)){n==null||n(),A(this,ll,r);const a={div:null,properties:null,ctx:P(s=Cn,ci,Bb).call(s,u(this,cu))};for(const o of u(this,hu))a.properties=u(this,fv).get(o),a.div=o,P(this,xo,gC).call(this,a)}}cancel(){var n;const e=new Gl("TextLayer task cancelled.");(n=u(this,uu))==null||n.cancel(e).catch(()=>{}),A(this,uu,null),u(this,ol).reject(e)}get textDivs(){return u(this,hu)}get textContentItemsStr(){return u(this,dv)}static cleanup(){if(!(u(this,pf).size>0)){u(this,df).clear();for(const{canvas:e}of u(this,du).values())e.remove();u(this,du).clear()}}};ol=new WeakMap,Fr=new WeakMap,ov=new WeakMap,lv=new WeakMap,cu=new WeakMap,Da=new WeakMap,cv=new WeakMap,uv=new WeakMap,uu=new WeakMap,hv=new WeakMap,cf=new WeakMap,ll=new WeakMap,uf=new WeakMap,dv=new WeakMap,hf=new WeakMap,hu=new WeakMap,fv=new WeakMap,pv=new WeakMap,df=new WeakMap,du=new WeakMap,gv=new WeakMap,ff=new WeakMap,pf=new WeakMap,xo=new WeakSet,L4=function(e){var i,s;if(u(this,ov))return;(s=u(this,Da)).ctx??(s.ctx=P(i=Cn,ci,Bb).call(i,u(this,cu)));const n=u(this,hu),r=u(this,dv);for(const a of e){if(n.length>mye){ge("Ignoring additional textDivs for performance reasons."),A(this,ov,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,Fr);A(this,Fr,document.createElement("span")),u(this,Fr).classList.add("markedContent"),a.id&&u(this,Fr).setAttribute("id",`${a.id}`),o.append(u(this,Fr))}else a.type==="endMarkedContent"&&A(this,Fr,u(this,Fr).parentNode);continue}r.push(a.str),P(this,xo,F4).call(this,a)}},F4=function(e){var g;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,hu).push(n);const i=ee.transform(u(this,pv),e.transform);let s=Math.atan2(i[1],i[0]);const a=u(this,uf)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=u(this,lv)&&a.fontSubstitution||a.fontFamily;o=Cn.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),c=l*P(g=Cn,ci,U4).call(g,o,a,u(this,cu));let h,d;s===0?(h=i[4],d=i[5]-c):(h=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));const f=n.style;f.left=`${(100*h/u(this,uv)).toFixed(2)}%`,f.top=`${(100*d/u(this,cv)).toFixed(2)}%`,f.setProperty("--font-height",`${l.toFixed(2)}px`),f.fontFamily=o,r.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,u(this,lv)&&(n.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const m=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);m!==b&&Math.max(m,b)/Math.min(m,b)>1.5&&(p=!0)}if(p&&(r.canvasWidth=a.vertical?e.height:e.width),u(this,fv).set(n,r),u(this,Da).div=n,u(this,Da).properties=r,P(this,xo,gC).call(this,u(this,Da)),r.hasText&&u(this,Fr).append(n),r.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),u(this,Fr).append(m)}},gC=function(e){var a;const{div:n,properties:r,ctx:i}=e,{style:s}=n;if(r.canvasWidth!==0&&r.hasText){const{fontFamily:o}=s,{canvasWidth:l,fontSize:c}=r;P(a=Cn,ci,mC).call(a,i,c*u(this,ll),o);const{width:h}=i.measureText(n.textContent);h>0&&s.setProperty("--scale-x",l*u(this,ll)/h)}r.angle!==0&&s.setProperty("--rotate",`${r.angle}deg`)},ci=new WeakSet,Bb=function(e=null){let n=u(this,du).get(e||(e=""));if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,du).set(e,n),u(this,gv).set(n,{size:0,family:""})}return n},mC=function(e,n,r){const i=u(this,gv).get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)},B4=function(){if(u(this,ff)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,ff,e.getBoundingClientRect().height),e.remove()},U4=function(e,n,r){const i=u(this,df).get(e);if(i)return i;const s=P(this,ci,Bb).call(this,r);s.canvas.width=s.canvas.height=gj,P(this,ci,mC).call(this,s,gj,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return o?c=o/(o+l):(hn.platform.isFirefox&&ge("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?c=n.ascent:n.descent&&(c=1+n.descent)),u(this,df).set(e,c),c},C(Cn,ci),C(Cn,df,new Map),C(Cn,du,new Map),C(Cn,gv,new WeakMap),C(Cn,ff,null),C(Cn,pf,new Set);let uy=Cn;const yye=100;function z4(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new yC,{docId:n}=e,r=t.url?Ame(t.url):null,i=t.data?Eme(t.data):null,s=t.httpHeaders||null,a=t.withCredentials===!0,o=t.password??null,l=t.range instanceof H4?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let h=t.worker instanceof hy?t.worker:null;const d=t.verbosity,f=typeof t.docBaseUrl=="string"&&!k_(t.docBaseUrl)?t.docBaseUrl:null,p=ob(t.cMapUrl),g=t.cMapPacked!==!1,m=t.CMapReaderFactory||(sr?Mme:tj),b=ob(t.iccUrl),y=ob(t.standardFontDataUrl),w=t.StandardFontDataFactory||(sr?Rme:nj),v=ob(t.wasmUrl),_=t.WasmFactory||(sr?jme:rj),x=t.stopAtErrors!==!0,S=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,T=t.isEvalSupported!==!1,O=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!sr,k=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!sr&&(hn.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,N=typeof t.disableFontFace=="boolean"?t.disableFontFace:sr,I=t.fontExtraProperties===!0,R=t.enableXfa===!0,F=t.ownerDocument||globalThis.document,D=t.disableRange===!0,j=t.disableStream===!0,B=t.disableAutoFetch===!0,$=t.pdfBug===!0,U=t.CanvasFactory||(sr?Ime:Ome),V=t.FilterFactory||(sr?Nme:kme),G=t.enableHWA===!0,W=t.useWasm!==!1,Y=l?l.length:t.length??NaN,pe=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!sr&&!N,he=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(m===tj&&w===nj&&_===rj&&p&&y&&v&&yg(p,document.baseURI)&&yg(y,document.baseURI)&&yg(v,document.baseURI)),Se=null;Jge(d);const ke={canvasFactory:new U({ownerDocument:F,enableHWA:G}),filterFactory:new V({docId:n,ownerDocument:F}),cMapReaderFactory:he?null:new m({baseUrl:p,isCompressed:g}),standardFontDataFactory:he?null:new w({baseUrl:y}),wasmFactory:he?null:new _({baseUrl:v})};h||(h=hy.create({verbosity:d,port:Qs.workerPort}),e._worker=h);const fn={docId:n,apiVersion:"5.4.530",data:i,password:o,disableAutoFetch:B,rangeChunkSize:c,length:Y,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:S,disableFontFace:N,ignoreErrors:x,isEvalSupported:T,isOffscreenCanvasSupported:O,isImageDecoderSupported:k,canvasMaxAreaInBytes:M,fontExtraProperties:I,useSystemFonts:pe,useWasm:W,useWorkerFetch:he,cMapUrl:p,iccUrl:b,standardFontDataUrl:y,wasmUrl:v}},Z={ownerDocument:F,pdfBug:$,styleElement:Se,loadingParams:{disableAutoFetch:B,enableXfa:R}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const de=h.messageHandler.sendWithPromise("GetDocRequest",fn,i?[i.buffer]:null);let fe;if(l)fe=new Zme(l,{disableRange:D,disableStream:j});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const q=yg(r)?rye:sr?fye:lye;fe=new q({url:r,length:Y,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:D,disableStream:j})}return de.then(q=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ht=new Eg(n,q,h.port),Ne=new wye(ht,e,fe,Z,ke,G);e._transport=Ne,ht.send("Ready",null)})}).catch(e._capability.reject),e}var l1;const c1=class c1{constructor(){K(this,"_capability",Promise.withResolvers());K(this,"_transport",null);K(this,"_worker",null);K(this,"docId",`d${Qt(c1,l1)._++}`);K(this,"destroyed",!1);K(this,"onPassword",null);K(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,n,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};l1=new WeakMap,C(c1,l1,0);let yC=c1;var fu,mv,yv,vv,bv;class H4{constructor(e,n,r=!1,i=null){C(this,fu,Promise.withResolvers());C(this,mv,[]);C(this,yv,[]);C(this,vv,[]);C(this,bv,[]);this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){u(this,bv).push(e)}addProgressListener(e){u(this,vv).push(e)}addProgressiveReadListener(e){u(this,yv).push(e)}addProgressiveDoneListener(e){u(this,mv).push(e)}onDataRange(e,n){for(const r of u(this,bv))r(e,n)}onDataProgress(e,n){u(this,fu).promise.then(()=>{for(const r of u(this,vv))r(e,n)})}onDataProgressiveRead(e){u(this,fu).promise.then(()=>{for(const n of u(this,yv))n(e)})}onDataProgressiveDone(){u(this,fu).promise.then(()=>{for(const e of u(this,mv))e()})}transportReady(){u(this,fu).resolve()}requestDataRange(e,n){rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}fu=new WeakMap,mv=new WeakMap,yv=new WeakMap,vv=new WeakMap,bv=new WeakMap;class vye{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $a,pu,kg;class bye{constructor(e,n,r,i=!1){C(this,pu);C(this,$a,!1);this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new KR:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new $4,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new v0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:n=e.canvas,viewport:r,intent:i="display",annotationMode:s=Fo.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:g=null}){var k,M,N;(k=this._stats)==null||k.time("Overall");const m=this._transport.getRenderingIntent(i,s,d,f),{renderingIntent:b,cacheKey:y}=m;A(this,$a,!1),l||(l=this._transport.getOptionalContentConfig(b));let w=this._intentStates.get(y);w||(w=Object.create(null),this._intentStates.set(y,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const v=!!(b&Zr.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(m));const _=!!(this._pdfBug&&((N=globalThis.StepperManager)!=null&&N.enabled)),x=!this.recordedBBoxes&&(p||_),S=I=>{var R,F;if(w.renderTasks.delete(T),x){const D=(R=T.gfx)==null?void 0:R.dependencyTracker.take();D&&(T.stepper&&T.stepper.setOperatorBBoxes(D,T.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=D))}v&&A(this,$a,!0),P(this,pu,kg).call(this),I?(T.capability.reject(I),this._abortOperatorList({intentState:w,reason:I instanceof Error?I:new Error(I)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new vC({callback:S,params:{canvas:n,canvasContext:e,dependencyTracker:x?new $me(n,w.operatorList.length,_):null,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:g});(w.renderTasks||(w.renderTasks=new Set)).add(T);const O=T.task;return Promise.all([w.displayReadyCapability.promise,l]).then(([I,R])=>{var F;if(this.destroyed){S();return}if((F=this._stats)==null||F.time("Rendering"),!(R.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:I,optionalContentConfig:R}),T.operatorListChanged()}).catch(S),O}getOperatorList({intent:e="display",annotationMode:n=Fo.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,n,r,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>cy.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function s(){a.read().then(function({value:l,done:c}){if(c){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=n.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),A(this,$a,!1),Promise.all(e)}cleanup(e=!1){A(this,$a,!0);const n=P(this,pu,kg).call(this);return e&&n&&this._stats&&(this._stats=new KR),n}_startRenderPage(e,n){var i,s;const r=this._intentStates.get(n);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&P(this,pu,kg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:i},a).getReader(),c=this._intentStates.get(n);c.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),h())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();P(this,pu,kg).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof uk){let i=yye;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new Gl(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}$a=new WeakMap,pu=new WeakSet,kg=function(){if(!u(this,$a)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,$a,!1),!0};var cl,is,La,gu,u1,mu,yu,cr,Ub,W4,V4,Ng,gf,zb;const yt=class yt{constructor({name:e=null,port:n=null,verbosity:r=Qge()}={}){C(this,cr);C(this,cl,Promise.withResolvers());C(this,is,null);C(this,La,null);C(this,gu,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(u(yt,yu).has(n))throw new Error("Cannot use more than one PDFWorker per port.");u(yt,yu).set(n,this),P(this,cr,W4).call(this,n)}else P(this,cr,V4).call(this)}get promise(){return u(this,cl).promise}get port(){return u(this,La)}get messageHandler(){return u(this,is)}destroy(){var e,n;this.destroyed=!0,(e=u(this,gu))==null||e.terminate(),A(this,gu,null),u(yt,yu).delete(u(this,La)),A(this,La,null),(n=u(this,is))==null||n.destroy(),A(this,is,null)}static create(e){const n=u(this,yu).get(e==null?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new yt(e)}static get workerSrc(){if(Qs.workerSrc)return Qs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return me(this,"_setupFakeWorkerGlobal",(async()=>u(this,gf,zb)?u(this,gf,zb):(await import(this.workerSrc)).WorkerMessageHandler)())}};cl=new WeakMap,is=new WeakMap,La=new WeakMap,gu=new WeakMap,u1=new WeakMap,mu=new WeakMap,yu=new WeakMap,cr=new WeakSet,Ub=function(){u(this,cl).resolve(),u(this,is).send("configure",{verbosity:this.verbosity})},W4=function(e){A(this,La,e),A(this,is,new Eg("main","worker",e)),u(this,is).on("ready",()=>{}),P(this,cr,Ub).call(this)},V4=function(){if(u(yt,mu)||u(yt,gf,zb)){P(this,cr,Ng).call(this);return}let{workerSrc:e}=yt;try{yt._isSameOrigin(window.location,e)||(e=yt._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new Eg("main","worker",n),i=()=>{s.abort(),r.destroy(),n.terminate(),this.destroyed?u(this,cl).reject(new Error("Worker was destroyed")):P(this,cr,Ng).call(this)},s=new AbortController;n.addEventListener("error",()=>{u(this,gu)||i()},{signal:s.signal}),r.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}A(this,is,r),A(this,La,n),A(this,gu,n),P(this,cr,Ub).call(this)}),r.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{P(this,cr,Ng).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{O_("The worker has been disabled.")}P(this,cr,Ng).call(this)},Ng=function(){u(yt,mu)||(ge("Setting up fake worker."),A(yt,mu,!0)),yt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,cl).reject(new Error("Worker was destroyed"));return}const n=new Pme;A(this,La,n);const r=`fake${Qt(yt,u1)._++}`,i=new Eg(r+"_worker",r,n);e.setup(i,n),A(this,is,new Eg(r,r+"_worker",n)),P(this,cr,Ub).call(this)}).catch(e=>{u(this,cl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},gf=new WeakSet,zb=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(yt,gf),C(yt,u1,0),C(yt,mu,!1),C(yt,yu,new WeakMap),sr&&(A(yt,mu,!0),Qs.workerSrc||(Qs.workerSrc="./pdf.worker.mjs")),yt._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(n,r);return r.origin===i.origin},yt._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},yt.fromPort=e=>{if(ume("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return yt.create(e)};let hy=yt;var Fa,Us,mf,yf,Ba,vu,Ig;class wye{constructor(e,n,r,i,s,a){C(this,vu);C(this,Fa,new Map);C(this,Us,new Map);C(this,mf,new Map);C(this,yf,new Map);C(this,Ba,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new $4,this.fontLoader=new xme({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return me(this,"annotationStorage",new dk)}getRenderingIntent(e,n=Fo.ENABLE,r=null,i=!1,s=!1){let a=Zr.DISPLAY,o=eC;switch(e){case"any":a=Zr.ANY;break;case"display":break;case"print":a=Zr.PRINT;break;default:ge(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Zr.PRINT&&r instanceof x4?r:this.annotationStorage;switch(n){case Fo.DISABLE:a+=Zr.ANNOTATIONS_DISABLE;break;case Fo.ENABLE:break;case Fo.ENABLE_FORMS:a+=Zr.ANNOTATIONS_FORMS;break;case Fo.ENABLE_STORAGE:a+=Zr.ANNOTATIONS_STORAGE,o=l.serializable;break;default:ge(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(a+=Zr.IS_EDITING),s&&(a+=Zr.OPLIST);const{ids:c,hash:h}=l.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=u(this,Ba))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of u(this,Us).values())e.push(i._destroy());u(this,Us).clear(),u(this,mf).clear(),u(this,yf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Fa).clear(),this.filterFactory.destroy(),uy.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Gl("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{Me(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}Me(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=n.onProgress)==null||o.call(n,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=n.onProgress)==null||c.call(n,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(r,i)=>{Me(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}Me(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new vye(r,this))}),e.on("DocException",r=>{n._capability.reject(gr(r))}),e.on("PasswordRequest",r=>{A(this,Ba,Promise.withResolvers());try{if(!n.onPassword)throw gr(r);const i=s=>{s instanceof Error?u(this,Ba).reject(s):u(this,Ba).resolve({password:s})};n.onPassword(i,r.code)}catch(i){u(this,Ba).reject(i)}return u(this,Ba).promise}),e.on("DataLoaded",r=>{var i;(i=n.onProgress)==null||i.call(n,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;u(this,Us).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const f=s.error;ge(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const o=new tC(s),l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,c=new _me(o,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:h}=s;Me(h,"The imageRef must be defined.");for(const f of u(this,Us).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===h)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":this.commonObjs.resolve(r,new Sme(s));break;case"Image":this.commonObjs.resolve(r,s);break;case"Pattern":const d=new nC(s);this.commonObjs.resolve(r,d.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,a])=>{var l;if(this.destroyed)return;const o=u(this,Us).get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=n.onProgress)==null||i.call(n,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&ge("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=u(this,mf).get(n);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&u(this,yf).set(s.refStr,e);const a=new bye(n,s,this,this._params.pdfBug);return u(this,Us).set(n,a),a});return u(this,mf).set(n,i),i}getPageIndex(e){return rC(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return P(this,vu,Ig).call(this,"GetFieldObjects")}hasJSActions(){return P(this,vu,Ig).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return P(this,vu,Ig).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,vu,Ig).call(this,"GetOptionalContentConfig").then(n=>new Qme(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=u(this,Fa).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Yme(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:i[2]}});return u(this,Fa).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of u(this,Us).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Fa).clear(),this.filterFactory.destroy(!0),uy.cleanup()}}cachedPageNumber(e){if(!rC(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,yf).get(n)??null}}Fa=new WeakMap,Us=new WeakMap,mf=new WeakMap,yf=new WeakMap,Ba=new WeakMap,vu=new WeakSet,Ig=function(e,n=null){const r=u(this,Fa).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return u(this,Fa).set(e,i),i};var ul;class xye{constructor(e){C(this,ul,null);K(this,"onContinue",null);K(this,"onError",null);A(this,ul,e)}get promise(){return u(this,ul).capability.promise}cancel(e=0){u(this,ul).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,ul).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=u(this,ul);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}ul=new WeakMap;var hl,bu;const xc=class xc{constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:g=null}){C(this,hl,null);this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xye(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=g}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(xc,bu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(xc,bu).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new xd(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,n=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),u(this,hl)&&(window.cancelAnimationFrame(u(this,hl)),A(this,hl,null)),u(xc,bu).delete(this._canvas),e||(e=new uk(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,n;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(n=this.stepper)==null||n.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,hl,window.requestAnimationFrame(()=>{A(this,hl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(xc,bu).delete(this._canvas),this.callback())))}};hl=new WeakMap,bu=new WeakMap,C(xc,bu,new WeakSet);let vC=xc;const _ye="5.4.530",Sye="50cc4adac";var Br,wu,vf,an,wv,bf,Ua,xv,dl,ss,_v,Qe,bC,wC,xC,pc,G4,ko;const mr=class mr{constructor({editor:e=null,uiManager:n=null}){C(this,Qe);C(this,Br,null);C(this,wu,null);C(this,vf);C(this,an,null);C(this,wv,!1);C(this,bf,!1);C(this,Ua,null);C(this,xv);C(this,dl,null);C(this,ss,null);var r,i;e?(A(this,bf,!1),A(this,Ua,e)):A(this,bf,!0),A(this,ss,(e==null?void 0:e._uiManager)||n),A(this,xv,u(this,ss)._eventBus),A(this,vf,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=u(this,ss))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),u(mr,_v)||A(mr,_v,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return me(this,"_keyboardManager",new w0([[["Escape","mac+Escape"],mr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],mr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],mr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],mr.prototype._moveToPrevious],[["Home","mac+Home"],mr.prototype._moveToBeginning],[["End","mac+End"],mr.prototype._moveToEnd]]))}renderButton(){const e=A(this,Br,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ua)&&(e.ariaControls=`${u(this,Ua).id}_colorpicker_dropdown`);const n=u(this,ss)._signal;e.addEventListener("click",P(this,Qe,pc).bind(this),{signal:n}),e.addEventListener("keydown",P(this,Qe,xC).bind(this),{signal:n});const r=A(this,wu,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=u(this,vf),e.append(r),e}renderMainDropdown(){const e=A(this,an,P(this,Qe,bC).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Br)){P(this,Qe,pc).call(this,e);return}const n=e.target.getAttribute("data-color");n&&P(this,Qe,wC).call(this,n,e)}_moveToNext(e){var n,r;if(!u(this,Qe,ko)){P(this,Qe,pc).call(this,e);return}if(e.target===u(this,Br)){(n=u(this,an).firstElementChild)==null||n.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var n,r;if(e.target===((n=u(this,an))==null?void 0:n.firstElementChild)||e.target===u(this,Br)){u(this,Qe,ko)&&this._hideDropdownFromKeyboard();return}u(this,Qe,ko)||P(this,Qe,pc).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var n;if(!u(this,Qe,ko)){P(this,Qe,pc).call(this,e);return}(n=u(this,an).firstElementChild)==null||n.focus()}_moveToEnd(e){var n;if(!u(this,Qe,ko)){P(this,Qe,pc).call(this,e);return}(n=u(this,an).lastElementChild)==null||n.focus()}hideDropdown(){var e,n;(e=u(this,an))==null||e.classList.add("hidden"),u(this,Br).ariaExpanded="false",(n=u(this,dl))==null||n.abort(),A(this,dl,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,bf)){if(!u(this,Qe,ko)){(e=u(this,Ua))==null||e.unselect();return}this.hideDropdown(),u(this,Br).focus({preventScroll:!0,focusVisible:u(this,wv)})}}updateColor(e){if(u(this,wu)&&(u(this,wu).style.backgroundColor=e),!u(this,an))return;const n=u(this,ss).highlightColors.values();for(const r of u(this,an).children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){var e,n;(e=u(this,Br))==null||e.remove(),A(this,Br,null),A(this,wu,null),(n=u(this,an))==null||n.remove(),A(this,an,null)}};Br=new WeakMap,wu=new WeakMap,vf=new WeakMap,an=new WeakMap,wv=new WeakMap,bf=new WeakMap,Ua=new WeakMap,xv=new WeakMap,dl=new WeakMap,ss=new WeakMap,_v=new WeakMap,Qe=new WeakSet,bC=function(){const e=document.createElement("div"),n=u(this,ss)._signal;e.addEventListener("contextmenu",Hi,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ua)&&(e.id=`${u(this,Ua).id}_colorpicker_dropdown`);for(const[r,i]of u(this,ss).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",u(mr,_v)[r]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===u(this,vf),s.addEventListener("click",P(this,Qe,wC).bind(this,i),{signal:n}),e.append(s)}return e.addEventListener("keydown",P(this,Qe,xC).bind(this),{signal:n}),e},wC=function(e,n){n.stopPropagation(),u(this,xv).dispatch("switchannotationeditorparams",{source:this,type:Ie.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},xC=function(e){mr._keyboardManager.exec(this,e)},pc=function(e){if(u(this,Qe,ko)){this.hideDropdown();return}if(A(this,wv,e.detail===0),u(this,dl)||(A(this,dl,new AbortController),window.addEventListener("pointerdown",P(this,Qe,G4).bind(this),{signal:u(this,ss).combinedSignal(u(this,dl))})),u(this,Br).ariaExpanded="true",u(this,an)){u(this,an).classList.remove("hidden");return}const n=A(this,an,P(this,Qe,bC).call(this));u(this,Br).append(n)},G4=function(e){var n;(n=u(this,an))!=null&&n.contains(e.target)||this.hideDropdown()},ko=function(){return u(this,an)&&!u(this,an).classList.contains("hidden")},C(mr,_v,null);let Vx=mr;var zs,Sv,wf,Av;const _c=class _c{constructor(e){C(this,zs,null);C(this,Sv,null);C(this,wf,null);A(this,Sv,e),A(this,wf,e._uiManager),u(_c,Av)||A(_c,Av,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,zs))return u(this,zs);const{editorType:e,colorType:n,color:r}=u(this,Sv),i=A(this,zs,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",u(_c,Av)[e]),i.addEventListener("input",()=>{u(this,wf).updateParams(n,i.value)},{signal:u(this,wf)._signal}),i}update(e){u(this,zs)&&(u(this,zs).value=e)}destroy(){var e;(e=u(this,zs))==null||e.remove(),A(this,zs,null)}hideDropdown(){}};zs=new WeakMap,Sv=new WeakMap,wf=new WeakMap,Av=new WeakMap,C(_c,Av,null);let Gx=_c;function mj(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function lg(t){return Math.max(0,Math.min(255,255*t))}class yj{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lg(e),[e,e,e]}static G_HTML([e]){const n=mj(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(lg)}static RGB_HTML(e){return`#${e.map(mj).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[lg(1-Math.min(1,e+i)),lg(1-Math.min(1,r+i)),lg(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,s=1-n,a=1-r,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class Aye{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rt("Abstract method `_createSVG` called.")}}class qx extends Aye{_createSVG(e){return document.createElementNS(ua,e)}}const Eye=9,ch=new WeakSet,Tye=new Date().getTimezoneOffset()*60*1e3;class eA{static create(e){switch(e.data.annotationType){case Ht.LINK:return new gk(e);case Ht.TEXT:return new Pye(e);case Ht.WIDGET:switch(e.data.fieldType){case"Tx":return new Oye(e);case"Btn":return e.data.radioButton?new X4(e):e.data.checkBox?new Nye(e):new Iye(e);case"Ch":return new Mye(e);case"Sig":return new kye(e)}return new yh(e);case Ht.POPUP:return new SC(e);case Ht.FREETEXT:return new eU(e);case Ht.LINE:return new jye(e);case Ht.SQUARE:return new Dye(e);case Ht.CIRCLE:return new $ye(e);case Ht.POLYLINE:return new tU(e);case Ht.CARET:return new Fye(e);case Ht.INK:return new mk(e);case Ht.POLYGON:return new Lye(e);case Ht.HIGHLIGHT:return new nU(e);case Ht.UNDERLINE:return new Bye(e);case Ht.SQUIGGLY:return new Uye(e);case Ht.STRIKEOUT:return new zye(e);case Ht.STAMP:return new rU(e);case Ht.FILEATTACHMENT:return new Hye(e);default:return new Pt(e)}}}var xu,xf,Pi,Ev,_C;const Sk=class Sk{constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){C(this,Ev);C(this,xu,null);C(this,xf,!1);C(this,Pi,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Sk._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,n=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:i}=this.data;let s=-1/0,a=-1/0;if((n==null?void 0:n.length)>=8){for(let l=0;l<n.length;l+=8)n[l+1]>a?(a=n[l+1],s=n[l+2]):n[l+1]===a&&(s=Math.max(s,n[l+2]));return[s,a]}if((r==null?void 0:r.length)>=1){for(const l of r)for(let c=0,h=l.length;c<h;c+=2)l[c+1]>a?(a=l[c+1],s=l[c]):l[c+1]===a&&(s=Math.max(s,l[c]));if(s!==1/0)return[s,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-a)/i,e}get commentText(){var n,r,i;const{data:e}=this;return((r=(n=this.annotationStorage.getRawValue(`${oy}${e.id}`))==null?void 0:n.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:n}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:r})||this.annotationStorage.setValue(`${oy}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,n;(n=((e=u(this,Pi))==null?void 0:e.popup)||this.popup)==null||n.remove(),A(this,Pi,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(u(this,xu)||A(this,xu,{rect:this.data.rect.slice(0)}));const{rect:n,popup:r}=e;n&&P(this,Ev,_C).call(this,n);let i=((s=u(this,Pi))==null?void 0:s.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=u(this,Pi).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),A(this,Pi,null),this.popup=null))}resetEdited(){var e;u(this,xu)&&(P(this,Ev,_C).call(this,u(this,xu).rect),(e=u(this,Pi))==null||e.popup.resetEdited(),A(this,xu,null))}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),!(this instanceof yh)&&!(this instanceof gk)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof SC){const{rotation:m}=n;return!n.hasOwnCanvas&&m!==0&&this.setRotation(m,s),s}const{width:o,height:l}=this;if(!e&&n.borderStyle.width>0){a.borderWidth=`${n.borderStyle.width}px`;const m=n.borderStyle.horizontalCornerRadius,b=n.borderStyle.verticalCornerRadius;if(m>0||b>0){const w=`calc(${m}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=w}else if(this instanceof X4){const w=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=w}switch(n.borderStyle.style){case Mh.SOLID:a.borderStyle="solid";break;case Mh.DASHED:a.borderStyle="dashed";break;case Mh.BEVELED:ge("Unimplemented border style: beveled");break;case Mh.INSET:ge("Unimplemented border style: inset");break;case Mh.UNDERLINE:a.borderBottomStyle="solid";break}const y=n.borderColor||null;y?(A(this,xf,!0),a.borderColor=ee.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const c=ee.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;a.left=`${100*(c[0]-f)/h}%`,a.top=`${100*(c[1]-p)/d}%`;const{rotation:g}=n;return n.hasOwnCanvas||g===0?(a.width=`${100*o/h}%`,a.height=`${100*l/d}%`):this.setRotation(g,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),n.style.width=`${100*s/r}%`,n.style.height=`${100*a/i}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const s=i.detail[n],a=s[0],o=s.slice(1);i.target.style[r]=yj[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:yj[`${a}_rgb`](o)})};return me(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail)){const s=e[i]||r[i];s==null||s(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,s]of Object.entries(n)){const a=r[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,s]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,b,y,w]=e.subarray(2,6);if(i===m&&s===b&&n===y&&r===w)return}const{style:a}=this.container;let o;if(u(this,xf)){const{borderColor:m,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-n,c=s-r,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,b=e.length;m<b;m+=8){const y=e[m],w=e[m+1],v=e[m+2],_=e[m+3],x=h.createElement("rect"),S=(v-n)/l,T=(s-w)/c,O=(y-v)/l,k=(w-_)/c;x.setAttribute("x",S),x.setAttribute("y",T),x.setAttribute("width",O),x.setAttribute("height",k),p.append(x),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${T}" width="${O}" height="${k}"/>`)}u(this,xf)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(e=null){const{data:n}=this;let r,i;e?(r={str:e.text},i=e.date):(r=n.contentsObj,i=n.modificationDate),A(this,Pi,new SC({data:{color:n.color,titleObj:n.titleObj,modificationDate:i,contentsObj:r,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,Pi)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,Pi)}render(){rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===n)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!ch.has(c)){ge(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==n&&ch.has(i)&&r.push({id:a,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};xu=new WeakMap,xf=new WeakMap,Pi=new WeakMap,Ev=new WeakSet,_C=function(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),n.left=`${100*(e[0]-o)/s}%`,n.top=`${100*(a-e[3]+l)/a}%`,i===0?(n.width=`${100*(e[2]-e[0])/s}%`,n.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Pt=Sk;class Cye extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var ri,gc,q4,K4;class gk extends Pt{constructor(n,r=null){super(n,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});C(this,ri);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let s=!1;return n.url?(r.addLinkAttributes(i,n.url,n.newWindow),s=!0):n.action?(this._bindNamedAction(i,n.action,n.overlaidText),s=!0):n.attachment?(P(this,ri,q4).call(this,i,n.attachment,n.overlaidText,n.attachmentDest),s=!0):n.setOCGState?(P(this,ri,K4).call(this,i,n.setOCGState,n.overlaidText),s=!0):n.dest?(this._bindLink(i,n.dest,n.overlaidText),s=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),s=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(n,r,i=""){n.href=this.linkService.getDestinationHash(r),n.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&P(this,ri,gc).call(this),i&&(n.title=i)}_bindNamedAction(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(n.title=i),P(this,ri,gc).call(this)}_bindJSAction(n,r){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const a=i.get(s);a&&(n[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}r.overlaidText&&(n.title=r.overlaidText),n.onclick||(n.onclick=()=>!1),P(this,ri,gc).call(this)}_bindResetFormAction(n,r){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),P(this,ri,gc).call(this),!this._fieldObjects){ge('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(n.onclick=()=>!1);return}n.onclick=()=>{var d;i==null||i();const{fields:s,refs:a,include:o}=r,l=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const p of s){const g=this._fieldObjects[p]||[];for(const{id:m}of g)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===o&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const m=f.defaultValue||"";c.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;c.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";c.setValue(p,{value:m});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!ch.has(g)){ge(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}ri=new WeakSet,gc=function(){this.container.setAttribute("data-internal-link","")},q4=function(n,r,i="",s=null){n.href=this.linkService.getAnchorUrl(""),r.description?n.title=r.description:i&&(n.title=i),n.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,s),!1},P(this,ri,gc).call(this)},K4=function(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(n.title=i),P(this,ri,gc).call(this)};class Pye extends Pt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class yh extends Pt{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return hn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,s){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!n.focused||!a.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,n,r,i){var s,a,o;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,l,c,i),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,n,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":ee.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Eye,s=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(c/(GS*i))||1,d=c/h;a=Math.min(i,l(d/GS))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(c/GS))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=ee.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class Oye extends yh{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[n]=r),s.setValue(a.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),ch.add(r),this.contentElement=r,r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,g=!!f&&this.enableScripting;d&&(r.title=d),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",b=>{e.setValue(n,{value:b.target.value}),this.setPropertyOnSiblings(r,"value",b.target.value,"value"),h.formattedValue=null}),r.addEventListener("resetform",b=>{const y=this.data.defaultFieldValue??"";r.value=h.userValue=y,h.formattedValue=null});let m=b=>{const{formattedValue:y}=h;y!=null&&(b.target.value=y),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",y=>{var v;if(h.focused)return;const{target:w}=y;if(g&&(w.type=f,p&&(w.step=p)),h.userValue){const _=h.userValue;if(g)if(f==="time"){const x=new Date(_),S=[x.getHours(),x.getMinutes(),x.getSeconds()];w.value=S.map(T=>T.toString().padStart(2,"0")).join(":")}else w.value=new Date(_-Tye).toISOString().split(f==="date"?"T":".",1)[0];else w.value=_}h.lastCommittedValue=w.value,h.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(h.focused=!0)}),r.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const w={value(v){h.userValue=v.detail.value??"",g||e.setValue(n,{value:h.userValue.toString()}),v.target.value=h.userValue},formattedValue(v){const{formattedValue:_}=v.detail;h.formattedValue=_,_!=null&&v.target!==document.activeElement&&(v.target.value=_);const x={formattedValue:_};g&&(x.value=_),e.setValue(n,x)},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var T;const{charLimit:_}=v.detail,{target:x}=v;if(_===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",_);let S=h.userValue;!S||S.length<=_||(S=S.slice(0,_),x.value=h.userValue=S,e.setValue(n,{value:S}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(w,y)}),r.addEventListener("keydown",y=>{var _;h.commitKey=1;let w=-1;if(y.key==="Escape"?w=0:y.key==="Enter"&&!this.data.multiLine?w=2:y.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:v}=y.target;h.lastCommittedValue!==v&&(h.lastCommittedValue=v,h.userValue=v,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:w,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const b=m;m=null,r.addEventListener("blur",y=>{var _,x;if(!h.focused||!y.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(h.focused=!1);const{target:w}=y;let{value:v}=w;if(g){if(v&&f==="time"){const S=v.split(":").map(T=>parseInt(T,10));v=new Date(2e3,0,1,S[0],S[1],S[2]||0).valueOf(),w.step=""}else v.includes("T")||(v=`${v}T00:00`),v=new Date(v).valueOf();w.type="text"}h.userValue=v,h.lastCommittedValue!==v&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),b(y)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",y=>{var k;h.lastCommittedValue=null;const{data:w,target:v}=y,{value:_,selectionStart:x,selectionEnd:S}=v;let T=x,O=S;switch(y.inputType){case"deleteWordBackward":{const M=_.substring(0,x).match(/\w*[^\w]*$/);M&&(T-=M[0].length);break}case"deleteWordForward":{const M=_.substring(x).match(/^[^\w]*\w*/);M&&(O+=M[0].length);break}case"deleteContentBackward":x===S&&(T-=1);break;case"deleteContentForward":x===S&&(O+=1);break}y.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:_,change:w||"",willCommit:!1,selStart:T,selEnd:O}})}),this._setEventListeners(r,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kye extends yh{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Nye extends yh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return ch.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r)){const h=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue||"Off";a.target.checked=o===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class X4 extends yh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const a of this._getElementsByName(n.fieldName,r))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(ch.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue;a.target.checked=o!=null&&o===n.buttonValue}),this.enableScripting&&this.hasJSActions){const a=n.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const h=a===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=h&&d.id===r;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Iye extends gk{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Mye extends yh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");ch.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,r.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let a=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const c=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const m of i.options)m.selected=g.has(m.value);e.setValue(n,{value:o(!0)}),l=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,g=f.detail.remove;p[g].selected=!1,i.remove(g),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:g,exportValue:m}=f.detail.insert,b=i.children[p],y=document.createElement("option");y.textContent=g,y.value=m,b?b.before(y):i.append(y),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of p){const{displayValue:m,exportValue:b}=g,y=document.createElement("option");y.textContent=m,y.value=b,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);e.setValue(n,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);e.setValue(n,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(n,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var Tv,AC;class SC extends Pt{constructor(n){const{data:r,elements:i,parent:s}=n,a=!!s._commentManager;super(n,{isRenderable:!a&&Pt._hasPopupData(r)});C(this,Tv);if(this.elements=i,a&&Pt._hasPopupData(r)){const o=this.popup=P(this,Tv,AC).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:n}=this;n.classList.add("popupAnnotation"),n.role="comment";const r=this.popup=P(this,Tv,AC).call(this),i=[];for(const s of this.elements)s.popup=r,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${rd}${s}`).join(",")),this.container}}Tv=new WeakSet,AC=function(){return new Rye({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Ur,fl,h1,d1,_f,Sf,It,Hs,pl,_u,Af,Ef,Ws,zr,za,Ha,Mt,Wa,gl,Cv,Va,Tf,Su,ml,gn,yl,_e,Hb,EC,TC,CC,Wb,PC,Y4,J4,Q4,Z4,Vb,Gb,OC;class Rye{constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:h,open:d,commentManager:f=null}){C(this,_e);C(this,Ur,null);C(this,fl,P(this,_e,Q4).bind(this));C(this,h1,P(this,_e,OC).bind(this));C(this,d1,P(this,_e,Gb).bind(this));C(this,_f,P(this,_e,Vb).bind(this));C(this,Sf,null);C(this,It,null);C(this,Hs,null);C(this,pl,null);C(this,_u,null);C(this,Af,null);C(this,Ef,null);C(this,Ws,!1);C(this,zr,null);C(this,za,null);C(this,Ha,null);C(this,Mt,null);C(this,Wa,null);C(this,gl,null);C(this,Cv,null);C(this,Va,null);C(this,Tf,null);C(this,Su,null);C(this,ml,!1);C(this,gn,null);C(this,yl,null);A(this,It,e),A(this,Tf,i),A(this,Hs,a),A(this,Va,o),A(this,Af,l),A(this,Sf,n),A(this,Cv,c),A(this,Ef,h),A(this,_u,r),A(this,Ur,f),A(this,gn,r[0]),A(this,pl,Fx.toDateObject(s)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f||(P(this,_e,Hb).call(this),u(this,It).hidden=!0,d&&P(this,_e,Vb).call(this))}renderCommentButton(){if(u(this,Mt)){u(this,Mt).parentNode||u(this,gn).container.after(u(this,Mt));return}if(u(this,Wa)||P(this,_e,EC).call(this),!u(this,Wa))return;const{signal:e}=A(this,za,new AbortController),n=u(this,gn).hasOwnCommentButton,r=()=>{u(this,Ur).toggleCommentPopup(this,!0,void 0,!n)},i=()=>{u(this,Ur).toggleCommentPopup(this,!1,!0,!n)},s=()=>{u(this,Ur).toggleCommentPopup(this,!1,!1)};if(n){A(this,Mt,u(this,gn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",u(this,fl),{signal:e}),a.addEventListener("click",r,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=A(this,Mt,document.createElement("button"));a.className="annotationCommentButton";const o=u(this,gn).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),P(this,_e,CC).call(this),P(this,_e,TC).call(this),a.addEventListener("keydown",u(this,fl),{signal:e}),a.addEventListener("click",r,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:n}=u(this,gn).commentData;return e?u(this,Af)._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,Mt))==null||e.focus()},0)}getData(){const{richText:e,color:n,opacity:r,creationDate:i,modificationDate:s}=u(this,gn).commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:r,creationDate:i,modificationDate:s}}get elementBeforePopup(){return u(this,Mt)}get comment(){return u(this,yl)||A(this,yl,u(this,gn).commentText),u(this,yl)}set comment(e){e!==this.comment&&(u(this,gn).commentText=A(this,yl,e))}focus(){var e;(e=u(this,gn).container)==null||e.focus()}get parentBoundingClientRect(){return u(this,gn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){u(this,Mt)&&(u(this,Mt).classList.toggle("selected",e),u(this,Mt).ariaExpanded=n)}setSelectedCommentButton(e){u(this,Mt).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,gl))return u(this,gl);const{x:e,y:n,height:r}=u(this,Mt).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=u(this,gn).layer.getBoundingClientRect();return[(e-i)/a,(n+r-s)/o]}set commentPopupPosition(e){A(this,gl,e)}hasDefaultPopupPosition(){return u(this,gl)===null}get commentButtonPosition(){return u(this,Wa)}get commentButtonWidth(){return u(this,Mt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,r]=u(this,gl)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:s,y:a,width:o,height:l}=i;u(this,Ur).showDialog(null,this,s+n*o,a+r*l,{...e,parentDimensions:i})}render(){var r,i;if(u(this,zr))return;const e=A(this,zr,document.createElement("div"));if(e.className="popup",u(this,Sf)){const s=e.style.outlineColor=ee.makeHexColor(...u(this,Sf));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const n=document.createElement("span");if(n.className="header",(r=u(this,Tf))!=null&&r.str){const s=document.createElement("span");s.className="title",n.append(s),{dir:s.dir,str:s.textContent}=u(this,Tf)}if(e.append(n),u(this,pl)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,pl).valueOf()})),s.dateTime=u(this,pl).toISOString(),n.append(s)}B3({html:u(this,_e,Wb)||u(this,Hs).str,dir:(i=u(this,Hs))==null?void 0:i.dir,className:"popupContent"},e),u(this,It).append(e)}updateEdited({rect:e,popup:n,deleted:r}){var i;if(u(this,Ur)){r?(this.remove(),A(this,yl,null)):n&&(n.deleted?this.remove():(P(this,_e,CC).call(this),A(this,yl,n.text))),e&&(A(this,Wa,null),P(this,_e,EC).call(this),P(this,_e,TC).call(this));return}if(r||n!=null&&n.deleted){this.remove();return}P(this,_e,Hb).call(this),u(this,Su)||A(this,Su,{contentsObj:u(this,Hs),richText:u(this,Va)}),e&&A(this,Ha,null),n&&n.text&&(A(this,Va,P(this,_e,J4).call(this,n.text)),A(this,pl,Fx.toDateObject(n.date)),A(this,Hs,null)),(i=u(this,zr))==null||i.remove(),A(this,zr,null)}resetEdited(){var e;u(this,Su)&&({contentsObj:Qt(this,Hs)._,richText:Qt(this,Va)._}=u(this,Su),A(this,Su,null),(e=u(this,zr))==null||e.remove(),A(this,zr,null),A(this,Ha,null))}remove(){var e,n,r;if((e=u(this,za))==null||e.abort(),A(this,za,null),(n=u(this,zr))==null||n.remove(),A(this,zr,null),A(this,ml,!1),A(this,Ws,!1),(r=u(this,Mt))==null||r.remove(),A(this,Mt,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){A(this,ml,this.isVisible),u(this,ml)&&(u(this,It).hidden=!0)}maybeShow(){u(this,Ur)||(P(this,_e,Hb).call(this),u(this,ml)&&(u(this,zr)||P(this,_e,Gb).call(this),A(this,ml,!1),u(this,It).hidden=!1))}get isVisible(){return u(this,Ur)?!1:u(this,It).hidden===!1}}Ur=new WeakMap,fl=new WeakMap,h1=new WeakMap,d1=new WeakMap,_f=new WeakMap,Sf=new WeakMap,It=new WeakMap,Hs=new WeakMap,pl=new WeakMap,_u=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Ws=new WeakMap,zr=new WeakMap,za=new WeakMap,Ha=new WeakMap,Mt=new WeakMap,Wa=new WeakMap,gl=new WeakMap,Cv=new WeakMap,Va=new WeakMap,Tf=new WeakMap,Su=new WeakMap,ml=new WeakMap,gn=new WeakMap,yl=new WeakMap,_e=new WeakSet,Hb=function(){var n;if(u(this,za))return;A(this,za,new AbortController);const{signal:e}=u(this,za);for(const r of this.trigger)r.addEventListener("click",u(this,_f),{signal:e}),r.addEventListener("pointerenter",u(this,d1),{signal:e}),r.addEventListener("pointerleave",u(this,h1),{signal:e}),r.classList.add("popupTriggerArea");for(const r of u(this,_u))(n=r.container)==null||n.addEventListener("keydown",u(this,fl),{signal:e})},EC=function(){const e=u(this,_u).find(n=>n.hasCommentButton);e&&A(this,Wa,e._normalizePoint(e.commentButtonPosition))},TC=function(){if(u(this,gn).extraPopupElement&&!u(this,gn).editor)return;u(this,Mt)||this.renderCommentButton();const[e,n]=u(this,Wa),{style:r}=u(this,Mt);r.left=`calc(${e}%)`,r.top=`calc(${n}% - var(--comment-button-dim))`},CC=function(){u(this,gn).extraPopupElement||(u(this,Mt)||this.renderCommentButton(),u(this,Mt).style.backgroundColor=this.commentButtonColor||"")},Wb=function(){const e=u(this,Va),n=u(this,Hs);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&u(this,Va).html||null},PC=function(){var e,n,r;return((r=(n=(e=u(this,_e,Wb))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.fontSize)||0},Y4=function(){var e,n,r;return((r=(n=(e=u(this,_e,Wb))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.color)||null},J4=function(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:u(this,_e,Y4),fontSize:u(this,_e,PC)?`calc(${u(this,_e,PC)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:i});return r},Q4=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ws))&&P(this,_e,Vb).call(this)},Z4=function(){if(u(this,Ha)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}}=u(this,Af);let a=!!u(this,Ef),o=a?u(this,Ef):u(this,Cv);for(const g of u(this,_u))if(!o||ee.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const l=ee.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=l[0]+h,f=l[1];A(this,Ha,[100*(d-i)/n,100*(f-s)/r]);const{style:p}=u(this,It);p.left=`${u(this,Ha)[0]}%`,p.top=`${u(this,Ha)[1]}%`},Vb=function(){if(u(this,Ur)){u(this,Ur).toggleCommentPopup(this,!1);return}A(this,Ws,!u(this,Ws)),u(this,Ws)?(P(this,_e,Gb).call(this),u(this,It).addEventListener("click",u(this,_f)),u(this,It).addEventListener("keydown",u(this,fl))):(P(this,_e,OC).call(this),u(this,It).removeEventListener("click",u(this,_f)),u(this,It).removeEventListener("keydown",u(this,fl)))},Gb=function(){u(this,zr)||this.render(),this.isVisible?u(this,Ws)&&u(this,It).classList.add("focused"):(P(this,_e,Z4).call(this),u(this,It).hidden=!1,u(this,It).style.zIndex=parseInt(u(this,It).style.zIndex)+1e3)},OC=function(){u(this,It).classList.remove("focused"),!(u(this,Ws)||!this.isVisible)&&(u(this,It).hidden=!0,u(this,It).style.zIndex=parseInt(u(this,It).style.zIndex)-1e3)};class eU extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Pv;class jye extends Pt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});C(this,Pv,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=A(this,Pv,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),a.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),a.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),a.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),a.setAttribute("stroke-width",n.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Pv)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pv=new WeakMap;var Ov;class Dye extends Pt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});C(this,Ov,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=n.borderStyle.width,o=A(this,Ov,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Ov)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ov=new WeakMap;var kv;class $ye extends Pt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});C(this,kv,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=n.borderStyle.width,o=A(this,kv,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",i/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,kv)}addHighlightArea(){this.container.classList.add("highlightArea")}}kv=new WeakMap;var Nv;class tU extends Pt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});C(this,Nv,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:r,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let d=0,f=r.length;d<f;d+=2){const p=r[d]-n[0],g=n[3]-r[d+1];c.push(`${p},${g}`)}c=c.join(" ");const h=A(this,Nv,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",c),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Nv)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nv=new WeakMap;class Lye extends tU{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Fye extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Iv,Au,Mv,kC;class mk extends Pt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});C(this,Mv);C(this,Iv,null);C(this,Au,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ve.HIGHLIGHT:ve.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:r,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:c}=P(this,Mv,kC).call(this,r,n),h=this.svgFactory.create(l,c,!0),d=A(this,Iv,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,p=i.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);u(this,Au).push(g),g.setAttribute("points",i[f].join(",")),d.append(g)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:r,points:i,rect:s}=n,a=u(this,Iv);if(r>=0&&a.setAttribute("stroke-width",r||1),i)for(let o=0,l=u(this,Au).length;o<l;o++)u(this,Au)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:c}=P(this,Mv,kC).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return u(this,Au)}addHighlightArea(){this.container.classList.add("highlightArea")}}Iv=new WeakMap,Au=new WeakMap,Mv=new WeakSet,kC=function(n,r){switch(n){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class nU extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ve.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Bye extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Uye extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class zye extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class rU extends Pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Rv,jv,NC;class Hye extends Pt{constructor(n){var i;super(n,{isRenderable:!0});C(this,jv);C(this,Rv,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",P(this,jv,NC).bind(this)),A(this,Rv,i);const{isMac:s}=hn.platform;return n.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&P(this,jv,NC).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return u(this,Rv)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rv=new WeakMap,jv=new WeakSet,NC=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var Eu,Tu,Cf,vl,Dv,Cu,Hr,$v,co,qb,MC;const Ak=class Ak{constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:h}){C(this,co);C(this,Eu,null);C(this,Tu,null);C(this,Cf,null);C(this,vl,new Map);C(this,Dv,null);C(this,Cu,null);C(this,Hr,[]);C(this,$v,!1);this.div=e,A(this,Eu,n),A(this,Tu,r),A(this,Dv,o||null),A(this,Cu,c||null),A(this,Cf,h||new dk),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return u(this,vl).size>0}async render(e){var o;const{annotations:n}=e,r=this.div;oh(r,this.viewport);const i=new Map,s=[],a={data:null,layer:r,linkService:u(this,Cu),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new qx,annotationStorage:u(this,Cf),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===Ht.POPUP;if(c){const f=i.get(l.id);if(!f)continue;if(!this._commentManager){s.push(l);continue}a.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const h=eA.create(a);if(!h.isRenderable)continue;if(!c&&(u(this,Hr).push(h),l.popupRef)){const f=i.get(l.popupRef);f?f.push(h):i.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),h._isEditable&&(u(this,vl).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}await P(this,co,qb).call(this);for(const l of s){const c=a.elements=i.get(l.id);a.data=l;const h=eA.create(a);if(!h.isRenderable)continue;const d=h.render();h.contentElement.id=`${rd}${l.id}`,l.hidden&&(d.style.visibility="hidden"),c.at(-1).container.after(d)}P(this,co,MC).call(this)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:u(this,Cu),svgFactory:new qx,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=Ak._defaultBorderStyle),n.data=r;const i=eA.create(n);i.isRenderable&&(i.render(),i.contentElement.id=`${rd}${r.id}`,u(this,Hr).push(i))}await P(this,co,qb).call(this)}update({viewport:e}){const n=this.div;this.viewport=e,oh(n,{rotation:e.rotation}),P(this,co,MC).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(u(this,vl).values())}getEditableAnnotation(e){return u(this,vl).get(e)}addFakeAnnotation(e){const{div:n}=this,{id:r,rotation:i}=e,s=new Cye({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:u(this,Cu),annotationStorage:u(this,Cf)});return s.render(),s.contentElement.id=`${rd}${r}`,s.createOrUpdatePopup(),u(this,Hr).push(s),s}removeAnnotation(e){var i;const n=u(this,Hr).findIndex(s=>s.data.id===e);if(n<0)return;const[r]=u(this,Hr).splice(n,1);(i=u(this,Eu))==null||i.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);P(this,co,qb).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return me(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Mh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Eu=new WeakMap,Tu=new WeakMap,Cf=new WeakMap,vl=new WeakMap,Dv=new WeakMap,Cu=new WeakMap,Hr=new WeakMap,$v=new WeakMap,co=new WeakSet,qb=async function(){var r,i,s;if(u(this,Hr).length===0)return;this.div.replaceChildren();const e=[];if(!u(this,$v)){A(this,$v,!0);for(const{contentElement:a,data:{id:o}}of u(this,Hr)){const l=a.id=`${rd}${o}`;e.push((r=u(this,Dv))==null?void 0:r.getAriaAttributes(l).then(c=>{if(c)for(const[h,d]of c)a.setAttribute(h,d)}))}}u(this,Hr).sort(({data:{rect:[a,o,l,c]}},{data:{rect:[h,d,f,p]}})=>{if(a===l&&o===c)return 1;if(h===f&&d===p)return-1;const g=c,m=o,b=(o+c)/2,y=p,w=d,v=(d+p)/2;if(b>=y&&v<=m)return-1;if(v>=g&&b<=w)return 1;const _=(a+l)/2,x=(h+f)/2;return _-x});const n=document.createDocumentFragment();for(const a of u(this,Hr))n.append(a.container),this._commentManager?(s=((i=a.extraPopupElement)==null?void 0:i.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&n.append(a.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),u(this,Eu))for(const a of u(this,Hr))u(this,Eu).addPointerInTextLayer(a.contentElement,!1)},MC=function(){var n;if(!u(this,Tu))return;const e=this.div;for(const[r,i]of u(this,Tu)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=u(this,vl).get(r);o&&(o._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(r,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}u(this,Tu).clear()};let IC=Ak;const fb=/\r\n?|\n/g;var Wr,Lv,Pu,Vr,Xt,iU,sU,aU,Kb,uo,Xb,Yb,oU,jC,lU;const ft=class ft extends ct{constructor(n){super({...n,name:"freeTextEditor"});C(this,Xt);C(this,Wr,"");C(this,Lv,`${this.id}-editor`);C(this,Pu,null);C(this,Vr);K(this,"_colorPicker",null);this.color=n.color||ft._defaultColor||ct._defaultLineColor,A(this,Vr,n.fontSize||ft._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const n=ft.prototype,r=a=>a.isEmpty(),i=lh.TRANSLATE_SMALL,s=lh.TRANSLATE_BIG;return me(this,"_keyboardManager",new w0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(n,r){ct.initialize(n,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,r){switch(n){case Ie.FREETEXT_SIZE:ft._defaultFontSize=r;break;case Ie.FREETEXT_COLOR:ft._defaultColor=r;break}}updateParams(n,r){switch(n){case Ie.FREETEXT_SIZE:P(this,Xt,iU).call(this,r);break;case Ie.FREETEXT_COLOR:P(this,Xt,sU).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ie.FREETEXT_SIZE,ft._defaultFontSize],[Ie.FREETEXT_COLOR,ft._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[Ie.FREETEXT_SIZE,u(this,Vr)],[Ie.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Gx(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ie.FREETEXT_COLOR}onUpdatedColor(){var n;this.editorDiv.style.color=this.color,(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_translateEmpty(n,r){this._uiManager.translateSelectedEditors(n,r,!0)}getInitialTranslation(){const n=this.parentScale;return[-ft._internalPadding*n,-(ft._internalPadding+u(this,Vr))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,Pu,new AbortController);const n=this._uiManager.combinedSignal(u(this,Pu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n}),!0}disableEditMode(){var n;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Lv)),this._isDraggable=!0,(n=u(this,Pu))==null||n.abort(),A(this,Pu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var r;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=u(this,Wr),r=A(this,Wr,P(this,Xt,aU).call(this).trimEnd());if(n===r)return;const i=s=>{if(A(this,Wr,s),!s){this.remove();return}P(this,Xt,Yb).call(this),this._uiManager.rebuild(this),P(this,Xt,Kb).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(n)},mustExec:!1}),P(this,Xt,Kb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){ft._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let n,r;(this._isCopy||this.annotationElementId)&&(n=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Lv)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,Vr)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,m;switch(this.rotation){case 0:g=n+(o[0]-f)/h,m=r+this.height-(o[1]-p)/d;break;case 90:g=n+(o[0]-f)/h,m=r-(o[1]-p)/d,[l,c]=[c,-l];break;case 180:g=n-this.width+(o[0]-f)/h,m=r-(o[1]-p)/d,[l,c]=[-l,-c];break;case 270:g=n+(o[0]-f-this.height*d)/h,m=r+(o[1]-p-this.width*h)/d,[l,c]=[-c,l];break}this.setAt(g*s,m*a,l,c)}else this._moveAfterPaste(n,r);P(this,Xt,Yb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var g,m,b;const r=n.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;n.preventDefault();const s=P(g=ft,uo,jC).call(g,r.getData("text")||"").replaceAll(fb,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(fb,"")),y!==this.editorDiv){let w=h;for(const v of this.editorDiv.childNodes){if(v===y){w=d;continue}w.push(P(m=ft,uo,Xb).call(m,v))}}h.push(l.nodeValue.slice(0,c).replaceAll(fb,""))}else if(l===this.editorDiv){let y=h,w=0;for(const v of this.editorDiv.childNodes)w++===c&&(y=d),y.push(P(b=ft,uo,Xb).call(b,v))}A(this,Wr,`${h.join(`
`)}${s}${d.join(`
`)}`),P(this,Xt,Yb).call(this);const f=new Range;let p=Math.sumPrecise(h.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(p<=w){f.setStart(y,p),f.setEnd(y,p);break}p-=w}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const n=ft._internalPadding*this.parentScale;return this.getRect(n,n)}static async deserialize(n,r,i){var o;let s=null;if(n instanceof eU){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:f,popupRef:p,richText:g,contentsObj:m,creationDate:b,modificationDate:y},textContent:w,textPosition:v,parent:{page:{pageNumber:_}}}=n;if(!w||w.length===0)return null;s=n={annotationType:ve.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:v,pageIndex:_-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(m==null?void 0:m.str)||null,richText:g,creationDate:b,modificationDate:y}}const a=await super.deserialize(n,r,i);return A(a,Vr,n.fontSize),a.color=ee.makeHexColor(...n.color),A(a,Wr,P(o=ft,uo,jC).call(o,n.value)),a._initialData=s,n.comment&&a.setCommentData(n),a}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(n),{color:r,fontSize:u(this,Vr),value:P(this,Xt,oU).call(this)});return this.addComment(i),n?(i.isCopy=!0,i):this.annotationElementId&&!P(this,Xt,lU).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){const r=super.renderAnnotationElement(n);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${u(this,Vr)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const s of u(this,Wr).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),r.append(a)}return n.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Wr)}}),r}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};Wr=new WeakMap,Lv=new WeakMap,Pu=new WeakMap,Vr=new WeakMap,Xt=new WeakSet,iU=function(n){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-u(this,Vr))*this.parentScale),A(this,Vr,s),P(this,Xt,Kb).call(this)},i=u(this,Vr);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sU=function(n){const r=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},aU=function(){var i;const n=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(n.push(P(i=ft,uo,Xb).call(i,s)),r=s);return n.join(`
`)},Kb=function(){const[n,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/n,this.height=i.height/r):(this.width=i.height/n,this.height=i.width/r),this.fixAndSetPosition()},uo=new WeakSet,Xb=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(fb,"")},Yb=function(){if(this.editorDiv.replaceChildren(),!!u(this,Wr))for(const n of u(this,Wr).split(`
`)){const r=document.createElement("div");r.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(r)}},oU=function(){return u(this,Wr).replaceAll(""," ")},jC=function(n){return n.replaceAll(" ","")},lU=function(n){const{value:r,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||n.value!==r||n.fontSize!==i||n.color.some((o,l)=>o!==s[l])||n.pageIndex!==a},C(ft,uo),K(ft,"_freeTextDefaultContent",""),K(ft,"_internalPadding",0),K(ft,"_defaultColor",null),K(ft,"_defaultFontSize",10),K(ft,"_type","freetext"),K(ft,"_editorType",ve.FREETEXT);let RC=ft;class ne{toSVGPath(){rt("Abstract method `toSVGPath` must be implemented.")}get box(){rt("Abstract getter `box` must be implemented.")}serialize(e,n){rt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o]*i,a[o+1]=r+e[o+1]*s;return a}static _rescaleAndSwap(e,n,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o+1]*i,a[o+1]=r+e[o]*s;return a}static _translate(e,n,r,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=n+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,s){switch(s){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,s,a){return[(e+5*r)/6,(n+5*i)/6,(5*r+s)/6,(5*i+a)/6,(r+s)/2,(i+a)/2]}}K(ne,"PRECISION",1e-4);var Gr,as,Pf,Of,Vs,Ae,Ou,ku,Fv,Bv,kf,Nf,bl,Uv,f1,p1,un,Mg,cU,uU,hU,dU,fU,pU;const ya=class ya{constructor({x:e,y:n},r,i,s,a,o=0){C(this,un);C(this,Gr);C(this,as,[]);C(this,Pf);C(this,Of);C(this,Vs,[]);C(this,Ae,new Float32Array(18));C(this,Ou);C(this,ku);C(this,Fv);C(this,Bv);C(this,kf);C(this,Nf);C(this,bl,[]);A(this,Gr,r),A(this,Nf,s*i),A(this,Of,a),u(this,Ae).set([NaN,NaN,NaN,NaN,e,n],6),A(this,Pf,o),A(this,Bv,u(ya,Uv)*i),A(this,Fv,u(ya,p1)*i),A(this,kf,i),u(this,bl).push(e,n)}isEmpty(){return isNaN(u(this,Ae)[8])}add({x:e,y:n}){var k;A(this,Ou,e),A(this,ku,n);const[r,i,s,a]=u(this,Gr);let[o,l,c,h]=u(this,Ae).subarray(8,12);const d=e-c,f=n-h,p=Math.hypot(d,f);if(p<u(this,Fv))return!1;const g=p-u(this,Bv),m=g/p,b=m*d,y=m*f;let w=o,v=l;o=c,l=h,c+=b,h+=y,(k=u(this,bl))==null||k.push(e,n);const _=-y/g,x=b/g,S=_*u(this,Nf),T=x*u(this,Nf);return u(this,Ae).set(u(this,Ae).subarray(2,8),0),u(this,Ae).set([c+S,h+T],4),u(this,Ae).set(u(this,Ae).subarray(14,18),12),u(this,Ae).set([c-S,h-T],16),isNaN(u(this,Ae)[6])?(u(this,Vs).length===0&&(u(this,Ae).set([o+S,l+T],2),u(this,Vs).push(NaN,NaN,NaN,NaN,(o+S-r)/s,(l+T-i)/a),u(this,Ae).set([o-S,l-T],14),u(this,as).push(NaN,NaN,NaN,NaN,(o-S-r)/s,(l-T-i)/a)),u(this,Ae).set([w,v,o,l,c,h],6),!this.isEmpty()):(u(this,Ae).set([w,v,o,l,c,h],6),Math.abs(Math.atan2(v-l,w-o)-Math.atan2(y,b))<Math.PI/2?([o,l,c,h]=u(this,Ae).subarray(2,6),u(this,Vs).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/s,((l+h)/2-i)/a),[o,l,w,v]=u(this,Ae).subarray(14,18),u(this,as).push(NaN,NaN,NaN,NaN,((w+o)/2-r)/s,((v+l)/2-i)/a),!0):([w,v,o,l,c,h]=u(this,Ae).subarray(0,6),u(this,Vs).push(((w+5*o)/6-r)/s,((v+5*l)/6-i)/a,((5*o+c)/6-r)/s,((5*l+h)/6-i)/a,((o+c)/2-r)/s,((l+h)/2-i)/a),[c,h,o,l,w,v]=u(this,Ae).subarray(12,18),u(this,as).push(((w+5*o)/6-r)/s,((v+5*l)/6-i)/a,((5*o+c)/6-r)/s,((5*l+h)/6-i)/a,((o+c)/2-r)/s,((l+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Vs),n=u(this,as);if(isNaN(u(this,Ae)[6])&&!this.isEmpty())return P(this,un,cU).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);P(this,un,hU).call(this,r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return P(this,un,uU).call(this,r),r.join(" ")}newFreeDrawOutline(e,n,r,i,s,a){return new gU(e,n,r,i,s,a)}getOutlines(){var d;const e=u(this,Vs),n=u(this,as),r=u(this,Ae),[i,s,a,o]=u(this,Gr),l=new Float32Array((((d=u(this,bl))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(u(this,bl)[f]-i)/a,l[f+1]=(u(this,bl)[f+1]-s)/o;if(l[l.length-2]=(u(this,Ou)-i)/a,l[l.length-1]=(u(this,ku)-s)/o,isNaN(r[6])&&!this.isEmpty())return P(this,un,dU).call(this,l);const c=new Float32Array(u(this,Vs).length+24+u(this,as).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}h=P(this,un,pU).call(this,c,h);for(let f=n.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(n[f+p])){c[h]=c[h+1]=NaN,h+=2;continue}c[h]=n[f+p],c[h+1]=n[f+p+1],h+=2}return P(this,un,fU).call(this,c,h),this.newFreeDrawOutline(c,l,u(this,Gr),u(this,kf),u(this,Pf),u(this,Of))}};Gr=new WeakMap,as=new WeakMap,Pf=new WeakMap,Of=new WeakMap,Vs=new WeakMap,Ae=new WeakMap,Ou=new WeakMap,ku=new WeakMap,Fv=new WeakMap,Bv=new WeakMap,kf=new WeakMap,Nf=new WeakMap,bl=new WeakMap,Uv=new WeakMap,f1=new WeakMap,p1=new WeakMap,un=new WeakSet,Mg=function(){const e=u(this,Ae).subarray(4,6),n=u(this,Ae).subarray(16,18),[r,i,s,a]=u(this,Gr);return[(u(this,Ou)+(e[0]-n[0])/2-r)/s,(u(this,ku)+(e[1]-n[1])/2-i)/a,(u(this,Ou)+(n[0]-e[0])/2-r)/s,(u(this,ku)+(n[1]-e[1])/2-i)/a]},cU=function(){const[e,n,r,i]=u(this,Gr),[s,a,o,l]=P(this,un,Mg).call(this);return`M${(u(this,Ae)[2]-e)/r} ${(u(this,Ae)[3]-n)/i} L${(u(this,Ae)[4]-e)/r} ${(u(this,Ae)[5]-n)/i} L${s} ${a} L${o} ${l} L${(u(this,Ae)[16]-e)/r} ${(u(this,Ae)[17]-n)/i} L${(u(this,Ae)[14]-e)/r} ${(u(this,Ae)[15]-n)/i} Z`},uU=function(e){const n=u(this,as);e.push(`L${n[4]} ${n[5]} Z`)},hU=function(e){const[n,r,i,s]=u(this,Gr),a=u(this,Ae).subarray(4,6),o=u(this,Ae).subarray(16,18),[l,c,h,d]=P(this,un,Mg).call(this);e.push(`L${(a[0]-n)/i} ${(a[1]-r)/s} L${l} ${c} L${h} ${d} L${(o[0]-n)/i} ${(o[1]-r)/s}`)},dU=function(e){const n=u(this,Ae),[r,i,s,a]=u(this,Gr),[o,l,c,h]=P(this,un,Mg).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(n[2]-r)/s,(n[3]-i)/a,NaN,NaN,NaN,NaN,(n[4]-r)/s,(n[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,(n[16]-r)/s,(n[17]-i)/a,NaN,NaN,NaN,NaN,(n[14]-r)/s,(n[15]-i)/a],0),this.newFreeDrawOutline(d,e,u(this,Gr),u(this,kf),u(this,Pf),u(this,Of))},fU=function(e,n){const r=u(this,as);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6},pU=function(e,n){const r=u(this,Ae).subarray(4,6),i=u(this,Ae).subarray(16,18),[s,a,o,l]=u(this,Gr),[c,h,d,f]=P(this,un,Mg).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],n),n+=24},C(ya,Uv,8),C(ya,f1,2),C(ya,p1,u(ya,Uv)+u(ya,f1));let Kx=ya;var If,Nu,Ga,zv,qr,Hv,Bt,g1,mU;class gU extends ne{constructor(n,r,i,s,a,o){super();C(this,g1);C(this,If);C(this,Nu,new Float32Array(4));C(this,Ga);C(this,zv);C(this,qr);C(this,Hv);C(this,Bt);A(this,Bt,n),A(this,qr,r),A(this,If,i),A(this,Hv,s),A(this,Ga,a),A(this,zv,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],P(this,g1,mU).call(this,o);const[l,c,h,d]=u(this,Nu);for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-l)/h,n[f+1]=(n[f+1]-c)/d;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-l)/h,r[f+1]=(r[f+1]-c)/d}toSVGPath(){const n=[`M${u(this,Bt)[4]} ${u(this,Bt)[5]}`];for(let r=6,i=u(this,Bt).length;r<i;r+=6){if(isNaN(u(this,Bt)[r])){n.push(`L${u(this,Bt)[r+4]} ${u(this,Bt)[r+5]}`);continue}n.push(`C${u(this,Bt)[r]} ${u(this,Bt)[r+1]} ${u(this,Bt)[r+2]} ${u(this,Bt)[r+3]} ${u(this,Bt)[r+4]} ${u(this,Bt)[r+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,r,i,s],a){const o=i-n,l=s-r;let c,h;switch(a){case 0:c=ne._rescale(u(this,Bt),n,s,o,-l),h=ne._rescale(u(this,qr),n,s,o,-l);break;case 90:c=ne._rescaleAndSwap(u(this,Bt),n,r,o,l),h=ne._rescaleAndSwap(u(this,qr),n,r,o,l);break;case 180:c=ne._rescale(u(this,Bt),i,r,-o,l),h=ne._rescale(u(this,qr),i,r,-o,l);break;case 270:c=ne._rescaleAndSwap(u(this,Bt),i,s,-o,-l),h=ne._rescaleAndSwap(u(this,qr),i,s,-o,-l);break}return{outline:Array.from(c),points:[Array.from(h)]}}get box(){return u(this,Nu)}newOutliner(n,r,i,s,a,o=0){return new Kx(n,r,i,s,a,o)}getNewOutline(n,r){const[i,s,a,o]=u(this,Nu),[l,c,h,d]=u(this,If),f=a*h,p=o*d,g=i*h+l,m=s*d+c,b=this.newOutliner({x:u(this,qr)[0]*f+g,y:u(this,qr)[1]*p+m},u(this,If),u(this,Hv),n,u(this,zv),r??u(this,Ga));for(let y=2;y<u(this,qr).length;y+=2)b.add({x:u(this,qr)[y]*f+g,y:u(this,qr)[y+1]*p+m});return b.getOutlines()}}If=new WeakMap,Nu=new WeakMap,Ga=new WeakMap,zv=new WeakMap,qr=new WeakMap,Hv=new WeakMap,Bt=new WeakMap,g1=new WeakSet,mU=function(n){const r=u(this,Bt);let i=r[4],s=r[5];const a=[i,s,i,s];let o=i,l=s,c=i,h=s;const d=n?Math.max:Math.min,f=new Float32Array(4);for(let g=6,m=r.length;g<m;g+=6){const b=r[g+4],y=r[g+5];isNaN(r[g])?(ee.pointBoundingBox(b,y,a),l>y?(o=b,l=y):l===y&&(o=d(o,b)),h<y?(c=b,h=y):h===y&&(c=d(c,b))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,ee.bezierBoundingBox(i,s,...r.slice(g,g+6),f),ee.rectBoundingBox(f[0],f[1],f[2],f[3],a),l>f[1]?(o=f[0],l=f[1]):l===f[1]&&(o=d(o,f[0])),h<f[3]?(c=f[2],h=f[3]):h===f[3]&&(c=d(c,f[2]))),i=b,s=y}const p=u(this,Nu);p[0]=a[0]-u(this,Ga),p[1]=a[1]-u(this,Ga),p[2]=a[2]-a[0]+2*u(this,Ga),p[3]=a[3]-a[1]+2*u(this,Ga),this.firstPoint=[o,l],this.lastPoint=[c,h]};var Wv,Vv,Gv,wl,os,hr,yU,Jb,vU,bU,$C;class DC{constructor(e,n=0,r=0,i=!0){C(this,hr);C(this,Wv);C(this,Vv);C(this,Gv);C(this,wl,[]);C(this,os,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:m,y:b,width:y,height:w}of e){const v=Math.floor((m-n)/a)*a,_=Math.ceil((m+y+n)/a)*a,x=Math.floor((b-n)/a)*a,S=Math.ceil((b+w+n)/a)*a,T=[v,x,S,!0],O=[_,x,S,!1];u(this,wl).push(T,O),ee.rectBoundingBox(v,x,_,S,s)}const o=s[2]-s[0]+2*r,l=s[3]-s[1]+2*r,c=s[0]-r,h=s[1]-r;let d=i?-1/0:1/0,f=1/0;const p=u(this,wl).at(i?-1:-2),g=[p[0],p[2]];for(const m of u(this,wl)){const[b,y,w,v]=m;!v&&i?y<f?(f=y,d=b):y===f&&(d=Math.max(d,b)):v&&!i&&(y<f?(f=y,d=b):y===f&&(d=Math.min(d,b))),m[0]=(b-c)/o,m[1]=(y-h)/l,m[2]=(w-h)/l}A(this,Wv,new Float32Array([c,h,o,l])),A(this,Vv,[d,f]),A(this,Gv,g)}getOutlines(){u(this,wl).sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of u(this,wl))n[3]?(e.push(...P(this,hr,$C).call(this,n)),P(this,hr,vU).call(this,n)):(P(this,hr,bU).call(this,n),e.push(...P(this,hr,$C).call(this,n)));return P(this,hr,yU).call(this,e)}}Wv=new WeakMap,Vv=new WeakMap,Gv=new WeakMap,wl=new WeakMap,os=new WeakMap,hr=new WeakSet,yU=function(e){const n=[],r=new Set;for(const a of e){const[o,l,c]=a;n.push([o,l,a],[o,c,a])}n.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=n.length;a<o;a+=2){const l=n[a][2],c=n[a+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const a=r.values().next().value;let[o,l,c,h,d]=a;r.delete(a);let f=o,p=l;for(s=[o,c],i.push(s);;){let g;if(r.has(h))g=h;else if(r.has(d))g=d;else break;r.delete(g),[o,l,c,h,d]=g,f!==o&&(s.push(f,p,o,p===l?l:c),f=o),p=p===l?c:l}s.push(f,p)}return new Wye(i,u(this,Wv),u(this,Vv),u(this,Gv))},Jb=function(e){const n=u(this,os);let r=0,i=n.length-1;for(;r<=i;){const s=r+i>>1,a=n[s][0];if(a===e)return s;a<e?r=s+1:i=s-1}return i+1},vU=function([,e,n]){const r=P(this,hr,Jb).call(this,e);u(this,os).splice(r,0,[e,n])},bU=function([,e,n]){const r=P(this,hr,Jb).call(this,e);for(let i=r;i<u(this,os).length;i++){const[s,a]=u(this,os)[i];if(s!==e)break;if(s===e&&a===n){u(this,os).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,a]=u(this,os)[i];if(s!==e)break;if(s===e&&a===n){u(this,os).splice(i,1);return}}},$C=function(e){const[n,r,i]=e,s=[[n,r,i]],a=P(this,hr,Jb).call(this,i);for(let o=0;o<a;o++){const[l,c]=u(this,os)[o];for(let h=0,d=s.length;h<d;h++){const[,f,p]=s[h];if(!(c<=f||p<=l)){if(f>=l){if(p>c)s[h][1]=c;else{if(d===1)return[];s.splice(h,1),h--,d--}continue}s[h][2]=l,p>c&&s.push([n,c,p])}}}return s};var qv,Mf;class Wye extends ne{constructor(n,r,i,s){super();C(this,qv);C(this,Mf);A(this,Mf,n),A(this,qv,r),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const n=[];for(const r of u(this,Mf)){let[i,s]=r;n.push(`M${i} ${s}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===i?(n.push(`V${l}`),s=l):l===s&&(n.push(`H${o}`),i=o)}n.push("Z")}return n.join(" ")}serialize([n,r,i,s],a){const o=[],l=i-n,c=s-r;for(const h of u(this,Mf)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=n+h[f]*l,d[f+1]=s-h[f+1]*c;o.push(d)}return o}get box(){return u(this,qv)}get classNamesForOutlining(){return["highlightOutline"]}}qv=new WeakMap,Mf=new WeakMap;class LC extends Kx{newFreeDrawOutline(e,n,r,i,s,a){return new Vye(e,n,r,i,s,a)}}class Vye extends gU{newOutliner(e,n,r,i,s,a=0){return new LC(e,n,r,i,s,a)}}var Rf,Kv,qa,Iu,Xv,xr,Yv,Jv,Mu,Kr,Xr,Nn,jf,Df,Xn,$f,Oi,Qv,xe,FC,Qb,wU,xU,_U,BC,mc,Ri,Fh,SU,Zb,ew,AU,EU,TU,CU,PU;const Fe=class Fe extends ct{constructor(n){super({...n,name:"highlightEditor"});C(this,xe);C(this,Rf,null);C(this,Kv,0);C(this,qa);C(this,Iu,null);C(this,Xv,null);C(this,xr,null);C(this,Yv,null);C(this,Jv,0);C(this,Mu,null);C(this,Kr,null);C(this,Xr,null);C(this,Nn,!1);C(this,jf,null);C(this,Df,null);C(this,Xn,null);C(this,$f,"");C(this,Oi);C(this,Qv,"");this.color=n.color||Fe._defaultColor,A(this,Oi,n.thickness||Fe._defaultThickness),this.opacity=n.opacity||Fe._defaultOpacity,A(this,qa,n.boxes||null),A(this,Qv,n.methodOfCreation||""),A(this,$f,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(A(this,Nn,!0),P(this,xe,Qb).call(this,n),P(this,xe,mc).call(this)):u(this,qa)&&(A(this,Rf,n.anchorNode),A(this,Kv,n.anchorOffset),A(this,Yv,n.focusNode),A(this,Jv,n.focusOffset),P(this,xe,FC).call(this),P(this,xe,mc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const n=Fe.prototype;return me(this,"_keyboardManager",new w0([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Nn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Oi),methodOfCreation:u(this,Qv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,r){var i;ct.initialize(n,r),Fe._defaultColor||(Fe._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(n,r){switch(n){case Ie.HIGHLIGHT_COLOR:Fe._defaultColor=r;break;case Ie.HIGHLIGHT_THICKNESS:Fe._defaultThickness=r;break}}translateInPage(n,r){}get toolbarPosition(){return u(this,Df)}get commentButtonPosition(){return u(this,jf)}updateParams(n,r){switch(n){case Ie.HIGHLIGHT_COLOR:P(this,xe,wU).call(this,r);break;case Ie.HIGHLIGHT_THICKNESS:P(this,xe,xU).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ie.HIGHLIGHT_COLOR,Fe._defaultColor],[Ie.HIGHLIGHT_THICKNESS,Fe._defaultThickness]]}get propertiesToUpdate(){return[[Ie.HIGHLIGHT_COLOR,this.color||Fe._defaultColor],[Ie.HIGHLIGHT_THICKNESS,u(this,Oi)||Fe._defaultThickness],[Ie.HIGHLIGHT_FREE,u(this,Nn)]]}onUpdatedColor(){var n,r;(n=this.parent)==null||n.drawLayer.updateProperties(u(this,Xr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=u(this,Xv))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,Xv,new Vx({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,xe,ew).call(this))}getBaseTranslation(){return[0,0]}getRect(n,r){return super.getRect(n,r,P(this,xe,ew).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){P(this,xe,BC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,xe,mc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?P(this,xe,BC).call(this):n&&(P(this,xe,mc).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),r&&this.select()}rotate(n){var s,a,o;const{drawLayer:r}=this.parent;let i;u(this,Nn)?(n=(n-this.rotation+360)%360,i=P(s=Fe,Ri,Fh).call(s,u(this,Kr).box,n)):i=P(a=Fe,Ri,Fh).call(a,[this.x,this.y,this.width,this.height],n),r.updateProperties(u(this,Xr),{bbox:i,root:{"data-main-rotation":n}}),r.updateProperties(u(this,Xn),{bbox:P(o=Fe,Ri,Fh).call(o,u(this,xr).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();u(this,$f)&&(n.setAttribute("aria-label",u(this,$f)),n.setAttribute("role","mark")),u(this,Nn)?n.classList.add("free"):this.div.addEventListener("keydown",P(this,xe,SU).bind(this),{signal:this._uiManager._signal});const r=A(this,Mu,document.createElement("div"));return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=u(this,Iu),this.setDims(),q3(this,u(this,Mu),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:P(this,xe,Zb).call(this,!0);break;case 1:case 3:P(this,xe,Zb).call(this,!1);break}}select(){var n;super.select(),u(this,Xn)&&((n=this.parent)==null||n.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),u(this,Xn)&&((n=this.parent)==null||n.drawLayer.updateProperties(u(this,Xn),{rootClass:{selected:!1}}),u(this,Nn)||P(this,xe,Zb).call(this,!1))}get _mustFixPosition(){return!u(this,Nn)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Xr),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(u(this,Xn),{rootClass:{hidden:!n}}))}static startHighlighting(n,r,{target:i,x:s,y:a}){const{x:o,y:l,width:c,height:h}=i.getBoundingClientRect(),d=new AbortController,f=n.combinedSignal(d),p=g=>{d.abort(),P(this,Ri,CU).call(this,n,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Lt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Hi,{signal:f}),i.addEventListener("pointermove",P(this,Ri,TU).bind(this,n),{signal:f}),this._freeHighlight=new LC({x:s,y:a},[o,l,c,h],n.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,r,i){var m,b,y,w;let s=null;if(n instanceof nU){const{data:{quadPoints:v,rect:_,rotation:x,id:S,color:T,opacity:O,popupRef:k,richText:M,contentsObj:N,creationDate:I,modificationDate:R},parent:{page:{pageNumber:F}}}=n;s=n={annotationType:ve.HIGHLIGHT,color:Array.from(T),opacity:O,quadPoints:v,boxes:null,pageIndex:F-1,rect:_.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,popupRef:k,richText:M,comment:(N==null?void 0:N.str)||null,creationDate:I,modificationDate:R}}else if(n instanceof mk){const{data:{inkLists:v,rect:_,rotation:x,id:S,color:T,borderStyle:{rawWidth:O},popupRef:k,richText:M,contentsObj:N,creationDate:I,modificationDate:R},parent:{page:{pageNumber:F}}}=n;s=n={annotationType:ve.HIGHLIGHT,color:Array.from(T),thickness:O,inkLists:v,boxes:null,pageIndex:F-1,rect:_.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,popupRef:k,richText:M,comment:(N==null?void 0:N.str)||null,creationDate:I,modificationDate:R}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=n,h=await super.deserialize(n,r,i);h.color=ee.makeHexColor(...a),h.opacity=c||1,l&&A(h,Oi,n.thickness),h._initialData=s,n.comment&&h.setCommentData(n);const[d,f]=h.pageDimensions,[p,g]=h.pageTranslation;if(o){const v=A(h,qa,[]);for(let _=0;_<o.length;_+=8)v.push({x:(o[_]-p)/d,y:1-(o[_+1]-g)/f,width:(o[_+2]-o[_])/d,height:(o[_+1]-o[_+5])/f});P(m=h,xe,FC).call(m),P(b=h,xe,mc).call(b),h.rotate(h.rotation)}else if(l){A(h,Nn,!0);const v=l[0],_={x:v[0]-p,y:f-(v[1]-g)},x=new LC(_,[0,0,d,f],1,u(h,Oi)/2,!0,.001);for(let O=0,k=v.length;O<k;O+=2)_.x=v[O]-p,_.y=f-(v[O+1]-g),x.add(_);const{id:S,clipPathId:T}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);P(y=h,xe,Qb).call(y,{highlightOutlines:x.getOutlines(),highlightId:S,clipPathId:T}),P(w=h,xe,mc).call(w),h.rotate(h.parentRotation)}return h}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const r=ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(n);return Object.assign(i,{color:r,opacity:this.opacity,thickness:u(this,Oi),quadPoints:P(this,xe,AU).call(this),outlines:P(this,xe,EU).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!P(this,xe,PU).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Rf=new WeakMap,Kv=new WeakMap,qa=new WeakMap,Iu=new WeakMap,Xv=new WeakMap,xr=new WeakMap,Yv=new WeakMap,Jv=new WeakMap,Mu=new WeakMap,Kr=new WeakMap,Xr=new WeakMap,Nn=new WeakMap,jf=new WeakMap,Df=new WeakMap,Xn=new WeakMap,$f=new WeakMap,Oi=new WeakMap,Qv=new WeakMap,xe=new WeakSet,FC=function(){const n=new DC(u(this,qa),.001);A(this,Kr,n.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Kr).box;const r=new DC(u(this,qa),.0025,.001,this._uiManager.direction==="ltr");A(this,xr,r.getOutlines());const{firstPoint:i}=u(this,Kr);A(this,jf,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=u(this,xr);A(this,Df,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Qb=function({highlightOutlines:n,highlightId:r,clipPathId:i}){var f,p;if(A(this,Kr,n),A(this,xr,n.getNewOutline(u(this,Oi)/2+1.5,.0025)),r>=0)A(this,Xr,r),A(this,Iu,i),this.parent.drawLayer.finalizeDraw(r,{bbox:n.box,path:{d:n.toSVGPath()}}),A(this,Xn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,xr).box,path:{d:u(this,xr).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Xr),{bbox:P(f=Fe,Ri,Fh).call(f,u(this,Kr).box,(g-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Xn),{bbox:P(p=Fe,Ri,Fh).call(p,u(this,xr).box,g),path:{d:u(this,xr).toSVGPath()}})}const[a,o,l,c]=n.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[g,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*m/g,this.height=c*g/m;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*m/g,this.height=c*g/m;break}}const{firstPoint:h}=n;A(this,jf,[(h[0]-a)/l,(h[1]-o)/c]);const{lastPoint:d}=u(this,xr);A(this,Df,[(d[0]-a)/l,(d[1]-o)/c])},wU=function(n){const r=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:r.bind(this,n,Fe._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(n)},!0)},xU=function(n){const r=u(this,Oi),i=s=>{A(this,Oi,s),P(this,xe,_U).call(this,s)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},_U=function(n){u(this,Nn)&&(P(this,xe,Qb).call(this,{highlightOutlines:u(this,Kr).getNewOutline(n/2)}),this.fixAndSetPosition(),this.setDims())},BC=function(){u(this,Xr)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Xr)),A(this,Xr,null),this.parent.drawLayer.remove(u(this,Xn)),A(this,Xn,null))},mc=function(n=this.parent){u(this,Xr)===null&&({id:Qt(this,Xr)._,clipPathId:Qt(this,Iu)._}=n.drawLayer.draw({bbox:u(this,Kr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,Nn)},path:{d:u(this,Kr).toSVGPath()}},!1,!0),A(this,Xn,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Nn)},bbox:u(this,xr).box,path:{d:u(this,xr).toSVGPath()}},u(this,Nn))),u(this,Mu)&&(u(this,Mu).style.clipPath=u(this,Iu)))},Ri=new WeakSet,Fh=function([n,r,i,s],a){switch(a){case 90:return[1-r-s,n,s,i];case 180:return[1-n-i,1-r-s,i,s];case 270:return[r,1-n-i,s,i]}return[n,r,i,s]},SU=function(n){Fe._keyboardManager.exec(this,n)},Zb=function(n){if(!u(this,Rf))return;const r=window.getSelection();n?r.setPosition(u(this,Rf),u(this,Kv)):r.setPosition(u(this,Yv),u(this,Jv))},ew=function(){return u(this,Nn)?this.rotation:0},AU=function(){if(u(this,Nn))return null;const[n,r]=this.pageDimensions,[i,s]=this.pageTranslation,a=u(this,qa),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:h,width:d,height:f}of a){const p=c*n+i,g=(1-h)*r+s;o[l]=o[l+4]=p,o[l+1]=o[l+3]=g,o[l+2]=o[l+6]=p+d*n,o[l+5]=o[l+7]=g-f*r,l+=8}return o},EU=function(n){return u(this,Kr).serialize(n,P(this,xe,ew).call(this))},TU=function(n,r){this._freeHighlight.add(r)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},CU=function(n,r){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},PU=function(n){const{color:r}=this._initialData;return this.hasEditedComment||n.color.some((i,s)=>i!==r[s])},C(Fe,Ri),K(Fe,"_defaultColor",null),K(Fe,"_defaultOpacity",1),K(Fe,"_defaultThickness",12),K(Fe,"_type","highlight"),K(Fe,"_editorType",ve.HIGHLIGHT),K(Fe,"_freeHighlightId",-1),K(Fe,"_freeHighlight",null),K(Fe,"_freeHighlightClipId","");let Xx=Fe;var Ru;class OU{constructor(){C(this,Ru,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){u(this,Ru)[e]=n}toSVGProperties(){const e=u(this,Ru);return A(this,Ru,Object.create(null)),{root:e}}reset(){A(this,Ru,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){rt("Not implemented")}}Ru=new WeakMap;var Yr,Lf,mn,ju,Du,je,UC,zC,HC,Rg,kU,tw,jg,Bh;const Ce=class Ce extends ct{constructor(n){super(n);C(this,je);C(this,Yr,null);C(this,Lf);K(this,"_colorPicker",null);K(this,"_drawId",null);A(this,Lf,n.mustBeCommitted||!1),this._addOutlines(n)}onUpdatedColor(){var n;(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_addOutlines(n){n.drawOutlines&&(P(this,je,UC).call(this,n),P(this,je,Rg).call(this))}static _mergeSVGProperties(n,r){const i=new Set(Object.keys(n));for(const[s,a]of Object.entries(r))i.has(s)?Object.assign(n[s],a):n[s]=a;return n}static getDefaultDrawingOptions(n){rt("Not implemented")}static get typesMap(){rt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,r){const i=this.typesMap.get(n);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(u(Ce,mn).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,r){const i=this.constructor.typesMap.get(n);i&&this._updateProperty(n,i,r)}static get defaultPropertiesToUpdate(){const n=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)n.push([i,r[s]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)n.push([i,r[s]]);return n}_updateProperty(n,r,i){const s=this._drawingOptions,a=s[r],o=l=>{var h;s.updateProperty(r,l);const c=u(this,Yr).updateProperty(r,l);c&&P(this,je,jg).call(this,c),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),n===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Ce._mergeSVGProperties(u(this,Yr).getPathResizingSVGProperties(P(this,je,tw).call(this)),{bbox:P(this,je,Bh).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Ce._mergeSVGProperties(u(this,Yr).getPathResizedSVGProperties(P(this,je,tw).call(this)),{bbox:P(this,je,Bh).call(this)}))}_onTranslating(n,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:P(this,je,Bh).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Ce._mergeSVGProperties(u(this,Yr).getPathTranslatedSVGProperties(P(this,je,tw).call(this),this.parentDimensions),{bbox:P(this,je,Bh).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Lf)&&(A(this,Lf,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){P(this,je,HC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,je,Rg).call(this),P(this,je,jg).call(this,u(this,Yr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),P(this,je,HC).call(this)):n&&(this._uiManager.addShouldRescale(this),P(this,je,Rg).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ce._mergeSVGProperties({bbox:P(this,je,Bh).call(this)},u(this,Yr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&P(this,je,jg).call(this,u(this,Yr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,r;this._isCopy&&(n=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,r),i}static createDrawerInstance(n,r,i,s,a){rt("Not implemented")}static startDrawing(n,r,i,s){var b;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:h}=s;if(Wn.isInitializedAndDifferentPointerType(h))return;const{viewport:{rotation:d}}=n,{width:f,height:p}=a.getBoundingClientRect(),g=A(Ce,ju,new AbortController),m=n.combinedSignal(g);if(Wn.setPointer(h,c),window.addEventListener("pointerup",y=>{Wn.isSamePointerIdOrRemove(y.pointerId)&&this._endDraw(y)},{signal:m}),window.addEventListener("pointercancel",y=>{Wn.isSamePointerIdOrRemove(y.pointerId)&&this._currentParent.endDrawingSession()},{signal:m}),window.addEventListener("pointerdown",y=>{Wn.isSamePointerType(y.pointerType)&&(Wn.initializeAndAddPointerId(y.pointerId),u(Ce,mn).isCancellable()&&(u(Ce,mn).removeLastElement(),u(Ce,mn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Hi,{signal:m}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),a.addEventListener("touchmove",y=>{Wn.isSameTimeStamp(y.timeStamp)&&Lt(y)},{signal:m}),n.toggleDrawing(),(b=r._editorUndoBar)==null||b.hide(),u(Ce,mn)){n.drawLayer.updateProperties(this._currentDrawId,u(Ce,mn).startNew(o,l,f,p,d));return}r.updateUIForDefaultProperties(this),A(Ce,mn,this.createDrawerInstance(o,l,f,p,d)),A(Ce,Du,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(u(Ce,Du).toSVGProperties(),u(Ce,mn).defaultSVGProperties),!0,!1)}static _drawMove(n){if(Wn.isSameTimeStamp(n.timeStamp),!u(Ce,mn))return;const{offsetX:r,offsetY:i,pointerId:s}=n;if(Wn.isSamePointerId(s)){if(Wn.isUsingMultiplePointers()){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(Ce,mn).add(r,i)),Wn.setTimeStamp(n.timeStamp),Lt(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,A(Ce,mn,null),A(Ce,Du,null),Wn.clearTimeStamp()),u(Ce,ju)&&(u(Ce,ju).abort(),A(Ce,ju,null),Wn.clearPointerIds())}static _endDraw(n){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,u(Ce,mn).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const i=u(Ce,mn),s=this._currentDrawId,a=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Ie.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Ie.DRAW_STEP),!u(Ce,mn).isEmpty()){const{pageDimensions:[i,s],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(Ce,mn).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:u(Ce,Du),mustBeCommitted:!n});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,r,i,s,a,o){rt("Not implemented")}static async deserialize(n,r,i){var d,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,n),h=await super.deserialize(n,r,i);return h.createDrawingOptions(n),P(d=h,je,UC).call(d,{drawOutlines:c}),P(f=h,je,Rg).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(n){const[r,i]=this.pageTranslation,[s,a]=this.pageDimensions;return u(this,Yr).serialize([r,i,s,a],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Yr=new WeakMap,Lf=new WeakMap,mn=new WeakMap,ju=new WeakMap,Du=new WeakMap,je=new WeakSet,UC=function({drawOutlines:n,drawId:r,drawingOptions:i}){A(this,Yr,n),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,n.defaultProperties)):this._drawId=P(this,je,zC).call(this,n,this.parent),P(this,je,jg).call(this,n.box)},zC=function(n,r){const{id:i}=r.drawLayer.draw(Ce._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return i},HC=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Rg=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=P(this,je,zC).call(this,u(this,Yr),n)}},kU=function([n,r,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-n,i*(o/a),s*(a/o)];case 180:return[1-n,1-r,i,s];case 270:return[1-r,n,i*(o/a),s*(a/o)];default:return[n,r,i,s]}},tw=function(){const{x:n,y:r,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,n,i*(a/o),s*(o/a)];case 180:return[1-n,1-r,i,s];case 270:return[r,1-n,i*(a/o),s*(o/a)];default:return[n,r,i,s]}},jg=function(n){[this.x,this.y,this.width,this.height]=P(this,je,kU).call(this,n),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Bh=function(){const{x:n,y:r,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-s,n,s,i];case 2:return[1-n-i,1-r-s,i,s];case 3:return[r,1-n-i,s,i];case 4:return[n,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,n,i*(l/c),s*(c/l)];case 6:return[1-n-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-n-s*(c/l),i*(l/c),s*(c/l)];case 8:return[n-i,r-s,i,s];case 9:return[1-r,n-i,s,i];case 10:return[1-n,1-r,i,s];case 11:return[r-s,1-n,s,i];case 12:return[n-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),n-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-n,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-n,i*(l/c),s*(c/l)];default:return[n,r,i,s]}},K(Ce,"_currentDrawId",-1),K(Ce,"_currentParent",null),C(Ce,mn,null),C(Ce,ju,null),C(Ce,Du,null),K(Ce,"_INNER_MARGIN",3);let Yx=Ce;var Gs,yn,vn,$u,Ff,nr,In,ki,Lu,Fu,Bu,Bf,nw;class Gye{constructor(e,n,r,i,s,a){C(this,Bf);C(this,Gs,new Float64Array(6));C(this,yn);C(this,vn);C(this,$u);C(this,Ff);C(this,nr);C(this,In,"");C(this,ki,0);C(this,Lu,new _0);C(this,Fu);C(this,Bu);A(this,Fu,r),A(this,Bu,i),A(this,$u,s),A(this,Ff,a),[e,n]=P(this,Bf,nw).call(this,e,n);const o=A(this,yn,[NaN,NaN,NaN,NaN,e,n]);A(this,nr,[e,n]),A(this,vn,[{line:o,points:u(this,nr)}]),u(this,Gs).set(o,0)}updateProperty(e,n){e==="stroke-width"&&A(this,Ff,n)}isEmpty(){return!u(this,vn)||u(this,vn).length===0}isCancellable(){return u(this,nr).length<=10}add(e,n){[e,n]=P(this,Bf,nw).call(this,e,n);const[r,i,s,a]=u(this,Gs).subarray(2,6),o=e-s,l=n-a;return Math.hypot(u(this,Fu)*o,u(this,Bu)*l)<=2?null:(u(this,nr).push(e,n),isNaN(r)?(u(this,Gs).set([s,a,e,n],2),u(this,yn).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Gs)[0])&&u(this,yn).splice(6,6),u(this,Gs).set([r,i,s,a,e,n],0),u(this,yn).push(...ne.createBezierPoints(r,i,s,a,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(u(this,nr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,s){A(this,Fu,r),A(this,Bu,i),A(this,$u,s),[e,n]=P(this,Bf,nw).call(this,e,n);const a=A(this,yn,[NaN,NaN,NaN,NaN,e,n]);A(this,nr,[e,n]);const o=u(this,vn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),u(this,vn).push({line:a,points:u(this,nr)}),u(this,Gs).set(a,0),A(this,ki,0),this.toSVGPath(),null}getLastElement(){return u(this,vn).at(-1)}setLastElement(e){return u(this,vn)?(u(this,vn).push(e),A(this,yn,e.line),A(this,nr,e.points),A(this,ki,0),{path:{d:this.toSVGPath()}}):u(this,Lu).setLastElement(e)}removeLastElement(){if(!u(this,vn))return u(this,Lu).removeLastElement();u(this,vn).pop(),A(this,In,"");for(let e=0,n=u(this,vn).length;e<n;e++){const{line:r,points:i}=u(this,vn)[e];A(this,yn,r),A(this,nr,i),A(this,ki,0),this.toSVGPath()}return{path:{d:u(this,In)}}}toSVGPath(){const e=ne.svgRound(u(this,yn)[4]),n=ne.svgRound(u(this,yn)[5]);if(u(this,nr).length===2)return A(this,In,`${u(this,In)} M ${e} ${n} Z`),u(this,In);if(u(this,nr).length<=6){const i=u(this,In).lastIndexOf("M");A(this,In,`${u(this,In).slice(0,i)} M ${e} ${n}`),A(this,ki,6)}if(u(this,nr).length===4){const i=ne.svgRound(u(this,yn)[10]),s=ne.svgRound(u(this,yn)[11]);return A(this,In,`${u(this,In)} L ${i} ${s}`),A(this,ki,12),u(this,In)}const r=[];u(this,ki)===0&&(r.push(`M ${e} ${n}`),A(this,ki,6));for(let i=u(this,ki),s=u(this,yn).length;i<s;i+=6){const[a,o,l,c,h,d]=u(this,yn).slice(i,i+6).map(ne.svgRound);r.push(`C${a} ${o} ${l} ${c} ${h} ${d}`)}return A(this,In,u(this,In)+r.join(" ")),A(this,ki,u(this,yn).length),u(this,In)}getOutlines(e,n,r,i){const s=u(this,vn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),u(this,Lu).build(u(this,vn),e,n,r,u(this,$u),u(this,Ff),i),A(this,Gs,null),A(this,yn,null),A(this,vn,null),A(this,In,null),u(this,Lu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Gs=new WeakMap,yn=new WeakMap,vn=new WeakMap,$u=new WeakMap,Ff=new WeakMap,nr=new WeakMap,In=new WeakMap,ki=new WeakMap,Lu=new WeakMap,Fu=new WeakMap,Bu=new WeakMap,Bf=new WeakSet,nw=function(e,n){return ne._normalizePoint(e,n,u(this,Fu),u(this,Bu),u(this,$u))};var rr,Zv,e0,Jr,qs,Ks,Uf,zf,Uu,Dn,da,NU,IU,MU;class _0 extends ne{constructor(){super(...arguments);C(this,Dn);C(this,rr);C(this,Zv,0);C(this,e0);C(this,Jr);C(this,qs);C(this,Ks);C(this,Uf);C(this,zf);C(this,Uu)}build(n,r,i,s,a,o,l){A(this,qs,r),A(this,Ks,i),A(this,Uf,s),A(this,zf,a),A(this,Uu,o),A(this,e0,l??0),A(this,Jr,n),P(this,Dn,IU).call(this)}get thickness(){return u(this,Uu)}setLastElement(n){return u(this,Jr).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Jr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:r}of u(this,Jr)){if(n.push(`M${ne.svgRound(r[4])} ${ne.svgRound(r[5])}`),r.length===6){n.push("Z");continue}if(r.length===12&&isNaN(r[6])){n.push(`L${ne.svgRound(r[10])} ${ne.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[a,o,l,c,h,d]=r.subarray(i,i+6).map(ne.svgRound);n.push(`C${a} ${o} ${l} ${c} ${h} ${d}`)}}return n.join("")}serialize([n,r,i,s],a){const o=[],l=[],[c,h,d,f]=P(this,Dn,NU).call(this);let p,g,m,b,y,w,v,_,x;switch(u(this,zf)){case 0:x=ne._rescale,p=n,g=r+s,m=i,b=-s,y=n+c*i,w=r+(1-h-f)*s,v=n+(c+d)*i,_=r+(1-h)*s;break;case 90:x=ne._rescaleAndSwap,p=n,g=r,m=i,b=s,y=n+h*i,w=r+c*s,v=n+(h+f)*i,_=r+(c+d)*s;break;case 180:x=ne._rescale,p=n+i,g=r,m=-i,b=s,y=n+(1-c-d)*i,w=r+h*s,v=n+(1-c)*i,_=r+(h+f)*s;break;case 270:x=ne._rescaleAndSwap,p=n+i,g=r+s,m=-i,b=-s,y=n+(1-h-f)*i,w=r+(1-c-d)*s,v=n+(1-h)*i,_=r+(1-c)*s;break}for(const{line:S,points:T}of u(this,Jr))o.push(x(S,p,g,m,b,a?new Array(S.length):null)),l.push(x(T,p,g,m,b,a?new Array(T.length):null));return{lines:o,points:l,rect:[y,w,v,_]}}static deserialize(n,r,i,s,a,{paths:{lines:o,points:l},rotation:c,thickness:h}){const d=[];let f,p,g,m,b;switch(c){case 0:b=ne._rescale,f=-n/i,p=r/s+1,g=1/i,m=-1/s;break;case 90:b=ne._rescaleAndSwap,f=-r/s,p=-n/i,g=1/s,m=1/i;break;case 180:b=ne._rescale,f=n/i+1,p=-r/s,g=-1/i,m=1/s;break;case 270:b=ne._rescaleAndSwap,f=r/s+1,p=n/i+1,g=-1/s,m=-1/i;break}if(!o){o=[];for(const w of l){const v=w.length;if(v===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(v===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const _=new Float32Array(3*(v-2));o.push(_);let[x,S,T,O]=w.subarray(0,4);_.set([NaN,NaN,NaN,NaN,x,S],0);for(let k=4;k<v;k+=2){const M=w[k],N=w[k+1];_.set(ne.createBezierPoints(x,S,T,O,M,N),(k-2)*3),[x,S,T,O]=[T,O,M,N]}}}for(let w=0,v=o.length;w<v;w++)d.push({line:b(o[w].map(_=>_??NaN),f,p,g,m),points:b(l[w].map(_=>_??NaN),f,p,g,m)});const y=new this.prototype.constructor;return y.build(d,i,s,1,c,h,a),y}get box(){return u(this,rr)}updateProperty(n,r){return n==="stroke-width"?P(this,Dn,MU).call(this,r):null}updateParentDimensions([n,r],i){const[s,a]=P(this,Dn,da).call(this);A(this,qs,n),A(this,Ks,r),A(this,Uf,i);const[o,l]=P(this,Dn,da).call(this),c=o-s,h=l-a,d=u(this,rr);return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateRotation(n){return A(this,Zv,n),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,rr).map(ne.svgRound).join(" ")}get defaultProperties(){const[n,r]=u(this,rr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(r)}`}}}get rotationTransform(){const[,,n,r]=u(this,rr);let i=0,s=0,a=0,o=0,l=0,c=0;switch(u(this,Zv)){case 90:s=r/n,a=-n/r,l=n;break;case 180:i=-1,o=-1,l=n,c=r;break;case 270:s=-r/n,a=n/r,c=r;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${ne.svgRound(l)} ${ne.svgRound(c)})`}getPathResizingSVGProperties([n,r,i,s]){const[a,o]=P(this,Dn,da).call(this),[l,c,h,d]=u(this,rr);if(Math.abs(h-a)<=ne.PRECISION||Math.abs(d-o)<=ne.PRECISION){const b=n+i/2-(l+h/2),y=r+s/2-(c+d/2);return{path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(r)}`,transform:`${this.rotationTransform} translate(${b} ${y})`}}}const f=(i-2*a)/(h-2*a),p=(s-2*o)/(d-2*o),g=h/i,m=d/s;return{path:{"transform-origin":`${ne.svgRound(l)} ${ne.svgRound(c)}`,transform:`${this.rotationTransform} scale(${g} ${m}) translate(${ne.svgRound(a)} ${ne.svgRound(o)}) scale(${f} ${p}) translate(${ne.svgRound(-a)} ${ne.svgRound(-o)})`}}}getPathResizedSVGProperties([n,r,i,s]){const[a,o]=P(this,Dn,da).call(this),l=u(this,rr),[c,h,d,f]=l;if(l[0]=n,l[1]=r,l[2]=i,l[3]=s,Math.abs(d-a)<=ne.PRECISION||Math.abs(f-o)<=ne.PRECISION){const y=n+i/2-(c+d/2),w=r+s/2-(h+f/2);for(const{line:v,points:_}of u(this,Jr))ne._translate(v,y,w,v),ne._translate(_,y,w,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*a)/(d-2*a),g=(s-2*o)/(f-2*o),m=-p*(c+a)+n+a,b=-g*(h+o)+r+o;if(p!==1||g!==1||m!==0||b!==0)for(const{line:y,points:w}of u(this,Jr))ne._rescale(y,m,b,p,g,y),ne._rescale(w,m,b,p,g,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,r],i){const[s,a]=i,o=u(this,rr),l=n-o[0],c=r-o[1];if(u(this,qs)===s&&u(this,Ks)===a)for(const{line:h,points:d}of u(this,Jr))ne._translate(h,l,c,h),ne._translate(d,l,c,d);else{const h=u(this,qs)/s,d=u(this,Ks)/a;A(this,qs,s),A(this,Ks,a);for(const{line:f,points:p}of u(this,Jr))ne._rescale(f,l,c,h,d,f),ne._rescale(p,l,c,h,d,p);o[2]*=h,o[3]*=d}return o[0]=n,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(r)}`}}}get defaultSVGProperties(){const n=u(this,rr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(n[0])} ${ne.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}rr=new WeakMap,Zv=new WeakMap,e0=new WeakMap,Jr=new WeakMap,qs=new WeakMap,Ks=new WeakMap,Uf=new WeakMap,zf=new WeakMap,Uu=new WeakMap,Dn=new WeakSet,da=function(n=u(this,Uu)){const r=u(this,e0)+n/2*u(this,Uf);return u(this,zf)%180===0?[r/u(this,qs),r/u(this,Ks)]:[r/u(this,Ks),r/u(this,qs)]},NU=function(){const[n,r,i,s]=u(this,rr),[a,o]=P(this,Dn,da).call(this,0);return[n+a,r+o,i-2*a,s-2*o]},IU=function(){const n=A(this,rr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of u(this,Jr)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)ee.pointBoundingBox(s[l],s[l+1],n);continue}let a=s[4],o=s[5];for(let l=6,c=s.length;l<c;l+=6){const[h,d,f,p,g,m]=s.subarray(l,l+6);ee.bezierBoundingBox(a,o,h,d,f,p,g,m,n),a=g,o=m}}const[r,i]=P(this,Dn,da).call(this);n[0]=ar(n[0]-r,0,1),n[1]=ar(n[1]-i,0,1),n[2]=ar(n[2]+r,0,1),n[3]=ar(n[3]+i,0,1),n[2]-=n[0],n[3]-=n[1]},MU=function(n){const[r,i]=P(this,Dn,da).call(this);A(this,Uu,n);const[s,a]=P(this,Dn,da).call(this),[o,l]=[s-r,a-i],c=u(this,rr);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};class I_ extends OU{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new I_(this._viewParameters);return e.updateAll(this),e}}var m1,RU;const ld=class ld extends Yx{constructor(n){super({...n,name:"inkEditor"});C(this,m1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,r){ct.initialize(n,r),this._defaultDrawingOptions=new I_(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return me(this,"typesMap",new Map([[Ie.INK_THICKNESS,"stroke-width"],[Ie.INK_COLOR,"stroke"],[Ie.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,r,i,s,a){return new Gye(n,r,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,r,i,s,a,o){return _0.deserialize(n,r,i,s,a,o)}static async deserialize(n,r,i){let s=null;if(n instanceof mk){const{data:{inkLists:o,rect:l,rotation:c,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:g,richText:m,contentsObj:b,creationDate:y,modificationDate:w},parent:{page:{pageNumber:v}}}=n;s=n={annotationType:ve.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:o},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:c,annotationElementId:h,id:h,deleted:!1,popupRef:g,richText:m,comment:(b==null?void 0:b.str)||null,creationDate:y,modificationDate:w}}const a=await super.deserialize(n,r,i);return a._initialData=s,n.comment&&a.setCommentData(n),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Gx(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ie.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:r,opacity:i}){this._drawingOptions=ld.getDefaultDrawingOptions({stroke:ee.makeHexColor(...n),"stroke-width":r,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l=Object.assign(super.serialize(n),{color:ct._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:r,points:i}});return this.addComment(l),n?(l.isCopy=!0,l):this.annotationElementId&&!P(this,m1,RU).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(n){if(this.deleted)return n.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};m1=new WeakSet,RU=function(n){const{color:r,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||n.color.some((o,l)=>o!==r[l])||n.thickness!==i||n.opacity!==s||n.pageIndex!==a},K(ld,"_type","ink"),K(ld,"_editorType",ve.INK),K(ld,"_defaultDrawingOptions",null);let WC=ld;class VC extends _0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const pb=8,cg=3;var zu,Ue,GC,ls,jU,DU,qC,rw,$U,LU,FU,KC,XC,BU;class Za{static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:i},s,a,o,l){let c=new OffscreenCanvas(1,1),h=c.getContext("2d",{alpha:!1});const d=200,f=h.font=`${r} ${i} ${d}px ${n}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:g,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,fontBoundingBoxAscent:y,fontBoundingBoxDescent:w,width:v}=h.measureText(e),_=1.5,x=Math.ceil(Math.max(Math.abs(p)+Math.abs(g)||0,v)*_),S=Math.ceil(Math.max(Math.abs(m)+Math.abs(b)||d,Math.abs(y)+Math.abs(w)||d)*_);c=new OffscreenCanvas(x,S),h=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,x,S),h.fillStyle="black",h.fillText(e,x*(_-1)/2,S*(3-_)/2);const T=P(this,Ue,KC).call(this,h.getImageData(0,0,x,S).data),O=P(this,Ue,FU).call(this,T),k=P(this,Ue,XC).call(this,O),M=P(this,Ue,qC).call(this,T,x,S,k);return this.processDrawnLines({lines:{curves:M,width:x,height:S},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,n,r,i,s){const[a,o,l]=P(this,Ue,BU).call(this,e),[c,h]=P(this,Ue,LU).call(this,a,o,l,Math.hypot(o,l)*u(this,zu).sigmaSFactor,u(this,zu).sigmaR,u(this,zu).kernelSize),d=P(this,Ue,XC).call(this,h),f=P(this,Ue,qC).call(this,c,o,l,d);return this.processDrawnLines({lines:{curves:f,width:o,height:l},pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([n,r]=[r,n]);const{curves:l,width:c,height:h}=e,d=e.thickness??0,f=[],p=Math.min(n/c,r/h),g=p/n,m=p/r,b=[];for(const{points:w}of l){const v=a?P(this,Ue,$U).call(this,w):w;if(!v)continue;b.push(v);const _=v.length,x=new Float32Array(_),S=new Float32Array(3*(_===2?2:_-2));if(f.push({line:S,points:x}),_===2){x[0]=v[0]*g,x[1]=v[1]*m,S.set([NaN,NaN,NaN,NaN,x[0],x[1]],0);continue}let[T,O,k,M]=v;T*=g,O*=m,k*=g,M*=m,x.set([T,O,k,M],0),S.set([NaN,NaN,NaN,NaN,T,O],0);for(let N=4;N<_;N+=2){const I=x[N]=v[N]*g,R=x[N+1]=v[N+1]*m;S.set(ne.createBezierPoints(T,O,k,M,I,R),(N-2)*3),[T,O,k,M]=[k,M,I,R]}}if(f.length===0)return null;const y=o?new VC:new _0;return y.build(f,n,r,1,i,o?0:d,s),{outline:y,newCurves:b,areContours:o,thickness:d,width:c,height:h}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const v of e){l+=v.length;for(let _=2,x=v.length;_<x;_++){const S=v[_]-v[_-2];a=Math.min(a,S),o=Math.max(o,S)}}let c;a>=-128&&o<=127?c=Int8Array:a>=-32768&&o<=32767?c=Int16Array:c=Int32Array;const h=e.length,d=pb+cg*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*c.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=n?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=h,f[p++]=c.BYTES_PER_ELEMENT;for(const v of e)f[p++]=v.length-2,f[p++]=v[0],f[p++]=v[1];const g=new CompressionStream("deflate-raw"),m=g.writable.getWriter();await m.ready,m.write(f);const b=c.prototype.constructor;for(const v of e){const _=new b(v.length-2);for(let x=2,S=v.length;x<S;x++)_[x-2]=v[x]-v[x-2];m.write(_)}m.close();const y=await new Response(g.readable).arrayBuffer(),w=new Uint8Array(y);return L3(w)}static async decompressSignature(e){try{const n=ome(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(n).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const v of r)a||(a=new Uint8Array(new Uint32Array(v.buffer,0,4)[0])),a.set(v,o),o+=v.length;const l=new Uint32Array(a.buffer,0,a.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const h=l[2],d=l[3],f=l[4]===0,p=l[5],g=l[6],m=l[7],b=[],y=(pb+cg*g)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(m){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(a.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(a.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(a.buffer,y);break}o=0;for(let v=0;v<g;v++){const _=l[cg*v+pb],x=new Float32Array(_+2);b.push(x);for(let S=0;S<cg-1;S++)x[S]=l[cg*v+pb+S+1];for(let S=0;S<_;S++)x[S+2]=x[S]+w[o++]}return{areContours:f,thickness:p,outlines:b,width:h,height:d}}catch(n){return ge(`decompressSignature: ${n}`),null}}}zu=new WeakMap,Ue=new WeakSet,GC=function(e,n,r,i){return r-=e,i-=n,r===0?i>0?0:4:r===1?i+6:2-i},ls=new WeakMap,jU=function(e,n,r,i,s,a,o){const l=P(this,Ue,GC).call(this,r,i,s,a);for(let c=0;c<8;c++){const h=(-c+l-o+16)%8,d=u(this,ls)[2*h],f=u(this,ls)[2*h+1];if(e[(r+d)*n+(i+f)]!==0)return h}return-1},DU=function(e,n,r,i,s,a,o){const l=P(this,Ue,GC).call(this,r,i,s,a);for(let c=0;c<8;c++){const h=(c+l+o+16)%8,d=u(this,ls)[2*h],f=u(this,ls)[2*h+1];if(e[(r+d)*n+(i+f)]!==0)return h}return-1},qC=function(e,n,r,i){const s=e.length,a=new Int32Array(s);for(let h=0;h<s;h++)a[h]=e[h]<=i?1:0;for(let h=1;h<r-1;h++)a[h*n]=a[h*n+n-1]=0;for(let h=0;h<n;h++)a[h]=a[n*r-1-h]=0;let o=1,l;const c=[];for(let h=1;h<r-1;h++){l=1;for(let d=1;d<n-1;d++){const f=h*n+d,p=a[f];if(p===0)continue;let g=h,m=d;if(p===1&&a[f-1]===0)o+=1,m-=1;else if(p>=1&&a[f+1]===0)o+=1,m+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const b=[d,h],y=m===d+1,w={isHole:y,points:b,id:o,parent:0};c.push(w);let v;for(const N of c)if(N.id===l){v=N;break}v?v.isHole?w.parent=y?v.parent:l:w.parent=y?l:v.parent:w.parent=y?l:0;const _=P(this,Ue,jU).call(this,a,n,h,d,g,m,0);if(_===-1){a[f]=-o,a[f]!==1&&(l=Math.abs(a[f]));continue}let x=u(this,ls)[2*_],S=u(this,ls)[2*_+1];const T=h+x,O=d+S;g=T,m=O;let k=h,M=d;for(;;){const N=P(this,Ue,DU).call(this,a,n,k,M,g,m,1);x=u(this,ls)[2*N],S=u(this,ls)[2*N+1];const I=k+x,R=M+S;b.push(R,I);const F=k*n+M;if(a[F+1]===0?a[F]=-o:a[F]===1&&(a[F]=o),I===h&&R===d&&k===T&&M===O){a[f]!==1&&(l=Math.abs(a[f]));break}else g=k,m=M,k=I,M=R}}}return c},rw=function(e,n,r,i){if(r-n<=4){for(let T=n;T<r-2;T+=2)i.push(e[T],e[T+1]);return}const s=e[n],a=e[n+1],o=e[r-4]-s,l=e[r-3]-a,c=Math.hypot(o,l),h=o/c,d=l/c,f=h*a-d*s,p=l/o,g=1/c,m=Math.atan(p),b=Math.cos(m),y=Math.sin(m),w=g*(Math.abs(b)+Math.abs(y)),v=g*(1-w+w**2),_=Math.max(Math.atan(Math.abs(y+b)*v),Math.atan(Math.abs(y-b)*v));let x=0,S=n;for(let T=n+2;T<r-2;T+=2){const O=Math.abs(f-h*e[T+1]+d*e[T]);O>x&&(S=T,x=O)}x>(c*_)**2?(P(this,Ue,rw).call(this,e,n,S+2,i),P(this,Ue,rw).call(this,e,S,r,i)):i.push(s,a)},$U=function(e){const n=[],r=e.length;return P(this,Ue,rw).call(this,e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n},LU=function(e,n,r,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,c=a>>1;for(let m=0;m<a;m++){const b=(m-c)**2;for(let y=0;y<a;y++)o[m*a+y]=Math.exp((b+(y-c)**2)/l)}const h=new Float32Array(256),d=-2*s**2;for(let m=0;m<256;m++)h[m]=Math.exp(m**2/d);const f=e.length,p=new Uint8Array(f),g=new Uint32Array(256);for(let m=0;m<r;m++)for(let b=0;b<n;b++){const y=m*n+b,w=e[y];let v=0,_=0;for(let S=0;S<a;S++){const T=m+S-c;if(!(T<0||T>=r))for(let O=0;O<a;O++){const k=b+O-c;if(k<0||k>=n)continue;const M=e[T*n+k],N=o[S*a+O]*h[Math.abs(M-w)];v+=M*N,_+=N}}const x=p[y]=Math.round(v/_);g[x]++}return[p,g]},FU=function(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n},KC=function(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let i=-1/0,s=1/0;for(let o=0,l=r.length;o<l;o++){const c=r[o]=e[o<<2];i=Math.max(i,c),s=Math.min(s,c)}const a=255/(i-s);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-s)*a;return r},XC=function(e){let n,r=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(n=s;n<256;n++){const l=e[n];l>r&&(n-a>i&&(i=n-a,o=n-1),r=l,a=n)}for(n=o-1;n>=0&&!(e[n]>e[n+1]);n--);return n},BU=function(e){const n=e,{width:r,height:i}=e,{maxDim:s}=u(this,zu);let a=r,o=i;if(r>s||i>s){let f=r,p=i,g=Math.log2(Math.max(r,i)/s);const m=Math.floor(g);g=g===m?m-1:m;for(let y=0;y<g;y++){a=Math.ceil(f/2),o=Math.ceil(p/2);const w=new OffscreenCanvas(a,o);w.getContext("2d").drawImage(e,0,0,f,p,0,0,a,o),f=a,p=o,e!==n&&e.close(),e=w.transferToImageBitmap()}const b=Math.min(s/a,s/o);a=Math.round(a*b),o=Math.round(o*b)}const c=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,a,o),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,a,o);const h=c.getImageData(0,0,a,o).data;return[P(this,Ue,KC).call(this,h),a,o]},C(Za,Ue),C(Za,zu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),C(Za,ls,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class yk extends OU{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const e=new yk;return e.updateAll(this),e}}class vk extends I_{constructor(e){super(e),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const e=new vk(this._viewParameters);return e.updateAll(this),e}}var xl,Xs,_l,Hu;const Ir=class Ir extends Yx{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});C(this,xl,!1);C(this,Xs,null);C(this,_l,null);C(this,Hu,null);this._willKeepAspectRatio=!0,A(this,_l,n.signatureData||null),A(this,Xs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,r){ct.initialize(n,r),this._defaultDrawingOptions=new yk,this._defaultDrawnSignatureOptions=new vk(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return me(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Xs)}}static computeTelemetryFinalData(n){const r=n.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,n=this.x,r=this.y),super.render(),this._drawId===null)if(u(this,_l)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:h}=u(this,_l),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,g=Za.processDrawnLines({lines:s,pageWidth:d,pageHeight:f,rotation:p,innerMargin:Ir._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(g,h,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Xs)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(n,r)),this.div}setUuid(n){A(this,Hu,n),this.addEditToolbar()}getUuid(){return u(this,Hu)}get description(){return u(this,Xs)}set description(n){A(this,Xs,n),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(n)}))}getSignaturePreview(){const{newCurves:n,areContours:r,thickness:i,width:s,height:a}=u(this,_l),o=Math.max(s,a),l=Za.processDrawnLines({lines:{curves:n.map(c=>({points:c})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(n,r,i,s){const{x:a,y:o}=this,{outline:l}=A(this,_l,n);A(this,xl,l instanceof VC),this.description=i;let c;u(this,xl)?c=Ir.getDefaultDrawingOptions():(c=Ir._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,h]=this.pageDimensions;let d=r/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Za.process(n,r,i,s,Ir._INNER_MARGIN)}getFromText(n,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Za.extractContoursFromText(n,r,i,s,a,Ir._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Za.processDrawnLines({lines:n,pageWidth:r,pageHeight:i,rotation:s,innerMargin:Ir._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:r}){n?this._drawingOptions=Ir.getDefaultDrawingOptions():(this._drawingOptions=Ir._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(n),{isSignature:!0,areContours:u(this,xl),color:[0,0,0],thickness:u(this,xl)?0:s});return this.addComment(a),n?(a.paths={lines:r,points:i},a.uuid=u(this,Hu),a.isCopy=!0):a.lines=r,u(this,Xs)&&(a.accessibilityData={type:"Figure",alt:u(this,Xs)}),a}static deserializeDraw(n,r,i,s,a,o){return o.areContours?VC.deserialize(n,r,i,s,a,o):_0.deserialize(n,r,i,s,a,o)}static async deserialize(n,r,i){var a;const s=await super.deserialize(n,r,i);return A(s,xl,n.areContours),s.description=((a=n.accessibilityData)==null?void 0:a.alt)||"",A(s,Hu,n.uuid),s}};xl=new WeakMap,Xs=new WeakMap,_l=new WeakMap,Hu=new WeakMap,K(Ir,"_type","signature"),K(Ir,"_editorType",ve.SIGNATURE),K(Ir,"_defaultDrawingOptions",null);let YC=Ir;var bt,bn,Sl,Ka,Al,Hf,Xa,Wu,Ys,Qr,Wf,$e,Dg,$g,iw,sw,aw,QC,ow,UU;class JC extends ct{constructor(n){super({...n,name:"stampEditor"});C(this,$e);C(this,bt,null);C(this,bn,null);C(this,Sl,null);C(this,Ka,null);C(this,Al,null);C(this,Hf,"");C(this,Xa,null);C(this,Wu,!1);C(this,Ys,null);C(this,Qr,!1);C(this,Wf,!1);A(this,Ka,n.bitmapUrl),A(this,Al,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,r){ct.initialize(n,r)}static isHandlingMimeForPasting(n){return DT.includes(n)}static paste(n,r){r.pasteEditor({mode:ve.STAMP},{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const r=n.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(n=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=n||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var n;u(this,bn)&&(A(this,bt,null),this._uiManager.imageManager.deleteId(u(this,bn)),(n=u(this,Xa))==null||n.remove(),A(this,Xa,null),u(this,Ys)&&(clearTimeout(u(this,Ys)),A(this,Ys,null))),super.remove()}rebuild(){if(!this.parent){u(this,bn)&&P(this,$e,iw).call(this);return}super.rebuild(),this.div!==null&&(u(this,bn)&&u(this,Xa)===null&&P(this,$e,iw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(u(this,Sl)||u(this,bt)||u(this,Ka)||u(this,Al)||u(this,bn)||u(this,Wu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let n,r;return this._isCopy&&(n=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Wu)||(u(this,bt)?P(this,$e,sw).call(this):P(this,$e,iw).call(this)),this._isCopy&&this._moveAfterPaste(n,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(n,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(A(this,bn,i),s&&A(this,bt,s),A(this,Wu,!1),P(this,$e,sw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Ys)!==null&&clearTimeout(u(this,Ys)),A(this,Ys,setTimeout(()=>{A(this,Ys,null),P(this,$e,QC).call(this)},200))}copyCanvas(n,r,i=!1){n||(n=224);const{width:s,height:a}=u(this,bt),o=new aa;let l=u(this,bt),c=s,h=a,d=null;if(r){if(s>r||a>r){const T=Math.min(r/s,r/a);c=Math.floor(s*T),h=Math.floor(a*T)}d=document.createElement("canvas");const p=d.width=Math.ceil(c*o.sx),g=d.height=Math.ceil(h*o.sy);u(this,Qr)||(l=P(this,$e,aw).call(this,p,g));const m=d.getContext("2d");m.filter=this._uiManager.hcmFilter;let b="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":fme.isDarkMode&&(b="#8f8f9d",y="#42414d");const w=15,v=w*o.sx,_=w*o.sy,x=new OffscreenCanvas(v*2,_*2),S=x.getContext("2d");S.fillStyle=b,S.fillRect(0,0,v*2,_*2),S.fillStyle=y,S.fillRect(0,0,v,_),S.fillRect(v,_,v,_),m.fillStyle=m.createPattern(x,"repeat"),m.fillRect(0,0,p,g),m.drawImage(l,0,0,l.width,l.height,0,0,p,g)}let f=null;if(i){let p,g;if(o.symmetric&&l.width<n&&l.height<n)p=l.width,g=l.height;else if(l=u(this,bt),s>n||a>n){const y=Math.min(n/s,n/a);p=Math.floor(s*y),g=Math.floor(a*y),u(this,Qr)||(l=P(this,$e,aw).call(this,p,g))}const b=new OffscreenCanvas(p,g).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,p,g),f={width:p,height:g,data:b.getImageData(0,0,p,g).data}}return{canvas:d,width:c,height:h,imageData:f}}static async deserialize(n,r,i){var b;let s=null,a=!1;if(n instanceof rU){const{data:{rect:y,rotation:w,id:v,structParent:_,popupRef:x,richText:S,contentsObj:T,creationDate:O,modificationDate:k},container:M,parent:{page:{pageNumber:N}},canvas:I}=n;let R,F;I?(delete n.canvas,{id:R,bitmap:F}=i.imageManager.getFromCanvas(M.id,I),I.remove()):(a=!0,n._hasNoCanvas=!0);const D=((b=await r._structTree.getAriaAttributes(`${rd}${v}`))==null?void 0:b.get("aria-label"))||"";s=n={annotationType:ve.STAMP,bitmapId:R,bitmap:F,pageIndex:N-1,rect:y.slice(0),rotation:w,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:_,popupRef:x,richText:S,comment:(T==null?void 0:T.str)||null,creationDate:O,modificationDate:k}}const o=await super.deserialize(n,r,i),{rect:l,bitmap:c,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=n;a?(i.addMissingCanvas(n.id,o),A(o,Wu,!0)):d&&i.imageManager.isValidId(d)?(A(o,bn,d),c&&A(o,bt,c)):A(o,Ka,h),A(o,Qr,f);const[g,m]=o.pageDimensions;return o.width=(l[2]-l[0])/g,o.height=(l[3]-l[1])/m,p&&(o.altTextData=p),o._initialData=s,n.comment&&o.setCommentData(n),A(o,Wf,!!s),o}serialize(n=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(n),{bitmapId:u(this,bn),isSvg:u(this,Qr)});if(this.addComment(i),n)return i.bitmapUrl=P(this,$e,ow).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=P(this,$e,UU).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const o=u(this,Qr)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(u(this,bn)))r.stamps.set(u(this,bn),{area:o,serialized:i}),i.bitmap=P(this,$e,ow).call(this,!1);else if(u(this,Qr)){const l=r.stamps.get(u(this,bn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=P(this,$e,ow).call(this,!1))}return i}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}bt=new WeakMap,bn=new WeakMap,Sl=new WeakMap,Ka=new WeakMap,Al=new WeakMap,Hf=new WeakMap,Xa=new WeakMap,Wu=new WeakMap,Ys=new WeakMap,Qr=new WeakMap,Wf=new WeakMap,$e=new WeakSet,Dg=function(n,r=!1){if(!n){this.remove();return}A(this,bt,n.bitmap),r||(A(this,bn,n.id),A(this,Qr,n.isSvg)),n.file&&A(this,Hf,n.file.name),P(this,$e,sw).call(this)},$g=function(){if(A(this,Sl,null),this._uiManager.enableWaiting(!1),!!u(this,Xa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,bt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,bt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},iw=function(){if(u(this,bn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,bn)).then(i=>P(this,$e,Dg).call(this,i,!0)).finally(()=>P(this,$e,$g).call(this));return}if(u(this,Ka)){const i=u(this,Ka);A(this,Ka,null),this._uiManager.enableWaiting(!0),A(this,Sl,this._uiManager.imageManager.getFromUrl(i).then(s=>P(this,$e,Dg).call(this,s)).finally(()=>P(this,$e,$g).call(this)));return}if(u(this,Al)){const i=u(this,Al);A(this,Al,null),this._uiManager.enableWaiting(!0),A(this,Sl,this._uiManager.imageManager.getFromFile(i).then(s=>P(this,$e,Dg).call(this,s)).finally(()=>P(this,$e,$g).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=DT.join(",");const r=this._uiManager._signal;A(this,Sl,new Promise(i=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,$e,Dg).call(this,s)}i()},{signal:r}),n.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>P(this,$e,$g).call(this))),n.click()},sw=function(){var c;const{div:n}=this;let{width:r,height:i}=u(this,bt);const[s,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*s,i=this.height*a;else if(r>o*s||i>o*a){const h=Math.min(o*s/r,o*a/i);r*=h,i*=h}this._uiManager.enableWaiting(!1);const l=A(this,Xa,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=r/s,this.height=i/a,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),P(this,$e,QC).call(this),u(this,Wf)||(this.parent.addUndoableEditor(this),A(this,Wf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Hf)&&this.div.setAttribute("aria-description",u(this,Hf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},aw=function(n,r){const{width:i,height:s}=u(this,bt);let a=i,o=s,l=u(this,bt);for(;a>2*n||o>2*r;){const c=a,h=o;a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(l,0,0,c,h,0,0,a,o),l=d.transferToImageBitmap()}return l},QC=function(){const[n,r]=this.parentDimensions,{width:i,height:s}=this,a=new aa,o=Math.ceil(i*n*a.sx),l=Math.ceil(s*r*a.sy),c=u(this,Xa);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const h=u(this,Qr)?u(this,bt):P(this,$e,aw).call(this,o,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,l)},ow=function(n){if(n){if(u(this,Qr)){const s=this._uiManager.imageManager.getSvgUrl(u(this,bn));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=u(this,bt),r.getContext("2d").drawImage(u(this,bt),0,0),r.toDataURL()}if(u(this,Qr)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*ql.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*ql.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(u(this,bt),0,0,u(this,bt).width,u(this,bt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(u(this,bt))},UU=function(n){var o;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=n.pageIndex===r,a=(((o=n.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},K(JC,"_type","stamp"),K(JC,"_editorType",ve.STAMP);var Vu,Vf,El,Tl,Ya,_r,Cl,Gf,qf,cs,Ja,wn,Qa,Pl,Kf,se,Ol,tt,eP,zU,Cs,tP,nP,lw;const Yi=class Yi{constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:h}){C(this,tt);C(this,Vu);C(this,Vf,!1);C(this,El,null);C(this,Tl,null);C(this,Ya,null);C(this,_r,new Map);C(this,Cl,!1);C(this,Gf,!1);C(this,qf,!1);C(this,cs,null);C(this,Ja,null);C(this,wn,null);C(this,Qa,null);C(this,Pl,null);C(this,Kf,-1);C(this,se);const d=[...u(Yi,Ol).values()];if(!Yi._initialized){Yi._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),A(this,se,e),this.pageIndex=n,this.div=r,A(this,Vu,s),A(this,El,a),this.viewport=c,A(this,wn,l),this.drawLayer=o,this._structTree=i,u(this,se).addLayer(this)}get isEmpty(){return u(this,_r).size===0}get isInvisible(){return this.isEmpty&&u(this,se).getMode()===ve.NONE}updateToolbar(e){u(this,se).updateToolbar(e)}updateMode(e=u(this,se).getMode()){switch(P(this,tt,lw).call(this),e){case ve.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ve.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===ve.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of u(Yi,Ol).values())n.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=u(this,wn))==null?void 0:n.div)}setEditingState(e){u(this,se).setEditingState(e)}addCommands(e){u(this,se).addCommands(e)}cleanUndoStack(e){u(this,se).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=u(this,El))==null||n.togglePointerEvents(e)}async enable(){var r;A(this,qf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=u(this,Pl))==null||r.abort(),A(this,Pl,null);const e=new Set;for(const i of u(this,tt,eP))i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,se).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=u(this,El);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),u(this,se).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}A(this,qf,!1),u(this,se)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(A(this,Gf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,wn)&&!u(this,Pl)){A(this,Pl,new AbortController);const s=u(this,se).combinedSignal(u(this,Pl));u(this,wn).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:h}=a,d=u(this,Kf);if(h-d>500){A(this,Kf,h);return}A(this,Kf,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let g;const m=new RegExp(`^${oy}[0-9]+$`);for(const y of p)if(m.test(y.id)){g=y.id;break}if(!g)return;const b=u(this,_r).get(g);(b==null?void 0:b.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),b.dblclick(a))},{signal:s,capture:!0})}const e=u(this,El),n=[];if(e){const s=new Map,a=new Map;for(const l of u(this,tt,eP)){if(l.disableEditing(),!l.annotationElementId){n.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(u(this,se).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let h=a.get(c);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=s.get(c),h&&(u(this,se).addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}P(this,tt,lw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of u(Yi,Ol).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(n),A(this,Gf,!1)}getEditableAnnotation(e){var n;return((n=u(this,El))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,se).getActive()!==e&&u(this,se).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,wn))!=null&&e.div&&!u(this,Qa)){A(this,Qa,new AbortController);const n=u(this,se).combinedSignal(u(this,Qa));u(this,wn).div.addEventListener("pointerdown",P(this,tt,zU).bind(this),{signal:n}),u(this,wn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,wn))!=null&&e.div&&u(this,Qa)&&(u(this,Qa).abort(),A(this,Qa,null),u(this,wn).div.classList.remove("highlighting"))}enableClick(){if(u(this,Tl))return;A(this,Tl,new AbortController);const e=u(this,se).combinedSignal(u(this,Tl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=u(this,Tl))==null||e.abort(),A(this,Tl,null)}attach(e){u(this,_r).set(e.id,e);const{annotationElementId:n}=e;n&&u(this,se).isDeletedAnnotationElement(n)&&u(this,se).removeDeletedAnnotationElement(e)}detach(e){var n;u(this,_r).delete(e.id),(n=u(this,Vu))==null||n.removePointerInTextLayer(e.contentDiv),!u(this,Gf)&&e.annotationElementId&&u(this,se).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,se).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,se).addDeletedAnnotationElement(e),ct.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,se).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,qf)),u(this,se).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!u(this,Ya)&&(e._focusEventsAllowed=!1,A(this,Ya,setTimeout(()=>{A(this,Ya,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,se)._signal}),n.focus())},0))),e._structTreeParentId=(r=u(this,Vu))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getEditorByUID(e){for(const n of u(this,_r).values())if(n.uid===e)return n;return null}getNextId(){return u(this,se).getId()}combinedSignal(e){return u(this,se).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,tt,Cs))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await u(this,se).updateMode(e.mode);const{offsetX:r,offsetY:i}=P(this,tt,nP).call(this),s=this.getNextId(),a=P(this,tt,tP).call(this,{parent:this,id:s,x:r,y:i,uiManager:u(this,se),isCentered:!0,...n});a&&this.add(a)}async deserialize(e){var n;return await((n=u(Yi,Ol).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,u(this,se)))||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),s=P(this,tt,tP).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:u(this,se),isCentered:n,...r});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(P(this,tt,nP).call(this),!0,e)}setSelected(e){u(this,se).setSelected(e)}toggleSelected(e){u(this,se).toggleSelected(e)}unselect(e){u(this,se).unselect(e)}pointerup(e){var i;const{isMac:n}=hn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!u(this,Cl)||(A(this,Cl,!1),(i=u(this,tt,Cs))!=null&&i.isDrawer&&u(this,tt,Cs).supportMultipleDrawings))return;if(!u(this,Vf)){A(this,Vf,!0);return}const r=u(this,se).getMode();if(r===ve.STAMP||r===ve.SIGNATURE){u(this,se).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(u(this,se).getMode()===ve.HIGHLIGHT&&this.enableTextSelection(),u(this,Cl)){A(this,Cl,!1);return}const{isMac:n}=hn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(A(this,Cl,!0),(i=u(this,tt,Cs))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=u(this,se).getActive();A(this,Vf,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,cs)){u(this,tt,Cs).startDrawing(this,u(this,se),!1,e);return}u(this,se).setCurrentDrawingSession(this),A(this,cs,new AbortController);const n=u(this,se).combinedSignal(u(this,cs));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(A(this,Ja,null),this.commitOrRemove())},{signal:n}),u(this,tt,Cs).startDrawing(this,u(this,se),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&A(this,Ja,n);return}u(this,Ja)&&setTimeout(()=>{var n;(n=u(this,Ja))==null||n.focus(),A(this,Ja,null)},0)}endDrawingSession(e=!1){return u(this,cs)?(u(this,se).setCurrentDrawingSession(null),u(this,cs).abort(),A(this,cs,null),A(this,Ja,null),u(this,tt,Cs).endDrawing(e)):null}findNewParent(e,n,r){const i=u(this,se).findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return u(this,cs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,cs)&&u(this,tt,Cs).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=u(this,se).getActive())==null?void 0:e.parent)===this&&(u(this,se).commitOrRemove(),u(this,se).setActiveEditor(null)),u(this,Ya)&&(clearTimeout(u(this,Ya)),A(this,Ya,null));for(const r of u(this,_r).values())(n=u(this,Vu))==null||n.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,u(this,_r).clear(),u(this,se).removeLayer(this)}render({viewport:e}){this.viewport=e,oh(this.div,e);for(const n of u(this,se).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){u(this,se).commitOrRemove(),P(this,tt,lw).call(this);const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,oh(this.div,{rotation:r}),n!==r)for(const i of u(this,_r).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return u(this,se).viewParameters.realScale}};Vu=new WeakMap,Vf=new WeakMap,El=new WeakMap,Tl=new WeakMap,Ya=new WeakMap,_r=new WeakMap,Cl=new WeakMap,Gf=new WeakMap,qf=new WeakMap,cs=new WeakMap,Ja=new WeakMap,wn=new WeakMap,Qa=new WeakMap,Pl=new WeakMap,Kf=new WeakMap,se=new WeakMap,Ol=new WeakMap,tt=new WeakSet,eP=function(){return u(this,_r).size!==0?u(this,_r).values():u(this,se).getEditors(this.pageIndex)},zU=function(e){u(this,se).unselectAll();const{target:n}=e;if(n===u(this,wn).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&u(this,wn).div.contains(n)){const{isMac:r}=hn.platform;if(e.button!==0||e.ctrlKey&&r)return;u(this,se).showAllEditors("highlight",!0,!0),u(this,wn).div.classList.add("free"),this.toggleDrawing(),Xx.startHighlighting(this,u(this,se).direction==="ltr",{target:u(this,wn).div,x:e.x,y:e.y}),u(this,wn).div.addEventListener("pointerup",()=>{u(this,wn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,se)._signal}),e.preventDefault()}},Cs=function(){return u(Yi,Ol).get(u(this,se).getMode())},tP=function(e){const n=u(this,tt,Cs);return n?new n.prototype.constructor(e):null},nP=function(){const{x:e,y:n,width:r,height:i}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,n),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,n+i),c=(s+o)/2-e,h=(a+l)/2-n,[d,f]=this.viewport.rotation%180===0?[c,h]:[h,c];return{offsetX:d,offsetY:f}},lw=function(){for(const e of u(this,_r).values())e.isEmpty()&&e.remove()},K(Yi,"_initialized",!1),C(Yi,Ol,new Map([RC,WC,JC,Xx,YC].map(e=>[e._editorType,e])));let ZC=Yi;var us,ir,Gu,t0,y1,HU,oa,iP,WU,sP;const rn=class rn{constructor({pageIndex:e}){C(this,oa);C(this,us,null);C(this,ir,new Map);C(this,Gu,new Map);this.pageIndex=e}setParent(e){if(!u(this,us)){A(this,us,e);return}if(u(this,us)!==e){if(u(this,ir).size>0)for(const n of u(this,ir).values())n.remove(),e.append(n);A(this,us,e)}}static get _svgFactory(){return me(this,"_svgFactory",new qx)}draw(e,n=!1,r=!1){const i=Qt(rn,t0)._++,s=P(this,oa,iP).call(this),a=rn._svgFactory.createElement("defs");s.append(a);const o=rn._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),n&&u(this,Gu).set(i,o);const c=r?P(this,oa,WU).call(this,a,l):null,h=rn._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(s,e),u(this,ir).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,n){const r=Qt(rn,t0)._++,i=P(this,oa,iP).call(this),s=rn._svgFactory.createElement("defs");i.append(s);const a=rn._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const d=rn._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=rn._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=rn._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=rn._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const h=c.cloneNode();return i.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),u(this,ir).set(r,i),r}finalizeDraw(e,n){u(this,Gu).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var l;if(!n)return;const{root:r,bbox:i,rootClass:s,path:a}=n,o=typeof e=="number"?u(this,ir).get(e):e;if(o){if(r&&P(this,oa,sP).call(this,o,r),i&&P(l=rn,y1,HU).call(l,o,i),s){const{classList:c}=o;for(const[h,d]of Object.entries(s))c.toggle(h,d)}if(a){const h=o.firstElementChild.firstElementChild;P(this,oa,sP).call(this,h,a)}}}updateParent(e,n){if(n===this)return;const r=u(this,ir).get(e);r&&(u(n,us).append(r),u(this,ir).delete(e),u(n,ir).set(e,r))}remove(e){u(this,Gu).delete(e),u(this,us)!==null&&(u(this,ir).get(e).remove(),u(this,ir).delete(e))}destroy(){A(this,us,null);for(const e of u(this,ir).values())e.remove();u(this,ir).clear(),u(this,Gu).clear()}};us=new WeakMap,ir=new WeakMap,Gu=new WeakMap,t0=new WeakMap,y1=new WeakSet,HU=function(e,[n,r,i,s]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*n}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},oa=new WeakSet,iP=function(){const e=rn._svgFactory.create(1,1,!0);return u(this,us).append(e),e.setAttribute("aria-hidden",!0),e},WU=function(e,n){const r=rn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=rn._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),i},sP=function(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)},C(rn,y1),C(rn,t0,0);let rP=rn;globalThis._pdfjsTestingUtils={HighlightOutliner:DC};globalThis.pdfjsLib={AbortException:Gl,AnnotationEditorLayer:ZC,AnnotationEditorParamsType:Ie,AnnotationEditorType:ve,AnnotationEditorUIManager:lh,AnnotationLayer:IC,AnnotationMode:Fo,AnnotationType:Ht,applyOpacity:gme,build:Sye,ColorPicker:Vx,createValidAbsoluteUrl:R3,CSSConstants:pme,DOMSVGFactory:qx,DrawLayer:rP,FeatureTest:hn,fetchData:y0,findContrastColor:mme,getDocument:z4,getFilenameFromUrl:lme,getPdfFilenameFromUrl:cme,getRGB:b0,getUuid:$3,getXfaPageViewport:hme,GlobalWorkerOptions:Qs,ImageKind:Ob,InvalidPDFException:RT,isDataScheme:k_,isPdfFile:hk,isValidExplicitDest:Cme,MathClamp:ar,noContextMenu:Hi,normalizeUnicode:sme,OPS:ly,OutputScale:aa,PasswordResponses:Yge,PDFDataRangeTransport:H4,PDFDateString:Fx,PDFWorker:hy,PermissionFlag:Xge,PixelsPerInch:ql,RenderingCancelledException:uk,renderRichText:B3,ResponseException:Lx,setLayerDimensions:oh,shadow:me,SignatureExtractor:Za,stopEvent:Lt,SupportedImageMimeTypes:DT,TextLayer:uy,TouchManager:Ux,updateUrlHash:j3,Util:ee,VerbosityLevel:C_,version:_ye,XfaLayer:F3};const qye="5.4.530",Kye=`https://unpkg.com/pdfjs-dist@${qye}/build/pdf.worker.min.mjs`;Qs.workerSrc=Kye;class jo extends Error{constructor(n,r,i){super(n);K(this,"code");K(this,"originalError");this.name="PdfExtractionError",this.code=r,this.originalError=i,Error.captureStackTrace&&Error.captureStackTrace(this,jo)}}function Xye(t){return"str"in t&&typeof t.str=="string"}async function Yye(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{r.result instanceof ArrayBuffer?e(r.result):n(new Error("Failed to read file as ArrayBuffer"))},r.onerror=()=>{var i;n(new Error(`FileReader error: ${((i=r.error)==null?void 0:i.message)||"Unknown error"}`))},r.readAsArrayBuffer(t)})}function vj(t){if(!t)return null;const e=t.match(/D:(\d{4})(\d{2})(\d{2})(\d{2})?(\d{2})?(\d{2})?/);if(e){const[,r,i,s,a="00",o="00",l="00"]=e;return new Date(parseInt(r),parseInt(i)-1,parseInt(s),parseInt(a),parseInt(o),parseInt(l))}const n=new Date(t);return isNaN(n.getTime())?null:n}function Jye(t,e){return e.normalizeWhitespace?t.replace(/[^\S\n]+/g," ").replace(/\n{3,}/g,`

`).split(`
`).map(n=>n.trim()).join(`
`).trim():t}function Qye(t){return t.split(/\s+/).filter(e=>e.length>0).length}async function Zye(t,e){const n=await t.getTextContent(),r=[];let i=null;for(const s of n.items)if(Xye(s)){const a=s.transform[5];i!==null&&Math.abs(a-i)>5?r.push(e):r.length>0&&!r[r.length-1].endsWith(" ")&&r.push(" "),r.push(s.str),i=a}return r.join("")}async function eve(t){try{const n=(await t.getMetadata()).info||{};return{title:n.Title||null,author:n.Author||null,subject:n.Subject||null,keywords:n.Keywords||null,creator:n.Creator||null,producer:n.Producer||null,creationDate:vj(n.CreationDate),modificationDate:vj(n.ModDate),pageCount:t.numPages,isEncrypted:n.IsEncrypted||!1,pdfVersion:n.PDFFormatVersion||null}}catch{return{title:null,author:null,subject:null,keywords:null,creator:null,producer:null,creationDate:null,modificationDate:null,pageCount:t.numPages,isEncrypted:!1,pdfVersion:null}}}function tve(t){const e=(t==null?void 0:t.message)||String(t);return e.includes("Invalid PDF structure")||e.includes("Invalid XRef")?{code:"CORRUPTED_FILE",message:"The PDF file appears to be corrupted or has an invalid structure."}:e.includes("password")?e.includes("incorrect")||e.includes("wrong")?{code:"INCORRECT_PASSWORD",message:"The provided password is incorrect."}:{code:"PASSWORD_REQUIRED",message:"This PDF is password-protected. Please provide the password."}:e.includes("not a PDF")||e.includes("Invalid header")?{code:"INVALID_FILE",message:"The file does not appear to be a valid PDF document."}:e.includes("Worker")?{code:"WORKER_ERROR",message:"PDF processing worker failed to initialize."}:{code:"EXTRACTION_FAILED",message:`Failed to extract text from PDF: ${e}`}}async function nve(t,e={}){var s,a,o,l;const n=performance.now(),r={password:e.password,maxPages:e.maxPages,skipEmptyPages:e.skipEmptyPages??!1,includePageNumbers:e.includePageNumbers??!1,pageSeparator:e.pageSeparator??`

`,lineSeparator:e.lineSeparator??`
`,normalizeWhitespace:e.normalizeWhitespace??!0,onProgress:e.onProgress};if((s=r.onProgress)==null||s.call(r,{currentPage:0,totalPages:0,percentage:0,status:"loading",message:"Loading PDF document..."}),!t)throw new jo("No file provided","INVALID_FILE");if(t.type&&t.type!=="application/pdf"&&!t.name.toLowerCase().endsWith(".pdf"))throw new jo("The provided file does not appear to be a PDF","INVALID_FILE");let i=null;try{const c=await Yye(t);if(c.byteLength===0)throw new jo("The PDF file is empty","EMPTY_DOCUMENT");i=await z4({data:c,password:r.password,disableFontFace:!0,useSystemFonts:!1}).promise;const d=i.numPages,f=r.maxPages?Math.min(d,r.maxPages):d;if(d===0)throw new jo("The PDF document has no pages","EMPTY_DOCUMENT");const p=await eve(i),g=[],m=[];for(let x=1;x<=f;x++){(a=r.onProgress)==null||a.call(r,{currentPage:x,totalPages:f,percentage:Math.round(x/f*100),status:"extracting",message:`Extracting page ${x} of ${f}...`});try{const S=await i.getPage(x),T=S.getViewport({scale:1}),O=await Zye(S,r.lineSeparator),k={pageNumber:x,text:O,wordCount:Qye(O),charCount:O.length,hasText:O.trim().length>0,width:T.width,height:T.height};g.push(k),(k.hasText||!r.skipEmptyPages)&&(r.includePageNumbers?m.push(`[Page ${x}]${r.lineSeparator}${O}`):m.push(O))}catch(S){console.warn(`Warning: Failed to extract text from page ${x}:`,S),g.push({pageNumber:x,text:"",wordCount:0,charCount:0,hasText:!1,width:0,height:0})}}let b=m.join(r.pageSeparator);b=Jye(b,r);const y=g.filter(x=>x.hasText).length,w=g.reduce((x,S)=>x+S.wordCount,0),v=g.reduce((x,S)=>x+S.charCount,0),_={totalPages:f,pagesWithText:y,pagesWithoutText:f-y,totalWords:w,totalCharacters:v,extractionTimeMs:Math.round(performance.now()-n),averageWordsPerPage:f>0?Math.round(w/f):0};return(o=r.onProgress)==null||o.call(r,{currentPage:f,totalPages:f,percentage:100,status:"complete",message:`Extraction complete. Found ${w} words across ${y} pages.`}),{text:b,metadata:p,pages:g,stats:_}}catch(c){if((l=r.onProgress)==null||l.call(r,{currentPage:0,totalPages:0,percentage:0,status:"error",message:c instanceof Error?c.message:"Unknown error occurred"}),c instanceof jo)throw c;const{code:h,message:d}=tve(c);throw new jo(d,h,c instanceof Error?c:void 0)}finally{if(i)try{await i.destroy()}catch(c){console.warn("Warning: Failed to cleanup PDF document:",c)}}}async function VU(t){return(await nve(t,{normalizeWhitespace:!0,skipEmptyPages:!0})).text}class cw extends Error{constructor(n,r){super(n);K(this,"code");this.name="ArbitrageError",this.code=r}}const GU=[{id:"firm-001",name:"Deloitte",tier:"big4",avgPremium:.12,winRate:.35,specializations:["R&D","ERC","179D","WOTC"],minDealSize:5e4,maxDealSize:1e7,isActive:!0},{id:"firm-002",name:"KPMG",tier:"big4",avgPremium:.1,winRate:.32,specializations:["R&D","ERC","State Credits"],minDealSize:75e3,maxDealSize:1e7,isActive:!0},{id:"firm-003",name:"EY",tier:"big4",avgPremium:.11,winRate:.3,specializations:["R&D","ERC","Green Energy"],minDealSize:5e4,maxDealSize:1e7,isActive:!0},{id:"firm-004",name:"PwC",tier:"big4",avgPremium:.13,winRate:.28,specializations:["R&D","ERC","M&A Credits"],minDealSize:1e5,maxDealSize:1e7,isActive:!0},{id:"firm-005",name:"RSM",tier:"national",avgPremium:.08,winRate:.42,specializations:["R&D","ERC","WOTC"],minDealSize:25e3,maxDealSize:2e6,isActive:!0},{id:"firm-006",name:"BDO",tier:"national",avgPremium:.07,winRate:.38,specializations:["R&D","ERC","Manufacturing"],minDealSize:25e3,maxDealSize:2e6,isActive:!0},{id:"firm-007",name:"Grant Thornton",tier:"national",avgPremium:.09,winRate:.36,specializations:["R&D","ERC","179D"],minDealSize:3e4,maxDealSize:3e6,isActive:!0},{id:"firm-008",name:"Moss Adams",tier:"regional",avgPremium:.06,winRate:.45,specializations:["R&D","Tech Credits"],minDealSize:15e3,maxDealSize:1e6,isActive:!0},{id:"firm-009",name:"CLA",tier:"regional",avgPremium:.05,winRate:.48,specializations:["R&D","ERC","Agriculture"],minDealSize:1e4,maxDealSize:1e6,isActive:!0},{id:"firm-010",name:"Plante Moran",tier:"regional",avgPremium:.055,winRate:.44,specializations:["R&D","Manufacturing"],minDealSize:15e3,maxDealSize:15e5,isActive:!0},{id:"firm-011",name:"Armanino",tier:"regional",avgPremium:.065,winRate:.4,specializations:["R&D","Tech","Startups"],minDealSize:1e4,maxDealSize:5e5,isActive:!0},{id:"firm-012",name:"Marcum",tier:"regional",avgPremium:.058,winRate:.41,specializations:["R&D","Real Estate"],minDealSize:2e4,maxDealSize:1e6,isActive:!0}];function qU(t="GF"){const e=Date.now().toString(36).toUpperCase(),n=Math.random().toString(36).substring(2,8).toUpperCase();return`${t}-${e}-${n}`}function tA(t,e){return Math.random()*(e-t)+t}function uw(t,e){return Math.floor(Math.random()*(e-t+1))+t}function rve(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function ive(t){return GU.filter(e=>e.isActive&&t>=e.minDealSize&&t<=e.maxDealSize)}function sve(){const t=uw(24,72);return new Date(Date.now()+t*60*60*1e3).toISOString()}function ave(t,e){return t>=5e5&&(e==="big4"||e==="national")?"urgent":t>=2e5?"high":t>=5e4?"standard":"low"}function ove(t,e={}){if(t<=0)throw new cw("Deal value must be greater than 0","VALIDATION_ERROR");const{minBids:n=3,maxBids:r=5,minBidPercentage:i=.03,maxBidPercentage:s=.08,dealId:a=null,costBasis:o=t*.008}=e;let l=ive(t);l.length===0&&(l=GU.filter(g=>g.isActive));const c=rve(l),h=Math.min(uw(n,r),c.length),d=c.slice(0,h),f=new Date().toISOString();return d.map(g=>{const m=tA(i,s),b=g.avgPremium*tA(.5,1.5),y=Math.min(s*1.2,m+b),w=Math.round(t*y),v=w-o,_=o>0?v/o*100:0,x=qU("BID");return{id:x,bidId:x,dealId:a,firmId:g.id,firmName:g.name,firmTier:g.tier,bidAmount:w,bidPercentage:Math.round(y*1e4)/100,status:"OPEN",priority:ave(t,g.tier),expiresAt:sve(),createdAt:f,metadata:{dealValue:t,spread:v,spreadPercentage:Math.round(_*100)/100,firmRating:Math.round(tA(3.5,5)*10)/10,estimatedCloseTime:g.tier==="big4"?uw(5,14):uw(3,10),terms:["Standard engagement letter required","Audit defense included for 3 years"]}}}).sort((g,m)=>m.bidAmount-g.bidAmount)}async function lve(t,e,n,r={}){const i=performance.now(),s=qU("TXN"),a=new Date().toISOString();try{const{data:o,error:l}=await wd.from("deals").select("*").eq("id",t).single();if(l||!o)throw new cw(`Deal not found: ${t}`,"DEAL_NOT_FOUND");if(o.status==="SOLD")throw new cw("Deal has already been sold","DEAL_ALREADY_SOLD");const{error:c}=await wd.from("deals").update({status:"SOLD",sold_to:e.trim(),sale_price:n,sold_at:a}).eq("id",t);if(c)throw new cw(`Failed to update deal: ${c.message}`,"TRANSACTION_FAILED");const h=o.cost_basis||o.value*.008,d=n-h,f=h>0?d/h*100:0;return{success:!0,transactionId:s,dealId:t,buyerName:e,salePrice:n,soldAt:a,spread:d,spreadPercentage:Math.round(f*100)/100,processingTimeMs:Math.round(performance.now()-i)}}catch(o){return{success:!1,transactionId:s,dealId:t,buyerName:e,salePrice:n,soldAt:a,spread:0,spreadPercentage:0,processingTimeMs:Math.round(performance.now()-i),error:o instanceof Error?o.message:String(o)}}}function Jx(t){return t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(1)}K`:`$${t.toLocaleString()}`}function cve(t){switch(t){case"big4":return"text-amber-400";case"national":return"text-cyan-400";case"regional":return"text-emerald-400";case"boutique":return"text-purple-400";default:return"text-slate-400"}}function uve(t){switch(t){case"big4":return"BIG4";case"national":return"NATL";case"regional":return"RGNL";case"boutique":return"BTQE"}}const hve=()=>{const[t,e]=z.useState(!1);return E.jsx("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-40",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex items-center justify-between h-16",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center shadow-sm",children:E.jsx(p0,{className:"w-6 h-6 text-white"})}),E.jsxs("div",{children:[E.jsx("span",{className:"text-xl font-bold text-gray-900",children:"GrantFlow"}),E.jsx("span",{className:"text-xs text-gray-500 block -mt-1",children:"Tax Credit Solutions"})]})]}),E.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[E.jsx("a",{href:"#how-it-works",className:"text-gray-600 hover:text-blue-600 text-sm font-medium transition-colors",children:"How It Works"}),E.jsx("a",{href:"#programs",className:"text-gray-600 hover:text-blue-600 text-sm font-medium transition-colors",children:"Programs"}),E.jsx("a",{href:"#faq",className:"text-gray-600 hover:text-blue-600 text-sm font-medium transition-colors",children:"FAQ"})]}),E.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[E.jsx("button",{className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-4 py-2 transition-colors",children:"Sign In"}),E.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-5 py-2.5 rounded-lg transition-colors shadow-sm",children:"Get Started"})]}),E.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>e(!t),children:E.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t?E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})})},nA=({icon:t,text:e})=>E.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[E.jsx("span",{className:"text-blue-600",children:t}),E.jsx("span",{className:"text-sm font-medium",children:e})]}),rA=({value:t,label:e,icon:n})=>E.jsxs("div",{className:"text-center px-6 py-4",children:[E.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[E.jsx("span",{className:"text-blue-600",children:n}),E.jsx("span",{className:"text-3xl font-bold text-gray-900",children:t})]}),E.jsx("span",{className:"text-sm text-gray-500",children:e})]}),iA=({step:t,label:e,active:n,complete:r})=>E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-all ${r?"bg-green-500 text-white":n?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:r?E.jsx(Pb,{className:"w-4 h-4"}):t}),E.jsx("span",{className:`text-sm font-medium ${n||r?"text-gray-900":"text-gray-400"}`,children:e})]}),dve=({onFileSelect:t,uploadState:e,scanProgress:n,dragActive:r,setDragActive:i})=>{const s=z.useRef(null),a=z.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?i(!0):c.type==="dragleave"&&i(!1)},[i]),o=z.useCallback(c=>{var h;c.preventDefault(),c.stopPropagation(),i(!1),(h=c.dataTransfer.files)!=null&&h[0]&&t(c.dataTransfer.files[0])},[t,i]),l=c=>{var h;(h=c.target.files)!=null&&h[0]&&t(c.target.files[0])};return e==="scanning"?E.jsxs("div",{className:"bg-white rounded-2xl border-2 border-blue-200 p-8 md:p-12 text-center",children:[E.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-blue-50 flex items-center justify-center",children:E.jsx(gg,{className:"w-10 h-10 text-blue-600 animate-spin"})}),E.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Analyzing Your Documents..."}),E.jsx("p",{className:"text-gray-500 mb-6",children:"Our AI is scanning for qualifying expenses"}),E.jsxs("div",{className:"max-w-md mx-auto",children:[E.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[E.jsx("span",{children:"Scanning"}),E.jsxs("span",{children:[Math.round(n),"%"]})]}),E.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),E.jsxs("div",{className:"mt-6 space-y-3",children:[E.jsxs("div",{className:`flex items-center gap-3 ${n>=30?"text-green-600":"text-gray-400"}`,children:[n>=30?E.jsx(Pb,{className:"w-4 h-4"}):E.jsx(gg,{className:"w-4 h-4 animate-spin"}),E.jsx("span",{className:"text-sm",children:"Document parsing complete"})]}),E.jsxs("div",{className:`flex items-center gap-3 ${n>=60?"text-green-600":n>=30?"text-blue-600":"text-gray-400"}`,children:[n>=60?E.jsx(Pb,{className:"w-4 h-4"}):n>=30?E.jsx(gg,{className:"w-4 h-4 animate-spin"}):E.jsx("div",{className:"w-4 h-4"}),E.jsx("span",{className:"text-sm",children:"Identifying qualifying activities"})]}),E.jsxs("div",{className:`flex items-center gap-3 ${n>=100?"text-green-600":n>=60?"text-blue-600":"text-gray-400"}`,children:[n>=100?E.jsx(Pb,{className:"w-4 h-4"}):n>=60?E.jsx(gg,{className:"w-4 h-4 animate-spin"}):E.jsx("div",{className:"w-4 h-4"}),E.jsx("span",{className:"text-sm",children:"Calculating potential credits"})]})]})]})]}):E.jsxs("div",{className:`bg-white rounded-2xl border-2 border-dashed p-8 md:p-12 text-center cursor-pointer transition-all duration-200 ${r?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 hover:border-blue-400 hover:bg-gray-50"}`,onDragEnter:a,onDragLeave:a,onDragOver:a,onDrop:o,onClick:()=>{var c;return(c=s.current)==null?void 0:c.click()},children:[E.jsx("input",{ref:s,type:"file",className:"hidden",accept:".txt,.csv,.pdf,.doc,.docx,.xls,.xlsx",onChange:l}),E.jsx("div",{className:`w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center transition-colors ${r?"bg-blue-100":"bg-gray-100"}`,children:E.jsx(Qg,{className:`w-10 h-10 ${r?"text-blue-600":"text-gray-400"}`})}),E.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r?"Drop your file here":"Drop your file here or click to browse"}),E.jsx("p",{className:"text-gray-500 mb-4",children:"Upload financial documents, payroll records, or expense reports"}),E.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 text-sm text-gray-400",children:[E.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:".txt"}),E.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:".csv"}),E.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:".pdf"})]}),E.jsxs("p",{className:"text-xs text-gray-400 mt-4",children:[E.jsx(h3,{className:"w-3 h-3 inline mr-1"}),"256-bit SSL encrypted  Your data is secure"]})]})},fve=({result:t,fileName:e,onReset:n,onConnect:r})=>E.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-xl overflow-hidden",children:[E.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-8 text-center text-white",children:[E.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/20 flex items-center justify-center",children:E.jsx(l3,{className:"w-10 h-10"})}),E.jsx("h3",{className:"text-2xl font-bold mb-1",children:"Potential Credit Identified!"}),E.jsx("p",{className:"text-green-100",children:"Based on our preliminary analysis"})]}),E.jsxs("div",{className:"px-6 py-8 text-center border-b border-gray-100",children:[E.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide mb-2",children:"Estimated Total Value"}),E.jsx("p",{className:"text-5xl font-bold text-gray-900 mb-2",children:io(t.totalEstimatedValue)}),E.jsxs("p",{className:"text-sm text-gray-500",children:["Confidence: ",Math.round(t.confidence*100),"%"]})]}),E.jsxs("div",{className:"px-6 py-6 space-y-4",children:[E.jsx("h4",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:"Credit Breakdown"}),t.isRdEligible&&E.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:E.jsx(ik,{className:"w-5 h-5 text-blue-600"})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-medium text-gray-900",children:"R&D Tax Credit"}),E.jsx("p",{className:"text-sm text-gray-500",children:"IRC Section 41"})]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"font-semibold text-gray-900",children:io(t.rdCreditValue)}),E.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Eligible"})]})]}),t.isTrainingEligible&&E.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:E.jsx(rk,{className:"w-5 h-5 text-purple-600"})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-medium text-gray-900",children:"Training Credit"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Education Assistance"})]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"font-semibold text-gray-900",children:io(t.trainingCreditValue)}),E.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Eligible"})]})]}),t.isGreenEligible&&E.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:E.jsx(S_,{className:"w-5 h-5 text-green-600"})}),E.jsxs("div",{children:[E.jsx("p",{className:"font-medium text-gray-900",children:"Energy Efficiency"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Section 179D"})]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("p",{className:"font-semibold text-gray-900",children:io(t.greenEnergyValue)}),E.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Eligible"})]})]})]}),E.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[E.jsx(qde,{className:"w-4 h-4"}),E.jsx("span",{className:"truncate max-w-[200px]",children:e})]}),E.jsx("button",{onClick:n,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Scan Another File"})]}),E.jsxs("div",{className:"px-6 py-6 bg-gray-50 border-t border-gray-100",children:[E.jsxs("button",{onClick:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-xl transition-colors shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2",children:[E.jsx(d3,{className:"w-5 h-5"}),"Connect with a Tax Expert",E.jsx(s3,{className:"w-5 h-5"})]}),E.jsx("p",{className:"text-center text-sm text-gray-500 mt-3",children:"Free consultation  No obligation"})]})]}),pve=({onReset:t})=>E.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-lg p-8 text-center",children:[E.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:E.jsx(zde,{className:"w-8 h-8 text-gray-400"})}),E.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Credits Detected"}),E.jsx("p",{className:"text-gray-500 mb-6",children:"Try uploading different financial records."}),E.jsx("button",{onClick:t,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg",children:"Try Another Document"})]}),gve=({error:t,onReset:e})=>E.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 shadow-lg p-8 text-center",children:[E.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center",children:E.jsx(Ude,{className:"w-8 h-8 text-red-500"})}),E.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something Went Wrong"}),E.jsx("p",{className:"text-gray-500 mb-6",children:t}),E.jsx("button",{onClick:e,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg",children:"Try Again"})]}),mve=()=>{const t=[{step:1,title:"Upload Documents",description:"Securely upload your financial records.",icon:E.jsx(Qg,{className:"w-6 h-6"})},{step:2,title:"AI Analysis",description:"Our AI scans for qualifying activities.",icon:E.jsx(ik,{className:"w-6 h-6"})},{step:3,title:"Expert Review",description:"A certified professional reviews your case.",icon:E.jsx(g3,{className:"w-6 h-6"})},{step:4,title:"Claim Credits",description:"File with confidence and receive credits.",icon:E.jsx(p0,{className:"w-6 h-6"})}];return E.jsx("section",{id:"how-it-works",className:"py-20 bg-gray-50",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"text-center mb-12",children:[E.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"How It Works"}),E.jsx("p",{className:"text-lg text-gray-600",children:"Simple and streamlined process"})]}),E.jsx("div",{className:"grid md:grid-cols-4 gap-8",children:t.map(e=>E.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 text-white flex items-center justify-center mb-4",children:e.icon}),E.jsxs("span",{className:"text-xs font-semibold text-blue-600 uppercase",children:["Step ",e.step]}),E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-1 mb-2",children:e.title}),E.jsx("p",{className:"text-gray-600 text-sm",children:e.description})]},e.step))})]})})},yve=()=>{const t=[{title:"R&D Tax Credit",code:"IRC 41",value:"Up to $250,000/year",icon:E.jsx(ik,{className:"w-6 h-6"}),color:"blue"},{title:"Employee Retention",code:"ERC",value:"Up to $26,000/employee",icon:E.jsx(g3,{className:"w-6 h-6"}),color:"purple"},{title:"Energy Efficiency",code:"179D",value:"Up to $5/sq ft",icon:E.jsx(S_,{className:"w-6 h-6"}),color:"green"},{title:"Work Opportunity",code:"WOTC",value:"Up to $9,600/employee",icon:E.jsx(rk,{className:"w-6 h-6"}),color:"amber"}],e={blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600",amber:"bg-amber-100 text-amber-600"};return E.jsx("section",{id:"programs",className:"py-20 bg-white",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"text-center mb-12",children:[E.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Tax Credit Programs"}),E.jsx("p",{className:"text-lg text-gray-600",children:"Multiple federal and state programs"})]}),E.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.map(n=>E.jsx("div",{className:"rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:`w-12 h-12 rounded-lg ${e[n.color]} flex items-center justify-center`,children:n.icon}),E.jsxs("div",{children:[E.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[n.title," ",E.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded-full",children:n.code})]}),E.jsx("p",{className:`text-sm font-semibold mt-2 ${e[n.color].split(" ")[1]}`,children:n.value})]})]})},n.code))})]})})},vve=()=>{const t=[{quote:"GrantFlow helped us identify $127,000 in R&D credits we didn't know we qualified for.",author:"Sarah Chen",title:"CFO, TechStart Inc.",avatar:"SC"},{quote:"Their team found legitimate credits that our accountant had missed for years.",author:"Michael Rodriguez",title:"Owner, Rodriguez Mfg",avatar:"MR"},{quote:"Professional, thorough, and they deliver on their promises.",author:"Jennifer Walsh",title:"CEO, GreenBuild",avatar:"JW"}];return E.jsx("section",{className:"py-20 bg-blue-600",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsx("div",{className:"text-center mb-12",children:E.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Trusted by Growing Businesses"})}),E.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map((e,n)=>E.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[E.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((r,i)=>E.jsx(f3,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"},i))}),E.jsxs("p",{className:"text-gray-600 mb-6 italic",children:['"',e.quote,'"']}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-semibold",children:e.avatar}),E.jsxs("div",{children:[E.jsx("p",{className:"font-semibold text-gray-900",children:e.author}),E.jsx("p",{className:"text-sm text-gray-500",children:e.title})]})]})]},n))})]})})},bve=()=>{const[t,e]=z.useState(0),n=[{question:"What documents do I need?",answer:"Financial statements, payroll records, or expense reports."},{question:"Is my data secure?",answer:"We use 256-bit SSL encryption and SOC 2 compliance."},{question:"How accurate is the estimate?",answer:"Our AI provides preliminary estimates; a tax professional will give final assessment."},{question:"What if I've already filed?",answer:"Many credits can be claimed retroactively via amended returns."},{question:"How much does it cost?",answer:"The scan is free. Full-service fees are only a percentage of credits we find."}];return E.jsx("section",{id:"faq",className:"py-20 bg-gray-50",children:E.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[E.jsx("div",{className:"text-center mb-12",children:E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"})}),E.jsx("div",{className:"space-y-4",children:n.map((r,i)=>E.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[E.jsxs("button",{className:"w-full px-6 py-4 flex items-center justify-between text-left",onClick:()=>e(t===i?null:i),children:[E.jsx("span",{className:"font-semibold text-gray-900",children:r.question}),E.jsx(o3,{className:`w-5 h-5 text-gray-400 transition-transform ${t===i?"rotate-90":""}`})]}),t===i&&E.jsx("div",{className:"px-6 pb-4",children:E.jsx("p",{className:"text-gray-600",children:r.answer})})]},i))})]})})},wve=()=>E.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:E.jsx(p0,{className:"w-6 h-6 text-white"})}),E.jsx("span",{className:"text-xl font-bold text-white",children:"GrantFlow"})]}),E.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[E.jsxs("span",{className:"flex items-center gap-2",children:[E.jsx(d3,{className:"w-4 h-4"}),"1-800-GRANTS"]}),E.jsxs("span",{className:"flex items-center gap-2",children:[E.jsx(Yde,{className:"w-4 h-4"}),"hello@grantflow.com"]}),E.jsxs("span",{className:"flex items-center gap-2",children:[E.jsx(a3,{className:"w-4 h-4"}),"San Francisco, CA"]})]})]}),E.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-sm",children:" 2024 GrantFlow. All rights reserved."})]})}),xve=()=>{const[t,e]=z.useState("idle"),[n,r]=z.useState(0),[i,s]=z.useState(null),[a,o]=z.useState(""),[l,c]=z.useState(!1),[h,d]=z.useState(""),f=z.useCallback(async m=>{o(m.name),e("scanning"),r(0),d("");try{let b;m.type==="application/pdf"||m.name.toLowerCase().endsWith(".pdf")?b=await VU(m):b=await m.text();const y=setInterval(()=>{r(_=>_>=100?100:_+Math.random()*15+5)},300);await new Promise(_=>setTimeout(_,3e3)),clearInterval(y),r(100);const w=m3(b),v={isRdEligible:w.isRdEligible,isTrainingEligible:w.isTrainingEligible,isGreenEligible:w.isGreenEligible,totalEstimatedValue:w.financialSummary.totalEstimatedValue,rdCreditValue:w.financialSummary.rdCreditValue,trainingCreditValue:w.financialSummary.trainingCreditValue,greenEnergyValue:w.financialSummary.greenEnergyValue,matchCount:w.processingDetails.totalMatchesFound,confidence:w.processingDetails.confidenceScore};await wd.from("deals").insert([{company:`LEAD-${m.name.slice(0,20)}`,value:v.totalEstimatedValue,status:"NEW_LEAD",packet_id:w.analysisId,risk_score:v.confidence*100,anomaly_count:w.riskIndicators.length}]),await new Promise(_=>setTimeout(_,500)),s(v),e(v.totalEstimatedValue>0?"success":"no_results")}catch(b){console.error("Scan error:",b),d("Unable to process file."),e("error")}},[]),p=z.useCallback(()=>{e("idle"),r(0),s(null),o(""),d("")},[]),g=z.useCallback(()=>{alert("Connecting with a tax expert... (This would open a booking modal)")},[]);return E.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[E.jsx(hve,{}),E.jsx("section",{className:"bg-gradient-to-b from-white to-gray-50 pt-12 pb-20",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-12",children:[E.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 mb-8",children:[E.jsx(nA,{icon:E.jsx(ey,{className:"w-4 h-4"}),text:"IRS Compliant"}),E.jsx(nA,{icon:E.jsx(h3,{className:"w-4 h-4"}),text:"256-bit Encrypted"}),E.jsx(nA,{icon:E.jsx(rk,{className:"w-4 h-4"}),text:"CPA Certified"})]}),E.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Check Your Grant Eligibility",E.jsx("br",{}),E.jsx("span",{className:"text-blue-600",children:"in 30 Seconds"})]}),E.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Upload your financial documents and our AI will instantly identify tax credits you may be missing."}),E.jsxs("div",{className:"flex flex-wrap justify-center divide-x divide-gray-200 mb-12",children:[E.jsx(rA,{value:"$847M+",label:"Credits Identified",icon:E.jsx(p0,{className:"w-5 h-5"})}),E.jsx(rA,{value:"12,000+",label:"Businesses Helped",icon:E.jsx(a3,{className:"w-5 h-5"})}),E.jsx(rA,{value:"99.8%",label:"Satisfaction",icon:E.jsx(f3,{className:"w-5 h-5"})})]})]}),E.jsxs("div",{className:"max-w-2xl mx-auto",children:[(t==="idle"||t==="scanning")&&E.jsx(dve,{onFileSelect:f,uploadState:t,scanProgress:n,dragActive:l,setDragActive:c}),t==="success"&&i&&E.jsx(fve,{result:i,fileName:a,onReset:p,onConnect:g}),t==="no_results"&&E.jsx(pve,{onReset:p}),t==="error"&&E.jsx(gve,{error:h,onReset:p})]}),t==="idle"&&E.jsxs("div",{className:"flex items-center justify-center gap-8 mt-8",children:[E.jsx(iA,{step:1,label:"Upload",active:!0,complete:!1}),E.jsx("div",{className:"w-8 h-0.5 bg-gray-200"}),E.jsx(iA,{step:2,label:"Scan",active:!1,complete:!1}),E.jsx("div",{className:"w-8 h-0.5 bg-gray-200"}),E.jsx(iA,{step:3,label:"Results",active:!1,complete:!1})]})]})}),E.jsx(mve,{}),E.jsx(yve,{}),E.jsx(vve,{}),E.jsx(bve,{}),E.jsx("section",{className:"py-20 bg-white",children:E.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Claim Your Credits?"}),E.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Join thousands of businesses who discovered money they didn't know they had."}),E.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-8 rounded-xl inline-flex items-center gap-2",children:["Start Your Free Scan",E.jsx(s3,{className:"w-5 h-5"})]})]})}),E.jsx(wve,{})]})},bc=t=>t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(1)}K`:`$${t.toFixed(0)}`;function Qx(t,e){const n=L.useRef(t);L.useEffect(()=>{n.current=t},[t]),L.useEffect(()=>{if(e===null)return;const r=setInterval(()=>n.current(),e);return()=>clearInterval(r)},[e])}const _ve=()=>{const[t,e]=z.useState(new Date),[n,r]=z.useState(67),[i,s]=z.useState(840),[a,o]=z.useState(-2.1);return Qx(()=>{e(new Date),r(65+Math.random()*15)},1e3),Qx(()=>{const l=(Math.random()-.5)*10;s(c=>Math.max(835,Math.min(850,c+l))),o((Math.random()-.5)*5)},2500),E.jsx("header",{className:"bg-slate-900 border-b border-slate-700 px-2 py-1",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded flex items-center justify-center",children:E.jsx(_R,{className:"w-5 h-5 text-slate-900"})}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xs font-bold text-white tracking-wider",children:"GRANTFLOW"}),E.jsx("div",{className:"text-[10px] text-slate-500 tracking-widest",children:"TERMINAL v4.2.1"})]})]}),E.jsx("div",{className:"h-6 w-px bg-slate-700"}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(c3,{className:"w-2 h-2 fill-emerald-500 text-emerald-500 animate-pulse"}),E.jsx("span",{className:"text-[10px] text-emerald-400 font-mono",children:"LIVE"})]}),E.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-slate-800 rounded border border-slate-700",children:[E.jsx(ife,{className:"w-3 h-3 text-cyan-400"}),E.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:"LATENCY: 12ms"})]}),E.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-slate-800 rounded border border-slate-700",children:[E.jsx(Zde,{className:"w-3 h-3 text-amber-400"}),E.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["LOAD: ",n.toFixed(0),"%"]})]})]})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(gb,{label:"PIPELINE VAL",value:"$4.2M",change:12.4,icon:p0,color:"emerald"}),E.jsx(gb,{label:"ACCURACY",value:"99.8%",change:.2,icon:tfe,color:"cyan"}),E.jsx(gb,{label:"SPREAD",value:`${i.toFixed(0)}%`,change:a,icon:S_,color:"amber"}),E.jsx(gb,{label:"DEALS/HR",value:"127",change:8.3,icon:_R,color:"emerald"})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{className:"p-1.5 bg-slate-800 rounded border border-slate-700 hover:border-slate-600",children:E.jsx(Fde,{className:"w-4 h-4 text-slate-400"})}),E.jsx("button",{className:"p-1.5 bg-slate-800 rounded border border-slate-700 hover:border-slate-600",children:E.jsx(efe,{className:"w-4 h-4 text-slate-400"})})]}),E.jsx("div",{className:"h-6 w-px bg-slate-700"}),E.jsxs("div",{className:"text-right",children:[E.jsx("div",{className:"text-xs font-mono text-white",children:t.toLocaleTimeString("en-US",{hour12:!1})}),E.jsx("div",{className:"text-[10px] text-slate-500 font-mono",children:t.toLocaleDateString("en-US",{month:"short",day:"2-digit"}).toUpperCase()})]}),E.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-900/30 border border-emerald-700/50 rounded",children:[E.jsx(rfe,{className:"w-3 h-3 text-emerald-400"}),E.jsx("span",{className:"text-[10px] text-emerald-400 font-mono",children:"JDK-7291"})]})]})]})})},gb=({label:t,value:e,change:n,icon:r,color:i})=>{const s={emerald:"text-emerald-400 border-emerald-800/50 bg-emerald-900/20",cyan:"text-cyan-400 border-cyan-800/50 bg-cyan-900/20",amber:"text-amber-400 border-amber-800/50 bg-amber-900/20"};return E.jsxs("div",{className:`px-3 py-1 rounded border ${s[i]} min-w-[100px]`,children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-[9px] text-slate-500 font-mono",children:t}),E.jsx(r,{className:"w-3 h-3 text-slate-500"})]}),E.jsxs("div",{className:"flex items-baseline gap-2",children:[E.jsx("span",{className:"text-lg font-bold text-white font-mono",children:e}),E.jsxs("span",{className:`text-[10px] font-mono flex items-center ${n>=0?"text-emerald-400":"text-red-400"}`,children:[n>=0?E.jsx($de,{className:"w-2 h-2"}):E.jsx(Dde,{className:"w-2 h-2"}),Math.abs(n),"%"]})]})]})},Sve=({result:t})=>{var c;const e=t?[{id:"1",metric:"R&D Credit",q1:Math.round(t.financialSummary.rdCreditValue*.22),q2:Math.round(t.financialSummary.rdCreditValue*.26),q3:Math.round(t.financialSummary.rdCreditValue*.28),q4:Math.round(t.financialSummary.rdCreditValue*.24),ytd:t.financialSummary.rdCreditValue,confidence:Math.round(t.processingDetails.confidenceScore*100),source:"SCAN",trend:[],verified:t.isRdEligible},{id:"2",metric:"Training",q1:Math.round(t.financialSummary.trainingCreditValue*.25),q2:Math.round(t.financialSummary.trainingCreditValue*.25),q3:Math.round(t.financialSummary.trainingCreditValue*.25),q4:Math.round(t.financialSummary.trainingCreditValue*.25),ytd:t.financialSummary.trainingCreditValue,confidence:95,source:"SCAN",trend:[],verified:t.isTrainingEligible},{id:"3",metric:"Green Energy",q1:Math.round(t.financialSummary.greenEnergyValue*.25),q2:Math.round(t.financialSummary.greenEnergyValue*.25),q3:Math.round(t.financialSummary.greenEnergyValue*.25),q4:Math.round(t.financialSummary.greenEnergyValue*.25),ytd:t.financialSummary.greenEnergyValue,confidence:90,source:"SCAN",trend:[],verified:t.isGreenEligible}]:[{id:"1",metric:"Gross Payroll",q1:847e3,q2:892e3,q3:923e3,q4:978e3,ytd:364e4,confidence:98,source:"BANK",trend:[],verified:!0},{id:"2",metric:"R&D Spend",q1:156e3,q2:189e3,q3:201e3,q4:234e3,ytd:78e4,confidence:99,source:"VERIF",trend:[],verified:!0},{id:"3",metric:"Cloud/SaaS",q1:34e3,q2:38e3,q3:42e3,q4:47e3,ytd:161e3,confidence:96,source:"BANK",trend:[],verified:!0}],n=t?`SCAN ${t.analysisId.slice(-6)}`:"NEXGEN TECHNOLOGIES INC",r=t?io(t.financialSummary.totalEstimatedValue):"$234,500",i=t!=null&&t.isRdEligible?"HIGH":"PENDING",s=t!=null&&t.isRdEligible?"text-emerald-400":"text-cyan-400",a=((c=t==null?void 0:t.overallRiskLevel)==null?void 0:c.toUpperCase())||"LOW",o=t?t.overallRiskLevel==="low"?"text-emerald-400":t.overallRiskLevel==="medium"?"text-amber-400":"text-red-400":"text-amber-400",l=h=>h>=95?"bg-emerald-500/20 text-emerald-400":h>=85?"bg-cyan-500/20 text-cyan-400":"bg-amber-500/20 text-amber-400";return E.jsxs("div",{className:`flex flex-col h-full bg-slate-900 border-r border-slate-700 ${t?"ring-2 ring-emerald-500/50 ring-inset":""}`,children:[E.jsxs("div",{className:"px-2 py-1 bg-slate-800 border-b border-slate-700 flex items-center gap-2",children:[E.jsx(u3,{className:"w-4 h-4 text-cyan-400"}),E.jsx("span",{className:"text-xs font-bold text-white tracking-wider",children:"UNDERWRITING MATRIX"}),t&&E.jsx("span",{className:"text-[8px] px-1 py-0.5 bg-emerald-900/50 text-emerald-400 rounded ml-auto animate-pulse",children:"SCANNED"})]}),E.jsxs("div",{className:"px-2 py-1 bg-slate-800/50 border-b border-slate-700",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Bde,{className:"w-3 h-3 text-slate-500"}),E.jsx("span",{className:"text-xs text-white font-mono",children:n}),(t==null?void 0:t.isRdEligible)&&E.jsx("span",{className:"text-[8px] px-1 py-0.5 bg-cyan-900/50 text-cyan-400 rounded",children:"R&D"}),(t==null?void 0:t.isTrainingEligible)&&E.jsx("span",{className:"text-[8px] px-1 py-0.5 bg-purple-900/50 text-purple-400 rounded",children:"TRAINING"}),(t==null?void 0:t.isGreenEligible)&&E.jsxs("span",{className:"text-[8px] px-1 py-0.5 bg-emerald-900/50 text-emerald-400 rounded flex items-center gap-0.5",children:[E.jsx(Xde,{className:"w-2 h-2"}),"GREEN"]})]}),t&&E.jsxs("div",{className:"text-[8px] text-slate-500 font-mono mt-0.5",children:[t.processingDetails.totalMatchesFound," MATCHES | ",t.processingDetails.uniqueKeywordsFound," KEYWORDS"]})]}),E.jsxs("div",{className:"grid grid-cols-3 gap-px bg-slate-700 border-b border-slate-700",children:[E.jsxs("div",{className:"bg-slate-800 p-2",children:[E.jsx("div",{className:"text-[9px] text-slate-500",children:"EST CREDIT"}),E.jsx("div",{className:"text-sm font-bold text-emerald-400 font-mono",children:r})]}),E.jsxs("div",{className:"bg-slate-800 p-2",children:[E.jsx("div",{className:"text-[9px] text-slate-500",children:"R&D INTENS"}),E.jsx("div",{className:`text-sm font-bold font-mono ${s}`,children:i})]}),E.jsxs("div",{className:"bg-slate-800 p-2",children:[E.jsx("div",{className:"text-[9px] text-slate-500",children:"RISK"}),E.jsx("div",{className:`text-sm font-bold font-mono ${o}`,children:a})]})]}),E.jsx("div",{className:"flex-1 overflow-auto",children:E.jsxs("table",{className:"w-full text-[10px]",children:[E.jsx("thead",{className:"sticky top-0 bg-slate-800",children:E.jsxs("tr",{className:"border-b border-slate-700",children:[E.jsx("th",{className:"px-2 py-1 text-left text-slate-400 font-mono",children:"METRIC"}),E.jsx("th",{className:"px-1 py-1 text-right text-slate-400 font-mono",children:"Q1"}),E.jsx("th",{className:"px-1 py-1 text-right text-slate-400 font-mono",children:"Q2"}),E.jsx("th",{className:"px-1 py-1 text-right text-slate-400 font-mono",children:"Q3"}),E.jsx("th",{className:"px-1 py-1 text-right text-slate-400 font-mono",children:"Q4"}),E.jsx("th",{className:"px-1 py-1 text-right text-slate-400 font-mono",children:"YTD"}),E.jsx("th",{className:"px-1 py-1 text-center text-slate-400 font-mono",children:"CONF"})]})}),E.jsx("tbody",{children:e.map(h=>E.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[E.jsx("td",{className:"px-2 py-1",children:E.jsxs("div",{className:"flex items-center gap-1",children:[h.verified?E.jsx(l3,{className:"w-3 h-3 text-emerald-500"}):E.jsx(Hde,{className:"w-3 h-3 text-amber-500"}),E.jsx("span",{className:"text-white",children:h.metric})]})}),E.jsx("td",{className:"px-1 py-1 text-right text-slate-300 font-mono",children:bc(h.q1)}),E.jsx("td",{className:"px-1 py-1 text-right text-slate-300 font-mono",children:bc(h.q2)}),E.jsx("td",{className:"px-1 py-1 text-right text-slate-300 font-mono",children:bc(h.q3)}),E.jsx("td",{className:"px-1 py-1 text-right text-slate-300 font-mono",children:bc(h.q4)}),E.jsx("td",{className:"px-1 py-1 text-right text-white font-mono font-bold",children:bc(h.ytd)}),E.jsx("td",{className:"px-1 py-1 text-center",children:E.jsxs("span",{className:`text-[9px] px-1 py-0.5 rounded ${l(h.confidence)}`,children:[h.confidence,"%"]})})]},h.id))})]})}),t&&E.jsx("div",{className:"bg-emerald-900/20 border-t border-emerald-700/50 px-2 py-1",children:E.jsxs("div",{className:"text-[9px] text-emerald-400 font-mono",children:[" ",t.processingDetails.rulesTriggered," RULES TRIGGERED | ",t.riskIndicators.length," RISK FLAGS"]})})]})},Ave=({onAnalysisComplete:t})=>{const[e,n]=z.useState([]),[r,i]=z.useState(0),[s,a]=z.useState([847,0,0,0,0]),[o,l]=z.useState(!1),[c,h]=z.useState(!1),[d,f]=z.useState(!1),p=L.useRef(null),g=L.useRef(null),m=async O=>{l(!1);const k=(O.size/(1024*1024)).toFixed(1),M=[{id:`ingest-${Date.now()}-1`,timestamp:new Date,level:"system",message:">> [SYS] INCOMING DATA STREAM DETECTED...",module:"SYS"},{id:`ingest-${Date.now()}-2`,timestamp:new Date,level:"success",message:`>> [INGEST] CAPTURED PAYLOAD: ${O.name} (${k} MB)`,module:"INGEST"},{id:`ingest-${Date.now()}-3`,timestamp:new Date,level:"info",message:">> [SEC] READING FILE CONTENT...",module:"SEC"}];n(D=>[...D,...M]),h(!0),setTimeout(()=>h(!1),2e3),a(D=>[D[0]+1,...D.slice(1)]);let N;O.type==="application/pdf"||O.name.toLowerCase().endsWith(".pdf")?(n(D=>[...D,{id:`pdf-${Date.now()}`,timestamp:new Date,level:"info",message:`>> [PDF] EXTRACTING TEXT FROM ${O.name.toUpperCase()}...`,module:"OCR"}]),N=await VU(O)):N=await O.text();const I=m3(N);n(D=>[...D,{id:`scan-${Date.now()}`,timestamp:new Date,level:"success",message:`>> [SCAN] ANALYZED ${I.statistics.totalWords} WORDS, ${I.processingDetails.totalMatchesFound} MATCHES FOUND`,module:"SCAN"}]);let R=0;const F=setInterval(()=>{R++,i(R),a(j=>{const B=[...j];return B[R]=Math.round(j[0]*(.95-R*.1)),B});const D={1:{id:`stage-1-${Date.now()}`,timestamp:new Date,level:"success",message:`>> [SCAN] PROCESSED ${I.source.contentLength} CHARS (${I.processingTimeMs}ms)`,module:"SCAN"},2:{id:`stage-2-${Date.now()}`,timestamp:new Date,level:I.riskIndicators.length>3?"warning":"success",message:`>> [FRAUD] ${I.riskIndicators.length} RISK FLAGS - LEVEL: ${I.overallRiskLevel.toUpperCase()}`,module:"FRAUD"},3:{id:`stage-3-${Date.now()}`,timestamp:new Date,level:"system",message:`>> [RULES] ${I.processingDetails.rulesTriggered}/${I.processingDetails.rulesApplied} RULES TRIGGERED`,module:"RULES"},4:{id:`stage-4-${Date.now()}`,timestamp:new Date,level:"success",message:`>> [READY] ESTIMATED VALUE: ${io(I.financialSummary.totalEstimatedValue)}`,module:"READY"}};D[R]&&n(j=>[...j,D[R]]),R>=4&&(clearInterval(F),I.isRdEligible&&n(j=>[...j,{id:`elig-rd-${Date.now()}`,timestamp:new Date,level:"success",message:`>> [ELIGIBLE] R&D TAX CREDIT: ${io(I.financialSummary.rdCreditValue)}`,module:"GRANT"}]),I.isTrainingEligible&&n(j=>[...j,{id:`elig-trn-${Date.now()}`,timestamp:new Date,level:"success",message:`>> [ELIGIBLE] TRAINING GRANT: ${io(I.financialSummary.trainingCreditValue)}`,module:"GRANT"}]),I.isGreenEligible&&n(j=>[...j,{id:`elig-grn-${Date.now()}`,timestamp:new Date,level:"success",message:`>> [ELIGIBLE] GREEN ENERGY: ${io(I.financialSummary.greenEnergyValue)}`,module:"GRANT"}]),I.allMatches.slice(0,5).forEach((j,B)=>{setTimeout(()=>{n($=>[...$,{id:`match-${Date.now()}-${B}`,timestamp:new Date,level:"info",message:`>> [MATCH] "${j.keyword}" @ line ${j.lineNumber}`,module:"SCAN"}])},B*200)}),t&&t(I))},800)},b=O=>{O.preventDefault(),f(!1);const k=O.dataTransfer.files[0];k&&m(k)},y=O=>{var M;const k=(M=O.target.files)==null?void 0:M[0];k&&m(k)},w={0:[{level:"info",message:"> CONNECTING TO IRS DATABASE API_V4..."},{level:"success",message:"> [INGEST] BATCH UPLOAD COMPLETE: 847 DOCS"},{level:"info",message:"> VALIDATING DOCUMENT CHECKSUMS..."}],1:[{level:"info",message:'> [OCR] PARSING "PAYROLL_Q3.PDF"... CONFIDENCE: 99.4%'},{level:"success",message:"> [OCR] W-2 EXTRACTION: 47 RECORDS MATCHED"},{level:"info",message:"> [OCR] 1099-NEC BATCH PROCESSING..."},{level:"success",message:"> [OCR] BANK STATEMENT RECOGNIZED: CHASE_2024"}],2:[{level:"info",message:"> [FRAUD_CHECK] RUNNING ANOMALY DETECTION..."},{level:"warning",message:"> [FRAUD_CHECK] FLAG: CONTRACTOR SPIKE Q3 (+34%)"},{level:"success",message:"> [FRAUD_CHECK] CROSS-REF COMPLETE: NO RED FLAGS"},{level:"info",message:"> [FRAUD_CHECK] PAYROLL VELOCITY: NORMAL"}],3:[{level:"system",message:"[AI] GPT-4o VOICE AGENT INITIALIZED"},{level:"info",message:"> [VOICE_AI] DIALING CFO: +1 (555) 847-2910..."},{level:"success",message:"> [VOICE_AI] CONNECTED. VERIFYING R&D ACTIVITIES..."},{level:"success",message:'> [VOICE_AI] CFO CONFIRMED: "Yes, software development"'}],4:[{level:"success",message:">> [READY] DEAL PACKET ASSEMBLED: LEAD-48291"},{level:"system",message:"[SYS] ESTIMATED CREDIT: $234,500 $12K"},{level:"success",message:">> PUSHING TO ARBITRAGE FLOOR..."}]},v=["INGEST","OCR","FRAUD","VOICE","READY"],_=[Qg,Qde,ey,Jde,Gde];Qx(()=>{const O=w[r],k=O[Math.floor(Math.random()*O.length)];n(M=>[...M.slice(-12),{id:Date.now().toString(),timestamp:new Date,level:k.level,message:k.message,module:v[r]}]),a(M=>{const N=[...M];return r<4&&N[r+1]<800&&(N[r+1]=Math.min(N[r+1]+Math.floor(Math.random()*50+30),N[r])),N})},800),Qx(()=>{i(O=>(O+1)%5)},4e3),L.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[e]);const x=O=>O<r?"complete":O===r?"active":"pending",S=(O,k)=>k===0&&c?"border-emerald-400 bg-emerald-500/40 shadow-lg shadow-emerald-500/30":O==="complete"?"border-emerald-500 bg-emerald-900/30":O==="active"?"border-cyan-400 bg-cyan-900/40 animate-pulse shadow-lg shadow-cyan-500/20":"border-slate-600 bg-slate-800",T=O=>O==="success"?"text-emerald-400":O==="warning"?"text-amber-400":O==="system"?"text-cyan-400":"text-slate-400";return E.jsxs("div",{className:"flex flex-col h-full bg-slate-900",children:[E.jsxs("div",{className:"px-3 py-1 bg-slate-800 border-b border-slate-700 flex items-center gap-2",children:[E.jsx(Wde,{className:"w-4 h-4 text-cyan-400"}),E.jsx("span",{className:"text-xs font-bold text-white tracking-wider",children:"VERIFICATION GAUNTLET"}),E.jsx("span",{className:"text-[9px] px-2 py-0.5 bg-cyan-900/50 text-cyan-400 rounded font-mono ml-2",children:"LEAD-48291"})]}),E.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[E.jsx("div",{className:"flex-1 p-3 border-r border-slate-700 flex items-center justify-between",children:v.map((O,k)=>{const M=x(k),N=_[k],I=k===0;return E.jsxs(L.Fragment,{children:[E.jsxs("div",{onClick:I?()=>l(!0):void 0,className:`flex flex-col items-center p-2 rounded border-2 transition-all duration-300 ${S(M,k)} min-w-[90px] ${I?"cursor-pointer hover:border-emerald-400 hover:bg-emerald-900/20":""}`,children:[E.jsx(N,{className:`w-5 h-5 mb-1 transition-colors ${c&&k===0?"text-emerald-300":M==="complete"?"text-emerald-400":M==="active"?"text-cyan-300":"text-slate-500"}`}),E.jsx("div",{className:"text-[9px] font-bold text-white",children:O}),E.jsx("div",{className:"text-[8px] text-slate-400 font-mono",children:s[k]>0?s[k]:"--"}),M==="active"&&E.jsx("div",{className:"mt-1 flex items-center gap-1",children:E.jsx("div",{className:"w-1 h-1 rounded-full bg-cyan-400 animate-ping"})}),c&&k===0&&E.jsx("div",{className:"mt-1 text-[7px] text-emerald-400 font-mono animate-pulse",children:"RECEIVED"})]}),k<4&&E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:`h-0.5 w-6 transition-colors ${k<r?"bg-emerald-500":"bg-slate-700"}`}),E.jsx(o3,{className:`w-3 h-3 transition-colors ${k<r?"text-emerald-500":"text-slate-600"}`})]})]},k)})}),E.jsxs("div",{className:"w-[350px] bg-slate-950 flex flex-col",children:[E.jsxs("div",{className:"px-2 py-1 bg-slate-800 border-b border-slate-700 flex items-center gap-2",children:[E.jsx(p3,{className:"w-3 h-3 text-emerald-400"}),E.jsx("span",{className:"text-[10px] font-bold text-white font-mono",children:"LOG"})]}),E.jsxs("div",{ref:p,className:"flex-1 overflow-auto p-2 font-mono text-[10px] scroll-smooth",children:[e.map((O,k)=>E.jsxs("div",{className:`flex items-start gap-2 mb-1 ${k===e.length-1?"animate-pulse":""}`,children:[E.jsxs("span",{className:"text-slate-600 flex-shrink-0",children:[O.timestamp.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),".",String(O.timestamp.getMilliseconds()).padStart(3,"0").slice(0,2)]}),E.jsx("span",{className:T(O.level),children:O.message})]},O.id)),E.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[E.jsx("span",{className:"text-emerald-400",children:"$"}),E.jsx("span",{className:"text-slate-500 animate-pulse",children:""})]})]})]})]}),o&&E.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>l(!1),children:[E.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm"}),E.jsxs("div",{className:"relative bg-slate-900 border-2 border-emerald-500/50 rounded-lg p-6 w-[480px] shadow-2xl shadow-emerald-500/10",onClick:O=>O.stopPropagation(),children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Qg,{className:"w-5 h-5 text-emerald-400"}),E.jsx("span",{className:"text-sm font-bold text-white tracking-wider",children:"SECURE FILE INGEST"})]}),E.jsx("button",{onClick:()=>l(!1),className:"text-slate-500 hover:text-white",children:E.jsx("span",{className:"text-xl",children:""})})]}),E.jsxs("div",{onDragOver:O=>{O.preventDefault(),f(!0)},onDragLeave:()=>f(!1),onDrop:b,onClick:()=>{var O;return(O=g.current)==null?void 0:O.click()},className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all ${d?"border-emerald-400 bg-emerald-900/20":"border-slate-600 hover:border-emerald-500/50 hover:bg-slate-800/50"}`,children:[E.jsx(Qg,{className:`w-12 h-12 mx-auto mb-4 ${d?"text-emerald-400":"text-slate-500"}`}),E.jsx("div",{className:"text-sm font-bold text-white mb-1",children:"SECURE DROP // FINANCIAL PAYLOADS ONLY"}),E.jsx("div",{className:"text-xs text-slate-500 mb-3",children:"Drag files here or click to browse"}),E.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-slate-600",children:[E.jsx("span",{className:"px-2 py-1 bg-slate-800 rounded",children:".PDF"}),E.jsx("span",{className:"px-2 py-1 bg-slate-800 rounded",children:".CSV"}),E.jsx("span",{className:"px-2 py-1 bg-slate-800 rounded",children:".JSON"})]})]}),E.jsx("input",{ref:g,type:"file",accept:".pdf,.csv,.json",onChange:y,className:"hidden"}),E.jsxs("div",{className:"mt-4 flex items-center justify-between text-[9px] text-slate-600 font-mono",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(ey,{className:"w-3 h-3"}),E.jsx("span",{children:"AES-256 ENCRYPTED CHANNEL"})]}),E.jsx("span",{children:"MAX SIZE: 50MB"})]})]})]})]})},Eve=({bids:t,selectedDeal:e,onSell:n,totalVolume:r})=>{var o,l;const[i,s]=z.useState(null),a=async c=>{s(c.id),await new Promise(h=>setTimeout(h,800)),n(c),s(null)};return E.jsxs("div",{className:"flex flex-col h-full bg-slate-900 border-l border-slate-700",children:[E.jsxs("div",{className:"px-2 py-1 bg-slate-800 border-b border-slate-700 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Lde,{className:"w-4 h-4 text-emerald-400"}),E.jsx("span",{className:"text-xs font-bold text-white tracking-wider",children:"ARBITRAGE FLOOR"})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(c3,{className:"w-2 h-2 fill-emerald-500 text-emerald-500 animate-pulse"}),E.jsx("span",{className:"text-[9px] text-emerald-400 font-mono",children:"LIVE"})]})]}),E.jsxs("div",{className:"grid grid-cols-3 gap-px bg-slate-700 border-b border-slate-700",children:[E.jsxs("div",{className:"bg-slate-800 p-2 text-center",children:[E.jsx("div",{className:"text-[9px] text-slate-500",children:"VOLUME"}),E.jsx("div",{className:"text-sm font-bold text-emerald-400 font-mono",children:Jx(r)})]}),E.jsxs("div",{className:"bg-slate-800 p-2 text-center",children:[E.jsx("div",{className:"text-[9px] text-slate-500",children:"BIDS"}),E.jsx("div",{className:"text-sm font-bold text-white font-mono",children:t.length})]}),E.jsxs("div",{className:"bg-slate-800 p-2 text-center",children:[E.jsx("div",{className:"text-[9px] text-slate-500",children:"SPREAD"}),E.jsx("div",{className:"text-sm font-bold text-cyan-400 font-mono",children:t.length>0?`${Math.round(((l=(o=t[0])==null?void 0:o.metadata)==null?void 0:l.spreadPercentage)||0)}%`:"--"})]})]}),E.jsx("div",{className:"flex-1 overflow-auto",children:e?t.length===0?E.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[E.jsx(gg,{className:"w-6 h-6 text-cyan-400 animate-spin mb-2"}),E.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:"GENERATING BIDS..."})]}):E.jsx("div",{className:"p-2 space-y-1",children:t.map((c,h)=>E.jsxs("div",{className:`p-2 rounded border ${h===0?"bg-emerald-900/20 border-emerald-700/50":"bg-slate-800/50 border-slate-700/50"} hover:bg-slate-800`,children:[E.jsxs("div",{className:"flex items-center justify-between mb-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`text-[8px] px-1 py-0.5 rounded ${cve(c.firmTier)} bg-slate-800`,children:uve(c.firmTier)}),E.jsx("span",{className:"text-white text-[11px] font-medium",children:c.firmName})]}),h===0&&E.jsx("span",{className:"text-[7px] px-1 py-0.5 bg-emerald-500 text-white rounded font-bold",children:"TOP BID"})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-emerald-400 font-mono font-bold text-sm",children:Jx(c.bidAmount)}),E.jsxs("div",{className:"text-[8px] text-slate-500",children:[c.bidPercentage,"%  ",c.metadata.estimatedCloseTime,"d close"]})]}),E.jsx("button",{onClick:()=>a(c),disabled:i!==null,className:`px-3 py-1.5 text-[10px] font-bold rounded transition-all ${i===c.id?"bg-amber-600 text-white cursor-wait":"bg-red-600 hover:bg-red-500 text-white hover:scale-105"}`,children:i===c.id?"SELLING...":"SELL"})]})]},c.id))}):E.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[E.jsx(u3,{className:"w-8 h-8 text-slate-600 mb-2"}),E.jsx("div",{className:"text-[10px] text-slate-500 font-mono",children:"MARKET STANDBY"}),E.jsx("div",{className:"text-[9px] text-slate-600 font-mono mt-1",children:"SELECT INVENTORY TO GENERATE BIDS"})]})}),e&&t.length>0&&E.jsxs("div",{className:"bg-slate-800 border-t border-slate-700 px-2 py-1.5 text-center",children:[E.jsxs("div",{className:"text-[9px] text-slate-400 font-mono",children:["SELLING: ",E.jsx("span",{className:"text-white",children:e.company})]}),E.jsxs("div",{className:"text-[8px] text-slate-500 font-mono",children:["VALUE: ",bc(e.estValue)]})]})]})},Tve=({vaultDeals:t,selectedId:e,onSelectLead:n})=>{const r=[{id:"L-48291",company:"NexGen Tech",ein:"82-4729103",sector:"SaaS",eligibility:94,estValue:234500,stage:4,priority:"critical",timestamp:new Date},{id:"L-48290",company:"Quantum Labs",ein:"91-2847291",sector:"Biotech",eligibility:87,estValue:189e3,stage:3,priority:"high",timestamp:new Date}],s=[...t.map((o,l)=>({id:`V-${o.id||l}`,company:o.company,ein:"-- VAULT --",sector:"DB",eligibility:95,estValue:o.value,stage:o.status==="VERIFIED"?5:4,priority:o.value>2e5?"critical":o.value>1e5?"high":"medium",timestamp:new Date(o.created_at||Date.now()),dbId:o.id})),...r],a=o=>o==="critical"?"bg-red-500/20 text-red-400":o==="high"?"bg-amber-500/20 text-amber-400":"bg-cyan-500/20 text-cyan-400";return E.jsxs("div",{className:"bg-slate-900 border-t border-slate-700",children:[E.jsxs("div",{className:"px-3 py-1 bg-slate-800 border-b border-slate-700 flex items-center gap-2",children:[E.jsx(Kde,{className:"w-4 h-4 text-amber-400"}),E.jsx("span",{className:"text-xs font-bold text-white tracking-wider",children:"ACTIVE PIPELINE"}),E.jsx("span",{className:"text-[9px] px-2 py-0.5 bg-amber-900/50 text-amber-400 rounded font-mono",children:s.length}),t.length>0&&E.jsxs("span",{className:"text-[8px] px-1 py-0.5 bg-emerald-900/50 text-emerald-400 rounded font-mono ml-1",children:["VAULT: ",t.length]}),E.jsx("span",{className:"text-[8px] text-slate-500 ml-auto",children:"CLICK TO SELECT"})]}),E.jsx("div",{className:"overflow-x-auto max-h-[140px]",children:E.jsxs("table",{className:"w-full text-[10px]",children:[E.jsx("thead",{className:"bg-slate-800 sticky top-0",children:E.jsxs("tr",{className:"border-b border-slate-700",children:[E.jsx("th",{className:"px-3 py-1.5 text-left text-slate-400 font-mono",children:"ID"}),E.jsx("th",{className:"px-3 py-1.5 text-left text-slate-400 font-mono",children:"COMPANY"}),E.jsx("th",{className:"px-3 py-1.5 text-center text-slate-400 font-mono",children:"ELIG"}),E.jsx("th",{className:"px-3 py-1.5 text-right text-slate-400 font-mono",children:"VALUE"}),E.jsx("th",{className:"px-3 py-1.5 text-center text-slate-400 font-mono",children:"STAGE"}),E.jsx("th",{className:"px-3 py-1.5 text-center text-slate-400 font-mono",children:"PRIO"})]})}),E.jsx("tbody",{children:s.map(o=>E.jsxs("tr",{onClick:()=>n(o),className:`border-b border-slate-800 cursor-pointer transition-colors ${e===o.id?"bg-cyan-900/30 ring-1 ring-cyan-500/50 ring-inset":"hover:bg-slate-800/50"}`,children:[E.jsx("td",{className:"px-3 py-1.5 text-cyan-400 font-mono font-bold",children:o.id}),E.jsx("td",{className:"px-3 py-1.5 text-white",children:o.company}),E.jsx("td",{className:"px-3 py-1.5 text-center",children:E.jsxs("div",{className:"flex items-center justify-center gap-1",children:[E.jsx("div",{className:"w-10 h-1.5 bg-slate-700 rounded-full overflow-hidden",children:E.jsx("div",{className:`h-full rounded-full ${o.eligibility>=90?"bg-emerald-500":"bg-cyan-500"}`,style:{width:`${o.eligibility}%`}})}),E.jsxs("span",{className:"text-white font-mono",children:[o.eligibility,"%"]})]})}),E.jsx("td",{className:"px-3 py-1.5 text-right text-emerald-400 font-mono font-bold",children:bc(o.estValue)}),E.jsx("td",{className:"px-3 py-1.5 text-center",children:E.jsx("div",{className:"flex items-center justify-center gap-0.5",children:[1,2,3,4,5].map(l=>E.jsx("div",{className:`w-2.5 h-2.5 rounded-sm ${l<=o.stage?"bg-emerald-500":"bg-slate-700"}`},l))})}),E.jsx("td",{className:"px-3 py-1.5 text-center",children:E.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded ${a(o.priority)}`,children:o.priority.toUpperCase()})})]},o.id))})]})})]})};function Cve(){const[t,e]=z.useState(null),[n,r]=z.useState(!1),[i,s]=z.useState([]),[a,o]=z.useState(null),[l,c]=z.useState(null),[h,d]=z.useState([]),[f,p]=z.useState(847e3),[g,m]=z.useState(null);z.useEffect(()=>{(async()=>{const{data:_,error:x}=await wd.from("deals").select("*").order("created_at",{ascending:!1});x?(console.error("[VAULT] Supabase error:",x.message),o(`VAULT ERROR: ${x.message}`)):_&&(s(_),console.log(`[VAULT] Loaded ${_.length} deals from Supabase`))})()},[]);const b=v=>{console.log(`[MARKET] Selected lead: ${v.company} (${v.id})`),c(v),d([]),setTimeout(()=>{const _=ove(v.estValue,{dealId:v.id,costBasis:v.estValue*.008});d(_),console.log(`[MARKET] Generated ${_.length} bids for ${v.company}`)},600)},y=async v=>{if(!l)return;console.log(`[SALE] Executing sale to ${v.firmName} for $${v.bidAmount}`);const _=l.dbId;if(_){const x=await lve(_,v.firmName,v.bidAmount);x.success?(console.log(`[SALE] Transaction ${x.transactionId} complete!`),s(S=>S.filter(T=>T.id!==_))):console.error(`[SALE] Failed: ${x.error}`)}p(x=>x+v.bidAmount),m(`SOLD TO ${v.firmName.toUpperCase()} FOR ${Jx(v.bidAmount)}`),setTimeout(()=>m(null),4e3),c(null),d([]),r(!0),setTimeout(()=>r(!1),1500)},w=async v=>{e(v),r(!0),setTimeout(()=>r(!1),1500);const{error:_}=await wd.from("deals").insert([{company:`SCAN-${v.analysisId.slice(-6)}`,value:v.financialSummary.totalEstimatedValue,status:v.isRdEligible?"RD_ELIGIBLE":"VERIFIED",packet_id:v.analysisId,risk_score:v.overallRiskLevel==="low"?25:v.overallRiskLevel==="medium"?50:75,anomaly_count:v.riskIndicators.length}]);if(_)console.error("[VAULT] INSERT failed:",_.message),o(`INSERT FAILED: ${_.message}`);else{console.log("[VAULT] Deal saved to Supabase");const{data:x}=await wd.from("deals").select("*").order("created_at",{ascending:!1});x&&s(x)}};return E.jsxs("div",{className:`h-screen w-screen bg-slate-950 flex flex-col overflow-hidden transition-all duration-300 ${n?"ring-4 ring-emerald-500/30 ring-inset":""}`,children:[E.jsx(_ve,{}),g&&E.jsxs("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-50 px-6 py-3 bg-emerald-600 text-white text-sm font-bold rounded-lg shadow-2xl shadow-emerald-500/30 animate-pulse",children:[" ",g]}),E.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[E.jsx("div",{className:"w-[340px] flex-shrink-0",children:E.jsx(Sve,{result:t})}),E.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx(Tve,{vaultDeals:i,selectedId:(l==null?void 0:l.id)||null,onSelectLead:b})}),E.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-px bg-slate-700 overflow-hidden",children:[E.jsxs("div",{className:"bg-slate-900 p-2",children:[E.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[E.jsx(S_,{className:"w-3 h-3 text-emerald-400"}),E.jsx("span",{className:"text-[10px] font-bold text-white",children:"VELOCITY"})]}),E.jsx("div",{className:"h-32",children:E.jsx(RZ,{width:"100%",height:"100%",children:E.jsxs(Mde,{data:Array.from({length:24},(v,_)=>({h:_,v:80+Math.random()*60})),children:[E.jsx("defs",{children:E.jsxs("linearGradient",{id:"vg",x1:"0",y1:"0",x2:"0",y2:"1",children:[E.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),E.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),E.jsx(w_,{dataKey:"h",tick:{fontSize:8},stroke:"#475569"}),E.jsx(x_,{tick:{fontSize:8},stroke:"#475569"}),E.jsx(nc,{type:"monotone",dataKey:"v",stroke:"#10b981",fill:"url(#vg)",strokeWidth:2})]})})})]}),E.jsxs("div",{className:"bg-slate-900 p-2",children:[E.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[E.jsx(nfe,{className:"w-3 h-3 text-amber-400"}),E.jsx("span",{className:"text-[10px] font-bold text-white",children:"CONVERSION"})]}),E.jsx("div",{className:"h-32 flex flex-col justify-center gap-1",children:[{s:"INGEST",v:1247,p:100},{s:"QUALIFY",v:892,p:71},{s:"VERIFY",v:634,p:51},{s:"SOLD",v:342,p:27}].map(v=>E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-[8px] text-slate-500 w-10 font-mono",children:v.s}),E.jsx("div",{className:"flex-1 h-2.5 bg-slate-800 rounded overflow-hidden",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-emerald-500 rounded",style:{width:`${v.p}%`}})}),E.jsx("span",{className:"text-[9px] text-white font-mono w-8 text-right",children:v.v})]},v.s))})]})]}),E.jsx("div",{className:"h-[180px] flex-shrink-0 border-t border-slate-700",children:E.jsx(Ave,{onAnalysisComplete:w})})]}),E.jsx("div",{className:"w-[280px] flex-shrink-0",children:E.jsx(Eve,{bids:h,selectedDeal:l,onSell:y,totalVolume:f})})]}),E.jsxs("footer",{className:"bg-slate-900 border-t border-slate-700 px-3 py-1 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4 text-[9px] font-mono",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${t?"bg-emerald-400":"bg-emerald-500"} animate-pulse`}),E.jsx("span",{className:"text-slate-400",children:t?"SCAN ACTIVE":"SYSTEMS NOMINAL"})]}),t&&E.jsxs("span",{className:"text-emerald-400",children:["ID: ",t.analysisId]}),(t==null?void 0:t.isRdEligible)&&E.jsx("span",{className:"text-cyan-400",children:"R&D: ELIGIBLE"}),a&&E.jsx("span",{className:"text-red-400",children:a}),E.jsxs("span",{className:"text-cyan-400",children:["VAULT: ",i.length," DEALS"]}),E.jsxs("span",{className:"text-emerald-400",children:["VOLUME: ",Jx(f)]}),E.jsxs("span",{className:"text-slate-500",children:["UPTIME: ",E.jsx("span",{className:"text-white",children:"99.97%"})]})]}),E.jsx("div",{className:"text-[9px] font-mono text-slate-500",children:" 2026 GRANTFLOW"})]})]})}const Pve=({onAuthenticate:t,onCancel:e})=>{const[n,r]=z.useState(""),[i,s]=z.useState(!1),[a,o]=z.useState(!1),l=L.useRef(null);L.useEffect(()=>{var h;(h=l.current)==null||h.focus()},[]);const c=h=>{h.preventDefault(),n==="PROFIT_2026"?t():(s(!0),o(!0),r(""),setTimeout(()=>o(!1),500),setTimeout(()=>s(!1),3e3))};return E.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[E.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),E.jsxs("div",{className:`relative w-[420px] bg-gradient-to-b from-slate-900 to-slate-950 border border-red-900/50 rounded-lg shadow-2xl shadow-red-900/20 overflow-hidden ${a?"animate-pulse":""}`,children:[E.jsx("div",{className:"h-1 w-full bg-gradient-to-r from-red-600 via-red-500 to-red-600"}),E.jsx("div",{className:"bg-red-950/30 border-b border-red-900/30 px-6 py-4",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-900/50 border border-red-700/50 flex items-center justify-center",children:E.jsx(ey,{className:"w-5 h-5 text-red-400"})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-red-400 font-mono text-sm tracking-widest uppercase",children:"Classified Access"}),E.jsx("p",{className:"text-slate-500 text-xs font-mono",children:"TERMINAL SECURITY PROTOCOL"})]})]})}),E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"mb-6 text-center",children:[E.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),E.jsx("span",{className:"text-red-400 font-mono text-xs tracking-wider",children:"RESTRICTED ZONE"}),E.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Enter authorization code to access Terminal"})]}),E.jsxs("form",{onSubmit:c,children:[E.jsxs("div",{className:"relative mb-4",children:[E.jsx("input",{ref:l,type:"password",value:n,onChange:h=>r(h.target.value.toUpperCase()),placeholder:"",className:`w-full bg-slate-800/50 border ${i?"border-red-500 ring-2 ring-red-500/30":"border-slate-700"} rounded-lg px-4 py-3 text-white font-mono text-center tracking-[0.5em] text-lg placeholder:text-slate-600 placeholder:tracking-[0.3em] focus:outline-none focus:border-red-500/50 focus:ring-2 focus:ring-red-500/20 transition-all ${a?"animate-[shake_0.5s_ease-in-out]":""}`,autoComplete:"off"}),i&&E.jsx("div",{className:"absolute -bottom-5 left-0 right-0 text-center",children:E.jsx("span",{className:"text-red-500 text-xs font-mono animate-pulse",children:" ACCESS DENIED"})})]}),E.jsxs("div",{className:"flex gap-3 mt-8",children:[E.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-400 font-mono text-sm rounded-lg transition-colors",children:"CANCEL"}),E.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-red-700 to-red-600 hover:from-red-600 hover:to-red-500 text-white font-mono text-sm font-bold rounded-lg shadow-lg shadow-red-900/30 transition-all flex items-center justify-center gap-2",children:[E.jsx(p3,{className:"w-4 h-4"}),"AUTHENTICATE"]})]})]})]}),E.jsxs("div",{className:"bg-slate-900/50 border-t border-slate-800 px-6 py-3 flex items-center justify-between",children:[E.jsx("span",{className:"text-slate-600 text-[10px] font-mono",children:"GRANTFLOW SECURITY v2.0"}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),E.jsx("span",{className:"text-slate-600 text-[10px] font-mono",children:"ARMED"})]})]})]})]})};function Ove(){const[t,e]=z.useState("PUBLIC"),[n,r]=z.useState(!1),[i,s]=z.useState(!1),a=()=>{t==="TERMINAL"?e("PUBLIC"):n?e("TERMINAL"):s(!0)},o=()=>{r(!0),s(!1),e("TERMINAL")},l=()=>{s(!1)};return E.jsxs(E.Fragment,{children:[t==="TERMINAL"?E.jsx(Cve,{},"terminal"):E.jsx(xve,{},"public"),i&&E.jsx(Pve,{onAuthenticate:o,onCancel:l}),E.jsx("button",{onClick:a,className:`fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 text-white text-sm font-bold rounded-lg shadow-lg transition-all hover:scale-105 ${t==="TERMINAL"?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-purple-500/30":"bg-gradient-to-r from-red-700 to-red-600 hover:from-red-600 hover:to-red-500 shadow-red-500/30"}`,children:t==="TERMINAL"?E.jsxs(E.Fragment,{children:[E.jsx(Vde,{className:"w-4 h-4"}),"VIEW PUBLIC"]}):E.jsxs(E.Fragment,{children:[E.jsx(ey,{className:"w-4 h-4"}),"ACCESS TERMINAL"]})})]})}sA.createRoot(document.getElementById("root")).render(E.jsx(L.StrictMode,{children:E.jsx(Ove,{})}));
